(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+x/n":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);e.exports=t.default},"4TD3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);var o=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")};t.default=o,e.exports=t.default},AitN:function(e,t,r){(function(e,n,i){function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function d(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=f(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function f(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=55)}([function(t,r,n){!function(e,t){for(var r in t)e[r]=t[r]}(r,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=23)}([function(e,t){e.exports=n(28)},function(e,t){e.exports=n(6)},function(e,t){e.exports=n(17)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.paddingResolves=[]}return Object.defineProperty(e.prototype,"hasValue",{get:function(){return!this.paddingResolves},enumerable:!0,configurable:!0}),e.prototype.getValueRightNow=function(){return this.value},e.prototype.getValue=function(){var e=this;return this.hasValue?this.error?Promise.reject(this.error):Promise.resolve(this.value):new Promise((function(t,r){return e.paddingResolves.push({resolve:t,reject:r})}))},e.prototype.catchError=function(e){if(!this.hasValue){for(var t=0,r=this.paddingResolves;t<r.length;t++)(0,r[t].reject)(e);this.value=void 0,this.error=e,this.paddingResolves=null}return this},e.prototype.setValue=function(e){if(this.hasValue)throw new Error("did set value");this.value=e,this.error=void 0;for(var t=0,r=this.paddingResolves;t<r.length;t++)(0,r[t].resolve)(e);return this.paddingResolves=null,this},e}();t.BlockValue=n},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(41);n(r(19)),n(r(5)),t.playerBufferFactory=new i.PlayerBufferFactory},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(1),a=r(18),s=r(19),c=r(20);!function(e){e.Realtime="realtime",e.Reconstruction="reconstruction"}(t.PlayerBufferMode||(t.PlayerBufferMode={}));var u=function(){function e(e){var t=this;this.framesQueue=new c.FramesQueue,this.isPlaying=!1,this._didCompletePushFrames=!1,this.didCompletePlaying=!1,this.handleTickEvent=function(){try{t.onTick()}finally{t.shouldTickNextFrame()&&t.tickLimiter.invoke(),t.phaseNode.touch()}},this.currentPhase=function(){return t.didCompletePlaying?s.PlayerPhase.Ended:t._didCompletePushFrames||t.framesQueue.hasAccessibleFrames?t.isPlaying?s.PlayerPhase.Playing:s.PlayerPhase.Pausing:t.isPlaying?s.PlayerPhase.Waiting:s.PlayerPhase.PausingAndWaiting},this.onPhaseChanged=function(e,r){r===s.PlayerPhase.Playing&&e!==s.PlayerPhase.Playing?t.onPlayingStop():r!==s.PlayerPhase.Playing&&e===s.PlayerPhase.Playing&&t.onPlayingContinue(),t.callbacks.onPhaseChanged&&t.callbacks.onPhaseChanged(e)},this.logger=e.logger,this.mode=e.mode,this.callbacks=Object.freeze(n({},e.callbacks));var r=e.enableAnimationFrame,u=e.frameInterval,l=void 0===u?17:u,p=e.remainLowTimeInterval,h=void 0===p?12e3:p;if(r){var d=new a.AnimationFrameTicker(this.handleTickEvent);this.tickLimiter=new o.InvokeFrequencyLimiter(l,(function(){return d.invoke()}))}else this.tickLimiter=new o.InvokeFrequencyLimiter(l,this.handleTickEvent);this.remainLowTimeInterval=h,this.phaseNode=new i.PhaseNode({getCurrentPhase:this.currentPhase,onPhaseChanged:this.onPhaseChanged})}return Object.defineProperty(e.prototype,"didCompletePushFrames",{get:function(){return this._didCompletePushFrames},enumerable:!0,configurable:!0}),e.prototype.completePlaying=function(){this.didCompletePlaying=!0,this.phaseNode.touch(),this.tickLimiter.cancel()},Object.defineProperty(e.prototype,"frameInterval",{get:function(){return this.tickLimiter.limitDuration},set:function(e){this.tickLimiter.limitDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),e.prototype.shouldTickNextFrame=function(){return!(this.didCompletePlaying||!this.willTickEveryFrames&&(!this.isPlaying||!this.framesQueue.hasFrames))},e.prototype.pushFrames=function(e){this.framesQueue.push(e),e.length>0&&this.isPlaying&&this.tickLimiter.invoke(),this.phaseNode.touch()},e.prototype.play=function(){this.isPlaying||this.phaseNode.phase===s.PlayerPhase.Ended||(this.isPlaying=!0,this.framesQueue.hasAccessibleFrames&&this.tickLimiter.invoke(),this.phaseNode.touch())},e.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,this.tickLimiter.cancel(),this.phaseNode.touch())},e.prototype.completePushFrames=function(){this._didCompletePushFrames=!0,this.framesQueue.hasAccessibleFrames||(this.didCompletePlaying=!0,this.tickLimiter.cancel()),this.phaseNode.touch()},e}();t.AbstractPlayerBuffer=u},function(e,t){e.exports=n(60)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(15)),n(r(36)),n(r(16)),n(r(37)),n(r(38))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.getLibraryWithClass=function(e){var t=n.getLibrary(e);if(!t)throw new Error("can't find library from "+e.name+". it's not root class");return t}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(17)),n(r(21));var i=r(7);t.connectWebSocketSession=i.connectWebSocketSession,t.WebSocketConnection=i.WebSocketConnection},function(e,t){e.exports=n(61)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29);t.FetcherFactory=n.FetcherFactory;var i=r(13);t.FetcherError=i.FetcherError},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(13),s=r(3),c=function(){function e(e,t,r,n){var i=this;this.keyFetcherValue=new s.BlockValue,this.akkoVersionValue=t,e.getValue().then((function(e){return i.keyFetcherValue.setValue(e.getFetcher(r).fetch(n))})).catch((function(e){return i.keyFetcherValue.catchError(e)}))}return Object.defineProperty(e.prototype,"akkoVersion",{get:function(){return this.akkoVersionValue.getValue()},enumerable:!0,configurable:!0}),e.prototype.fetchJSON=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return[4,this.keyFetcherValue.getValue()];case 1:return[4,i.sent()(e,t)];case 2:return r=i.sent(),this.isSuccessStatus(r,t)?[4,r.text()]:[3,4];case 3:return""===(n=i.sent())?[2,void 0]:[2,JSON.parse(n)];case 4:return[4,this.createError(r)];case 5:throw i.sent();case 6:return[2]}}))}))},e.prototype.fetchBuffer=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a;return i(this,(function(i){switch(i.label){case 0:return[4,this.keyFetcherValue.getValue()];case 1:return[4,i.sent()(e,t)];case 2:return 404!==(r=i.sent()).status?[3,3]:[2,null];case 3:return this.isSuccessStatus(r,t)?r.arrayBuffer?(n=o.wrapBuffer,[4,r.arrayBuffer()]):[3,5]:[3,8];case 4:return[2,n.apply(void 0,[i.sent()])];case 5:return a=o.wrapBuffer,[4,r.buffer()];case 6:return[2,a.apply(void 0,[i.sent()])];case 7:return[3,10];case 8:return[4,this.createError(r)];case 9:throw i.sent();case 10:return[2]}}))}))},e.prototype.createError=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,s,c,u,l,p;return i(this,(function(i){switch(i.label){case 0:if((t=e.headers.get("content-type"))&&!/application\/json/i.test(t))return[3,5];r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.json()];case 2:return r=i.sent(),[3,4];case 3:return n=i.sent(),[2,new Error("response with status "+e.status+" and parse error JSON failed: "+n.message)];case 4:return"object"!=A(r.error)||null===r.error?[2,new Error("response with status "+e.status+" without error object")]:(o=r.error,s=o.code,c=o.title,u=o.messages,[2,new a.FetcherError({statusCode:e.status,errorCode:s,title:c,messages:u})]);case 5:return l=Error.bind,p="response with status "+e.status+" with text ",[4,e.text()];case 6:return[2,new(l.apply(Error,[void 0,p+i.sent()]))]}}))}))},e.prototype.isSuccessStatus=function(e,t){var r=e.status;switch(t&&t.method||"get"){case"get":return 200===r||206===r;case"delete":return 204===r;default:return 201===r}},e}();t.KeyFetcherImplement=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(r){var n=e.call(this,t.createMessage(r))||this;return n.name=r.title,n.title=r.title,n.messages=r.messages?Object.freeze(o(r.messages)):t.emptyArray,n.statusCode=r.statusCode,n.errorCode=r.errorCode,n}return i(t,e),t.createMessage=function(e){var t=e.title;return e.messages&&e.messages.length>0&&(t+=": "+e.messages.join("; ")),t},t.emptyArray=Object.freeze([]),t}(Error);t.FetcherError=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=function(){function e(e,t){this.configmap=e,this.onIngoreFetchError=t,this.fetchers={},this.supportRegions=this.collectRegions(e)}return e.prototype.collectRegions=function(e){var t={};for(var r in e)for(var n in e[r].hosts)t[n]=!0;return t},e.prototype.getFetcher=function(e){var t=this.fetchers[e];if(!t){if(!this.supportRegions[e])throw new Error("invalid region "+JSON.stringify(e));t=this.fetchers[e]=new n.AkkoFetcher({fetcher:fetch.bind(window),region:e,configmap:this.configmap,onIngoreFetchError:this.onIngoreFetchError,retryCount:2,retryLoopsCount:0})}return t},e}();t.AkkoFetchersHub=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(32),s=r(16),c=r(35),u=Object.freeze([1e3,1e3,1e3,3e3,3e3,5e3,5e3]),l=function(){function e(e,t,r){var n=this;this._didDispose=!1,this.connectionTask=null,this.operator=null,this.connectionNode=null,this.onNetStateUpdate=function(e){n._didDispose||(e?n.connectionTask&&n.startConnectionTask():n.operator&&(n.operator.cancel(),n.operator=null))},this.logger=e,this.fetcher=t,this.netStatePaddingNode=r&&new a.NetStatePaddingNode(r,this.onNetStateUpdate)}return e.prototype.dispose=function(){this._didDispose||(this._didDispose=!0,this.operator&&this.operator.cancel(),this.connectionTask=null,this.operator=null,this.netStatePaddingNode&&this.netStatePaddingNode.dispose())},e.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,r,i=this;return o(this,(function(o){switch(o.label){case 0:if(this._didDispose)throw new Error("did dispose");if(this.connectionTask)throw new Error("is connecting");return this.connectionNode&&(this.connectionNode.filter.switchOn=!1,this.connectionNode=null),(t=this.netStatePaddingNode)?[4,this.netStatePaddingNode.makeSureOnline()]:[3,2];case 1:t=!o.sent(),o.label=2;case 2:if(t)throw new Error("offline");r=new Promise((function(t,r){var o=new c.CallbacksFilter;i.connectionTask={resolve:t,reject:r,filter:o,params:n(n({},e),{callbacks:o.wrapCallbacks(e.callbacks)})}})),this.startConnectionTask(),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,r];case 4:return[2,o.sent()];case 5:return this.connectionTask=null,[7];case 6:return[2]}}))}))},e.prototype.startConnectionTask=function(){var e=this,t=new p(this.logger,this.fetcher),r=this.connectionTask,n=r.params,i=r.filter,o=r.resolve,a=r.reject;this.operator=t,this.operator.connect(n).then((function(r){r&&t===e.operator&&(o(r),e.operator=null,e.connectionNode={filter:i,connection:r.connection})})).catch((function(r){t===e.operator&&(a(r),e.operator=null)}))},e}();t.ConnectionBuilder=l;var p=function(){function e(e,t){this.logger=e,this.fetcher=t,this.connection=null,this.isCancel=!1}return e.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,r,n,i,a,c,l;return o(this,(function(o){switch(o.label){case 0:t="",r=0,o.label=1;case 1:return r<u.length+1?[4,this.fetcher.origin("wss","realtime")]:[3,9];case 2:return n=o.sent(),i=Date.now(),this.connection=new s.WebSocketConnection(n,e),a=Date.now(),[4,this.connection.connect()];case 3:return c=o.sent(),this.isCancel?(this.fetcher.reportSuccess("realtime",Date.now()-i),c&&this.connection?[4,this.connection.disconnectWithError(new Error("cancel connect"))]:[3,5]):[3,6];case 4:o.sent(),o.label=5;case 5:return[2,null];case 6:return"object"==A(c)?(this.fetcher.reportSuccess("realtime",Date.now()-i),[2,{connection:this.connection,snapshot:c.snapshot,actionFrames:c.actionFrames,retryCount:r}]):(this.fetcher.reportFail("realtime",Date.now()-i),t=c,this.connection=null,void 0===(l=u[r])?[3,8]:a+l-Date.now()>0?[4,(p=l,new Promise((function(e){return setTimeout(e,p)})))]:[3,8]);case 7:if(o.sent(),this.isCancel)return[2,null];o.label=8;case 8:return++r,[3,1];case 9:throw new Error("connect fail after multiple retries: "+t)}var p}))}))},e.prototype.cancel=function(){var e=this;this.connection&&(this.connection.disconnectWithError(new Error("cancel connect")).catch((function(t){return e.logger.error(t)})),this.connection=null),this.isCancel=!0},e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(0),c=r(33),u=r(34).getWebSocket(),l=function(){function e(e,t){var r=this,i=t.logger,o=t.roomToken,l=t.webSocketQuery,p=t.callbacks;this.disconnectedCallbacks=[],this.actionFramesInterrupter=[],this.snapshotFrameInterrupter=null,this._connectingDuration=-1,this.onReceiveSnapshotFrame=function(e){r.snapshotFrameInterrupter=e},this.onReceiveActionFrame=function(e){r.actionFramesInterrupter?r.actionFramesInterrupter.push(e):r.callbacks.onReceivedActionFrame(e)},this.onReceiveScopeSlices=function(e){r.callbacks.onReceivedScopeSlices(s.deserializeScopeSlices(e))},this.onHangUp=function(){r.socket.disconnect(),r.callbacks.onKickWithReason(s.KickReason.GatewayAdjust)},this.onDisconnect=function(e){var t=e.reason,n=e.message,i=r.isConnected();r._sessionBuild=void 0;var o=t===c.AkkoSocketDisconnectReason.WebSocketError||t===c.AkkoSocketDisconnectReason.CommunicationError;if(r.disconnectedCallback(n,o),i)switch(t){case c.AkkoSocketDisconnectReason.WebSocketError:case c.AkkoSocketDisconnectReason.CommunicationError:r.callbacks.onDisconnectedWithSocketError(new Error(n));break;case c.AkkoSocketDisconnectReason.Normal:r.callbacks.onKickWithReason(n);break;case c.AkkoSocketDisconnectReason.RemoteError:r.callbacks.onDisconnectedByServer(new Error(n))}};var h=e+"?"+function(e,t){var r={room:t.uuid,token:e,combinable:!0,sessionToken:t.sessionToken,akkoVersion:t.akkoVersion,clientVersion:t.clientVersion,markWritable:t.markWritable,access:t.access};for(var n in r)void 0===r[n]&&delete r[n];return a.stringify(r)}(o,l),d=new u(h);this.logger=i,this.uuid=l.uuid,this.libraryDescriptionSerialization=new s.LibraryDescriptionSerialization,this.socket=s.socketFactory.createSocket(d,i,{onDisconnect:this.onDisconnect}),this.socket.on("snapshot",this.onReceiveSnapshotFrame),this.socket.on("action",this.onReceiveActionFrame),this.socket.on("allocate-scope",this.onReceiveScopeSlices),this.socket.on("hang-up",this.onHangUp),this.callbacks=Object.freeze(n({},p))}return Object.defineProperty(e.prototype,"connectingDuration",{get:function(){return this._connectingDuration},enumerable:!0,configurable:!0}),e.prototype.setAccessUpdaterSerialization=function(e){this.accessUpdaterSerialization=e},e.prototype.bindPingPongNode=function(e){e.bindSocket(this.socket)},Object.defineProperty(e.prototype,"sessionBuild",{get:function(){if(!this._sessionBuild)throw new Error("not connected");return this._sessionBuild},enumerable:!0,configurable:!0}),e.prototype.sendActionFrame=function(e){this.socket.emit("action",e)},e.prototype.isConnected=function(){return!!this._sessionBuild},e.prototype.connect=function(){var e=this;return new Promise((function(t,r){var n=function(){var t=e.disconnectedCallbacks.indexOf(i);-1!==t&&e.disconnectedCallbacks.splice(t,1),e.socket.off("session-build",o)},i=function(e,i){n(),i?t(e):r(new Error("connect failed: "+e))};e.disconnectedCallbacks.push(i);var o=function(r){n();var i=e.snapshotFrameInterrupter,o=e.actionFramesInterrupter;e._sessionBuild=s.deserializeSessionBuild(r),e.snapshotFrameInterrupter=null,e.actionFramesInterrupter=null,t({snapshot:i,actionFrames:o})};e.socket.on("session-build",o),e.socket.on("library-description",(function t(r){var n=e.libraryDescriptionSerialization.deserialize(r);e.callbacks.onReceivedLibraryDescription(n),e.socket.off("library-description",t)})),e.socket.waitToConnected().then((function(t){var r=t.duration;return e._connectingDuration=r})).catch((function(t){e.logger.warn(t.message),i(t.message,!0)}))}))},e.prototype.disconnect=function(){return this.disconnectedCallback("disconnect",!1),this.socket.disconnect()},e.prototype.disconnectWithError=function(e){return this.disconnectedCallback(e.message,!1),this.socket.disconnectWithErrorDescription({message:e.message})},e.prototype.updateToWritable=function(e,t){return i(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return r={kind:s.AccessUpdaterKind.Writable,userPayload:e,connectedPayload:t},this.socket.emit("update-access",this.accessUpdaterSerialization.serialize(r)),[4,this.interruptEvent("allocate-user",[s.SocketErrorCode.WritableAccessForbidden,s.SocketErrorCode.StuffedOfWritableUsers,s.SocketErrorCode.WrongWritablePhase])];case 1:if(void 0!==(n=i.sent()).errorCode)switch(n.errorCode){case s.SocketErrorCode.WritableAccessForbidden:throw new Error("can't update to writable. you don't have permission");case s.SocketErrorCode.StuffedOfWritableUsers:throw new Error("room is stuffed of writable users");case s.SocketErrorCode.WrongWritablePhase:throw new Error("it's wrong writable phase")}return void 0!==n.target?[2,s.deserializeAllocatedUser(n.target)]:[2,null]}}))}))},e.prototype.updateToReadonly=function(e){return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return t={kind:s.AccessUpdaterKind.Readonly,payload:e},this.socket.emit("update-access",this.accessUpdaterSerialization.serialize(t)),[4,this.interruptEvent("release-user",[s.SocketErrorCode.NoUserToRelease,s.SocketErrorCode.WrongWritablePhase])];case 1:if(void 0!==(r=n.sent()).errorCode)switch(r.errorCode){case s.SocketErrorCode.NoUserToRelease:throw new Error("room don't have user to release");case s.SocketErrorCode.WrongWritablePhase:throw new Error("it's wrong writable phase")}return[2,void 0!==r.target]}}))}))},e.prototype.disconnectedCallback=function(e,t){for(var r=0,n=this.disconnectedCallbacks.splice(0);r<n.length;r++)(0,n[r])(e,t)},e.prototype.interruptEvent=function(e,t){var r=this;return new Promise((function(n){var i=function(){var t=r.disconnectedCallbacks.indexOf(o);-1!==t&&r.disconnectedCallbacks.splice(t,1),r.socket.off(e,a),r.socket.off("error",s)},o=function(){i(),n({})};r.disconnectedCallbacks.push(o);var a=function(e){i(),n({target:e})},s=function(e){-1!==t.indexOf(e)&&(i(),n({errorCode:e}))};r.socket.on(e,a),r.socket.on("error",s)}))},e}();t.WebSocketConnection=l},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(39),o=function(){function e(e,t,r,i,o,a){this.fetcherFactory=e,this.imageFactory=t,this.reconnectionOptions=r,this.netState=i,this.clientVersion=o,this.magixConfiguration=Object.freeze(n({},a))}return e.prototype.createMagix=function(e,t){return new i.MagixImplement({logger:t.logger,fetcherFactory:this.fetcherFactory,libraryNodeFetcher:t.libraryNodeFetcher,imageFactory:this.imageFactory,toolsExtra:e,enableAnimationFrame:this.magixConfiguration.enableAnimationFrame,reconnectionOptions:this.reconnectionOptions,netState:this.netState,userPayload:t.userPayload,clientVersion:this.clientVersion,callbacks:t.callbacks||{}})},e}();t.MagixFactory=o,function(e){e.Ready="ready",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(t.MagixPhase||(t.MagixPhase={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.invoker=e,this.animationFrameId=null,this.shouldInvokeNextFrame=!1,this.blockInvoke=!1,this.fireTick=function(){if(t.shouldInvokeNextFrame)try{t.invoker()}catch(e){console.error(e)}t.shouldInvokeNextFrame=!1,t.blockInvoke=!1,t.animationFrameId=null}}return e.prototype.invoke=function(){if(this.blockInvoke)this.shouldInvokeNextFrame=!0;else{try{this.invoker()}catch(e){console.error(e)}null===this.animationFrameId&&(this.animationFrameId=window.requestAnimationFrame(this.fireTick)),this.blockInvoke=!0}},e}();t.AnimationFrameTicker=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Playing="playing",e.Pausing="pausing",e.PausingAndWaiting="pausingAndWaiting",e.Waiting="waiting",e.Ended="ended"}(t.PlayerPhase||(t.PlayerPhase={}))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.AutoBlockNewFrames=0]="AutoBlockNewFrames",e[e.DoNotBlockNewFrames=1]="DoNotBlockNewFrames"}(n=t.FramesQueueBlockMode||(t.FramesQueueBlockMode={}));var i=function(){function e(){this.blockMode=n.DoNotBlockNewFrames,this.queue=[],this.blockIndex=this.queue.length}return Object.defineProperty(e.prototype,"hasFrames",{get:function(){return this.queue.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAccessibleFrames",{get:function(){return this.blockIndex>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBlockedFrames",{get:function(){return this.queue.length>this.blockIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accessibleLength",{get:function(){return this.blockIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rearFrame",{get:function(){return this.frameAt(0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latestFrameIncludesBlocked",{get:function(){var e;return null===(e=this.queue[this.queue.length-1])||void 0===e?void 0:e.proto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockedFrame",{get:function(){var e;return null===(e=this.queue[this.blockIndex])||void 0===e?void 0:e.proto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockedReceivedAt",{get:function(){var e=this.queue[this.blockIndex];return e?e.receivedAt:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeInterval",{get:function(){if(this.blockIndex>0){var e=this.queue[this.blockIndex-1],t=this.queue[0];return e.proto.timestamp-t.proto.timestamp}return 0},enumerable:!0,configurable:!0}),e.prototype.timeIntervalBefore=function(e){var t,r=0,n=null===(t=this.queue[0])||void 0===t?void 0:t.proto.timestamp;if(void 0!==n){for(var i=-1,o=this.blockIndex-1;o>=0;--o){var a=this.queue[o];if(a.proto.timestamp<=e){i=a.proto.timestamp;break}}-1!==i&&(r=i-n)}return r},e.prototype.frameAt=function(e){return e<this.blockIndex?this.queue[e].proto:void 0},e.prototype.push=function(e){var t=Date.now();this.blockMode===n.DoNotBlockNewFrames&&(this.blockIndex+=e.length);for(var r=0,i=e;r<i.length;r++){var o=i[r];this.queue.push({proto:o,receivedAt:t})}},e.prototype.shift=function(){var e;return this.frameAt(0)?(this.blockIndex-=1,null===(e=this.queue.shift())||void 0===e?void 0:e.proto):void 0},e.prototype.unblockOneFrame=function(){this.blockIndex<this.queue.length&&(this.blockIndex+=1)},e}();t.FramesQueue=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(1),c=r(48),u=r(52),l=r(53),p=r(54),h=function(){function e(e,t,r,n){this.fetcherFactory=e,this.imageFactory=t,this.clientVersion=r,this.enableAnimationFrame=n}return e.prototype.createReconstructor=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i,a;return o(this,(function(o){switch(o.label){case 0:return r=t.rangeQuery,n=new p.SliceStateUpdater(t.libraryNodeFetcher),i=new u.SequenceFetcher({logger:t.logger,roomToken:t.roomToken,fetcher:this.fetcherFactory.create(r.region),libraryNodeFetcher:n.libraryNodeFetcher}),[4,this.fetchSliceChunk(r)];case 1:if(!(a=o.sent()))throw new Error("couldn't find any matching slices");return[2,new c.ReconstructorImplement({logger:t.logger,sliceChunk:a,imageFactory:this.imageFactory,sequenceFetcher:i,sliceStateUpdater:n,toolsExtra:e,enableAnimationFrame:this.enableAnimationFrame,callbacks:t.callbacks||{}})]}}))}))},e.prototype.searchSlices=function(e){return i(this,void 0,void 0,(function(){var t,r,n;return o(this,(function(i){switch(i.label){case 0:return[4,this.fetchSliceChunk(e)];case 1:if(t=i.sent(),r=[],t)for(n=0;n<t.slicesCount;++n)r.push(t.sliceAt(n));return[2,r]}}))}))},e.prototype.fetchSliceChunk=function(e){return i(this,void 0,void 0,(function(){var t,r,n,i,s,c,u,p,h,d,f,y=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.fetcherFactory.create(e.region).fetch("persistence")];case 1:return t=o.sent(),void 0===e.slice?[3,3]:(s={clientVersion:this.clientVersion},c="https://persistence/pv/rooms/"+e.room+"/slices/"+e.slice+"?"+a.stringify(s),[4,t.fetchJSON(c,{headers:{"content-type":"application/json",token:e.roomToken}})]);case 2:if(f=o.sent(),void 0!==e.room&&e.room!==f.roomUUID)throw new Error("slice "+f.uuid+" is not belongs to room "+e.room);return r=[f],[3,6];case 3:return void 0===e.room?[3,5]:(n=e.beginTimestamp,i=void 0!==e.beginTimestamp&&void 0!==e.duration?e.beginTimestamp+e.duration:void 0,s={beginAt:n,endAt:i,clientVersion:this.clientVersion},c="https://persistence/pv/rooms/"+e.room+"/slices?"+a.stringify(s),[4,t.fetchJSON(c,{headers:{"content-type":"application/json",token:e.roomToken}})]);case 4:return r=o.sent(),[3,6];case 5:throw new Error("expect either room or slice");case 6:if((r=r.map((function(e){return y.fillSliceLibIdentifier(e)}))).length>0){for(void 0===(u=e.beginTimestamp)&&(u=Math.min.apply(Math,r.map((function(e){return e.beginTimestamp})))),p=e.duration?u+e.duration:Math.max.apply(Math,r.map((function(e){return e.beginTimestamp+e.duration}))),h=0,d=r;h<d.length;h++)f=d[h],Object.freeze(f);return r=r.filter((function(e){var t=e.beginTimestamp;return e.beginTimestamp+e.duration>=u&&t<=p})),[2,new l.SliceChunk({beginAt:u,endAt:p,slices:r})]}return[2,null]}}))}))},e.prototype.fillSliceLibIdentifier=function(e){var t,r=e.libIdentifier.replace(/\.\w+$/im,"").split("-"),i=r[0],o=r[1];if(i&&o)try{if(s.Version.compare(s.Version.parse(o),s.Version.parse("2.7.0"))<0)switch(i){case"2.0.0":t="2.0.0-2.7.9.0f385eb562396be49fb451e80c1d85fa";break;case"2.1.0":t="2.1.0-2.8.0.fb7b9e324522d815ee4e40990d061a0b"}}catch(e){console.warn(e)}return t?n(n({},e),{libIdentifier:t}):e},e}();t.ReconstructorFactory=h,function(e){e.WaitingFirstFrame="waitingFirstFrame",e.Playing="playing",e.Pause="pause",e.Stopped="stopped",e.Ended="ended",e.Buffering="buffering",e.Seeking="seeking"}(t.ReconstructorPhase||(t.ReconstructorPhase={}))},function(e,t){e.exports=n(11)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(24))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(25)),n(r(55)),n(r(56))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.AkkoFetcher=n.AkkoFetcher;var i=r(0);t.isAkkoObject=i.isAkkoObject,t.translateToAckFrame=i.translateToAckFrame,t.getClassReflection=i.getClassReflection,t.getLibrary=i.getLibrary,t.socketFactory=i.socketFactory,t.EventPhase=i.EventPhase,t.Library=i.Library,t.UpdateEventKind=i.UpdateEventKind,t.FramePicker=i.FramePicker,t.ActionFrameType=i.ActionFrameType,t.SocketErrorCode=i.SocketErrorCode,t.KickReason=i.KickReason,t.ImagePhase=i.ImagePhase;var o=r(26);t.AkkoApp=o.AkkoApp;var a=r(9);t.MagixPhase=a.MagixPhase,t.ReconstructorPhase=a.ReconstructorPhase,t.ReconstructorFactory=a.ReconstructorFactory},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(0),s=r(27),c=r(11),u=r(7),l=r(9),p=function(){function e(e){var t=e.onAkkoSetupFailed,r=o.createProxyManager({escapeObjectFilter:e.escapeObjectFilter,jsxFactory:e.jsxFactory,observerAdapter:e.observerAdapter});if(this.imageFactory=new a.ImageFactory(r),this.convertIdToUrl=e.convertIdToUrl,e.shuntApiHosts){var n=new c.FetcherFactory({appIdentifier:e.appIdentifier,shuntApiHosts:e.shuntApiHosts,onInterruptConfigs:e.configsInterrupter,onAkkoSetupFailed:function(e){console.error("akko setup failed: "+(e.stack||e.message)),t&&t(e)}}),i=!!e.enableAnimationFrame,s={enableAnimationFrame:i},p=u.wholeReconnectionOptions(e.reconnectionOptions);this.magixFactory=new l.MagixFactory(n,this.imageFactory,p,e.netStateAdapter,e.clientVersion,s),this.playerFactory=new l.ReconstructorFactory(n,this.imageFactory,e.clientVersion,i)}}return e.prototype.createMagix=function(e){if(!this.magixFactory)throw new Error("expect shuntApiHosts");var t=(new s.ResourceManagerFactory).create({convertIdToUrl:this.convertIdToUrl}),r=Object.freeze({resource:t});return this.magixFactory.createMagix(r,e)},e.prototype.createReconstructor=function(e){if(!this.playerFactory)throw new Error("expect shuntApiHosts");var t=(new s.ResourceManagerFactory).create({convertIdToUrl:this.convertIdToUrl}),r=Object.freeze({resource:t});return this.playerFactory.createReconstructor(r,e)},e.prototype.searchSlices=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:if(!this.playerFactory)throw new Error("expect shuntApiHosts");return[4,this.playerFactory.searchSlices(e)];case 1:return[2,t.sent()]}}))}))},e}();t.AkkoApp=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28);t.ResourceManagerFactory=n.ResourceManagerFactory},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.create=function(e){return void 0===e&&(e={}),new i(e)},e}();t.ResourceManagerFactory=n;var i=function(){function e(e){this.callbacks=Object.freeze(this.wrapCallbacks(e))}return e.prototype.wrapCallbacks=function(t){for(var r={},n=function(e){var n=t[e];r[e]=n||function(){throw new Error("can't call. "+e+" not register")}},i=0,o=e.callbackKeys;i<o.length;i++)n(o[i]);return Object.freeze(r)},e.prototype.convertIdToUrl=function(e){return this.callbacks.convertIdToUrl(e)},e.callbackKeys=Object.freeze(["convertIdToUrl"]),e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(3),u=r(12),l=r(30),p=r(14);!function(e){e[e.Ready=0]="Ready",e[e.Setuping=1]="Setuping",e[e.Fail=2]="Fail"}(s||(s={}));var h=function(){function e(e){var t=this;this.fetcherPhase=s.Setuping,this.getAkkoFetcher=function(e){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.fetcherPhase===s.Fail&&this.setupFetcher(),[4,this.fetchersHubValue.getValue()];case 1:return[2,t.sent().getFetcher(e)]}}))}))},this.onIngoreFetchError=function(e){console.warn("fetch failed but ignore: "+e.message)},this.params=Object.freeze(n(n({},e),{shuntApiHosts:Object.freeze(a(e.shuntApiHosts))})),this.akkoVersionValue=new c.BlockValue,this.setupFetcher()}return e.prototype.create=function(e){return new d(this.fetchersHubValue,this.akkoVersionValue,this.getAkkoFetcher,e)},e.prototype.setupFetcher=function(){return i(this,void 0,void 0,(function(){var e,t,r,n,i,a,u;return o(this,(function(o){switch(o.label){case 0:e=this.params,t=e.appIdentifier,r=e.shuntApiHosts,n=e.onInterruptConfigs,i=e.onAkkoSetupFailed,o.label=1;case 1:return o.trys.push([1,3,,4]),this.fetchersHubValue=new c.BlockValue,this.fetcherPhase=s.Setuping,[4,l.getAkkoAppConfigs(t,r,this.onIngoreFetchError)];case 2:return a=o.sent(),n&&(a=n(a)),this.akkoVersionValue.setValue(a.akkoVersion),this.fetchersHubValue.setValue(new p.AkkoFetchersHub(a.configmap,this.onIngoreFetchError)),this.fetcherPhase=s.Ready,[3,4];case 3:return u=o.sent(),this.fetchersHubValue.catchError(new Error("akko setup failed: "+u.message)),this.fetcherPhase=s.Fail,i&&i(u),[3,4];case 4:return[2]}}))}))},e}();t.FetcherFactory=h;var d=function(){function e(e,t,r,n){this.fetchersHubValue=e,this.akkoVersionValue=t,this.getAkkoFetcher=r,this.region=n}return e.prototype.fetch=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new u.KeyFetcherImplement(this.fetchersHubValue,this.akkoVersionValue,this.region,e)]}))}))},e.prototype.origin=function(e,t){return i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.getAkkoFetcher(this.region)];case 1:return[2,r.sent().origin(e,t)]}}))}))},e.prototype.reportSuccess=function(e,t){this.getAkkoFetcher(this.region).then((function(r){r.reportSuccess(e,t)}))},e.prototype.reportFail=function(e,t){this.getAkkoFetcher(this.region).then((function(r){r.reportFail(e,t)}))},Object.defineProperty(e.prototype,"akkoVersion",{get:function(){return this.akkoVersionValue.getValue()},enumerable:!0,configurable:!0}),e}()},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=r(12),s=r(14),c=r(3),u=r(31),l=new(function(){function e(){this.node=null}return e.prototype.getAkkoAppConfigs=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,a=this;return i(this,(function(i){switch(i.label){case 0:return this.node&&this.node.appIdentifier===e||(n=new c.BlockValue,this.node=Object.freeze({appIdentifier:e,configsValue:n}),this.fetchAkkoAppConfigs(e,t,r).then((function(e){return n.setValue(u.deepFreezeObject(e))})).catch((function(e){n.catchError(e),setTimeout((function(){return a.node=null}),0)}))),o=u.deepCopyObject,[4,this.node.configsValue.getValue()];case 1:return[2,o.apply(void 0,[i.sent()])]}}))}))},e.prototype.fetchAkkoAppConfigs=function(e,t,r){return n(this,void 0,void 0,(function(){var n,u,l,p,h,d;return i(this,(function(i){switch(i.label){case 0:return n={api:{hosts:{"*":t}}},u=new s.AkkoFetchersHub(n,r),l=(new c.BlockValue).setValue(u),p=new c.BlockValue,h=new a.KeyFetcherImplement(l,p,"*","api"),d=o.stringify({app:e}),[4,h.fetchJSON("https://shunt-api/v5/configs/regions?"+d)];case 1:return[2,i.sent()]}}))}))},e}());t.getAkkoAppConfigs=function(e,t,r){return l.getAkkoAppConfigs(e,t,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepFreezeObject=function e(t){if("object"==A(t)&&null!==t){for(var r in t)e(t[r]);Object.freeze(t)}return t},t.deepCopyObject=function e(t){if("object"!=A(t)||null===t)return t;if(t instanceof Array){for(var r=[],n=0;n<t.length;++n)r[n]=e(t[n]);return r}var i={};for(var o in t)i[o]=e(t[o]);return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r=this;this.netState=e,this.onNetStateUpdate=t,this.paddingResolver=[],this._didDispose=!1,this.onOnline=function(){r._isOnline=!0,r.onNetStateUpdate&&r.onNetStateUpdate(!0),r.handleAllPaddingResolver(!0)},this.onOffline=function(){r._isOnline=!1,r.onNetStateUpdate&&r.onNetStateUpdate(!1)},e.addListener(this.listener={onOnline:this.onOnline,onOffline:this.onOffline}),this._isOnline=e.isOnline}return Object.defineProperty(e.prototype,"isOnline",{get:function(){return this._isOnline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"didDispose",{get:function(){return this._didDispose},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){try{this.handleAllPaddingResolver(!1),this.netState.removeListener(this.listener)}finally{this._didDispose=!0}},e.prototype.makeSureOnline=function(){var e=this;return this._didDispose?Promise.resolve(!1):this._isOnline?Promise.resolve(!0):new Promise((function(t){e.paddingResolver.push(t)}))},e.prototype.handleAllPaddingResolver=function(e){for(var t=0,r=this.paddingResolver.splice(0,this.paddingResolver.length);t<r.length;t++)(0,r[t])(e)},e}();t.NetStatePaddingNode=n},function(e,t){e.exports=n(30)},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getWebSocket=function(){return"undefined"!=typeof WebSocket?WebSocket:e.WebSocket}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.switchOn=!0}return e.prototype.wrapCallbacks=function(e){var t=this,r={},n=function(n){var i=e[n];r[n]="function"==typeof i?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.switchOn?i.apply(r,e):void 0}:i};for(var i in e)n(i);return Object.freeze(r)},e}();t.CallbacksFilter=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(0),c=r(15),u=r(8),l=r(3),p=function(){};t.connectWebSocketSession=function(e){return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return[4,(t=new h(e)).connect()];case 1:return r=n.sent(),[2,{session:t,snapshot:r.snapshot,actionFrames:r.actionFrames,connection:r.connection,retryCount:r.retryCount}]}}))}))};var h=function(){function e(e){var t=this;this.connectingResult=null,this._connection=null,this._libraryNode=null,this.onDisconnectedByServer=function(e){t._connection=null,t._libraryNode=null,t.callbacks.onDisconnectedByServer&&t.callbacks.onDisconnectedByServer(e)},this.onKickWithReason=function(e){t._connection=null,t._libraryNode=null,t.reconnectionOptions.disableReconnect||e!==s.KickReason.GatewayAdjust&&e!==s.KickReason.RoomZombie?t.callbacks.onKickWithReason&&t.callbacks.onKickWithReason(e):t.startReconnect(new Error("room became zombie"))},this.onDisconnectedWithSocketError=function(e){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._connection=null,this._libraryNode=null,this.reconnectionOptions.disableReconnect?[3,2]:[4,this.startReconnect(e)];case 1:return t.sent(),[3,3];case 2:this.callbacks.onDisconnectedWithSocketError&&this.callbacks.onDisconnectedWithSocketError(e),t.label=3;case 3:return[2]}}))}))},this.logger=e.logger,this.uuid=e.uuid,this.roomToken=e.roomToken,this.markWritable=e.markWritable,this.clientVersion=e.clientVersion,this.reconnectionOptions=e.reconnectionOptions,this.access=e.access,this.objectOperator=e.objectOperator,this.libraryNodeFetcher=e.libraryNodeFetcher,this.connectionBuilder=new c.ConnectionBuilder(e.logger,e.fetcher,e.netState),this.callbacks=Object.freeze(n({},e.callbacks))}return Object.defineProperty(e.prototype,"session",{get:function(){return this.sessionBuild.session},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){return this.sessionBuild.slice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connection",{get:function(){return this._connection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libraryNode",{get:function(){return this._libraryNode},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.connectionBuilder.dispose()},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){var e,t,r,n,i,c,h,d;return o(this,(function(o){switch(o.label){case 0:if(this.connectingResult)throw new Error("WebSocketSession is connecting");e=new l.BlockValue,t=this.connectingResult=new l.BlockValue,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.connectionBuilder.connect({logger:this.logger,roomToken:this.roomToken,webSocketQuery:{uuid:this.uuid,akkoVersion:a.AkkoVersion,clientVersion:this.clientVersion,markWritable:this.markWritable,access:this.access,sessionToken:this.sessionBuild&&this.sessionBuild.sessionToken},callbacks:{onReceivedLibraryDescription:this.createLibraryDescriptionReceiver(e),onReceivedActionFrame:this.callbacks.onReceivedActionFrame||p,onReceivedScopeSlices:this.callbacks.onReceivedScopeSlices||p,onDisconnectedByServer:this.onDisconnectedByServer,onKickWithReason:this.onKickWithReason,onDisconnectedWithSocketError:this.onDisconnectedWithSocketError}})];case 2:return r=o.sent(),this.sessionBuild&&(n=r.connection.sessionBuild,i=n.session,c=n.slice,this.callbacks.onSessionUpdate&&this.sessionBuild.session!==i&&this.callbacks.onSessionUpdate(i),this.callbacks.onSliceUpdate&&this.sessionBuild.slice!==c&&this.callbacks.onSliceUpdate(c)),this._connection=r.connection,h=this,[4,e.getValue()];case 3:return h._libraryNode=o.sent(),this.sessionBuild=r.connection.sessionBuild,this._connection.setAccessUpdaterSerialization(new s.AccessUpdaterSerialization(this.objectOperator,u.getLibraryWithClass(this._libraryNode.libraryClass))),this.connectingResult=null,t.setValue(r),[2,r];case 4:throw d=o.sent(),e.catchError(d),t.catchError(d),d;case 5:return[2]}}))}))},e.prototype.reconnectWithError=function(e){this._connection&&(this._connection.disconnect(),this._connection=null,this._libraryNode=null),this.startReconnect(e)},e.prototype.createLibraryDescriptionReceiver=function(e){var t=this;return function(r){return i(t,void 0,void 0,(function(){var t,n,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=(t=e).setValue,[4,this.libraryNodeFetcher(r)];case 1:return n.apply(t,[o.sent()]),[3,3];case 2:return i=o.sent(),e.catchError(i),[3,3];case 3:return[2]}}))}))}},e.prototype.startReconnect=function(e){return i(this,void 0,void 0,(function(){var t,r,n,i,a;return o(this,(function(o){switch(o.label){case 0:return this.connectingResult?[4,this.connectingResult.getValue()]:[3,2];case 1:return o.sent(),[3,0];case 2:return o.trys.push([2,4,,5]),t=this.callbacks,r=t.onBeginReconnect,n=t.onReconnected,r&&Promise.resolve().then((function(){return r(e)})),[4,this.connect()];case 3:return i=o.sent(),n&&Promise.resolve().then((function(){return n(i)})),[3,5];case 4:return a=o.sent(),this.callbacks.onDisconnectedWithSocketError&&this.callbacks.onDisconnectedWithSocketError(a),[3,5];case 5:return[2]}}))}))},e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=Object.freeze({disableReconnect:!1});t.wholeReconnectionOptions=function(e){return!1===e?{disableReconnect:!0}:n(n({},i),e)}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0);!function(e){e[e.Success=0]="Success",e[e.Break=1]="Break"}(o||(o={}));var s=function(){function e(e){var t=this;this.nextId=0,this.socket=null,this.pingProgress=null,this.promiseSleep=null,this.deltaTime=void 0,this.latestAdjustedTimestamp=0,this.isFirstAdjustedTime=!0,this.onPong=function(e){var r=a.deserializePong(e),n=r.id,i=r.timestamp;if(t.pingProgress){var o=t.pingProgress,s=o.id,c=o.padding,u=o.timer,l=o.timestamp;if(s===n){clearTimeout(u);for(var p={remoteTimestamp:i,shouldBreak:!1,sendAt:l,receivedAt:Date.now()},h=0,d=c;h<d.length;h++)(0,d[h].resolve)(p);t.pingProgress=null}}},this.onPingFailed=e}return Object.defineProperty(e.prototype,"calibrationTimestamp",{get:function(){if(void 0===this.deltaTime)return Date.now();var e=Math.max(this.latestAdjustedTimestamp,Date.now()+this.deltaTime);return this.latestAdjustedTimestamp=e,e},enumerable:!0,configurable:!0}),e.prototype.bindSocket=function(e){this.socket&&this.unbindSocket(),this.socket=e,this.socket.on("pong",this.onPong),this.handleStartPingLoop().catch(this.onPingFailed)},e.prototype.unbindSocket=function(){if(this.socket&&(this.socket.off("pong",this.onPong),this.socket=null),this.promiseSleep&&(clearTimeout(this.promiseSleep.sleepTimer),this.promiseSleep.resolve(o.Break),this.promiseSleep=null),this.pingProgress){for(var e={shouldBreak:!0,remoteTimestamp:0,sendAt:0,receivedAt:0},t=0,r=this.pingProgress.padding;t<r.length;t++)(0,r[t].resolve)(e);this.pingProgress=null}},e.prototype.handleStartPingLoop=function(){return n(this,void 0,void 0,(function(){var t,r,a=this;return i(this,(function(s){switch(s.label){case 0:t=function(){var t,s;return i(this,(function(c){switch(c.label){case 0:return t=0,s=0,[4,r.doProgress(r.onPingFailed,(function(){return n(a,void 0,void 0,(function(){var e,r,n,a,c;return i(this,(function(i){switch(i.label){case 0:return[4,this.startPing()];case 1:return e=i.sent(),r=e.shouldBreak,n=e.remoteTimestamp,a=e.sendAt,c=e.receivedAt,r?[2,o.Break]:(t+=n+(c-a)/2-c,s+=1,this.isFirstAdjustedTime&&this.updateDeltaTime(Math.floor(t/s)),[2,o.Success])}}))}))}))];case 1:return c.sent()===o.Break?[2,"break"]:(r.isFirstAdjustedTime?r.isFirstAdjustedTime=!1:s>=(e.processTimeIntervalList.length+1)/2&&r.updateDeltaTime(Math.floor(t/s)),[4,r.sleep(r.withFloatRate(e.processInterval))]);case 2:return c.sent()===o.Break?[2,"break"]:[2]}}))},r=this,s.label=1;case 1:return this.socket?[5,t()]:[3,3];case 2:return"break"===s.sent()?[3,3]:[3,1];case 3:return[2]}}))}))},e.prototype.updateDeltaTime=function(e){this.deltaTime=e},e.prototype.doProgress=function(t,r){return n(this,void 0,void 0,(function(){var n,a,s,c,u,l;return i(this,(function(i){switch(i.label){case 0:n=o.Success,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r()];case 2:return n=i.sent(),[3,4];case 3:return a=i.sent(),t(a),[3,4];case 4:if(n!==o.Success)return[3,11];s=0,c=e.processTimeIntervalList,i.label=5;case 5:if(!(s<c.length))return[3,11];u=c[s],i.label=6;case 6:return i.trys.push([6,9,,10]),[4,this.sleep(this.withFloatRate(u))];case 7:return(n=i.sent())===o.Break?[3,11]:[4,r()];case 8:return(n=i.sent())===o.Break?[3,11]:[3,10];case 9:return l=i.sent(),t(l),[3,10];case 10:return s++,[3,5];case 11:return[2,n]}}))}))},e.prototype.startPing=function(){var t,r,n=this;if(this.pingProgress)t=this.pingProgress.id,r=this.pingProgress.padding;else{var i=Date.now(),o=setTimeout((function(){return n.onPongTimeout(t)}),e.pongTimeout);t=this.getNextId(),r=[],this.pingProgress={id:t,timer:o,timestamp:i,padding:r},this.socket.emit("ping",a.serializePing({id:t,timestamp:i}))}return new Promise((function(e,t){r.push({resolve:e,reject:t})}))},e.prototype.onPongTimeout=function(e){if(this.pingProgress){var t=this.pingProgress,r=t.id,n=t.padding;if(r===e){for(var i=new Error("pong timeout"),o=0,a=n;o<a.length;o++)(0,a[o].reject)(i);this.pingProgress=null}}},e.prototype.getNextId=function(){this.nextId>e.maxId&&(this.nextId=0);var t=this.nextId;return this.nextId+=1,t},e.prototype.withFloatRate=function(t){var r=1-e.timeFloatRate+2*e.timeFloatRate*Math.random();return Math.floor(r*t)},e.prototype.sleep=function(e){var t=this;if(this.promiseSleep)throw new Error("did call sleep");return new Promise((function(r){var n=setTimeout((function(){t.promiseSleep=null,r(o.Success)}),e);t.promiseSleep={resolve:r,sleepTimer:n}}))},e.maxId=Math.pow(2,32)-1,e.pongTimeout=5e3,e.timeFloatRate=.35,e.processInterval=3e5,e.processTimeIntervalList=Object.freeze([5e3,7e3,12e3,15e3]),e}();t.PingPongNode=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(40),c=r(18),u=r(17),l=r(7),p=r(46),h=r(8),d=r(47),f=function(){function e(t){var r=this;this.actionFramePickersList=[],this._phase=u.MagixPhase.Ready,this._modifiable=!0,this._timeDelay=0,this.switchWritable=!1,this.switchWritableTaskId=0,this.isReconnecting=!1,this.beginReconnectAt=0,this.onReceivedActionFrame=function(e){try{var t=new a.FramePicker(e);if(r.magixSession){if(r.actionFramePickersList.length>0)for(var n=0,i=r.cleanActionFramesBufferList();n<i.length;n++){var o=i[n];r.magixSession.receivedActionFramePicker(o)}r.magixSession.receivedActionFramePicker(t)}else r.actionFramePickersList.push(t)}catch(e){r.logger.error("found error when receive action frame: "+e.message),r.socketSession.reconnectWithError(e)}},this.onReceivedScopeSlices=function(e){try{r.magixSession&&r.magixSession.receivedScopeSlices(e)}catch(e){r.logger.error("found error when receive scope slices: "+e.message),r.socketSession.reconnectWithError(e)}},this.onBeginReconnect=function(e){var t=r._phase===u.MagixPhase.Connecting;r.beginReconnectAt=Date.now(),t||(r.callbacks.onReconnectWithError?r.callbacks.onReconnectWithError(e):r.logger.error(e)),r.switchWritableTaskId+=1,r.magixSession.destroy(),r.pingPongNode.unbindSocket(),t||r.changePhase(u.MagixPhase.Reconnecting),r.isReconnecting=!0,r.authorState.setConnectedMagixSession(null)},this.onReconnected=function(e){var t=e.connection,o=e.snapshot,a=e.actionFrames,s=e.retryCount;return n(r,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return this.buildMagixSession(t,o,a),e=this._phase===u.MagixPhase.Connecting,r=this.switchWritableTaskId,this.switchWritable?[4,this.authorState.setWritable(!0,this.settingWritablePayload)]:[3,2];case 1:n.sent(),n.label=2;case 2:return r===this.switchWritableTaskId&&(e||(this.changePhase(u.MagixPhase.Connected),this.onModified()),this.isReconnecting=!1,this.reconnectionResultReceiver&&(this.reconnectionResultReceiver(null),this.reconnectionResultReceiver=null),this.callbacks.onReconnected&&!e&&this.callbacks.onReconnected({retryCount:s,buildWebSocketDuration:t.connectingDuration,buildMagixDuration:Date.now()-this.beginReconnectAt})),[2]}}))}))},this.onGeneratedActionFrame=function(e){try{r.socketSession.connection.sendActionFrame(e)}catch(e){r.callbacks.onReceivedWarning&&r.callbacks.onReceivedWarning(e.message)}},this.onSelfUserIdUpdate=function(e){r.callbacks.onSelfUserIdUpdate&&r._phase!==u.MagixPhase.Ready&&r._phase!==u.MagixPhase.Connecting&&r.callbacks.onSelfUserIdUpdate(e)},this.onModified=function(){r.callbacks.onModified&&r._phase!==u.MagixPhase.Ready&&r._phase!==u.MagixPhase.Connecting&&(r.animationFrameTicker?r.animationFrameTicker.invoke():r.callbacks.onModified())},this.onEventFire=function(e){r.callbacks.onEventFire&&r.callbacks.onEventFire(a.getEventWithDescription(e,a.EventPhase.Dispatched))},this.onClientCrashWithError=function(e){r._phase===u.MagixPhase.Connected&&r.socketSession.reconnectWithError(e)},this.onFrameReceivedInterval=function(t){r.callbacks.onFrameReceivedInterval&&(r.callbacks.onFrameReceivedInterval(t),r.receivedIntervalResetter.refreshAndInvokeAfterInterval(e.receivedIntervalResetterCleanInterval))},this.onDisconnectWithError=function(e){if(r.magixSession.destroy(),r.pingPongNode.unbindSocket(),r.phase!==u.MagixPhase.Disconnected){var t=r._phase;r.socketSession.dispose(),r.isReconnecting=!1,r.changePhase(u.MagixPhase.Disconnected),r.reconnectionResultReceiver&&(r.reconnectionResultReceiver(e),r.reconnectionResultReceiver=null),t===u.MagixPhase.Connecting?r.errorWhenConnecting=e:r.callbacks.onDisconnectWithError&&r.callbacks.onDisconnectWithError(e)}},this.onKickedWithReason=function(e){if(r.magixSession.destroy(),r.pingPongNode.unbindSocket(),r.phase!==u.MagixPhase.Disconnected){var t=r._phase,n=new Error("kicked by server when connecting: "+e);r.socketSession.dispose(),r.isReconnecting=!1,r.changePhase(u.MagixPhase.Disconnected),r.reconnectionResultReceiver&&(r.reconnectionResultReceiver(n),r.reconnectionResultReceiver=null),t===u.MagixPhase.Connecting&&(r.errorWhenConnecting=n),r.callbacks.onKickedWithReason&&r.callbacks.onKickedWithReason(e)}},this.logger=t.logger,this.imageFactory=t.imageFactory,this.libraryNodeFetcher=t.libraryNodeFetcher,this.fetcherFactory=t.fetcherFactory,this.enableAnimationFrame=t.enableAnimationFrame,this.reconnectionOptions=t.reconnectionOptions,this.toolsExtra=t.toolsExtra,this.netState=t.netState,this.clientVersion=t.clientVersion,this.callbacks=a.wrapCallbacks(t.callbacks),this.callbacks.onModified&&t.enableAnimationFrame&&(this.animationFrameTicker=new c.AnimationFrameTicker(this.callbacks.onModified)),this.pingPongNode=new l.PingPongNode(this.logger.warn),this.authorState=new p.MagixAuthorState(t.userPayload,this.onSelfUserIdUpdate,this.onModified),this.receivedIntervalResetter=new o.Delayer((function(){r.callbacks.onFrameReceivedInterval&&r.callbacks.onFrameReceivedInterval(0)}))}return Object.defineProperty(e.prototype,"modifiable",{get:function(){return this._modifiable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"calibrationTimestamp",{get:function(){return this.pingPongNode.calibrationTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeDelay",{get:function(){return this._timeDelay},set:function(e){this._timeDelay=e,this.magixSession&&this.magixSession.updateTimeDelay(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"session",{get:function(){return this.socketSession&&this.socketSession.session},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){return this.socketSession&&this.socketSession.slice},enumerable:!0,configurable:!0}),e.prototype.changePhase=function(e){this._phase!==e&&(this._phase=e,this.callbacks.onPhaseChanged&&this.callbacks.onPhaseChanged(e))},Object.defineProperty(e.prototype,"selfUserId",{get:function(){return this.authorState.selfUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWritable",{get:function(){return void 0!==this.authorState.selfUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagePhase",{get:function(){if(!this.magixSession)throw new Error("image phase not exist when Magix's phase is "+this.phase);return this.magixSession.imagePhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){if(!this.magixSession)throw new Error("trigger object not exist when Magix's phase is "+this.phase);return this.magixSession.trigger},enumerable:!0,configurable:!0}),e.prototype.syncBlockTimestamp=function(e){var t;null===(t=this.magixSession)||void 0===t||t.syncBlockTimestamp(e)},e.prototype.stopBlockTimestamp=function(){var e;null===(e=this.magixSession)||void 0===e||e.stopBlockTimestamp()},e.prototype.setWritable=function(e,t){return this._phase===u.MagixPhase.Connected||this._phase===u.MagixPhase.Reconnecting?(this.switchWritable=e,this.settingWritablePayload=e?t:void 0,this.authorState.setWritable(e,t)):Promise.reject(new Error("can't only set writable when connected or reconnecting"))},e.prototype.connect=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,a,s,c,p,h,f=this;return i(this,(function(i){switch(i.label){case 0:if(t=Date.now(),this.phase!==u.MagixPhase.Ready)throw new Error("can't connect when Magix's phase is "+this.phase);this.changePhase(u.MagixPhase.Connecting),i.label=1;case 1:return i.trys.push([1,8,,9]),[4,l.connectWebSocketSession({logger:this.logger,fetcher:this.fetcherFactory.create(e.region),uuid:e.uuid,roomToken:e.roomToken,markWritable:e.isWritable,clientVersion:this.clientVersion,access:d.getAccessWithToken(e.roomToken),netState:this.netState,reconnectionOptions:this.reconnectionOptions,objectOperator:this.imageFactory.proxyManager.objectOperator,libraryNodeFetcher:this.libraryNodeFetcher,callbacks:{onReceivedActionFrame:this.onReceivedActionFrame,onReceivedScopeSlices:this.onReceivedScopeSlices,onBeginReconnect:this.onBeginReconnect,onReconnected:this.onReconnected,onSliceUpdate:this.callbacks.onSliceChanged,onSessionUpdate:this.callbacks.onSessionChanged,onDisconnectedByServer:this.onDisconnectWithError,onDisconnectedWithSocketError:this.onDisconnectWithError,onKickWithReason:this.onKickedWithReason}})];case 2:return r=i.sent(),n=r.session,o=r.connection,a=r.snapshot,s=r.actionFrames,c=r.retryCount,this.socketSession=n,this.settingWritablePayload=e.connectedPayload,this.buildMagixSession(o,a,s),e.isWritable?[4,this.authorState.setWritable(!0,e.connectedPayload)]:[3,4];case 3:i.sent(),this.switchWritable=!0,i.label=4;case 4:return this.isReconnecting?[4,new Promise((function(e){f.reconnectionResultReceiver=e}))]:[3,6];case 5:if(p=i.sent())throw p;return[3,7];case 6:if(this._phase!==u.MagixPhase.Connecting)throw this.errorWhenConnecting?this.errorWhenConnecting:new Error("magix connect fail with invalid phase "+this._phase);i.label=7;case 7:return this.changePhase(u.MagixPhase.Connected),[2,{libraryNode:n.libraryNode,statistics:{retryCount:c,buildWebSocketDuration:n.connection.connectingDuration,buildMagixDuration:Date.now()-t}}];case 8:throw h=i.sent(),this.cleanActionFramesBufferList(),this.changePhase(u.MagixPhase.Disconnected),this.pingPongNode.unbindSocket(),h;case 9:return[2]}}))}))},e.prototype.reconnectWithError=function(e){if(this._phase!==u.MagixPhase.Reconnecting){if(this._phase!==u.MagixPhase.Connected)throw new Error("can't reconnect when magix's phase is "+this._phase);this.socketSession.reconnectWithError(e)}},e.prototype.buildMagixSession=function(e,t,r){var n=this;this.magixSession&&this.magixSession.destroy();var i=this.magixSession=new s.MagixSession({logger:this.logger,library:h.getLibraryWithClass(this.socketSession.libraryNode.libraryClass),connection:e,snapshot:t,initializeActionFrames:r,imageFactory:this.imageFactory,enableAnimationFrame:this.enableAnimationFrame,originalMagixSession:this.magixSession,timeDelay:this._timeDelay,toolsExtra:this.toolsExtra,callbacks:{onImagePhaseChanged:function(e){return n.onImagePhaseChanged(i,e)},onGeneratedActionFrame:this.onGeneratedActionFrame,onModified:this.onModified,onEventFire:this.onEventFire,onClientCrashWithError:this.onClientCrashWithError,onFrameReceivedInterval:this.onFrameReceivedInterval,onReceivedRttReport:this.callbacks.onReceivedRttReport,onIllusionQueueLengthChanged:this.callbacks.onIllusionQueueLengthChanged,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame||function(e,t){return n.logger.error(t)}}});e.bindPingPongNode(this.pingPongNode),this.magixSession.setModifiable(this._modifiable),this.authorState.setConnectedMagixSession(this.magixSession)},e.prototype.disconnect=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.isReconnecting=!1,this.phase!==u.MagixPhase.Reconnecting?[3,1]:(this.socketSession.dispose(),this.pingPongNode.unbindSocket(),this.changePhase(u.MagixPhase.Disconnected),[3,7]);case 1:if(this.phase!==u.MagixPhase.Connected)return[3,6];this.pingPongNode.unbindSocket(),this.changePhase(u.MagixPhase.Disconnecting),e.label=2;case 2:return e.trys.push([2,,4,5]),[4,this.socketSession.connection.disconnect()];case 3:return e.sent(),[3,5];case 4:return this.changePhase(u.MagixPhase.Disconnected),[7];case 5:return[3,7];case 6:throw new Error("can't disconnect when Magix's phase is "+this.phase);case 7:return[2]}}))}))},e.prototype.dispatch=function(e,t){if(this.phase!==u.MagixPhase.Connected)throw new Error("can't dispatch event when Magix's phase is "+this.phase);this.magixSession.dispatch(e,t)},e.prototype.onImagePhaseChanged=function(e,t){this.callbacks.onImagePhaseChanged&&this.magixSession===e&&this.callbacks.onImagePhaseChanged(t)},e.prototype.cleanActionFramesBufferList=function(){return this.actionFramePickersList.splice(0,this.actionFramePickersList.length)},e.receivedIntervalResetterCleanInterval=700,e}();t.MagixImplement=f},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=r(45),a=function(){function e(e){var t=this;this.latestTimestamp=null,this.receivedActionFramePicker=function(e){t.frameIdAsserter.assertReceivedFrameId(e.frameId),t.playerBuffer.pushFrames([e])},this.onPlayActionFrames=function(e){t.onFrameReceivedInterval&&e.length>0&&t.onFrameReceivedInterval(t.getFrameReceivedInterval(e));for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(o.frameBuffer)}try{t.image.appendActionFrames(r)}catch(e){if(!t.onClientCrashWithError)throw e;t.onClientCrashWithError(e)}},this.connection=e.connection,this.image=e.imageFactory.createWithSnapshot({logger:e.logger,library:e.library,snapshotFrame:e.snapshot,actionFrames:n(e.initializeActionFrames),includesFrameHash:!1,ignoreHashChecking:!0,roomUUID:e.connection.uuid,toolsExtra:e.toolsExtra,originalImage:e.originalMagixSession&&e.originalMagixSession.image,callbacks:{onModified:e.callbacks.onModified,onPhaseChanged:e.callbacks.onImagePhaseChanged,onGeneratedActionFrame:e.callbacks.onGeneratedActionFrame,onCatchErrorWhenAppendFrame:e.callbacks.onCatchErrorWhenAppendFrame,onReceivedRttReport:e.callbacks.onReceivedRttReport,onIllusionQueueLengthChanged:e.callbacks.onIllusionQueueLengthChanged,onEventFire:e.callbacks.onEventFire,onClientCrashWithError:e.callbacks.onClientCrashWithError}}),this.frameIdAsserter=new o.FrameIdAsserter(this.image.frameId),this.playerBuffer=i.playerBufferFactory.create({logger:e.logger,mode:i.PlayerBufferMode.Realtime,frameDelay:e.timeDelay,enableAnimationFrame:e.enableAnimationFrame,initFrameTimestamp:this.image.timestamp,callbacks:{onPlayActionFrames:this.onPlayActionFrames}}),this.onFrameReceivedInterval=e.callbacks.onFrameReceivedInterval,this.onClientCrashWithError=e.callbacks.onClientCrashWithError,this.playerBuffer.play()}return Object.defineProperty(e.prototype,"imagePhase",{get:function(){return this.image.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.image.timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this.image.trigger},enumerable:!0,configurable:!0}),e.prototype.receivedScopeSlices=function(e){this.image.appendScopeSlices(e)},e.prototype.dispatch=function(e,t){this.image.dispatch(e,t)},e.prototype.updateTimeDelay=function(e){this.playerBuffer.frameDelay=e},e.prototype.syncBlockTimestamp=function(e){this.playerBuffer.syncBlockTimestamp(e)},e.prototype.stopBlockTimestamp=function(){this.playerBuffer.stopBlockTimestamp()},e.prototype.setModifiable=function(e){this.image.modifiable=e},e.prototype.setAllocatedUser=function(e){return this.image.setAllocatedUser(e)},e.prototype.removeAllocatedUser=function(){return this.image.removeAllocatedUser()},e.prototype.destroy=function(){this.image.destroy()},e.prototype.getFrameReceivedInterval=function(e){for(var t=Date.now(),r=0,n=0,i=0,o=e;i<o.length;i++){var a=o[i];if(this.latestTimestamp){var s=t-this.latestTimestamp.recevied,c=a.timestamp-this.latestTimestamp.arbitrated;this.latestTimestamp.recevied=t,this.latestTimestamp.arbitrated=a.timestamp,r+=Math.abs(s-c),n+=1}else this.latestTimestamp={recevied:t,arbitrated:a.timestamp}}var u=0;return n>0&&(u=r/n),u},e}();t.MagixSession=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),i=r(44),o=r(5),a=function(){function e(){}return e.prototype.create=function(e){switch(e.mode){case o.PlayerBufferMode.Realtime:return new n.RealtimePlayerBuffer(e);case o.PlayerBufferMode.Reconstruction:return new i.ReconstructionPlayerBuffer(e);default:throw new Error("invalid mode "+e.mode)}},e}();t.PlayerBufferFactory=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),a=r(20),s=r(43),c=Object.freeze([Object.freeze({duration:1200,rate:1}),Object.freeze({duration:1e3,rate:.75}),Object.freeze({duration:3e3,rate:.5}),Object.freeze({duration:5e3,rate:.25})]),u=function(){for(var e=0,t=0,r=c;t<r.length;t++)e+=r[t].duration;return e}(),l=function(e){function t(t){var r=e.call(this,t)||this;return r.latestTimestamp=null,r.syncDelta=null,r.framesQueue.blockMode=a.FramesQueueBlockMode.AutoBlockNewFrames,r.frameDelayGradient=new s.NumberGradient(t.frameDelay||0,1200),r}return i(t,e),Object.defineProperty(t.prototype,"frameDelay",{get:function(){return this.frameDelayGradient.value},set:function(e){this.frameDelayGradient.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaybackSpeedModifiable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackSpeed",{get:function(){return 1},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"willTickEveryFrames",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.syncBlockTimestamp=function(e){var t=e-Date.now();this.syncDelta?this.syncDelta.value=t:this.syncDelta=new s.NumberGradient(t,1200)},t.prototype.stopBlockTimestamp=function(){this.syncDelta=null},t.prototype.onPlayingContinue=function(){},t.prototype.onPlayingStop=function(){},t.prototype.onTick=function(){var e=Date.now(),t=[];if(this.unblockFramesIfNeed(e),this.fillOverIntervalFrames(e,t),this.fillShouldPlayFrames(e,t),this.playFrames(t),this.callbacks.onBufferRemainLow&&this.latestTimestamp&&!this.didCompletePushFrames){var r=0;this.framesQueue.hasAccessibleFrames&&(r=this.framesQueue.latestFrameIncludesBlocked.timestamp-this.latestTimestamp.ack),r<this.remainLowTimeInterval&&this.callbacks.onBufferRemainLow()}},t.prototype.unblockFramesIfNeed=function(e){if(this.syncDelta)for(var t=e+this.syncDelta.momentValue;this.framesQueue.hasBlockedFrames&&this.framesQueue.blockedFrame.timestamp<=t;)this.framesQueue.unblockOneFrame();else for(;this.framesQueue.hasBlockedFrames&&e>=this.framesQueue.blockedReceivedAt+this.frameDelayGradient.momentValue;)this.framesQueue.unblockOneFrame()},t.prototype.fillOverIntervalFrames=function(e,t){for(;this.framesQueue.timeInterval>u;)t.push(this.framesQueue.shift());t.length>0&&this.updateLatestTimestamp(e,t[t.length-1])},t.prototype.fillShouldPlayFrames=function(e,t){for(var r=function(e){for(var t=e,r=0,n=c;r<n.length;r++){var i=n[r];if(t<=i.duration)return i.rate;t-=i.duration}throw new Error("durationTime is too large:"+t)}(this.framesQueue.timeIntervalBefore(e));this.framesQueue.hasAccessibleFrames;){var n=this.framesQueue.rearFrame,i=!1;if(this.latestTimestamp){var o=n.timestamp-this.latestTimestamp.ack,a=this.latestTimestamp.device+o*r;i=e+this.frameInterval>=a}else i=!0;if(!i)break;t.push(this.framesQueue.shift()),this.updateLatestTimestamp(e,n)}},t.prototype.playFrames=function(e){if(e.length>0)try{this.callbacks.onPlayActionFrames&&this.callbacks.onPlayActionFrames(e)}catch(e){this.logger.error(e)}},t.prototype.updateLatestTimestamp=function(e,t){var r=t.timestamp;this.latestTimestamp?(this.latestTimestamp.ack=r,this.latestTimestamp.device=e):this.latestTimestamp={ack:r,device:e}},t}(o.AbstractPlayerBuffer);t.RealtimePlayerBuffer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.lastTimestamp=0,this.targetValue=e,this._momentValue=e,this.halfLifeInterval=t}return Object.defineProperty(e.prototype,"value",{get:function(){return this.targetValue},set:function(e){this.targetValue!==e&&(this.targetValue!==this._momentValue&&this.refreshMomentValue(),this.targetValue=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"momentValue",{get:function(){return this.targetValue!==this._momentValue&&this.refreshMomentValue(),this._momentValue},enumerable:!0,configurable:!0}),e.prototype.refreshMomentValue=function(){var t,r=Date.now(),n=r-this.lastTimestamp;if(n>this.halfLifeInterval*e.convergenceTimes)t=this.targetValue;else{var i=Math.pow(.5,n/this.halfLifeInterval);t=this._momentValue*i+this.targetValue*(1-i),Math.abs(t-this.targetValue)<e.minNumber&&(t=this.targetValue)}this._momentValue=t,this.lastTimestamp=r},e.convergenceTimes=6,e.minNumber=.01,e}();t.NumberGradient=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),a=r(4),s=function(e){function t(t){var r=e.call(this,t)||this;return r.frameDelay=0,r._playbackSpeed=1,r.endFrameTimestamp=t.endFrameTimestamp,r.anchor={deviceTimestamp:Date.now(),playerTimestamp:t.initFrameTimestamp},r}return i(t,e),t.prototype.syncBlockTimestamp=function(e){},t.prototype.stopBlockTimestamp=function(){},t.prototype.play=function(){e.prototype.play.call(this);var t=this.callbacks.onBufferRemainLow;t&&this.isBufferRemainLow&&Promise.resolve().then(t).catch((function(e){return console.error(e)}))},Object.defineProperty(t.prototype,"isPlaybackSpeedModifiable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackSpeed",{get:function(){return this._playbackSpeed},set:function(e){if(e<0)throw new Error("invalid playback speed "+e+". it shouldn't be nagative number");if(Number.isNaN(e)||1/0===e)throw new Error("invalid playback speed. it can not be "+e);this._playbackSpeed!==e&&(this.phase===a.PlayerPhase.Playing&&this.refreshAnchor(this._playbackSpeed),this._playbackSpeed=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"willTickEveryFrames",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.onPlayingContinue=function(){this.refreshAnchor(0)},t.prototype.onPlayingStop=function(){this.refreshAnchor(this._playbackSpeed)},t.prototype.onTick=function(){for(var e=[],t=this.playbackSpeed*(Date.now()-this.anchor.deviceTimestamp+this.frameInterval),r=this.anchor.playerTimestamp+t;this.framesQueue.hasAccessibleFrames&&this.framesQueue.rearFrame.timestamp<=r;)e.push(this.framesQueue.shift());if(e.length>0)try{this.callbacks.onPlayActionFrames&&this.callbacks.onPlayActionFrames(e)}catch(e){this.logger.error(e)}if(this.callbacks.onTick)if(e.length>0){var n=e[e.length-1],i=Math.max(this.anchor.playerTimestamp,n.timestamp);this.callbacks.onTick(i,!1)}else this.callbacks.onTick(r,!0);this.callbacks.onBufferRemainLow&&!this.didCompletePushFrames&&this.isBufferRemainLow&&this.callbacks.onBufferRemainLow(),this.didCompletePushFrames&&0===e.length&&void 0!==this.endFrameTimestamp&&r>=this.endFrameTimestamp&&this.completePlaying()},t.prototype.refreshAnchor=function(e){var t=Date.now(),r=e*(t-this.anchor.deviceTimestamp);this.anchor={deviceTimestamp:t,playerTimestamp:this.anchor.playerTimestamp+r}},Object.defineProperty(t.prototype,"isBufferRemainLow",{get:function(){return this.framesQueue.timeInterval<this.remainLowTimeInterval},enumerable:!0,configurable:!0}),t}(o.AbstractPlayerBuffer);t.ReconstructionPlayerBuffer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.latestReceivedFrameId=-1,this.didAssertedCount=0,this.latestReceivedFrameId=e}return e.prototype.assertReceivedFrameId=function(e){var t=this.latestReceivedFrameId+1;if(e!==t)throw new Error("Magix want frameId "+t+", instead of "+e+" (did asserted "+this.didAssertedCount+" frames)");this.latestReceivedFrameId=e,this.didAssertedCount+=1},e}();t.FrameIdAsserter=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,r){this.userPayload=e,this.onSelfUserIdUpdate=t,this.onConvertToWritable=r,this._selfUserId=void 0,this.invokerBlock=Promise.resolve(),this.isConnectedSessionWritable=!1,this.connectedSession=null}return Object.defineProperty(e.prototype,"selfUserId",{get:function(){return this._selfUserId},enumerable:!0,configurable:!0}),e.prototype.setConnectedMagixSession=function(e){this.connectedSession!==e&&(!this.connectedSession&&e&&this.paddingAndWaitSession&&(this.paddingAndWaitSession(e),this.paddingAndWaitSession=void 0),this.connectedSession=e,this.isConnectedSessionWritable=!1)},e.prototype.setWritable=function(e,t){return this.invokerBlock=this.convertTo(this.invokerBlock,e,t)},e.prototype.convertTo=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return[4,e];case 1:if(i.sent(),this.isConnectedSessionWritable===t)return[2];this.updateObserverId(void 0),n=null,i.label=2;case 2:return[4,this.waitAndGetConnectedSession()];case 3:return o=i.sent(),this.isConnectedSessionWritable===t?[3,10]:t?[4,o.connection.updateToWritable(this.userPayload,r)]:[3,6];case 4:return(n=i.sent())?[4,o.setAllocatedUser(n)]:[3,2];case 5:return i.sent(),[3,9];case 6:return[4,o.connection.updateToReadonly(r)];case 7:return i.sent()?[4,o.removeAllocatedUser()]:[3,2];case 8:i.sent(),i.label=9;case 9:return this.isConnectedSessionWritable=t,[3,10];case 10:return n&&this.updateObserverId(n.userId),this.onConvertToWritable&&this.onConvertToWritable(!!n),[2]}}))}))},e.prototype.waitAndGetConnectedSession=function(){var e=this;return this.connectedSession?Promise.resolve(this.connectedSession):new Promise((function(t){return e.paddingAndWaitSession=t}))},e.prototype.updateObserverId=function(e){this._selfUserId!==e&&(this._selfUserId=e,this.onSelfUserIdUpdate&&this.onSelfUserIdUpdate(e))},e}();t.MagixAuthorState=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2),o="NETLESSROOM_".length;!function(e){e[e.Admin=0]="Admin",e[e.Writer=1]="Writer",e[e.Reader=2]="Reader"}(n||(n={})),t.getAccessWithToken=function(e){if(!/^NETLESSROOM_.+/.test(e)){if(/^WHITE.+/.test(e))return"writable";throw new Error("invalid room token: "+JSON.stringify(e))}var t=e.substring(o),r=i.parse(atob(t.replace(/_/g,"/").replace(/-/g,"+"))),a=parseFloat(""+r.role);if(Number.isNaN(a)||!Number.isSafeInteger(a))throw new Error("invalid room token with wrong role: "+JSON.stringify(e));switch(a){case n.Admin:case n.Writer:return"writable";case n.Reader:return"readonly";default:throw new Error("find unrecognized role from roomToken: "+a)}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(21),c=r(49),u=r(4),l=r(51),p=function(){function e(e){var t=this;this._progressTime=0,this._playbackSpeed=1,this.isPlaying=!1,this.isMaskPhaseUpdating=!1,this.didStop=!1,this.currentLine=void 0,this.startSeekingToFrameId=function(e,r){return i(t,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(o){switch(o.label){case 0:return t=r,t=Math.max(t,0),t=Math.min(t,this.framesCount),n=function(e){return i.lineFactory.createWithFrameId(i.logger,t,i.playbackSpeed,e,i.currentLine)},[4,this.startSeekingTask(e,n)];case 1:return[2,o.sent()]}}))}))},this.startSeekingToProgressTime=function(e,r){return i(t,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(o){switch(o.label){case 0:return t=r,t=Math.max(t,0),t=Math.min(t,this.duration),Number.isSafeInteger(t)||(t=Math.floor(t)),n=function(e){return i.lineFactory.createWithProgressTime(i.logger,t,i.playbackSpeed,e,i.currentLine)},[4,this.startSeekingTask(e,n)];case 1:return[2,o.sent()]}}))}))},this.afterSeeking=function(e){try{t.isMaskPhaseUpdating=!0,e.setup()}finally{t.isMaskPhaseUpdating=!1}t.changeCurrentLine(e)},this.cancelSeeking=function(e){e.destroy()},this.onLineSliceChanged=function(){t.currentLine&&(t.sliceStateUpdater.refreshReconstructorLine(t.currentLine),t.callbacks.onModified&&t.callbacks.onModified(),t.onTick(t.currentLine.beginTimestamp))},this.currentIsPlayable=function(){if(t.didStop||!t.currentLine||t.seekingNode.isSeeking)return!1;switch(t.currentLine.phase){case u.PlayerPhase.Playing:case u.PlayerPhase.Pausing:return!0;case u.PlayerPhase.PausingAndWaiting:case u.PlayerPhase.Waiting:case u.PlayerPhase.Ended:default:return!1}},this.currentPhase=function(){if(t.didStop)return s.ReconstructorPhase.Stopped;if(!t.currentLine)return s.ReconstructorPhase.WaitingFirstFrame;if(t.seekingNode.isSeeking)return s.ReconstructorPhase.Seeking;switch(t.currentLine.phase){case u.PlayerPhase.Playing:return s.ReconstructorPhase.Playing;case u.PlayerPhase.Pausing:case u.PlayerPhase.PausingAndWaiting:return s.ReconstructorPhase.Pause;case u.PlayerPhase.Waiting:return s.ReconstructorPhase.Buffering;case u.PlayerPhase.Ended:return s.ReconstructorPhase.Ended;default:throw new Error("invalid phase "+t.currentLine.phase)}},this.touchPhaseChanged=function(){t.isMaskPhaseUpdating||(t.phaseNode.touch(),t.isPlayableNode.touch())},this.onTick=function(e){var r=Math.min(e-t.beginTimestamp,t.sliceChunk.duration);t._progressTime=r,t.callbacks.onProgressTimeChanged&&t.callbacks.onProgressTimeChanged(r)},this.onCatchError=function(e){t.didStop||(t.stop(),t.callbacks.onStoppedWithError&&t.callbacks.onStoppedWithError(e))},this.onEventFire=function(e){t.callbacks.onEventFire&&t.callbacks.onEventFire(a.getEventWithDescription(e,a.EventPhase.Dispatched))},this.logger=e.logger,this.sliceChunk=e.sliceChunk,this.sequenceFetcher=e.sequenceFetcher,this.callbacks=a.wrapCallbacks(e.callbacks),this.sliceStateUpdater=e.sliceStateUpdater,this.sliceStateUpdater.onSliceChanged=this.callbacks.onSliceChanged,this.sliceStateUpdater.onLibraryNodeChanged=this.callbacks.onLibraryNodeChanged,this.seekingNode=new l.SeekingNode({startSeekingToFrameId:this.startSeekingToFrameId,startSeekingToProgressTime:this.startSeekingToProgressTime,afterSeeking:this.afterSeeking,cancelSeeking:this.cancelSeeking,updateIsSeeking:this.touchPhaseChanged}),this.isPlayableNode=new a.PhaseNode({phase:!1,onPhaseChanged:e.callbacks.onIsPlayableChanged,getCurrentPhase:this.currentIsPlayable}),this.phaseNode=new a.PhaseNode({phase:s.ReconstructorPhase.WaitingFirstFrame,onPhaseChanged:e.callbacks.onPhaseChanged,getCurrentPhase:this.currentPhase}),this.lineFactory=new c.ReconstructorLineFactory({sliceChunk:e.sliceChunk,imageFactory:e.imageFactory,sequenceFetcher:e.sequenceFetcher,toolsExtra:e.toolsExtra,enableAnimationFrame:e.enableAnimationFrame})}return Object.defineProperty(e.prototype,"trigger",{get:function(){if(!this.currentLine)throw new Error("trigger object not exist when Reconstructor's phase is "+this.phase);return this.currentLine.trigger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlayable",{get:function(){return this.isPlayableNode.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progressTime",{get:function(){return this._progressTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){return this.sliceStateUpdater.slice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceIndex",{get:function(){return this.sliceStateUpdater.sliceIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libIdentifier",{get:function(){return this.sliceStateUpdater.libIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libraryNode",{get:function(){return this.sliceStateUpdater.libraryNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomUUID",{get:function(){return this.sliceChunk.roomUUID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.sliceChunk.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framesCount",{get:function(){return this.sliceChunk.framesCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beginTimestamp",{get:function(){return this.sliceChunk.beginTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackSpeed",{get:function(){return this.currentLine?this.currentLine.playbackSpeed:this._playbackSpeed},set:function(e){this._playbackSpeed=e,this.currentLine&&(this.currentLine.playbackSpeed=e)},enumerable:!0,configurable:!0}),e.prototype.play=function(){if(this.assertNotStop(),this.phaseNode.phase!==s.ReconstructorPhase.Ended){var e=this.isPlaying;this.isPlaying=!0,e||this.seekingNode.isSeeking||(this.currentLine?this.currentLine.play():this.seekToProgressTime(0)),this.touchPhaseChanged()}},e.prototype.pause=function(){this.assertNotStop(),this.isPlaying&&!this.seekingNode.isSeeking&&this.currentLine&&this.currentLine.pause(),this.isPlaying=!1,this.touchPhaseChanged()},e.prototype.stop=function(){this.assertNotStop(),this.seekingNode.stopSeeking(),this.currentLine&&(this.currentLine.destroy(),this.currentLine=void 0),this.didStop=!0,this.touchPhaseChanged()},e.prototype.seekToFrameId=function(e){this.assertNotStop(),this.seekingNode.seekToFrameId(e)},e.prototype.seekToProgressTime=function(e){this.assertNotStop(),this.seekingNode.seekToProgressTime(e)},e.prototype.startSeekingTask=function(e,t){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=n({},this.wrapCallbacksWithTaskChecking(e,{onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame,onCatchErrorWhenFetchBuffer:this.onCatchError,onModified:this.callbacks.onModified,onSliceChanged:this.onLineSliceChanged,onEventFire:this.onEventFire,onTick:this.onTick,onPhaseChanged:this.touchPhaseChanged})),[4,t(r)];case 1:return[2,o.sent()];case 2:throw i=o.sent(),this.onCatchError(i),i;case 3:return[2]}}))}))},e.prototype.changeCurrentLine=function(e){this.currentLine&&this.currentLine.destroy(),this.currentLine=e,this.sliceStateUpdater.refreshReconstructorLine(e),this.isPlaying&&e.play(),this.callbacks.onModified&&this.callbacks.onModified(),this.onTick(e.beginTimestamp)},e.prototype.wrapCallbacksWithTaskChecking=function(e,t){var r=this,n={},i=function(i){var o=t[i];o&&(n[i]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e===r.seekingNode.currentTaskId?o.apply(void 0,t):void 0})};for(var o in t)i(o);return n},e.prototype.assertNotStop=function(){if(this.didStop)throw new Error("Reconstructor did stop")},e}();t.ReconstructorImplement=p},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(50),a=function(){function e(e){this.sliceChunk=e.sliceChunk,this.imageFactory=e.imageFactory,this.sequenceFetcher=e.sequenceFetcher,this.toolsExtra=e.toolsExtra,this.enableAnimationFrame=e.enableAnimationFrame}return e.prototype.createWithFrameId=function(e,t,r,a,s){return n(this,void 0,void 0,(function(){var n,c,u,l,p;return i(this,(function(i){switch(i.label){case 0:return n=this.sliceChunk.getFrameDescriptionWithFrameId(t),c=n.sliceIndex,u=n.frameId,l=this.sliceChunk.sliceAt(c),[4,this.sequenceFetcher.initializeWithFrameId(l,u)];case 1:return p=i.sent(),[2,new o.ReconstructorLineImplement({logger:e,imageFactory:this.imageFactory,sequenceFetcher:this.sequenceFetcher,originalReconstructorLine:s,sliceChunk:this.sliceChunk,toolsExtra:this.toolsExtra,beginSliceIndex:c,initFrameTimestamp:this.sliceChunk.beginTimestamp,sequenceInitializer:p,enableAnimationFrame:this.enableAnimationFrame,playbackSpeed:r,callbacks:a})]}}))}))},e.prototype.createWithProgressTime=function(e,t,r,a,s){return n(this,void 0,void 0,(function(){var n,c,u,l,p,h;return i(this,(function(i){switch(i.label){case 0:return n=this.sliceChunk.getFrameDescriptionWithTimestamp(t),c=n.sliceIndex,u=n.timestamp,l=this.sliceChunk.sliceAt(c),p=u+l.beginTimestamp,[4,this.sequenceFetcher.initializeWithTimestamp(l,p)];case 1:return h=i.sent(),[2,new o.ReconstructorLineImplement({logger:e,imageFactory:this.imageFactory,sequenceFetcher:this.sequenceFetcher,originalReconstructorLine:s,sliceChunk:this.sliceChunk,toolsExtra:this.toolsExtra,beginSliceIndex:c,initFrameTimestamp:this.sliceChunk.beginTimestamp+t,sequenceInitializer:h,enableAnimationFrame:this.enableAnimationFrame,playbackSpeed:r,callbacks:a})]}}))}))},e}();t.ReconstructorLineFactory=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(4);function s(e){return n(this,void 0,void 0,(function(){var t,r,n,o;return i(this,(function(i){switch(i.label){case 0:t=3,n=0,i.label=1;case 1:if(!(n<t))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,e()];case 3:return[2,i.sent()];case 4:return o=i.sent(),r=o,[3,5];case 5:return++n,[3,1];case 6:throw r}}))}))}var c=function(){function e(e){var t=this;this.isDownloading=!1,this.didDestroy=!1,this.onPlayActionFrames=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=o.sequenceInitializer,s=o.framePicker;a&&(r.length>0&&(t.image.appendActionFrames(r),r=[]),t.image=t.createImage(a,t.image),t._libIdentifier=a.libIdentifier,t._libraryNode=a.libraryNode,t.playingSliceIndex+=1,t.callbacks.onSliceChanged&&t.callbacks.onSliceChanged()),s&&r.push(s.frameBuffer)}r.length>0&&t.image.appendActionFrames(r)},this.onBufferRemainLow=function(){t.isDownloading||t.loadActionFrames()},this.onPlayerBufferPhaseChanged=function(e){t.callbacks.onPhaseChanged&&t.callbacks.onPhaseChanged(e)},this.logger=e.logger,this.imageFactory=e.imageFactory,this.sliceChunk=e.sliceChunk,this.sequenceFetcher=e.sequenceFetcher,this.toolsExtra=e.toolsExtra,this.fetchingSliceIndex=e.beginSliceIndex,this.playingSliceIndex=e.beginSliceIndex,this.callbacks=e.callbacks,this.isFirstSlice=!0,this.image=this.createImage(e.sequenceInitializer,e.originalReconstructorLine&&e.originalReconstructorLine.image),this.latestFetchingFrameId=this.image.frameId,this.latestPlayingFrameId=this.image.frameId,this.beginTimestamp=void 0===e.initFrameTimestamp?this.image.timestamp:e.initFrameTimestamp,this._libIdentifier=e.sequenceInitializer.libIdentifier,this._libraryNode=e.sequenceInitializer.libraryNode,this.playerBuffer=a.playerBufferFactory.create({logger:e.logger,mode:a.PlayerBufferMode.Reconstruction,enableAnimationFrame:e.enableAnimationFrame,initFrameTimestamp:this.beginTimestamp,endFrameTimestamp:this.sliceChunk.beginTimestamp+this.sliceChunk.duration,callbacks:{onBufferRemainLow:this.onBufferRemainLow,onPlayActionFrames:this.onPlayActionFrames,onPhaseChanged:this.onPlayerBufferPhaseChanged,onTick:e.callbacks.onTick}}),this.playerBuffer.playbackSpeed=e.playbackSpeed}return Object.defineProperty(e.prototype,"trigger",{get:function(){return this.image.trigger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libIdentifier",{get:function(){return this._libIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libraryNode",{get:function(){return this._libraryNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackSpeed",{get:function(){return this.playerBuffer.playbackSpeed},set:function(e){this.playerBuffer.playbackSpeed=e},enumerable:!0,configurable:!0}),e.prototype.createImage=function(e,t){var r=e.snapshot,n=e.actionFrames,i=e.akkoSerVersion,a=e.libraryNode,s=this.imageFactory.createWithSnapshot({logger:this.logger,library:o.getLibraryWithClass(a.libraryClass),snapshotFrame:r,actionFrames:n,originalImage:t,toolsExtra:this.toolsExtra,roomUUID:this.sliceChunk.roomUUID,includesFrameHash:!1,ignoreHashChecking:!0,snapshotDeserializerVersion:i,actionDeserializerVersion:i,callbacks:{onModified:this.callbacks.onModified,onEventFire:this.callbacks.onEventFire,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame}});return s.modifiable=!1,s},Object.defineProperty(e.prototype,"slice",{get:function(){return this.sliceChunk.sliceAt(this.playingSliceIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceIndex",{get:function(){return this.playingSliceIndex},enumerable:!0,configurable:!0}),e.prototype.play=function(){this.playerBuffer.play()},e.prototype.pause=function(){this.playerBuffer.pause()},e.prototype.setup=function(){var e=this.sliceChunk.beginTimestamp+this.sliceChunk.duration;this.beginTimestamp<e?this.loadActionFrames():this.playerBuffer.completePushFrames()},e.prototype.destroy=function(){this.didDestroy||(this.playerBuffer.pause(),this.image.destroy(),this.didDestroy=!0)},Object.defineProperty(e.prototype,"phase",{get:function(){return this.playerBuffer.phase},enumerable:!0,configurable:!0}),e.prototype.isRemainFramesToFetch=function(){return this.fetchingSliceIndex<this.sliceChunk.slicesCount},e.prototype.loadActionFrames=function(){var e=this;this.fillActionFramesIntoBuffer().catch((function(t){return e.logger.error(t)}))},e.prototype.fillActionFramesIntoBuffer=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o;return i(this,(function(i){switch(i.label){case 0:if(!this.isRemainFramesToFetch())return[3,5];i.label=1;case 1:return i.trys.push([1,3,4,5]),this.isDownloading=!0,[4,this.fetchFrames()];case 2:return e=i.sent(),t=this.sliceChunk.beginTimestamp+this.sliceChunk.duration,r=this.removeTimestampOverFrames(e,t),(n=e[e.length-1])&&(this.latestPlayingFrameId=n.frameId),this.shouldPushEndSpaceHolderFrame(e,r,t)&&e.push({frameId:this.latestPlayingFrameId+1,timestamp:t}),e.length>0&&this.playerBuffer.pushFrames(e),this.isRemainFramesToFetch()||this.playerBuffer.completePushFrames(),[3,5];case 3:return o=i.sent(),this.callbacks.onCatchErrorWhenFetchBuffer&&this.callbacks.onCatchErrorWhenFetchBuffer(o),[3,5];case 4:return this.isDownloading=!1,[7];case 5:return[2]}}))}))},e.prototype.shouldPushEndSpaceHolderFrame=function(e,t,r){var n=e[e.length-1];return(t||!this.isRemainFramesToFetch())&&(!n||n.timestamp<r)},e.prototype.fetchFrames=function(){return n(this,void 0,void 0,(function(){var t,r,n,o,a,c,u,l,p,h,d,f=this;return i(this,(function(i){switch(i.label){case 0:for(;;){if(!(t=this.sliceChunk.sliceAt(this.fetchingSliceIndex)))return[2,[]];if((r=t.framesCount-this.latestFetchingFrameId)>0)break;this.latestFetchingFrameId=0,this.latestPlayingFrameId=0,this.fetchingSliceIndex+=1,this.isFirstSlice=!1}return n=Math.min(r,e.fetchFramesCountOnce),o=0===this.latestFetchingFrameId&&!this.isFirstSlice,[4,Promise.all([s((function(){return f.sequenceFetcher.fetchFramePickers(t,f.latestFetchingFrameId,n)})),o?s((function(){return f.sequenceFetcher.initializeWithFrameId(t,f.latestFetchingFrameId)})):Promise.resolve(void 0)])];case 1:for(a=i.sent(),c=a[0],u=a[1],l=[],p=0,h=c;p<h.length;p++)d=h[p],this.latestFetchingFrameId=d.frameId,l.push({frameId:d.frameId,timestamp:d.timestamp,framePicker:d});return u&&(l[0].sequenceInitializer=u),[2,l]}}))}))},e.prototype.removeTimestampOverFrames=function(e,t){var r=e.findIndex((function(e){return e.timestamp>t}));return-1!==r&&(e.splice(r,e.length-r),!0)},e.fetchFramesCountOnce=600,e}();t.ReconstructorLineImplement=c},function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FrameId=0]="FrameId",e[e.ProgressTime=1]="ProgressTime"}(n||(n={}));var s=function(){function e(e){this.isRunningLoop=!1,this.task=null,this.id=0,this.callbacks=Object.freeze(i({},e))}return Object.defineProperty(e.prototype,"currentTaskId",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSeeking",{get:function(){return this.isRunningLoop},enumerable:!0,configurable:!0}),e.prototype.stopSeeking=function(){this.id+=1},e.prototype.seekToFrameId=function(e){this.task&&this.task.mode===n.FrameId&&this.task.value===e||(this.task={id:this.id+=1,mode:n.FrameId,value:e},this.startTaskLoop().catch((function(e){return console.error(e)})))},e.prototype.seekToProgressTime=function(e){this.task&&this.task.mode===n.ProgressTime&&this.task.value===e||(this.task={id:this.id+=1,mode:n.ProgressTime,value:e},this.startTaskLoop().catch((function(e){return console.error(e)})))},e.prototype.startTaskLoop=function(){return o(this,void 0,void 0,(function(){var e,t,r,i,o;return a(this,(function(a){switch(a.label){case 0:if(this.isRunningLoop)return[3,11];a.label=1;case 1:a.trys.push([1,,10,11]),this.isRunningLoop=!0,this.callbacks.updateIsSeeking(),a.label=2;case 2:if(!this.task)return[3,9];switch(e=this.task,t=e.id,r=e.mode,i=e.value,o=void 0,r){case n.FrameId:return[3,3];case n.ProgressTime:return[3,5]}return[3,7];case 3:return[4,this.callbacks.startSeekingToFrameId(t,i)];case 4:return o=a.sent(),[3,8];case 5:return[4,this.callbacks.startSeekingToProgressTime(t,i)];case 6:return o=a.sent(),[3,8];case 7:throw new Error("invalid mode "+r);case 8:return this.id===t?(this.task=null,this.callbacks.afterSeeking(o)):this.callbacks.cancelSeeking(o),[3,2];case 9:return[3,11];case 10:return this.isRunningLoop=!1,this.callbacks.updateIsSeeking(),[7];case 11:return[2]}}))}))},e}();t.SeekingNode=s},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(1),c=r(22),u=r(0);function l(e,t,r){var n=Math.min(e,r),i=Math.max(e,r),o=t;return t<n?o=n:t>i&&(o=i),o}var p=function(){function e(e){var t=this;this.fetchLibraryNode=function(e,r){return i(t,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this.previousLibraryNode&&this.previousLibraryNode.libIdentifier===r?[2,this.previousLibraryNode.libraryNode]:[3,1];case 1:return[4,this.libraryNodeFetcher({appIdentifier:e.appIdentifier,appVersion:e.appVersion,appHash:e.appHash,libIdentifier:r})];case 2:return t=n.sent(),this.previousLibraryNode=Object.freeze({libIdentifier:r,libraryNode:t}),[2,t]}}))}))},this.logger=e.logger,this.fetcher=e.fetcher,this.roomToken=e.roomToken,this.libraryNodeFetcher=e.libraryNodeFetcher}return e.prototype.initializeWithTimestamp=function(e,t){return i(this,void 0,void 0,(function(){var r,i,a,s;return o(this,(function(o){switch(o.label){case 0:return r=e.libIdentifier,[4,Promise.all([this.sequenceImageInitializerWithTimestamp(e,t),this.fetchLibraryNode(e,r)])];case 1:return i=o.sent(),a=i[0],s=i[1],[2,n(n({},a),{libraryNode:s,libIdentifier:r})]}}))}))},e.prototype.initializeWithFrameId=function(e,t){return i(this,void 0,void 0,(function(){var r,i,a,s;return o(this,(function(o){switch(o.label){case 0:return r=e.libIdentifier,[4,Promise.all([this.sequenceImageInitializerWithFrameId(e,t),this.fetchLibraryNode(e,r)])];case 1:return i=o.sent(),a=i[0],s=i[1],[2,n(n({},a),{libraryNode:s,libIdentifier:r})]}}))}))},e.prototype.sequenceImageInitializerWithTimestamp=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i,s,u,p,h,d,f,y,A;return o(this,(function(o){switch(o.label){case 0:return r=l(e.beginTimestamp,t,e.beginTimestamp+e.duration),[4,this.fetcher.fetch("persistence")];case 1:return n=o.sent(),i=a.stringify({timestamp:r}),s="https://persistence/pv/rooms/"+e.roomUUID+"/slices/"+e.uuid+"/snapshots?"+i,[4,n.fetchJSON(s,{method:"get",headers:{"content-type":"application/json",token:this.roomToken}})];case 2:return(u=o.sent())||(this.logger.warn("cannot find snapshot that timestamp="+r+" and slice="+e.uuid),u={frameId:0,timestamp:e.beginTimestamp}),[4,this.fetchFrameRouterPicker(e,u.frameId)];case 3:for(p=o.sent(),h=0,d=0;d<p.framesCount&&p.timestampAt(d)<=t;d++)h+=1;return[4,this.fetchSnapshot(e,u.frameId)];case 4:return f=o.sent(),0!==h?[3,5]:(A=[],[3,7]);case 5:return[4,this.fetchFramePickers(e,u.frameId,h)];case 6:A=o.sent(),o.label=7;case 7:return y=A,[2,{snapshot:f.frameBuffer,actionFrames:y.map((function(e){return e.frameBuffer})),akkoSerVersion:c.convertToAkkoSerVersion(e.akkoVersion)}]}}))}))},e.prototype.sequenceImageInitializerWithFrameId=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i,a;return o(this,(function(o){switch(o.label){case 0:return r=l(0,t,e.framesCount-1),[4,this.fetchSnapshot(e,r)];case 1:return n=o.sent(),0!=(i=r-n.frameId)?[3,2]:[2,{snapshot:n.frameBuffer,actionFrames:[],akkoSerVersion:c.convertToAkkoSerVersion(e.akkoVersion)}];case 2:return[4,this.fetchFramePickers(e,n.frameId,i)];case 3:return a=o.sent(),[2,{snapshot:n.frameBuffer,actionFrames:a.map((function(e){return e.frameBuffer})),akkoSerVersion:c.convertToAkkoSerVersion(e.akkoVersion)}]}}))}))},e.prototype.fetchFramePickers=function(e,t,r){return i(this,void 0,void 0,(function(){var n,i,a,s,c,l,p,d,f,y,A;return o(this,(function(o){switch(o.label){case 0:return[4,this.getAssetsFetcherAndURL(e,"framesRouter")];case 1:return n=o.sent(),i=n.fetcher,a=n.url,[4,h.pick(i,a,t,r)];case 2:return s=o.sent(),[4,this.fetchBody(e,"framesBody",s.offset,s.length)];case 3:for(c=o.sent(),l=[],p=0;p<s.framesCount&&(d=s.offsetAt(p)-s.offset,f=s.lengthAt(p),!(c.byteLength<d+f));++p)y=c.slice(d,f),A=new u.FramePicker(y),l.push(A);return[2,l]}}))}))},e.prototype.fetchSnapshot=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i,a,s,c,l,p;return o(this,(function(o){switch(o.label){case 0:return[4,this.getAssetsFetcherAndURL(e,"snapshotsRouter")];case 1:return r=o.sent(),n=r.fetcher,i=r.url,a=Math.floor(t/e.snapshotIdInterval),[4,h.pick(n,i,a,1)];case 2:if(0===(s=o.sent()).framesCount)throw new Error("can't find snapshot with frameId "+t);return c=s.offsetAt(0),l=s.lengthAt(0),[4,this.fetchBody(e,"snapshotsBody",c,l)];case 3:return p=o.sent(),[2,new u.FramePicker(p)]}}))}))},e.prototype.fetchFrameRouterPicker=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i,a;return o(this,(function(o){switch(o.label){case 0:return[4,this.getAssetsFetcherAndURL(e,"framesRouter")];case 1:return r=o.sent(),n=r.fetcher,i=r.url,a=Math.min(e.framesCount-t,e.snapshotIdInterval-1),[2,h.pick(n,i,t,a)]}}))}))},e.prototype.fetchBody=function(e,t,r,n){return i(this,void 0,void 0,(function(){var i,a,s,c;return o(this,(function(o){switch(o.label){case 0:return[4,this.getAssetsFetcherAndURL(e,t)];case 1:return i=o.sent(),a=i.fetcher,s=i.url,[4,a.fetchBuffer(s,{method:"get",headers:{"content-type":"application/json",Accept:"application/octet-stream",Range:"bytes="+r+"-"+(r+n)}})];case 2:if(!(c=o.sent()))throw new Error("can't find \""+s+'"');return[2,c]}}))}))},e.prototype.getAssetsFetcherAndURL=function(e,t){var r=e.uuid,n=e.roomUUID,a=e.token;return i(this,void 0,void 0,(function(){var e,i,s,c;return o(this,(function(o){switch(o.label){case 0:switch(t){case"framesBody":e="frames.body";break;case"framesRouter":e="frames.router";break;case"snapshotsBody":e="snapshots.body";break;case"snapshotsRouter":e="snapshots.router"}return a?(i="assets-auth",s=a[t]):i="assets",c="https://"+i+"/"+n+"/"+r+"/"+e,s&&(c+="?auth_key="+s),[4,this.fetcher.fetch(i)];case 1:return[2,{fetcher:o.sent(),url:c}]}}))}))},e}();t.SequenceFetcher=p;var h=function(){function e(e,t){this.buffer=e,this.framesCount=t,this.framesCount>0?this.offset=this.offsetAt(0):this.offset=Number.NaN}return e.pick=function(t,r,n,a){return i(this,void 0,void 0,(function(){var i,c,u,l,p;return o(this,(function(o){switch(o.label){case 0:return c=n*(i=24),u=(n+a)*i-1,[4,t.fetchBuffer(r,{method:"get",headers:{"content-type":"application/json",Accept:"application/octet-stream",Range:"bytes="+c+"-"+u}})];case 1:return(l=o.sent())||(l=s.createBuffer(0)),p=Math.floor(l.byteLength/i),[2,new e(l,p)]}}))}))},Object.defineProperty(e.prototype,"length",{get:function(){if(void 0===this._length){this._length=0;for(var e=0;e<this.framesCount;++e)this._length+=this.lengthAt(e)}return this._length},enumerable:!0,configurable:!0}),e.prototype.timestampAt=function(e){var t=24*e+0;return this.buffer.getUint64(t)},e.prototype.offsetAt=function(e){var t=24*e+8;return this.buffer.getUint64(t)},e.prototype.lengthAt=function(e){var t=24*e+16;return this.buffer.getUint64(t)},e}()},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.slices=Object.freeze(n(e.slices).sort((function(e,t){return e.beginTimestamp-t.beginTimestamp}))),this.beginAt=e.beginAt,this.endAt=e.endAt,this.roomUUID=this.getRoomUUID(),this.framesCount=this.getFramesCount()}return e.prototype.getRoomUUID=function(){for(var e=this.slices[0].roomUUID,t=1;t<this.slices.length;++t)if(e!==this.slices[t].roomUUID)throw new Error("all slices should have the same roomUUID");return e},e.prototype.getFramesCount=function(){for(var e=0,t=0,r=this.slices;t<r.length;t++)e+=r[t].framesCount;return e},Object.defineProperty(e.prototype,"beginTimestamp",{get:function(){return this.beginAt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.endAt-this.beginAt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slicesCount",{get:function(){return this.slices.length},enumerable:!0,configurable:!0}),e.prototype.sliceAt=function(e){return this.slices[e]},e.prototype.getFrameDescriptionWithFrameId=function(e){for(var t=e,r=0,n=0;n<this.slices.length;++n){var i=this.slices[n];if(r=n,t<i.framesCount)break;t-=i.framesCount}return{frameId:t,sliceIndex:r}},e.prototype.getFrameDescriptionWithTimestamp=function(e){for(var t=e+this.beginAt,r=0,n=0;n<this.slices.length;++n){var i=this.slices[n];if(r=n,t<i.beginTimestamp+i.duration)break}return{sliceIndex:r,timestamp:Math.max(0,t-this.slices[r].beginTimestamp)}},e}();t.SliceChunk=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this._libraryNodeFetcher=e,this.libraryNodeFetcher=function(e){return t._libraryNode&&t._libIdentifier===e.libIdentifier?Promise.resolve(t._libraryNode):t._libraryNodeFetcher(e)}}return Object.defineProperty(e.prototype,"sliceIndex",{get:function(){return this._sliceIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libIdentifier",{get:function(){return this._libIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libraryNode",{get:function(){return this._libraryNode},enumerable:!0,configurable:!0}),e.prototype.refreshReconstructorLine=function(e){e.libIdentifier===this._libIdentifier&&e.libraryNode===this._libraryNode||(this._libIdentifier=e.libIdentifier,this._libraryNode=e.libraryNode,this.onLibraryNodeChanged&&this.onLibraryNodeChanged(this._libIdentifier,this._libraryNode)),e.sliceIndex!==this._sliceIndex&&(this._sliceIndex=e.sliceIndex,this._slice=e.slice,this.onSliceChanged&&this.onSliceChanged(this._slice,this._sliceIndex))},e}();t.SliceStateUpdater=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.findIdentifierWith=n.findIdentifierWith,t.createElement=n.createElement;var i=r(1);t.resolve=i.resolve,t.wrapBuffer=i.wrapBuffer,t.AkkoVersion=i.AkkoVersion;var o=r(6);t.copy=o.copy,t.isAkkoWrappedObjectAccessible=o.isAkkoWrappedObjectAccessible,t.isInstanceOf=o.isInstanceOf,t.findClassId=o.findClassId,t.findClass=o.findClass;var a=r(0);t.__context=a.__context,t.getEnvironment=a.getEnvironment,t.getCurrentTimestamp=a.getCurrentTimestamp,t.getAuthorId=a.getAuthorId,t.hasUser=a.hasUser,t.getUsersCount=a.getUsersCount,t.getUser=a.getUser,t.getUserIds=a.getUserIds,t.getSnapshot=a.getSnapshot,t.isBuffer=a.isBuffer,t.createBuffer=a.createBuffer,t.getResource=a.getResource,t.event=a.event,t.noEffects=a.noEffects,t.transient=a.transient,t.Environment=a.Environment,t.AdminObserverId=a.AdminObserverId,t.EventScope=a.EventScope},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(57))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(58))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),a=r(0),s=r(59),c=r(11),u=function(){function e(e){var t=this;this.fetchLibraryNode=function(e){return n(t,void 0,void 0,(function(){return i(this,(function(t){if(this.library.appIdentifier!==e.appIdentifier)throw new Error("invalid appIdentifier "+this.library.appIdentifier+", wanna "+e.appIdentifier);if(this.library.appVersion!==e.appVersion)throw new Error("invalid appVersion "+this.library.appVersion+", wanna "+e.appVersion);if(this.library.appHash!==e.appHash)throw new Error("invalid appHash "+this.library.appHash+", wanna "+e.appHash);return[2,{libraryClass:this.library.rootClass,appVersion:this.library.akkoVersion}]}))}))},this.library=e.library,this.methodNameToIdMap=this.createMethodNameToIdMap(e.library),this.actionFrameHelper=new a.ActionFrameHelper(e.library,e.proxyRuntime.objectOperator,e.proxyRuntime.frameHandler,o.AkkoSerVersion.V1),this.objectOperator=e.proxyRuntime.objectOperator,this.includesFrameHash=e.includesFrameHash,this.logger=e.logger,this.fetcher=new c.FetcherFactory({appIdentifier:e.appIdentifier,shuntApiHosts:e.shuntApiHosts}).create(e.region)}return e.prototype.create=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,(n=new s.RoomHelperImplement(this.fetcher,this.methodNameToIdMap,this.objectOperator,this.fetchLibraryNode,this.actionFrameHelper,this.includesFrameHash,this.logger,o)).connect(e,t,r)];case 1:return i.sent(),[2,n]}}))}))},e.prototype.createMethodNameToIdMap=function(e){for(var t={},r=a.getClassReflection(e.rootClass),n=0;n<r.methodNames.length;++n)t[r.methodNames[n]]=n;return t},e}();t.RoomHelperFactory=u},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=r(9),s=function(){function e(e,t,r,n,i,a,s,c){var u=this;this.fetcher=e,this.methodNameToIdMap=t,this.objectOperator=r,this.libraryNodeFetcher=n,this.actionFrameHelper=i,this.includesFrameHash=a,this.logger=s,this.delegate=c,this.illusionQueue=[],this.frameGenerator=null,this.connectedTimestamp=0,this.isDisconnected=!1,this.onReceivedScopeSlices=function(e){u.frameGenerator&&u.frameGenerator.appendScopeSlices(e)},this.onReceivedActionFrame=function(e){if(u.frameGenerator){var t=new o.FramePicker(e),r=t.authorId;if(u.frameGenerator.author.userId===r){var n=u.takeIllusionFrame(t.originalFrameId);n&&u.delegate.reportRTT(u,t.timestamp-n.timestamp)}}},this.onKickedWithReason=function(e){u.onDisconnectWithError(new Error("kick by server with reason "+JSON.stringify(e)))},this.onDisconnectWithError=function(e){u.isDisconnected=!0,u.delegate.reportSessionDisconnected(u,e,Date.now()-u.connectedTimestamp)}}return e.prototype.connect=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s,c,u,l;return i(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,a.connectWebSocketSession({uuid:e,fetcher:this.fetcher,roomToken:t,clientVersion:"2.6.4",logger:this.logger,markWritable:!0,access:"writable",reconnectionOptions:{disableReconnect:!0},objectOperator:this.objectOperator,libraryNodeFetcher:this.libraryNodeFetcher,callbacks:{onReceivedActionFrame:this.onReceivedActionFrame,onReceivedScopeSlices:this.onReceivedScopeSlices,onDisconnectedByServer:this.onDisconnectWithError,onDisconnectedWithSocketError:this.onDisconnectWithError,onKickWithReason:this.onKickedWithReason}})];case 1:return o=i.sent(),s=o.session,c=o.connection,u=0,r?(u=Date.now(),l=this,[4,this.getIllusionFrameGenerator(c)]):[3,3];case 2:l.frameGenerator=i.sent(),i.label=3;case 3:return this.socketSession=s,this.connectedTimestamp=Date.now(),r&&this.delegate.reportBecomeWritableInterval(this,this.connectedTimestamp-u),this.delegate.reportConnectionInterval(this,this.connectedTimestamp-n),[2]}}))}))},Object.defineProperty(e.prototype,"isWritable",{get:function(){return!!this.frameGenerator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this.socketSession.uuid},enumerable:!0,configurable:!0}),e.prototype.getIllusionFrameGenerator=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:return[4,e.updateToWritable(null,null)];case 1:if(!(t=i.sent()))throw new Error("can't become writable");return r=new o.ScopeStorage(t.initializeSlices),n=new o.ImageAuthor(t.userId,r,1),[2,new o.IllusionFrameGenerator(n,this.actionFrameHelper,this.includesFrameHash)]}}))}))},e.prototype.invokeMethod=function(e,t){if(this.assertDisconnected(),!this.frameGenerator)throw new Error("it's not writable");var r=this.methodNameToIdMap[e],n=Date.now();if(void 0===r)throw new Error("can't find callable method "+JSON.stringify(e));var i=this.frameGenerator.author.allocateIdentifierGenerator(),o=this.frameGenerator.createInvokerFrame(r,t,n,i);this.handleGeneratedFrame(o)},e.prototype.dispatchEvent=function(e,t){if(this.assertDisconnected(),!this.frameGenerator)throw new Error("it's not writable");var r=Date.now(),n=this.frameGenerator.author.allocateIdentifierGenerator(),i=this.frameGenerator.createEventFrame(e,t,r,n);this.handleGeneratedFrame(i)},e.prototype.handleGeneratedFrame=function(e){var t=new o.FramePicker(e);this.illusionQueue.push({frameId:t.frameId,timestamp:t.timestamp}),this.illusionQueue.length>1200&&this.illusionQueue.shift(),this.socketSession.connection&&this.socketSession.connection.sendActionFrame(e)},e.prototype.disconnect=function(){this.assertDisconnected(),this.isDisconnected=!0,this.socketSession.dispose()},e.prototype.assertDisconnected=function(){if(this.isDisconnected)throw new Error("was disconnected")},e.prototype.takeIllusionFrame=function(e){for(var t=0;t<this.illusionQueue.length;++t){var r=this.illusionQueue[t];if(r.frameId===e)return this.illusionQueue.splice(t,1),r}},e}();t.RoomHelperImplement=s}]))},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=39)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(40)),n(r(41)),n(r(109)),n(r(110)),n(r(111)),n(r(112)),n(r(113)),n(r(114)),n(r(115)),n(r(116))},function(e,t){e.exports=r(2)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(44)),n(r(60));var i=r(64);t.VisionsHub=i.VisionsHub;var o=r(5);t.RenderLayoutMode=o.RenderLayoutMode,t.AbstractRenderEngine=o.AbstractRenderEngine},function(e,t,r){"use strict";var n,i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Start=0]="Start",e[e.Update=1]="Update",e[e.End=2]="End",e[e.Other=3]="Other"}(n=t.EventPhase||(t.EventPhase={}));var o=function(){function e(e,t){this._disable=!1,this.onCancelEvent=e,this.adapterNodes=Object.freeze(t.map((function(e){var t={},r={};return e.setEventDescriptionStateGetter&&e.setEventDescriptionStateGetter((function(e){var n=t[e];return n?{payload:n,isCanceled:!!r[e]}:void 0})),{adapter:e,payloads:t,canceledMap:r}})))}return Object.defineProperty(e.prototype,"disable",{get:function(){return this._disable},set:function(e){this._disable!==e&&(this._disable=e,e&&this.cancel())},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){var e,t;try{for(var r=i(this.adapterNodes),n=r.next();!n.done;n=r.next()){var o=n.value,a=o.adapter,s=o.payloads,c=o.canceledMap,u={},l=!1;for(var p in s)p in c||(u[p]=s[p],c[p]=!0,l=!0);if(l){var h=a.createCancelEvent(u);h&&this.onCancelEvent(h)}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.interruptEvent=function(e){var t,r,o=this.adapterNodes.find((function(t){return t.adapter.isEventAccessible(e)}));if(o){var a,s=o.adapter,c=o.canceledMap,u=s.takeEventDescription(e);a=u?"number"==typeof u.length?u:[u]:[];var l=[];try{for(var p=i(a),h=p.next();!h.done;h=p.next()){var d=h.value;if(d.phase===n.Other)l.push(d);else{var f=this.handleAndCheckIgnoreEventDescription(o,d),y=c[d.identifier];f||y||l.push(d)}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return!this._disable&&l.length>0?s.convertToEvent(e,l):null}return e},e.prototype.handleAndCheckIgnoreEventDescription=function(e,t){var r=e.payloads,i=e.canceledMap,o=t.identifier,a=t.phase,s=t.payload;switch(a){case n.Start:return o in r||(r[o]=s,this._disable&&(i[o]=!0),!1);case n.Update:return!(o in r)||(r[o]=s,!1);case n.End:if(o in r){var c=!!i[o];return delete r[o],delete i[o],c}return!0;default:return!0}},e}();t.ContinuityNode=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(43);t.SceneImplement=n.SceneImplement;var i=r(10);t.ComponentUpdaterBehavior=i.ComponentUpdaterBehavior;var o=r(108);t.sortComponents=o.sortComponents;var a=r(18);t.AbstractComponentNode=a.AbstractComponentNode;var s=r(19);t.ComponentDefinitionImplement=s.ComponentDefinitionImplement;var c=r(38);t.ComponentImplement=c.ComponentImplement;var u=r(37);t.ComponentGroupImplement=u.ComponentGroupImplement},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Normal=0]="Normal",e[e.Preview=1]="Preview"}(t.RenderLayoutMode||(t.RenderLayoutMode={}));var n=function(){function e(t){this.definitions={},this.id=""+e.nextId,this.orderIndex=t,e.nextId+=1}return e.prototype.addDefinition=function(e){this.definitions[e.id]=e},e.nextId=0,e}();t.AbstractRenderEngine=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEquals=function e(t,r){if(A(t)!=A(r))return!1;if("object"!=A(t)||null===t)return t===r;if(t.constructor!==r.constructor)return!1;if(t.constructor===Object){for(var n in t){if(!(n in r))return!1;if(!e(t[n],r[n]))return!1}for(var n in r)if(!(n in t))return!1;return!0}if(t.constructor===Array){var i=t,o=r;if(i.length!==o.length)return!1;for(var a=0;a<i.length;++a)if(!e(t[a],r[a]))return!1;return!0}return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasKey=function(e){for(var t in e)return!0;return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valueWithDefault=function(e,t){return void 0===e?t:e},t.numberWithDefault=function(e,t){return"number"==typeof e?e:t}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.listeners=[]}return e.prototype.dispatch=function(e){var t,r;try{for(var i=n(this.listeners),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e)}catch(e){console.error(e)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.addListener=function(e){-1===this.listeners.indexOf(e)&&this.listeners.push(e)},e.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},e.prototype.removeAllListeners=function(){this.listeners.splice(0)},e}();t.EventDispatcher=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.VisibleUpdated=2]="VisibleUpdated",e[e.AppearUpdated=3]="AppearUpdated",e[e.PropertiesUpdated=4]="PropertiesUpdated"}(t.ComponentUpdaterBehavior||(t.ComponentUpdaterBehavior={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(4),s=r(5),c=r(45),u=r(8);!function(e){e[e.HighQuality=0]="HighQuality",e[e.PerformanceWhileTransition=1]="PerformanceWhileTransition"}(o=t.CanvasRenderMode||(t.CanvasRenderMode={}));var l=function(e){function t(t){var r=e.call(this,t.orderIndex)||this;return r.constructors={},r.getRenderConstructor=function(e){return r.constructors[e.id]},r.fixedSize=t.fixedSize,r.renderMode=u.valueWithDefault(t.renderMode,o.HighQuality),r}return i(t,e),t.prototype.bind=function(e,t){if(!(e instanceof a.ComponentDefinitionImplement))throw new Error("it is not ComponentDefinition");if(this.constructors[e.id])throw new Error("define duplicated ComponentDefinition");this.constructors[e.id]=t,e.addEngine(this,{isVisible:t.isVisible}),this.addDefinition(e)},t.prototype.createRenderLayout=function(e){return new c.CanvasRenderLayout({engine:this,screen:e.screen,tree:e.tree,visions:e.visions,fixedSize:this.fixedSize,renderMode:this.renderMode,getRenderConstructor:this.getRenderConstructor,onRenderDuration:e.onRenderDuration})},t}(s.AbstractRenderEngine);t.CanvasRenderEngineImplement=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),i=function(){function e(e,t,r,n){var i=this;this.row0=e,this.row1=t,this.column0=r,this.column1=n,this.forEach=function(e){for(var t=i,r=t.row0,n=t.row1,o=t.column0,a=t.column1,s=r;s<n;++s)for(var c=o;c<a;++c)if(e(s,c))return!0;return!1}}return e.prototype.toString=function(){return"[row0="+this.row0+" row1="+this.row1+" column0="+this.column0+" column1="+this.column1+"]"},e.rectToRange=function(t,r){var n=t.originX,i=t.originY,o=t.width,a=t.height,s=r.width,c=r.height,u=Math.floor(i/c),l=Math.floor(n/s);return new e(u,Math.floor((i+a)/c)+1,l,Math.floor((n+o)/s)+1)},e.cellToRect=function(e,t,r){var n=r.width,i=r.height;return{originX:t*n,originY:e*i,width:n,height:i}},e.calcIntersection=function(t,r){var n=Math.max(t.row0,r.row0),i=Math.min(t.row1,r.row1),o=Math.max(t.column0,r.column0),a=Math.min(t.column1,r.column1);return n<i&&o<a?new e(n,i,o,a):null},e.calcDiff=function(e,t){var r=this.calcIntersection(e,t);return{addedRange:e.excludeForEach(t),removedRange:t.excludeForEach(e),keepRange:r?{forEach:r.forEach}:n.emptyGridRangeForEach}},e.prototype.excludeForEach=function(e){var t=this.row0,r=this.row1,n=this.column0,i=this.column1,o=t,a=this.clamp(t,e.row0,r),s=this.clamp(t,e.row1,r),c=r,u=n,l=this.clamp(n,e.column0,i),p=this.clamp(n,e.column1,i),h=i;return{forEach:function(e){for(var t=o;t<a;++t)for(var r=n;r<i;++r)if(e(t,r))return!0;for(t=s;t<c;++t)for(r=n;r<i;++r)if(e(t,r))return!0;for(t=a;t<s;++t)for(r=u;r<l;++r)if(e(t,r))return!0;for(t=a;t<s;++t)for(r=p;r<h;++r)if(e(t,r))return!0;return!1}}},e.prototype.clamp=function(e,t,r){var n=t;return n<e?n=e:n>r&&(n=r),n},e.isEquals=function(e,t){return e.row0===t.row0&&e.row1===t.row1&&e.column0===t.column0&&e.column1===t.column1},Object.defineProperty(e.prototype,"rowsCount",{get:function(){return this.row1-this.row0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnsCount",{get:function(){return this.column1-this.column0},enumerable:!0,configurable:!0}),e.prototype.includes=function(e,t){return this.row0<=e&&e<this.row1&&this.column0<=t&&t<this.column1},e.prototype.includesRange=function(e){var t=e.row0,r=e.row1,n=e.column0,i=e.column1;return this.row0<=t&&r<=this.row1&&this.column0<=n&&i<=this.column1},e.prototype.merge=function(t,r,n){for(var i=new e(Math.floor(this.row0/t),Math.ceil(this.row1/t),Math.floor(this.column0/r),Math.ceil(this.column1/r)),o=i.row0,a=i.row1,s=i.column0,c=i.column1,u=o;u<a;++u)for(var l=s;l<c;++l){var p=!1,h=u*t,d=(u+1)*t,f=l*r,y=(l+1)*r;h<this.row0&&(h=this.row0,p=!0),d>this.row1&&(d=this.row1,p=!0),f<this.column0&&(f=this.column0,p=!0),y>this.column1&&(y=this.column1,p=!0);var A=new e(h,d,f,y);A.rowsCount>0&&A.columnsCount>0&&n(u,l,A,p)}return i},e.prototype.fork=function(t,r,n){for(var i=this.row0,o=this.row1,a=this.column0,s=this.column1,c=i;c<o;++c)for(var u=a;u<s;++u)n(c,u,new e(c*t,(c+1)*t,u*r,(u+1)*r));return new e(this.row0*t,this.row1*t,this.column0*r,this.column1*r)},e}();t.GridRange=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(52);t.ProtoTree=n.ProtoTree;var i=r(24);t.ProtoTreeDiff=i.ProtoTreeDiff;var o=r(25);t.isTreeGroupNode=o.isTreeGroupNode,t.isTreeLeafNode=o.isTreeLeafNode;var a=r(54);t.ShadowList=a.ShadowList},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65);t.ScreenImplement=n.ScreenImplement;var i=r(16);t.AnimationPriority=i.AnimationPriority;var o=r(104);t.LegacyLayoutNode=o.LegacyLayoutNode},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(30)),n(r(93))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ComponentMoving=0]="ComponentMoving",e[e.CameraMoving=1]="CameraMoving",e[e.Rendering=2]="Rendering"}(t.AnimationPriority||(t.AnimationPriority={}))},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);function o(e,t){for(var r=[],n=e;n.parent;)r.push(n),n=n.parent;for(var i=s(t),o=r.length-1;o>=0;o--){var a=r[o].value,c=l(a,i);if(!c){i=null;break}i=u(i,c,a)}return i}function a(e,t,r,o){var s,c;try{for(var p=n(e),h=p.next();!h.done;h=p.next()){var d=h.value.value,f=l(d,t);switch(d.kind){case i.ComponentKind.Component:var y=d;f?r(y,f):o(y);break;case i.ComponentKind.Group:if(f){var A=d;a(A.treeNode,u(t,f,A),r,o)}}}}catch(e){s={error:e}}finally{try{h&&!h.done&&(c=p.return)&&c.call(p)}finally{if(s)throw s.error}}}function s(e){var t=e.camera,r=e.width,n=e.height;return{scene:{dx:0,dy:0,scale:1},screen:{dx:-(t.centerX-r/t.scale/2)*t.scale,dy:-(t.centerY-n/t.scale/2)*t.scale,scale:t.scale},rect:{originX:0,originY:0,width:r,height:n},tailor:{left:0,right:0,top:0,bottom:0},absolute:c(r,n)}}function c(e,t){var r={scene:{dx:0,dy:0,scale:1},screen:{dx:e/2,dy:t/2,scale:1},rect:{originX:0,originY:0,width:e,height:t},tailor:{left:0,right:0,top:0,bottom:0},absolute:null};return r.absolute=r,r}function u(e,t,r){var n=t.sceneRect,i=t.screenRect,o=t.tailor;return{scene:{dx:n.originX,dy:n.originY,scale:e.scene.scale*r.scale},screen:{dx:i.originX,dy:i.originY,scale:e.screen.scale*r.scale},rect:i,tailor:o,absolute:e.absolute}}function l(e,t){if(e.kind===i.ComponentKind.Component&&!e.isVisible())return null;var r=t;e.absoluteCoordinates&&(r=r.absolute);var n=r.scene,o=r.screen,a=o.scale,s=o.dx,c=o.dy,u=p(e,a),l=e.originX*a+s-u.left,d=e.originY*a+c-u.top,f=e.width*a+u.left+u.right,y=e.height*a+u.top+u.bottom,A=r.rect,m=r.tailor,g=A.originX+m.left-l,v=A.originY+m.top-d,b=l+f-(A.originX+A.width-m.right),P=d+y-(A.originY+A.height-m.bottom);if(!e.disableVisionTrim&&(g>=f||b>=f||g+b>=f||v>=y||P>=y||v+P>=y))return null;var S={left:g,top:v,right:b,bottom:P},w={originX:l,originY:d,width:f,height:y},x=h(e,a);return{margin:u,scale:a,tailor:S,sceneRect:{originX:e.originX+n.dx-x.left,originY:e.originY+n.dy-x.top,width:e.width*n.scale+x.left+x.right,height:e.height*n.scale+x.top+x.bottom},screenRect:w}}function p(e,t){var r=e.sceneMargin,n=e.parallaxMargin,i=r.left*t+n.left,o=r.top*t+n.top,a=r.right*t+n.right,s=r.bottom*t+n.bottom;return Object.freeze({left:i,right:a,top:o,bottom:s})}function h(e,t){var r=e.sceneMargin,n=e.parallaxMargin,i=r.left+n.left/t,o=r.top+n.top/t,a=r.right+n.right/t,s=r.bottom+n.bottom/t;return Object.freeze({left:i,right:a,top:o,bottom:s})}t.iterateComponentsWithScene=function(e,t,r,n){var i=s(t);a(e.treeNode,i,r,n)},t.iterateComponentsWithNode=function(e,t,r,n){switch(e.kind){case i.ComponentKind.Component:var s=e,c=o(p=s.treeNode.parent,t);if(c){var u=l(e,c);u?r(s,u):n(s)}break;case i.ComponentKind.Group:var p,h=o(p=e.treeNode,t);h&&a(p,h,r,n)}},t.getMarginOnScreen=p,t.getMarginOnScene=h},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(107),o=r(0),a=r(15),s=r(14),c=r(10),u=r(9),l=Object.freeze({left:0,right:0,top:0,bottom:0}),p=new a.SpaceSpringFactory({matchingDistance:2,zeroSpeed:.55,kDistance:.17,velocityDamping:.55,heavyDampingRadius:15,heavyDampingSpeed:.25,pedesisSpeedMean:0,pedesisSpeedVariance:0},{matchingDistance:2,zeroSpeed:.55,kDistance:.12,velocityDamping:.35,heavyDampingRadius:15,heavyDampingSpeed:.35,pedesisSpeedMean:0,pedesisSpeedVariance:0}),h=function(){function e(e,t,r){var n=this;this.onRemovedDispatcher=new u.EventDispatcher,this.onRectangleUpdatedDispatcher=new u.EventDispatcher,this.onRectanglePointUpdate=function(){n.reporter.update(n,c.ComponentUpdaterBehavior.AppearUpdated),n.onRectangleUpdatedDispatcher.dispatch(n)},this.reporter=e,this.id=t.id||i.v4().replace(/-/g,""),this.treeNode=r,this._parallaxMargin=f(t.parallaxMargin),this._sceneMargin=f(t.sceneMargin),this.disableVisionTrim=!!t.disableVisionTrim,this.absoluteCoordinates=!!t.absoluteCoordinates,this._orderIndex=t.orderIndex,this.rectangleTarget={originX:d(t.originX),originY:d(t.originY),width:d(t.width),height:d(t.height)};var o=[this.rectangleTarget.originX,this.rectangleTarget.originY,this.rectangleTarget.width,this.rectangleTarget.height];this.rectangleAnimation=p.create(s.AnimationPriority.ComponentMoving,o,this.onRectanglePointUpdate)}return Object.defineProperty(e.prototype,"originX",{get:function(){return this.rectangleAnimation.point[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originY",{get:function(){return this.rectangleAnimation.point[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.rectangleAnimation.point[2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.rectangleAnimation.point[3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parallaxMargin",{get:function(){return this._parallaxMargin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneMargin",{get:function(){return this._sceneMargin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderIndex",{get:function(){return this._orderIndex},set:function(e){if(e!==this._orderIndex){var t=this.treeNode.parent.value;this._orderIndex=e,t.reportChildOrderUpdate()}},enumerable:!0,configurable:!0}),e.prototype.moveTo=function(e,t,r){void 0===r&&(r=o.AnimationMode.Immediately),this.rectangleTarget.originX===e&&this.rectangleTarget.originY===t||(this.rectangleTarget.originX=e,this.rectangleTarget.originY=t,this.syncRectangleTarget(r))},e.prototype.resize=function(e,t,r){void 0===r&&(r=o.AnimationMode.Immediately),this.rectangleTarget.width===e&&this.rectangleTarget.height===t||(this.rectangleTarget.width=e,this.rectangleTarget.height=t,this.syncRectangleTarget(r))},e.prototype.setRectangle=function(e,t,r,n,i){void 0===i&&(i=o.AnimationMode.Immediately),this.rectangleTarget.originX===e&&this.rectangleTarget.originY===t&&this.rectangleTarget.width===r&&this.rectangleTarget.height===n||(this.rectangleTarget.originX=e,this.rectangleTarget.originY=t,this.rectangleTarget.width=r,this.rectangleTarget.height=n,this.syncRectangleTarget(i))},e.prototype.syncRectangleTarget=function(e){var t=[this.rectangleTarget.originX,this.rectangleTarget.originY,this.rectangleTarget.width,this.rectangleTarget.height];switch(e){case o.AnimationMode.Immediately:this.rectangleAnimation.moveRightNow(t),this.reporter.update(this,c.ComponentUpdaterBehavior.AppearUpdated);break;case o.AnimationMode.Continuous:this.rectangleAnimation.moveTo(t)}},e.prototype.setParallaxMargin=function(e){y(this._parallaxMargin,e)||(this._parallaxMargin=f(e),this.reporter.update(this,c.ComponentUpdaterBehavior.AppearUpdated))},e.prototype.setSceneMargin=function(e){y(this._sceneMargin,e)||(this._sceneMargin=f(e),this.reporter.update(this,c.ComponentUpdaterBehavior.AppearUpdated))},e.prototype.release=function(){this.rectangleAnimation.stop(),this.onRemovedDispatcher.dispatch(this)},e.prototype.addRemovedListener=function(e){this.onRemovedDispatcher.addListener(e)},e.prototype.removeRemovedListener=function(e){this.onRemovedDispatcher.removeListener(e)},e.prototype.addRectangleUpdatedListener=function(e){this.onRectangleUpdatedDispatcher.addListener(e)},e.prototype.removeRectangleUpdatedListener=function(e){this.onRectangleUpdatedDispatcher.removeListener(e)},e}();function d(e){return"number"==typeof e?e:0}function f(e){return void 0===e||0===e?l:"number"==typeof e?Object.freeze({left:e,right:e,top:e,bottom:e}):Object.freeze(n({},e))}function y(e,t){return void 0===t?0===e.top&&0===e.left&&0===e.right&&0===e.bottom:"number"==typeof t?e.top===t&&e.left===t&&e.right===t&&e.bottom===t:e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}t.AbstractComponentNode=h},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=r(8),s=function(){function e(t){if(this.engineNodes={},this.enginesCache=null,this.id=""+e.nextId,this.name=t.name,e.nextId+=1,"boolean"==typeof t.hitTest){var r=t.hitTest;this.hitTest=function(){return r}}else t.hitTest?this.hitTest=t.hitTest:this.hitTest=function(){return!0}}return Object.defineProperty(e.prototype,"engines",{get:function(){if(!this.enginesCache){var e=[],t=[];for(var r in this.engineNodes){var n=this.engineNodes[r].engine;void 0===n.orderIndex?t.push(n):e.push(n)}e.sort((function(e,t){return e.orderIndex-t.orderIndex})),this.enginesCache=Object.freeze(i(e,t))}return this.enginesCache},enumerable:!0,configurable:!0}),e.prototype.addEngine=function(e,t){if(void 0===t&&(t={}),this.enginesCache)throw new Error("definition is frozon. you can only do it before bind with screen");if(!(e instanceof o.AbstractRenderEngine))throw new Error("it is not RenderEngine");this.engineNodes[e.id]=Object.freeze({engine:e,options:Object.freeze({isVisible:a.valueWithDefault(t.isVisible,!0)})})},e.prototype.options=function(e){var t;return null===(t=this.engineNodes[e.id])||void 0===t?void 0:t.options},e.nextId=0,e}();t.ComponentDefinitionImplement=s},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Firefox=0]="Firefox",e[e.Opera=1]="Opera",e[e.Safari=2]="Safari",e[e.IE=3]="IE",e[e.Other=4]="Other",e[e.Unkown=5]="Unkown"}(n||(n={}));var i=new(function(){function e(){this.kind=n.Unkown}return e.prototype.getContext=function(e){var t=e.getContext("2d");switch(t.imageSmoothingEnabled=!1,this.kind){case n.Firefox:t.mozImageSmoothingEnabled=!1;break;case n.Opera:t.oImageSmoothingEnabled=!1;break;case n.Safari:t.webkitImageSmoothingEnabled=!1;break;case n.IE:t.msImageSmoothingEnabled=!1;break;case n.Unkown:void 0!==t.mozImageSmoothingEnabled?(t.mozImageSmoothingEnabled=!1,this.kind=n.Firefox):void 0!==t.oImageSmoothingEnabled?(t.oImageSmoothingEnabled=!1,this.kind=n.Opera):void 0!==t.webkitImageSmoothingEnabled?(t.webkitImageSmoothingEnabled=!1,this.kind=n.Safari):void 0!==t.msImageSmoothingEnabled&&(t.msImageSmoothingEnabled=!1,this.kind=n.IE)}return t},e}());t.get2DContext=function(e){return i.getContext(e)}},function(e,t,r){"use strict";var n,i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.emptyGridRangeForEach=Object.freeze({forEach:function(){return!1}}),t.fuseGridRangeForEach=function(e,t){return new o(n.Fusion,e,t)},t.rejectGridRangeForEach=function(e,t){return new o(n.Rejection,e,t)},function(e){e[e.Fusion=0]="Fusion",e[e.Rejection=1]="Rejection"}(n||(n={}));var o=function(){function e(t,r,o){var a,s,c=this;this.cells={},this.forEach=function(t){if(c.mode===n.Fusion)for(var r in c.cells){var i=c.cells[r],o=i.row,a=i.column;if(t(o,a))return!0}return c.range.forEach((function(r,n){var i=e.key(r,n);return!(c.cells[i]||!t(r,n))}))},this.mode=t,this.range=r;try{for(var u=i(o),l=u.next();!l.done;l=u.next()){var p=l.value,h=e.key(p.row,p.column);this.cells[h]=p}}catch(e){a={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}}return e.key=function(e,t){return e+":"+t},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.nodes={}}return e.prototype.get=function(t,r){var n,i=e.key(t,r);return null===(n=this.nodes[i])||void 0===n?void 0:n.element},e.prototype.set=function(t,r,n){var i=e.key(t,r);return this.nodes[i]=Object.freeze({element:n,row:t,column:r,key:i}),n},e.prototype.delete=function(t,r){var n=e.key(t,r),i=this.nodes[n];return i?(delete this.nodes[n],i.element):void 0},e.prototype.fill=function(e){var t=e.nodes;for(var r in t)this.nodes[r]=t[r]},e.prototype.clear=function(e){if(e)for(var t in this.nodes)e(this.nodes[t].element);this.nodes={}},e.prototype.forEach=function(e){for(var t in this.nodes){var r=this.nodes[t];e(r.element,r.row,r.column)}},e.key=function(e,t){return e+":"+t},e}();t.InfinityTable=n},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t){this.nodes=null,this.id=""+(e.nextId+=1),this.life=0,this.context=t}return Object.defineProperty(e.prototype,"isFloat",{get:function(){var t;return this.life<e.fuseThreshold&&1===(null===(t=this.nodes)||void 0===t?void 0:t.length)},enumerable:!0,configurable:!0}),e.prototype.onFuse=function(e,t){},e.prototype.onSplit=function(){},e.prototype.onRemoved=function(){},e.prototype[Symbol.iterator]=function(){return new s(this.getNodes())},Object.defineProperty(e.prototype,"previousChunk",{get:function(){var e,t;return(null===(t=null===(e=this.getNodes()[0])||void 0===e?void 0:e.previousNode)||void 0===t?void 0:t.value)||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextChunk",{get:function(){var e,t,r=this.getNodes();return(null===(t=null===(e=r[r.length-1])||void 0===e?void 0:e.nextNode)||void 0===t?void 0:t.value)||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFuseable",{get:function(){return this.life>=e.fuseThreshold},enumerable:!0,configurable:!0}),e.prototype.getSampleNode=function(){return this.nodes&&this.nodes.length>0?this.nodes[0]:null},e.prototype.initWithNode=function(e){if(this.nodes)throw new Error("it is not init chunk");return this.nodes=[e],e.value=this,this},e.prototype.initWithShadowList=function(e){var t,r;if(this.nodes)throw new Error("it is not init chunk");this.nodes=[];try{for(var i=n(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.nodes.push(a),a.value=this}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},e.prototype.increaseLife=function(){var t=this;this.life<e.fuseThreshold&&this.watchIsFloatUpdate((function(){t.life+=1}))},e.prototype.cutOff=function(e,t){var r=this;return this.watchIsFloatUpdate((function(){var n=r.getNodes(),i=n.indexOf(e),o=n.indexOf(t);if(-1===i)throw new Error("cannot find begin node id="+e.id+" to cut off");if(-1===o)throw new Error("cannot find end node id="+e.id+" to cut off");var a=n.splice(o),s=r.createChunkWithNodes(a),c=n.splice(0,i+1);return{left:r.createChunkWithNodes(c),right:s,becomeBlank:0===n.length}}))},e.prototype.split=function(e){var t=this;return this.watchIsFloatUpdate((function(){var r=t.getNodes(),n=r.indexOf(e),i=null,o=null;if(-1===n)throw new Error("cannot find node id="+e.id+" to split");if(n<r.length-1){var a=r.splice(n+1);i=t.createChunkWithNodes(a)}if(n>0){var s=r.splice(0,n);o=t.createChunkWithNodes(s)}return t.onSplit(),{left:o,right:i}}))},e.prototype.createChunkWithNodes=function(e){var t,r,i=this.context.create();i.nodes=e;try{for(var o=n(e),a=o.next();!a.done;a=o.next())a.value.value=i}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i.isFloat&&i.context.bind(i,e[0].related),i},e.fuseEachNeighbours=function(e){var t=[],r={},i=function(i){if(!r[i]){r[i]=!0;var o=e[i];o.isFuseable&&o.watchIsFloatUpdate((function(){var e,i,a,s,c=o.fuseNeighboursBeforeMe(),u=o.fuseNeighboursAfterMe();(c.length>0||u.length>0)&&(o.life=0,o.onFuse(c,u));try{for(var l=(e=void 0,n(c)),p=l.next();!p.done;p=l.next()){var h=p.value;r[h.id]=!0,t.push(h)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}try{for(var d=(a=void 0,n(u)),f=d.next();!f.done;f=d.next()){var y=f.value;r[y.id]=!0,t.push(y)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}))}};for(var o in e)i(o);return t},e.prototype.fuseNeighboursBeforeMe=function(){for(var e,t=this,r=[];t&&(null===(e=t=t.previousChunk)||void 0===e?void 0:e.isFuseable);)this.unshift(t),r.unshift(t);return r},e.prototype.fuseNeighboursAfterMe=function(){for(var e,t=this,r=[];t&&(null===(e=t=t.nextChunk)||void 0===e?void 0:e.isFuseable);)this.push(t),r.push(t);return r},e.prototype.unshift=function(e){var t,r,i,a=e.nodes;if(a){(t=this.getNodes()).unshift.apply(t,o(a));try{for(var s=n(a),c=s.next();!c.done;c=s.next())c.value.value=this}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}},e.prototype.push=function(e){var t,r,i,a=e.nodes;if(a){(t=this.getNodes()).push.apply(t,o(a));try{for(var s=n(a),c=s.next();!c.done;c=s.next())c.value.value=this}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}},e.prototype.resetLife=function(){this.life=0},e.prototype.dispose=function(){this.isFloat&&this.context.unbind(this,this.nodes[0].related),this.nodes=null,this.life=0,this.onRemoved()},e.prototype.getNodes=function(){return this.nodes||(this.nodes=[]),this.nodes},e.prototype.watchIsFloatUpdate=function(e){var t=this.isFloat,r=this.nodes&&this.nodes[0].related,n=e(),i=this.isFloat;return!t&&i?this.context.bind(this,this.nodes[0].related):t&&!i&&this.context.unbind(this,r),n},e.fuseThreshold=5,e.nextId=0,e}();t.Chunk=a;var s=function(){function e(e){this.nodes=e,this.index=0}return e.prototype.next=function(){var e;return this.index<this.nodes.length?(e={value:this.nodes[this.index],done:!1},this.index+=1):e={value:void 0,done:!0},e},e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),a=function(){function e(t){this.addedSet={},this.sortedSet={},this.removedSet={},this.id=""+e.nextId,this.releaser=t,e.nextId+=1}return e.prototype.fetchDiff=function(){var e=new s(this.addedSet,this.sortedSet,this.removedSet);return this.addedSet={},this.sortedSet={},this.removedSet={},e},e.prototype.release=function(){this.releaser(this.id)},e.prototype.markAdded=function(e){this.addedSet[e.id]=e,delete this.sortedSet[e.id],delete this.removedSet[e.id]},e.prototype.markSorted=function(e){this.addedSet[e.id]||(this.sortedSet[e.id]=e)},e.prototype.markRemoved=function(e){this.removedSet[e.id]=e,delete this.addedSet[e.id],delete this.sortedSet[e.id]},e.nextId=0,e}();t.ProtoTreeDiffBufferImplement=a;var s=function(){function e(e,t,r){this.addedSet=e,this.sortedSet=t,this.removedSet=r}return e.createInsertDiff=function(t){var r,n,o={};try{for(var a=i(t),s=a.next();!s.done;s=a.next()){var c=s.value;o[c.id]=c}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return new e(o,{},{})},Object.defineProperty(e.prototype,"isBlank",{get:function(){return!o.hasKey(this.addedSet)&&!o.hasKey(this.sortedSet)&&!o.hasKey(this.removedSet)},enumerable:!0,configurable:!0}),e.prototype.decorate=function(t){var r,o,a,s,c,u,l=t.insertToAdded,p=t.insertToRemoved,h=t.maskAdded,d=null,f=null;if(l&&l.length>0){d=n({},this.addedSet);try{for(var y=i(l),A=y.next();!A.done;A=y.next())d[(P=A.value).id]=P}catch(e){r={error:e}}finally{try{A&&!A.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}if(h&&h.length>0){d=d||n({},this.addedSet);try{for(var m=i(h),g=m.next();!g.done;g=m.next())delete d[g.value]}catch(e){a={error:e}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}if(p&&p.length>0){f=n({},this.removedSet);try{for(var v=i(p),b=v.next();!b.done;b=v.next()){var P;f[(P=b.value).id]=P}}catch(e){c={error:e}}finally{try{b&&!b.done&&(u=v.return)&&u.call(v)}finally{if(c)throw c.error}}}return d=d||this.addedSet,f=f||this.removedSet,new e(d,this.sortedSet,f)},e}();t.ProtoTreeDiff=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.isTreeGroupNode=function(e){return e instanceof s},t.isTreeLeafNode=function(e){return e instanceof a};var o=function(){function e(t,r){this.par=null,this.pre=null,this.nex=null,this.tree=t,this.value=r,this.id=String(e.nextId),e.nextId+=1}return Object.defineProperty(e.prototype,"parent",{get:function(){return this.par},enumerable:!0,configurable:!0}),e.prototype.assertBlank=function(e){if(this.assertBelongsTo(e),this.par||this.pre||this.nex)throw new Error("node is not empty")},e.prototype.assertAddedTo=function(e){if(this.assertBelongsTo(e),this.isFreeNode())throw new Error("this node did not add to any tree")},e.prototype.assertBelongsTo=function(e){if(this.tree!==e)throw new Error("this node is belongs to another tree")},e.prototype.isFreeNode=function(){return null===this.par},e.prototype.preLeaf=function(){return this.pre?this.pre.lastLeaf():this.par?this.par.preLeaf():null},e.prototype.nexLeaf=function(){return this.nex?this.nex.firstLeaf():this.par?this.par.nexLeaf():null},e.nextId=0,e}();t.TreeNodeImpl=o;var a=function(e){function t(t,r){return e.call(this,t,r)||this}return i(t,e),t.prototype.firstLeaf=function(){return this},t.prototype.lastLeaf=function(){return this},t}(o);t.TreeLeafNodeImpl=a;var s=function(e){function t(t,r){var n,i=e.call(this,t,r)||this;i.fir=null,i.las=null,i.forEachLeaves=function(e){for(var t=i.fir;t;)t instanceof a?e(t):t.forEachLeaves(e),t=t.nex};var o=((n={})[Symbol.iterator]=function(){return new u(i)},n.forEach=i.forEachLeaves,n);return i.leaves=Object.freeze(o),i}return i(t,e),t.prototype[Symbol.iterator]=function(){return new c(this.fir)},Object.defineProperty(t.prototype,"nodes",{get:function(){for(var e=[],t=this.fir;t;)e.push(t),t=t.nex;return e},enumerable:!0,configurable:!0}),t.prototype.assertBlank=function(t){if(e.prototype.assertBlank.call(this,t),this.fir||this.las)throw new Error("node is not empty")},t.prototype.firstLeaf=function(){for(var e=this.fir;e;){var t=e.firstLeaf();if(t)return t;e=e.nex}return null},t.prototype.lastLeaf=function(){for(var e=this.las;e;){var t=e.lastLeaf();if(t)return t;e=e.pre}return null},t.prototype.forEach=function(e){for(var t=this.fir;t;)e(t),t=t.nex},t.prototype.isFreeNode=function(){return e.prototype.isFreeNode.call(this)&&this!==this.tree.root},t}(o);t.TreeGroupNodeImpl=s;var c=function(){function e(e){this.node=e}return e.prototype.next=function(){var e;return this.node?(e={value:this.node,done:!1},this.node=this.node.nex):e={value:void 0,done:!0},e},e}(),u=function(){function e(e){this.node=e.firstLeaf(),this.lastLeaf=e.lastLeaf()}return e.prototype.next=function(){var e;return this.node?(e={value:this.node,done:!1},this.node===this.lastLeaf?this.node=null:this.node=this.node.nexLeaf()):e={value:void 0,done:!0},e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(6),o=function(){function e(){this.refManager=new a,this.pool=[]}return e.prototype.pull=function(){var e;if(0===this.pool.length){var t=document.createElement("canvas");e={canvas:t,context:n.get2DContext(t),size:{width:0,height:0}}}else e=this.pool.pop();return e},e.prototype.push=function(e){this.pool.push(e)},e.prototype.clear=function(){this.pool=[]},e}();t.CanvasPool=o;var a=function(){function e(){this.refs={},this._length=0}return e.prototype.has=function(e){return e in this.refs},e.prototype.set=function(e,t){if(!this.has(e)){var r={id:e,value:t,prev:this.tail};this.tail?(this.tail.next=r,this.tail=r):this.head=this.tail=r,this.refs[e]=r,this._length+=1}},e.prototype.delete=function(e){if(this.has(e)){var t=this.refs[e],r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,delete this.refs[e],this._length-=1}},e.prototype.shift=function(){var e=this.head;if(e)return this.delete(e.id),e.value},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e}(),s=function(){function e(t){this.canvasPool=t,this.id=""+(e.id+=1),this.value=null}return e.prototype.get=function(){return this.value},e.prototype.allocate=function(t){if(this.value)throw new Error("can not call allocate on non empty canvasRef!");var r;if(this.canvasPool.refManager.length<e.MaxRefsSize)r=this.canvasPool.pull();else{var n=this.canvasPool.refManager.shift();r=n.value,n.value=null}this.value=r,this.canvasPool.refManager.set(this.id,this);var i=r.canvas,o=r.context,a=r.size=t,s=a.width,c=a.height;return i.width=s+1,i.height=c+1,o.resetTransform(),r},e.prototype.clear=function(){this.canvasPool.refManager.delete(this.id),this.value&&(this.canvasPool.push(this.value),this.value=null)},e.prototype.isEmpty=function(){return null==this.value},e.prototype.isSizeEquals=function(e){return!!this.value&&i.isEquals(this.value.size,e)},e.MaxRefsSize=256,e.id=0,e}();t.CanvasRef=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),s=r(5),c=r(61),u=r(62),l=r(63),p=function(e){function t(t){var r=e.call(this,t.orderIndex)||this;return r.definitionNodes={},r.fixedSize=t.fixedSize,r.isSVG=t.isSVG,r.className=t.className,r.style=t.style&&Object.freeze(o({},t.style)),r}return i(t,e),t.prototype.getDefinitionNode=function(e){return this.definitionNodes[e.id]},t.prototype.bind=function(e){var t=this;return function(r){if(!(e instanceof a.ComponentDefinitionImplement))throw new Error("it is not ComponentDefinition");if(t.definitionNodes[e.id])throw new Error("define duplicated ComponentDefinition");var n;if("boolean"==typeof r.willInterruptEvent){var i=r.willInterruptEvent;n=function(){return i}}else n=r.willInterruptEvent?r.willInterruptEvent.bind(r):function(){return!1};return t.definitionNodes[e.id]=Object.freeze({willInterruptEvent:n,render:r}),e.addEngine(t,{isVisible:r.isVisible}),t.addDefinition(e),r}},t.prototype.createRenderLayout=function(e){var t;return t=this.isSVG?l.SVGRenderLayoutComponent:u.HTMLRenderLayoutComponent,new c.HTMLRenderLayout({engine:this,screen:e.screen,mode:e.mode,initCamera:e.initCamera,tree:e.tree,visions:e.visions,leafFilter:e.leafFilter,renderComponent:t,fixedSize:this.fixedSize,className:this.className,style:this.style})},t}(s.AbstractRenderEngine);t.HTMLRenderEngineImplement=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRef=function(e){var r=t.props,n=r.onRef,i=r.context;n&&n(e);var o=i;o&&o.onRef(o.component,e)},t}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.context,r=e.children,n=e.fixedMode,i=e.style,s=t;if(s){var c=s.vision,u=s.component,l=s.margin,p=c.screenRect,h=p.originX,d=p.originY,f="absolute";if(n){var y=s.screen.bounding;h+=y.left,d+=y.top,f="fixed"}var A="translate("+h+"px,"+d+"px) scale("+s.scale+","+s.scale+")",m=o({WebkitTransform:A,transform:A,WebkitTransformOrigin:"0px 0px 0px",transformOrigin:"0px 0px 0px",position:f,overflow:"visible",width:s.size.width+s.margin.left+s.margin.right,height:s.size.height+s.margin.top+s.margin.bottom,margin:0,paddingLeft:l.left,paddingRight:l.right,paddingTop:l.top,paddingBottom:l.bottom,zIndex:u.orderIndex},i),g=o({},this.props);return delete g.context,delete g.fixedMode,delete g.onRef,a.createElement("div",o({},g,{style:m,ref:this.onRef}),r)}return a.createElement(a.Fragment,null,r)},t}(a.Component);t.CNode=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(75),o=r(76),a=r(77),s=r(78),c=r(79),u=r(3);t.ContinuityNode=u.ContinuityNode,t.createContinuityNode=function(e){return new n.ContinuityNode(e,[new i.MouseEventAdapter,new o.TouchEventAdapter,new a.SortedTouchEventAdapter,new s.KeyboardEventAdapter,new c.WheelEventAdapter])}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(92),o=r(31),a=function(){function e(){}return e.prototype.createAnimationGroup=function(){return new s},e.prototype.createAnimation=function(e,t){return new c(e,t)},e.prototype.createAnimationFrameInvoker=function(e){return new l(e)},e.prototype.createAfterAnimationsInvoker=function(e){return new u(e)},e.animationFrames=new i.AnimationFrames,e}(),s=function(){function e(){this.children=[]}return e.prototype.createAnimation=function(e,t){var r=this,n=new c(e,t,(function(e){return o.arrayRemove(r.children,e)}));return this.children.push(n),n},e.prototype.createAfterAnimationsInvoker=function(e){var t=this,r=new u(e,(function(e){return o.arrayRemove(t.children,e)}));return this.children.push(r),r},e.prototype.release=function(){var e,t;try{for(var r=n(this.children.splice(0)),i=r.next();!i.done;i=r.next())i.value.release()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e}(),c=function(){function e(e,t,r){var n=this;this.priority=e,this.onRefresh=t,this.onRelease=r,this.onAnimationFrame=function(){p(n,n.onRefresh)},a.animationFrames.addAnimation(this.priority,this.onAnimationFrame)}return e.prototype.release=function(){a.animationFrames.removeAnimation(this.priority,this.onAnimationFrame),this.onRelease&&this.onRelease(this)},e}(),u=function(){function e(e,t){var r=this;this.onRefresh=e,this.onRelease=t,this.onAnimationFrame=function(){p(r,r.onRefresh)},a.animationFrames.addAfterAnimationsInvoker(this.onAnimationFrame)}return e.prototype.release=function(){a.animationFrames.removeAfterAnimationsInvoker(this.onAnimationFrame),this.onRelease&&this.onRelease(this)},e}(),l=function(){function e(e){var t=this;this.priority=e,this.nextHandler=null,this.banAnimationChange=!1,this.onAnimationFrame=function(){if(t.nextHandler){var e=t.nextHandler;t.nextHandler=null;try{t.banAnimationChange=!0,p(t,e)}finally{t.banAnimationChange=!1}null===t.nextHandler&&a.animationFrames.removeAnimation(t.priority,t.onAnimationFrame)}}}return e.prototype.invoke=function(e){this.banAnimationChange||this.nextHandler||a.animationFrames.addAnimation(this.priority,this.onAnimationFrame),this.nextHandler=e},e.prototype.release=function(){!this.banAnimationChange&&this.nextHandler&&(this.nextHandler=null,a.animationFrames.removeAnimation(this.priority,this.onAnimationFrame))},e}();function p(e,t){try{t(e)}catch(e){console.error(e)}}t.animation=new a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayRemove=function(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},t.arrayPut=function(e,t){-1===e.indexOf(t)&&e.push(t)}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1);t.wrapContent=function(e,t){var r,o,a=t;try{for(var s=n(e),c=s.next();!c.done;c=s.next()){var u=c.value;a=i.createElement(u,null,a)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.createLayouts=function(e){var t,r,i={},o=function(t){i[t.id]=t.createRenderLayout({screen:e.screen,tree:e.tree,mode:e.mode,initCamera:e.initCamera,visions:e.visions,leafFilter:function(e){return e.value.isVisible(t)},onRenderDuration:e.onRenderDuration})};try{for(var a=n(e.engines),s=a.next();!s.done;s=a.next())o(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(99))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17);t.initVisions=function(e,t,r){n.iterateComponentsWithScene(t,r,(function(t,r){e.bindVision(t.treeNode,r)}),(function(){}))}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(37),o=r(38),a=r(10),s=function(){function e(e,t,r){this.shouldSort=!1,this.reporter=e,this.tree=t,this.treeNode=r}return Object.defineProperty(e.prototype,"components",{get:function(){var e,t;this.sortIfNeed();var r=[];try{for(var i=n(this.treeNode),o=i.next();!o.done;o=i.next()){var a=o.value;r.push(a.value)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},enumerable:!0,configurable:!0}),e.prototype.reportChildOrderUpdate=function(){this.shouldSort=!0,this.reporter.sortGroup(this)},e.prototype.sortIfNeed=function(){this.shouldSort&&(this.shouldSort=!1,this.tree.sort(this.treeNode,(function(e,t){var r=e.value.orderIndex,n=t.value.orderIndex;return void 0!==r&&void 0!==n?r-n:void 0!==r?-1:void 0!==n?1:e.id.localeCompare(t.id)})))},e.prototype.removeComponent=function(e){return this.treeNode===e.treeNode.parent&&(this.tree.remove(e.treeNode),this.reporter.update(e,a.ComponentUpdaterBehavior.Removed),e.release(),!0)},e.prototype.addComponent=function(e){var t=this.tree.wrapLeaf(),r=new o.ComponentImplement(this.reporter,e,t);return this.addNode(t,r)},e.prototype.addComponentGroup=function(e){var t=this.tree.wrapGroup(),r=new i.ComponentGroupImplement(this.reporter,this.tree,t,e);return this.addNode(t,r)},e.prototype.addNode=function(e,t){return e.value=t,this.tree.append(e,this.treeNode),this.reporter.update(t,a.ComponentUpdaterBehavior.Added),t},e}();t.GroupImplement=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=r(18),s=r(36),c=r(8),u=function(e){function t(t,r,n,i){var o=e.call(this,t,i,n)||this;return o.group=new s.GroupImplement(t,r,n),o._scale=c.valueWithDefault(i.scale,1),o}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return o.ComponentKind.Group},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale!==e&&(this._scale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"components",{get:function(){return this.group.components},enumerable:!0,configurable:!0}),t.prototype.removeComponent=function(e){return this.group.removeComponent(e)},t.prototype.reportChildOrderUpdate=function(){this.group.reportChildOrderUpdate()},t.prototype.addComponent=function(e){return this.group.addComponent(e)},t.prototype.addComponentGroup=function(e){return this.group.addComponentGroup(e)},t}(a.AbstractComponentNode);t.ComponentGroupImplement=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(18),c=r(19),u=r(10),l=function(e){function t(t,r,n){var i,a,s=e.call(this,t,r,n)||this;if(s.visibleMap={},s.visibleCount=0,!(r.definition instanceof c.ComponentDefinitionImplement))throw new Error("it is not ComponentDefinition");s.definition=r.definition,s._payload=r.payload;try{for(var u=o(s.definition.engines),l=u.next();!l.done;l=u.next()){var p=l.value,h=s.definition.options(p).isVisible;h&&(s.visibleCount+=1),s.visibleMap[p.id]=h}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return s}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return a.ComponentKind.Component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"payload",{get:function(){return this._payload},set:function(e){e!==this._payload&&(this._payload=e,this.reporter.update(this,u.ComponentUpdaterBehavior.PropertiesUpdated))},enumerable:!0,configurable:!0}),t.prototype.isVisible=function(e){return"number"==typeof e?this.visibleMap[e]||!1:e?this.visibleMap[e.id]||!1:this.visibleCount>0},t.prototype.setVisible=function(e,t){var r;if(r="number"==typeof e?""+e:e.id,void 0!==this.visibleMap[r]&&this.visibleMap[r]!==t){var n=0===this.visibleCount;this.visibleMap[r]=t,t?this.visibleCount+=1:this.visibleCount-=1,n===(0===this.visibleCount)?this.reporter.update(this,u.ComponentUpdaterBehavior.VisibleUpdated):this.reporter.update(this,u.ComponentUpdaterBehavior.AppearUpdated)}},t}(s.AbstractComponentNode);t.ComponentImplement=l},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(0)),n(r(34));var i=r(2);t.creatHTMLRenderEngine=i.creatHTMLRenderEngine,t.createCanvasRenderEngine=i.createCanvasRenderEngine,t.CNode=i.CNode,t.RenderLayoutMode=i.RenderLayoutMode,t.CanvasRenderMode=i.CanvasRenderMode},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MouseDown="MouseDown",e.MouseMove="MouseMove",e.MouseUp="MouseUp",e.MouseLeave="MouseLeave",e.MouseWheel="MouseWheel",e.TouchStart="TouchStart",e.TouchMove="TouchMove",e.TouchEnd="TouchEnd",e.TouchCancel="TouchCancel",e.SortedTouchStart="SortedTouchStart",e.SortedTouchMove="SortedTouchMove",e.SortedTouchEnd="SortedTouchEnd",e.SortedTouchCancel="SortedTouchCancel",e.KeyDown="KeyDown",e.KeyUp="KeyUp"}(t.BoundlessEventKind||(t.BoundlessEventKind={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),i=r(4),o=r(14);!function(e){e.Desktop="desktop",e.Touch="touch",e.Surface="surface"}(t.DeviceType||(t.DeviceType={}));var a=function(){function e(e){this.deviceType=e}return e.prototype.createScene=function(t){return void 0===t&&(t=e.createDefaultLogger()),i.SceneImplement.create(this.deviceType,t,new o.LegacyLayoutNode([]))},e.prototype.createSceneWithLegacyLayoutDescriptions=function(t,r){return void 0===r&&(r=e.createDefaultLogger()),i.SceneImplement.create(this.deviceType,r,new o.LegacyLayoutNode(t))},e.createDefaultLogger=function(){return n.createLogger(new n.DefaultLoggerHub)},e}();t.Boundless=a},function(e,t){e.exports=r(12)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var c=r(2),u=r(14),l=r(36),p=r(8),h=r(9),d=r(13),f=function(e){function t(t,r,n,i,o){var a=e.call(this,i,o,o.root)||this;return a.componentUpdateDispatcher=new h.EventDispatcher,a.groupSortedDispatcher=new h.EventDispatcher,a.deviceType=t,a.logger=r,a.legacy=n,a}return i(t,e),t.create=function(e,r,n){var i,o=new d.ProtoTree,a={update:function(e,t){return i.reportComponentUpdate(e,t)},sortGroup:function(e){return i.groupSortedDispatcher.dispatch(e)}};return i=new t(e,r,n,a,o),o.root.value=i,i},t.prototype.createScreen=function(e){return new u.ScreenImplement({scene:this,context:e.context,className:e.className,autoResize:!!e.autoResize,width:p.numberWithDefault(e.width,0),height:p.numberWithDefault(e.height,0),engines:this.collectEngines(e),eventInterrupter:e.eventInterrupter||function(){return!1},wrappedComponents:e.wrappedComponents||[],onRenderDuration:e.onRenderDuration})},t.prototype.collectEngines=function(e){var t,r,n;if(e.engines){n={};try{for(var i=o(e.engines),a=i.next();!a.done;a=i.next()){if(!((h=a.value)instanceof c.AbstractRenderEngine))throw new Error("it is not RenderEngine");n[h.id]=h}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}else n=this.legacy.engines;var u=[],l=[];for(var p in n){var h;void 0===(h=n[p]).orderIndex?l.push(h):u.push(h)}return Object.freeze(s(u,l))},t.prototype.getEngineWithLegacyLayout=function(e){for(var t in this.legacy.engines){var r=this.legacy.engines[t];if(r.orderIndex===e)return r}},t.prototype.addComponentUpdateListener=function(e){this.componentUpdateDispatcher.addListener(e)},t.prototype.removeComponentUpdateListener=function(e){this.componentUpdateDispatcher.removeListener(e)},t.prototype.reportComponentUpdate=function(e,t){this.componentUpdateDispatcher.dispatch({node:e,behavior:t})},t.prototype.addGroupSortedListener=function(e){this.groupSortedDispatcher.addListener(e)},t.prototype.removeGroupSortedListener=function(e){this.groupSortedDispatcher.removeListener(e)},t}(l.GroupImplement);t.SceneImplement=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(11);t.CanvasRenderMode=i.CanvasRenderMode,t.createCanvasRenderEngine=function(e){return new n.CanvasRenderEngineImplement(e)},t.isCanvasRenderEngine=function(e){return e instanceof n.CanvasRenderEngineImplement}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(4),c=r(11),u=r(20),l=r(46),p=r(47),h=r(59),d=function(){function e(e){var t=this;this.setLayoutRenderSize=null,this.ratio=1,this.canvasPair=null,this.canvasIndex=1,this.refresh=!0,this.onRepaint=function(e){t.screen.scene.reportComponentUpdate(e,s.ComponentUpdaterBehavior.PropertiesUpdated)},this.renderMode=e.renderMode,this.engine=e.engine,this.screen=e.screen,this.onRenderDuration=e.onRenderDuration,this.statistical=e.willPrintStatistical?new l.PaintStatistical:void 0,this.screenSize=Object.freeze({width:this.screen.width,height:this.screen.height}),this.painter=new p.Painter({tree:e.tree,fixedSize:e.fixedSize,screen:e.screen,visions:e.visions,context:this.screen.context,statistical:this.statistical,getRenderConstructor:e.getRenderConstructor,onRepaint:this.onRepaint,rate:2,favorBucketsCount:12,bucketUnitSize:Object.freeze({width:256,height:256})}),this.className=e.className,this.style=e.style}return e.prototype.willInterruptEvent=function(){return!1},e.prototype.findComponentWithTarget=function(){},e.prototype.update=function(e){var t,r,n=h.currentMicroseconds();switch(this.setLayoutRenderSize&&e.screenSize&&(this.screenSize.width!==e.screenSize.width||this.screenSize.height!==e.screenSize.height)&&(this.setLayoutRenderSize(e.screenSize),this.canvasPair&&this.updateSize(this.canvasPair,e.screenSize)),e.screenSize&&(this.screenSize=e.screenSize),this.renderMode){case c.CanvasRenderMode.HighQuality:this.refresh=!0;break;case c.CanvasRenderMode.PerformanceWhileTransition:this.refresh=!e.isTransition}this.painter.update({context:e.context,camera:e.camera,screenSize:e.screenSize,diff:e.diff,updateSet:e.updateSet,moveSet:e.moveSet,refresh:this.refresh}),this.canvasPair?(this.paint(),null===(t=this.statistical)||void 0===t||t.print(),this.onRenderDuration&&this.onRenderDuration(h.currentMicroseconds()-n)):null===(r=this.statistical)||void 0===r||r.clear()},e.prototype.setCanvas=function(e){e&&this.canvasPair!==e&&(this.updateSize(e,this.screenSize),this.updateVisibility(e),this.ratio=Math.max(this.getRatioWithContext(u.get2DContext(e.canvas1)),this.getRatioWithContext(u.get2DContext(e.canvas2)))),this.canvasPair=e,e&&this.paint()},e.prototype.updateVisibility=function(e){var t=e.canvas1,r=e.canvas2;switch(this.canvasIndex){case 1:t.style.visibility="visible",r.style.visibility="hidden";break;case 2:t.style.visibility="hidden",r.style.visibility="visible"}},e.prototype.updateSize=function(e,t){if(!e.canvas1.getContext("2d")||!e.canvas2.getContext("2d"))throw new Error("cannot find 2d context from canvas");var r=this.ratio*t.width,n=this.ratio*t.height;e.canvas1.width=r,e.canvas1.height=n,e.canvas2.width=r,e.canvas2.height=n},e.prototype.paint=function(){var e=this,t=this.getNextCanvasContext();t?(this.painter.paint(t,this.ratio,this.refresh),Promise.resolve().then((function(){e.updateToNextBuffering()})).catch((function(e){return console.error(e)}))):console.warn("cannot find context 2d of canvas")},e.prototype.getNextCanvasContext=function(){var e=this.getNextCanvas(),t=null;return e&&((t=u.get2DContext(e)).resetTransform(),t.clearRect(0,0,e.width,e.height)),t},e.prototype.getNextCanvas=function(){var e=null;if(this.canvasPair){var t=this.canvasPair,r=t.canvas1;e=[t.canvas2,r][this.canvasIndex-1]}return e},e.prototype.updateToNextBuffering=function(){if(this.canvasPair){switch(this.canvasIndex){case 1:this.canvasIndex=2;break;case 2:this.canvasIndex=1}this.updateVisibility(this.canvasPair)}},e.prototype.getRatioWithContext=function(e){var t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return Math.max(1,(window.devicePixelRatio||1)/t)},e.prototype.dispose=function(){this.painter.dispose()},e.prototype.getRender=function(){var e=this;return function(t){function r(r){var n=t.call(this,r)||this;return n.canvas1=null,n.canvas2=null,n.onSetCanvas1Ref=function(e){n.canvas1=e,n.refreshRenderer()},n.onSetCanvas2Ref=function(e){n.canvas2=e,n.refreshRenderer()},n.state=o({},e.screenSize),e.setLayoutRenderSize=function(e){return n.setState(e)},n}return i(r,t),r.prototype.componentWillUnmount=function(){e.setLayoutRenderSize=null,e.dispose()},r.prototype.refreshRenderer=function(){this.canvas1&&this.canvas2?e.setCanvas(Object.freeze({canvas1:this.canvas1,canvas2:this.canvas2})):e.setCanvas(null)},r.prototype.render=function(){var t=this.state,r=t.width,n=t.height,i=o(o({},e.style),{width:r,height:n,position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:e.engine.orderIndex});return[a.createElement("canvas",{key:"canvas1",className:e.className,ref:this.onSetCanvas1Ref,style:i}),a.createElement("canvas",{key:"canvas2",className:e.className,ref:this.onSetCanvas2Ref,style:i})]},r}(a.Component)},e}();t.CanvasRenderLayout=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.paintFloatCount=0,this.generateCacheCount=0,this.paintCacheCount=0,this.fuseCacheCount=0,this.fuseCount=0,this.splitCount=0}return e.prototype.recordPaintFloat=function(){this.paintFloatCount+=1},e.prototype.recordGenerateCache=function(){this.generateCacheCount+=1},e.prototype.recordPaintCache=function(e){void 0===e&&(e=1),this.paintCacheCount+=e},e.prototype.recordFuseCache=function(){this.fuseCacheCount+=1},e.prototype.recordFuse=function(e){this.fuseCount+=e},e.prototype.recordSplit=function(){this.splitCount+=1},e.prototype.clear=function(){this.paintFloatCount=0,this.generateCacheCount=0,this.paintCacheCount=0,this.fuseCacheCount=0,this.fuseCount=0,this.splitCount=0},e.prototype.print=function(){console.log("\n========="),console.log("paintFloatCount",this.paintFloatCount),console.log("generateCacheCount",this.generateCacheCount),console.log("paintCacheCount",this.paintCacheCount),console.log("fuseCacheCount",this.fuseCacheCount),console.log("fuseCount",this.fuseCount),console.log("splitCount",this.splitCount),this.clear()},e}();t.PaintStatistical=n},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(48),a=r(49),s=r(50),c=r(58),u=r(26),l=function(){function e(e){var t,r,i=this;this.painters={},this.canvasPool=new u.CanvasPool,this.onLeafNodeVisible=function(e){var t=e.value,r=i.getRenderConstructor(t.definition);if(r){var n=new r(t,i.context),o=new a.LeafNodePainter(i.screen,i.visions,e,i.fixedSize,n,i.onRepaint);i.painters[e.id]=o}},this.onLeafNodeInvisible=function(e){delete i.painters[e.id]},this.fixedSize=e.fixedSize,this.willPrintGrid=!!e.willPrintGrid,this.onRepaint=e.onRepaint,this.getRenderConstructor=e.getRenderConstructor,this.screen=e.screen,this.visions=e.visions,this.camera=this.screen.camera,this.screenSize=Object.freeze({width:this.screen.width,height:this.screen.height}),this.context=e.context,this.statistical=e.statistical,this.visionRectangle=this.createVisionRectangle(this.camera,this.screenSize),this.bucketFactory=new s.PaintableBucketFactory((function(e){return i.painters[e]}),this.visions,this.canvasPool,this.statistical),this.grid=new o.Grid({tree:e.tree,visions:e.visions,bucketFactory:this.bucketFactory,visionRectangle:this.visionRectangle,scale:this.camera.scale,rate:e.rate,bucketUnitSize:e.bucketUnitSize,favorBucketsCount:e.favorBucketsCount,onLeafNodeVisible:this.onLeafNodeVisible,onLeafNodeInvisible:this.onLeafNodeInvisible});try{for(var c=n(e.tree),l=c.next();!l.done;l=c.next()){var p=l.value;this.onLeafNodeVisible(p)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}}return e.prototype.dispose=function(){this.canvasPool.clear()},e.prototype.update=function(e){var t,r,n=!1,i=!1;if(e.context){for(var o in this.painters)this.painters[o].updateContext(e.context);this.context=e.context,n=!0}for(var o in e.camera&&(this.camera=e.camera,i=!0),e.screenSize&&(this.screenSize=e.screenSize,i=!0),e.updateSet)null===(t=this.painters[o])||void 0===t||t.refreshPayload();i&&(this.visionRectangle=r=this.createVisionRectangle(this.camera,this.screenSize)),this.grid.update({shouldUpdateAll:n,visionRectangle:r,scale:this.camera.scale,diff:e.diff,updateSet:e.updateSet,moveSet:e.moveSet,refresh:e.refresh})},e.prototype.createVisionRectangle=function(e,t){var r,n,i,o;return 0===e.scale?(r=0,n=0,i=0,o=0):(i=t.width/e.scale,o=t.height/e.scale,r=e.centerX-i/2,n=e.centerY-o/2),Object.freeze({originX:r,originY:n,width:i,height:o})},e.prototype.paint=function(e,t,r){var n=this;c.PaintScheduler.paintBuckets({visions:this.visions,grid:this.grid,chunkContext:this.bucketFactory.chunkContext,floatLeafPainter:function(r){var o,a=r.id,s=n.painters[a];e.resetTransform(),e.scale(t,t),s.paint(e,i.CanvasPaitingMode.Directly),null===(o=n.statistical)||void 0===o||o.recordPaintFloat()},bucketPainter:function(i,o,a,s,c){var u=n.toScreenPoint(o,a,n.grid.unitSize),l=u.x,p=u.y;return e.resetTransform(),e.translate(l*t,p*t),i.updatePaintInfo(l,p,t,r),i.paint(e,s,c)}}),this.willPrintGrid&&(e.resetTransform(),e.scale(t,t),this.paintGrid(e))},e.prototype.paintGrid=function(e){var t=this,r=this.grid,n=r.range,i=r.unitSize;e.lineWidth=1,e.strokeStyle="rgba(0,0,0,0.5)",n.forEach((function(r,n){var o=t.toScreenPoint(r,n,i),a=o.x,s=o.y,c=Math.ceil(i.width*t.camera.scale),u=Math.ceil(i.height*t.camera.scale);e.strokeRect(a,s,c,u)}))},e.prototype.toScreenPoint=function(e,t,r){var n=t*r.width,i=e*r.height;return{x:(n-this.camera.centerX)*this.camera.scale+this.screenSize.width/2,y:(i-this.camera.centerY)*this.camera.scale+this.screenSize.height/2}},e}();t.Painter=l},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(12),o=r(21),a=r(22),s=r(6),c=function(){function e(e){this.visibleNodes={},this.rate=e.rate,this.bucketUnitSize=Object.freeze(n({},e.bucketUnitSize)),this.favorBucketsCount=e.favorBucketsCount,this.tree=e.tree,this.visions=e.visions,this.bucketFactory=e.bucketFactory,this.onLeafNodeVisible=e.onLeafNodeVisible,this.onLeafNodeInvisible=e.onLeafNodeInvisible,this.visionCover=this.calcVisionCover(e.visionRectangle),this._projectiveSize=this.calcProjectiveSize(this.visionCover,e.scale),this.buckets=new a.InfinityTable,this.searchAndFillVisibleNodes(this.visionCover.range,this._projectiveSize,this.visionCover.unitSize)}return Object.defineProperty(e.prototype,"projectiveSize",{get:function(){return this._projectiveSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitSize",{get:function(){return this.visionCover.unitSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this.visionCover.range},enumerable:!0,configurable:!0}),e.prototype.forEachBuckets=function(e){this.buckets.forEach(e)},e.prototype.bucket=function(e,t){return this.buckets.get(e,t)},e.prototype.update=function(e){var t=this;this.refreshVisibleNodes(e.diff);var r=this.updateVision(e),i=r.addedRange,o=r.keepRange,a=r.updatedProjectiveSize,s=n({},e.updateSet);o.forEach((function(r,n){var i=t.buckets.get(r,n),o=t.appendDiffAndCollectMovedLeaves(r,n,i,e);Object.assign(s,o)})),i.forEach((function(e,r){var n=t.buckets.get(e,r).collectLeaves();Object.assign(s,n)})),o.forEach((function(r,n){var i=t.buckets.get(r,n);i.handleUpdatedLeaves(s),i.fuseChunksWithNeighbours(),i.increaseChunksLife(),a&&i.updateProjectiveSize(a,e.refresh)})),e.shouldUpdateAll&&this.forEachBuckets((function(e){return e.notifyGlobalUpdate()})),this.callbackLeavesVisible(e)},e.prototype.refreshVisibleNodes=function(e){var t=e.addedSet,r=e.removedSet;for(var n in t)this.visibleNodes[n]=t[n];for(var n in r)delete this.visibleNodes[n]},e.prototype.updateVision=function(t){var r=o.emptyGridRangeForEach,n=this.visionCover.range,i=null;if(t.visionRectangle){var a=this.calcVisionCover(t.visionRectangle,this.visionCover.exponent),c=this.calcProjectiveSize(a,t.scale);if(!e.isVisionCoversEquals(a,this.visionCover)){var u=this.forkOrMegeAndGetRangeDiff(a,c);this.searchAndFillVisibleNodes(u.addedRange,c,a.unitSize),this.visionCover=a,r=u.addedRange,n=u.keepRange}s.isEquals(c,this._projectiveSize)||(this._projectiveSize=c,i=c)}return{addedRange:r,keepRange:n,updatedProjectiveSize:i}},e.prototype.forkOrMegeAndGetRangeDiff=function(e,t){var r,s=this,c=e.exponent-this.visionCover.exponent;if(c>0){var u=Math.pow(this.rate,c),l=new a.InfinityTable,p=[],h=this.visionCover.range.merge(u,u,(function(r,n,i,o){if(e.range.includes(r,n))if(o)p.push({row:r,column:n});else{var a=s.bucketFactory.merge(s.buckets,{range:i,unitSize:e.unitSize,projectiveSize:t});l.set(r,n,a)}}));if(r=i.GridRange.calcDiff(e.range,h),p.length>0){var d=o.fuseGridRangeForEach(r.addedRange,p),f=o.rejectGridRangeForEach(r.keepRange,p);r=n(n({},r),{addedRange:d,keepRange:f})}this.buckets.forEach((function(e){return e.dispose()})),this.buckets=l}else if(c<0){u=Math.pow(this.rate,Math.abs(c));var y=new a.InfinityTable,A=this.visionCover.range.fork(u,u,(function(r,n,o){var a=i.GridRange.calcIntersection(o,e.range),c=s.buckets.get(r,n);if(a&&c){var u=s.bucketFactory.fork(c,{range:a,unitSize:e.unitSize,projectiveSize:t});y.fill(u)}}));r=i.GridRange.calcDiff(e.range,A),this.buckets.forEach((function(e){return e.dispose()})),this.buckets=y}else(r=i.GridRange.calcDiff(e.range,this.visionCover.range)).removedRange.forEach((function(e,t){var r;null===(r=s.buckets.delete(e,t))||void 0===r||r.dispose()}));return r},e.prototype.searchAndFillVisibleNodes=function(e,t,r){var n=this,o=null;e.forEach((function(e,a){if(!o)for(var s in o={},n.visibleNodes){var c=n.rangeOfLeafNode(n.visibleNodes[s],r);c&&(o[s]=c)}var u=i.GridRange.cellToRect(e,a,r),l=n.bucketFactory.build(n.tree,u,t,(function(t){var r=o[t.id];return!(!r||!r.includes(e,a))}));n.buckets.set(e,a,l)}))},e.prototype.appendDiffAndCollectMovedLeaves=function(e,t,r,n){var i=n.diff,o=n.moveSet,a=i.addedSet,s=this.visionCover.unitSize,c=[],u=[],l=[];for(var p in a)(d=this.rangeOfLeafNode(a[p],s))&&!d.includes(e,t)&&c.push(p);var h={};for(var p in o){var d,f=o[p];if(d=this.rangeOfLeafNode(f,s)){var y=r.has(p),A=d.includes(e,t);y&&A?h[p]=f:y&&!A?l.push(f):!y&&A&&u.push(f)}}return(c.length>0||u.length>0||l.length>0)&&(i=i.decorate({maskAdded:c,insertToAdded:u,insertToRemoved:l})),r.appendDiff(i),h},e.prototype.callbackLeavesVisible=function(e){var t=e.diff,r=t.addedSet,n=t.removedSet;for(var i in r)this.onLeafNodeVisible(r[i]);for(var i in n)this.onLeafNodeInvisible(n[i])},e.prototype.calcVisionCover=function(t,r){var n=t.width*t.height;0===n&&(n=1);var o=this.rate,a=this.favorBucketsCount,s=this.bucketUnitSize,c=s.width*s.height,u=Math.log(n/(a*c))/(2*Math.log(o));if(void 0===r)u=Math.ceil(u);else{var l=r+e.ExponentBuffer,p=r-1-e.ExponentBuffer;u=u>l||u<p?Math.ceil(u):r}var h=Math.pow(o,u),d=Object.freeze({width:s.width*h,height:s.height*h}),f=i.GridRange.rectToRange(t,d);return Object.freeze({exponent:u,range:f,unitSize:d})},e.prototype.calcProjectiveSize=function(e,t){var r=e.unitSize,n=r.width,i=r.height;return Object.freeze({width:Math.ceil(n*t),height:Math.ceil(i*t)})},e.prototype.rangeOfLeafNode=function(e,t){var r=this.visions.vision(e.id);return r?i.GridRange.rectToRange(r.sceneRect,t):null},e.isVisionCoversEquals=function(e,t){return e.exponent===t.exponent&&e.unitSize.width===t.unitSize.width&&e.unitSize.height===t.unitSize.height&&i.GridRange.isEquals(e.range,t.range)},e.ExponentBuffer=.25,e}();t.Grid=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n,i,o){var a=this;this.touch=function(){a.onRepaint(a.leaf.value)},this.screen=e,this.visions=t,this.id=r.id,this.leaf=r,this.fixedSize=n,this.render=i,this.onRepaint=o}return e.prototype.refreshPayload=function(){this.render.updatePayload(this.leaf.value.payload)},e.prototype.updateContext=function(e){this.render.updateContext(e)},e.prototype.paint=function(e,t,r){var n=this.leaf.value,i=this.visions.vision(this.leaf.id),o=this.createPaintParams(e,i,n,t,r),a=i.screenRect.originX,s=i.screenRect.originY;if(r&&(a-=r.originX,s-=r.originY),e.translate(a,s),this.fixedSize){var c=i.scale;1!==c&&e.scale(c,c)}this.render.paint(o)},e.prototype.createPaintParams=function(e,t,r,n,i){var o,a,s,c=t.screenRect,u=this.touch,l=this.createTailor(t,i);if(this.fixedSize){s=1,a={width:r.width,height:r.height};var p=t.scale,h=t.margin,d=c.width/p-a.width,f=c.height/p-a.height,y=d/(h.left+h.right),A=f/(h.top+h.bottom);o={left:h.left*y,right:h.right*y,top:h.top*A,bottom:h.bottom*A}}else s=t.scale,o=t.margin,a={width:c.width-o.left-o.right,height:c.height-o.top-o.bottom};var m={context:e,margin:o,scale:s,size:a,tailor:l,paintingMode:n,touch:u,screen:this.screen},g=this.createFakeScreenRect(a,l);return m.screenSize=g,m.screenRect=g,m},e.prototype.createTailor=function(e,t){var r=e.tailor,n=r.left,i=r.top,o=r.right,a=r.bottom;if(t){var s=e.screenRect,c=s.originX,u=s.originY,l=c+s.width,p=u+s.height,h=c+n,d=u+i,f=l-o,y=p-a;n=(h=Math.max(h,t.originX))-c,i=(d=Math.max(d,t.originY))-u,o=l-(f=Math.min(f,t.originX+t.width)),a=p-(y=Math.min(y,t.originY+t.width))}if(this.fixedSize){var A=e.scale;n/=A,i/=A,o/=A,a/=A}return{left:n,top:i,right:o,bottom:a}},e.prototype.createFakeScreenRect=function(e,t){var r=t.left,n=t.top;return{originX:r,originY:n,width:e.width-t.right-r,height:e.height-t.bottom-n}},e}();t.LeafNodePainter=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(51),c=r(56),u=r(57),l=function(e){function t(t,r,n,i){var o=e.call(this,r)||this;return o.canvasPool=n,o.chunkContext=new c.ChunkContext((function(e){return new u.PaintableChunk(t,n,e,i)})),o}return i(t,e),t.prototype.create=function(e){return new p(e)},t}(s.BucketFactory);t.PaintableBucketFactory=l;var p=function(e){function t(t){var r=e.call(this,t)||this;return r.ratio=1,r.cacheSize=Object.freeze({width:t.projectiveSize.width,height:t.projectiveSize.height}),r.projectiveRect=Object.freeze(o({originX:0,originY:0},t.projectiveSize)),r}return i(t,e),t.prototype.updatePaintInfo=function(e,t,r,n){this.projectiveRect=Object.freeze(o(o({},this.projectiveRect),{originX:e,originY:t})),this.ratio=r,this.cacheSize=Object.freeze({width:this.projectiveSize.width*r,height:this.projectiveSize.height*r}),this.updateCacheInfo(this.ratio,this.cacheSize,n),this.updateProjectiveRect(this.projectiveRect)},t.prototype.onProjectiveSizeUpdate=function(e,t){this.projectiveRect=Object.freeze(o(o({},this.projectiveRect),e)),this.cacheSize=Object.freeze({width:this.projectiveSize.width*this.ratio,height:this.projectiveSize.height*this.ratio}),this.updateCacheInfo(this.ratio,this.cacheSize,t),this.updateProjectiveRect(this.projectiveRect)},t.prototype.updateCacheInfo=function(e,t,r){var n,i;try{for(var o=a(this),s=o.next();!s.done;s=o.next())s.value.updateCacheInfo(e,t,r)}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.updateProjectiveRect=function(e){var t,r;try{for(var n=a(this),i=n.next();!i.done;i=n.next())i.value.updateProjectiveRect(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},t.prototype.notifyGlobalUpdate=function(){var e,t;try{for(var r=a(this),n=r.next();!n.done;n=r.next())n.value.onGlobalUpdate()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.paint=function(e,t,r){for(var n,i=r||this[Symbol.iterator]();!(n=i.next()).done;){var o=n.value;if(t(o))return{iterator:i,floatChunk:o};o.paint(e)}return{iterator:i,floatChunk:null}},t}(s.Bucket);t.PaintableBucket=p},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(23),o=r(12),a=r(22),s=r(13),c=function(){function e(e){this.visions=e}return e.prototype.build=function(e,t,r,n){var i,o,a=this.canvasPool,c=this.chunkContext,u=s.ShadowList.create({tree:e,initLeafFilter:null!=n?n:function(){return!1},valueInitializer:function(){return null}});if(n&&u.length>0){var l=c.create().initWithShadowList(u);(i={})[l.id]=l,o=i,l.isFloat&&c.bind(l,l.getSampleNode().related)}return this.create({canvasPool:a,rectangle:t,chunks:o,projectiveSize:r,shadowList:u,chunkContext:c})},e.prototype.merge=function(e,t){var r=t.range,n=t.unitSize,i=t.projectiveSize,a=[];r.forEach((function(t,r){a.push(e.get(t,r).shadowList)}));var c=this.canvasPool,u=this.chunkContext,l=s.ShadowList.merge(a),p={};if(l.length>0){var h=u.create().initWithShadowList(l);p[h.id]=h,h.isFloat&&u.bind(h,h.getSampleNode().related)}var d=r.row0*r.rowsCount,f=r.column0*r.columnsCount,y=o.GridRange.cellToRect(d,f,n);return this.create({canvasPool:c,rectangle:y,shadowList:l,chunks:p,projectiveSize:i,chunkContext:u})},e.prototype.fork=function(e,t){var r=this,n=t.range,i=t.unitSize,s=t.projectiveSize,c=this.canvasPool,u=this.chunkContext,l={},p=new a.InfinityTable;return e.shadowList.forEach((function(e){var t=r.visions.vision(e.related.id);if(t){var n=o.GridRange.rectToRange(t.sceneRect,i);l[e.id]=n}})),n.forEach((function(t,n){var a=e.shadowList.filter((function(e){var r;return!!(null===(r=l[e.id])||void 0===r?void 0:r.includes(t,n))})),h={};if(a.length>0){var d=u.create().initWithShadowList(a);h[d.id]=d,u.bind(d,d.getSampleNode().related)}p.set(t,n,r.create({canvasPool:c,shadowList:a,chunks:h,projectiveSize:s,chunkContext:u,rectangle:o.GridRange.cellToRect(t,n,i)}))})),p},e}();t.BucketFactory=c;var u=function(){function e(t){this.id=""+(e.nextId+=1),this.chunkContext=t.chunkContext,this.rectangle=t.rectangle,this._projectiveSize=t.projectiveSize,this.shadowList=t.shadowList,this.chunks=t.chunks||{}}return e.prototype.onProjectiveSizeUpdate=function(e,t){},Object.defineProperty(e.prototype,"projectiveSize",{get:function(){return this._projectiveSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstChunk",{get:function(){var e=this.shadowList.firstNode;return e?e.value:null},enumerable:!0,configurable:!0}),e.prototype[Symbol.iterator]=function(){return new l(this.firstChunk)},e.prototype.has=function(e){return null!==this.shadowList.node(e)},e.prototype.findChunk=function(e){var t=null,r=this.shadowList.node(e.id);return r&&(t=this.findChunkByNode(r)),t},e.prototype.collectLeaves=function(){var e,t,r={};for(var i in this.chunks)try{for(var o=(e=void 0,n(this.chunks[i])),a=o.next();!a.done;a=o.next()){var s=a.value;r[s.id]=s.related}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},e.prototype.appendDiff=function(e){var t,r,i,o;this.handleUpdatedLeaves(e.sortedSet);var a=this.shadowList.appendDiff(e),s=a.removedNodes,c=a.addedNodes;try{for(var u=n(s),l=u.next();!l.done;l=u.next()){var p=l.value;this.removeNode(p)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var h=n(c),d=h.next();!d.done;d=h.next())p=d.value,this.addNode(p)}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}},e.prototype.removeNode=function(e){var t=this.findChunkByNode(e);if(t){var r=this.chunkContext,n=t.split(e),i=n.left,o=n.right;i&&(this.chunks[i.id]=i,i.isFloat&&r.bind(i,i.getSampleNode().related)),o&&(this.chunks[o.id]=o,o.isFloat&&r.bind(o,o.getSampleNode().related)),delete this.chunks[t.id],t.dispose()}},e.prototype.addNode=function(e){var t,r,n=this.chunkContext,i=this.previousNode(e),o=null===(t=i)||void 0===t?void 0:t.value,a=this.nextNode(e),s=null===(r=a)||void 0===r?void 0:r.value;if(o&&o===s){var c=o,u=c.cutOff(i,a),l=u.left,p=u.right,h=u.becomeBlank;this.chunks[l.id]=l,this.chunks[p.id]=p,l.isFloat&&n.bind(l,l.getSampleNode().related),p.isFloat&&n.bind(p,p.getSampleNode().related),h?(delete this.chunks[c.id],c.dispose()):c.resetLife()}var d=this.chunkContext.create().initWithNode(e);this.chunks[d.id]=d,n.bind(d,d.getSampleNode().related)},e.prototype.previousNode=function(e){for(var t=e.previousNode;t&&!t.value;)t=t.previousNode;return t},e.prototype.nextNode=function(e){for(var t=e.nextNode;t&&!t.value;)t=t.nextNode;return t},e.prototype.findChunkByNode=function(e){var t=e.value,r=null;if(t&&(r=this.chunks[t.id])!==t)throw new Error("invalid node");return r},e.prototype.handleUpdatedLeaves=function(e){var t;for(var r in e){var n=this.shadowList.node(r);if(null===(t=n)||void 0===t?void 0:t.value){var i=n.value,o=i.split(n),a=o.left,s=o.right,c=this.chunkContext;a&&(this.chunks[a.id]=a,a.isFloat&&c.bind(a,a.getSampleNode().related)),s&&(this.chunks[s.id]=s,s.isFloat&&c.bind(s,s.getSampleNode().related)),i.resetLife()}}},e.prototype.fuseChunksWithNeighbours=function(){var e,t,r=this.chunks,o=i.Chunk.fuseEachNeighbours(r);try{for(var a=n(o),s=a.next();!s.done;s=a.next()){var c=s.value;delete r[c.id],c.dispose()}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}},e.prototype.increaseChunksLife=function(){var e=this.chunks;for(var t in e)e[t].increaseLife()},e.prototype.updateProjectiveSize=function(e,t){this._projectiveSize=e,this.onProjectiveSizeUpdate(e,t)},e.prototype.dispose=function(){var e,t,r={};try{for(var i=n(this.shadowList),o=i.next();!o.done;o=i.next()){var a=o.value.value;a&&(r[a.id]=a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var s in r)r[s].dispose()},e.prototype.notifyGlobalUpdate=function(){},e.nextId=0,e}();t.Bucket=u;var l=function(){function e(e){this.chunk=e}return e.prototype.next=function(){var e,t;return this.chunk?(t={value:this.chunk,done:!1},this.chunk=null!=(e=this.chunk.nextChunk)?e:null):t={value:void 0,done:!0},t},e}()},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(24),s=r(53),c=r(25),u=function(){function e(e){this.bufferMap={},this._root=new c.TreeGroupNodeImpl(this),e&&e(this)}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.createDiffBuffer=function(){var e=this,t=new a.ProtoTreeDiffBufferImplement((function(t){return delete e.bufferMap[t]}));return this.bufferMap[t.id]=t,t},e.prototype.wrapLeaf=function(e){return new c.TreeLeafNodeImpl(this,e)},e.prototype.wrapGroup=function(e){return new c.TreeGroupNodeImpl(this,e)},e.prototype[Symbol.iterator]=function(){return this._root.leaves[Symbol.iterator]()},e.prototype.forEach=function(e){return this._root.leaves.forEach(e)},e.prototype.append=function(e,t){void 0===t&&(t=this._root);var r=e,n=t;r.assertBlank(this),n.assertAddedTo(this),this.appendTo(r,n),this.markAdded(r)},e.prototype.addAfter=function(e,t){var r=e,n=t;if(r.assertBlank(this),n.assertAddedTo(this),n===this._root)throw new Error("cannot add after root");this.addAfterTo(r,n),this.markAdded(r)},e.prototype.addBefore=function(e,t){var r=e,n=t;if(r.assertBlank(this),n.assertAddedTo(this),n===this._root)throw new Error("cannot add before root");this.addBeforeTo(r,n),this.markAdded(r)},e.prototype.remove=function(e){var t=e;t.assertAddedTo(this),this.removeFrom(t),this.markRemoved(t)},e.prototype.moveAppend=function(e,t){void 0===t&&(t=this._root);var r=e,n=t;r.assertAddedTo(this),n.assertAddedTo(this),this.removeFrom(r),this.appendTo(r,n),this.markSorted(r)},e.prototype.moveAfter=function(e,t){var r=e,n=t;r.assertAddedTo(this),n.assertAddedTo(this),this.removeFrom(r),this.addAfterTo(r,n),this.markSorted(r)},e.prototype.moveBefore=function(e,t){var r=e,n=t;r.assertAddedTo(this),n.assertAddedTo(this),this.removeFrom(r),this.addBeforeTo(r,n),this.markSorted(r)},e.prototype.appendTo=function(e,t){e.par=t,t.las?(e.pre=t.las,t.las.nex=e,t.las=e):(t.fir=e,t.las=e)},e.prototype.addAfterTo=function(e,t){var r=t.nex,n=t.par;if(!n)throw new Error("cannot add after root");e.pre=t,e.nex=r,e.par=n,t.nex=e,r&&(r.pre=e),n.las===t&&(n.las=e)},e.prototype.addBeforeTo=function(e,t){var r=t.pre,n=t.par;if(!n)throw new Error("cannot add before root");e.nex=t,e.pre=r,e.par=n,t.pre=e,r&&(r.nex=e),n.fir===t&&(n.fir=e)},e.prototype.removeFrom=function(e){var t=e.pre,r=e.nex,n=e.par;if(!n)throw new Error("cannot remove root");t&&(t.nex=r),r&&(r.pre=t),n.fir===e&&(n.fir=r),n.las===e&&(n.las=t),e.par=null,e.pre=null,e.nex=null},e.prototype.sortLeaves=function(e){return e.length<=1?e:new s.TreeLeafNodesSorter(e).sort()},e.prototype.sort=function(e,t){var r=e;r.assertAddedTo(this);var n=r.nodes,o=i(n).sort(t);this.rebuildList(r,o),this.checkAndMarkSorted(n,o)},e.prototype.rebuildList=function(e,t){t.length>0&&(e.fir=t[0],e.las=t[t.length-1]);for(var r=null,n=0;n<t.length;++n){var i=t[n];r&&(r.nex=i),i.pre=r,r=i}r&&(r.nex=null)},e.prototype.checkAndMarkSorted=function(e,t){for(var r,n,i,a,s,c,u,l,p={},h={},d=0;d<e.length;++d){var f=e[d];p[f.id]=d,h[f.id]=f}var y=[],A=null,m=0,g=-1;try{for(var v=o(t),b=v.next();!b.done;b=v.next()){var P=p[b.value.id];A?P>A[A.length-1]?A.push(P):(y.push(A),A.length>m&&(m=A.length,g=y.length-1),A=[P]):A=[P]}}catch(e){r={error:e}}finally{try{b&&!b.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}if(A&&(y.push(A),A.length>m&&(m=A.length,g=y.length-1)),-1!==g){var S=y[g];try{for(var w=o(S),x=w.next();!x.done;x=w.next())delete h[e[P=x.value].id]}catch(e){i={error:e}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}var O=S[0],k=S[S.length-1];for(d=g-1;d>=0;d--)if((T=y[d])[T.length-1]<O){O=T[0];try{for(var M=(s=void 0,o(T)),C=M.next();!C.done;C=M.next())delete h[e[P=C.value].id]}catch(e){s={error:e}}finally{try{C&&!C.done&&(c=M.return)&&c.call(M)}finally{if(s)throw s.error}}}for(d=g+1;d<y.length;d++){var T;if((T=y[d])[0]>k){k=T[T.length-1];try{for(var _=(u=void 0,o(T)),I=_.next();!I.done;I=_.next())delete h[e[P=I.value].id]}catch(e){u={error:e}}finally{try{I&&!I.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}}}}for(var E in h)this.markSorted(h[E])},e.prototype.markAdded=function(e){var t,r;for(var n in this.bufferMap){var i=this.bufferMap[n];if(e instanceof c.TreeLeafNodeImpl)i.markAdded(e);else try{for(var a=(t=void 0,o(e.leaves)),s=a.next();!s.done;s=a.next()){var u=s.value;i.markAdded(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},e.prototype.markSorted=function(e){var t,r;for(var n in this.bufferMap){var i=this.bufferMap[n];if(e instanceof c.TreeLeafNodeImpl)i.markSorted(e);else try{for(var a=(t=void 0,o(e.leaves)),s=a.next();!s.done;s=a.next()){var u=s.value;i.markSorted(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},e.prototype.markRemoved=function(e){var t,r;for(var n in this.bufferMap){var i=this.bufferMap[n];if(e instanceof c.TreeLeafNodeImpl)i.markRemoved(e);else try{for(var a=(t=void 0,o(e.leaves)),s=a.next();!s.done;s=a.next()){var u=s.value;i.markRemoved(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},e}();t.ProtoTree=u},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t,r,i={};try{for(var o=n(e),a=o.next();!a.done;a=o.next()){var s=a.value;i[s.id]={leaf:s,nex:null}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this.nodes=i,this.leaves=e}return e.prototype.sort=function(){for(var e in this.leaves.splice(0),this.nodes){var t=this.nodes[e],r=this.findNextNode(t);r&&(t.nex=r,delete this.nodes[r.leaf.id])}for(var e in this.nodes)for(t=this.nodes[e];t;)this.leaves.push(t.leaf),t=t.nex;return this.leaves},e.prototype.findNextNode=function(e){for(var t=e.leaf.nexLeaf();t;){var r=this.nodes[t.id];if(r)return r;t=t.nexLeaf()}return null},e}();t.TreeLeafNodesSorter=i},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(55),o=function(){function e(e){this.nodesSet={},this._length=0,this.fir=null,this.las=null,this.valueInitializer=e}return e.create=function(t){var r,o,a=new e(t.valueInitializer),s=t.initLeafFilter||e.alwaysTrue;try{for(var c=n(t.tree),u=c.next();!u.done;u=c.next()){var l=u.value;if(s(l)){var p=new i.ShadowNodeImpl(l);p.value=a.valueInitializer(p),a.appendNode(p)}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}return a},e.alwaysTrue=function(){return!0},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this.fir},enumerable:!0,configurable:!0}),e.prototype.node=function(e){return this.nodesSet[e]||null},e.prototype.findNode=function(e){for(var t=this.fir;t&&!e(t);)t=t.nex;return t},e.prototype[Symbol.iterator]=function(){return new a(this.fir)},e.prototype.forEach=function(e){for(var t=this.fir;t;)e(t),t=t.nex},e.prototype.appendDiff=function(e){var t,r,o,a,s=[],c=[],u=[];for(var l in e.removedSet)(f=this.nodesSet[l])&&(this.removeNode(f),delete this.nodesSet[l],s.push(f),this._length-=1);for(var l in e.sortedSet)(f=this.nodesSet[l])&&!e.addedSet[l]&&(this.removeNode(f),u.push(f));for(var l in e.addedSet)if(!this.nodesSet[l]){var p=e.addedSet[l];(f=new i.ShadowNodeImpl(p)).value=this.valueInitializer(f),this.nodesSet[l]=f,c.push(f),this._length+=1}try{for(var h=n(c),d=h.next();!d.done;d=h.next()){var f=d.value;this.addNode(f)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}try{for(var y=n(u),A=y.next();!A.done;A=y.next())f=A.value,this.addNode(f)}catch(e){o={error:e}}finally{try{A&&!A.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}return{removedNodes:s,addedNodes:c,sortedNodes:u}},e.merge=function(t){var r,o,a,s;if(t.length>0){var c=new e(t[0].valueInitializer),u=c.nodesSet;try{for(var l=n(t),p=l.next();!p.done;p=l.next()){var h=p.value;try{for(var d=(a=void 0,n(h)),f=d.next();!f.done;f=d.next()){var y=f.value,A=y.id,m=y.related,g=y.value;if(!u[A]){var v=new i.ShadowNodeImpl(m);v.value=g,u[A]=v,c._length+=1,c.addNode(v)}}}catch(e){a={error:e}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return c}return null},e.prototype.filter=function(t){var r,o,a=new e(this.valueInitializer);try{for(var s=n(this),c=s.next();!c.done;c=s.next()){var u=c.value;if(t(u)){var l=u.related,p=u.value,h=new i.ShadowNodeImpl(l);h.value=p,a.appendNode(h)}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a},e.prototype.removeNode=function(e){var t=e.pre,r=e.nex;t&&(t.nex=r),r&&(r.pre=t),this.fir===e&&(this.fir=r),this.las===e&&(this.las=t),e.pre=null,e.nex=null},e.prototype.appendNode=function(e){this.las?(e.pre=this.las,this.las.nex=e,this.las=e):(this.fir=e,this.las=e),this.nodesSet[e.id]=e,this._length+=1},e.prototype.addNode=function(e){var t=this.findPreNode(e),r=this.findNexNode(e);t?(t.nex=e,e.pre=t):this.fir=e,r?(r.pre=e,e.nex=r):this.las=e},e.prototype.findPreNode=function(e){for(var t=e.related.preLeaf();t;){var r=this.nodesSet[t.id];if(r)return r;t=t.preLeaf()}return null},e.prototype.findNexNode=function(e){for(var t=e.related.nexLeaf();t;){var r=this.nodesSet[t.id];if(r)return r;t=t.nexLeaf()}return null},e}();t.ShadowList=o;var a=function(){function e(e){this.node=e}return e.prototype.next=function(){var e;return this.node?(e={value:this.node,done:!1},this.node=this.node.nex):e={value:void 0,done:!0},e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.pre=null,this.nex=null,this.id=e.id,this.related=e}return Object.defineProperty(e.prototype,"previousNode",{get:function(){return this.pre},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextNode",{get:function(){return this.nex},enumerable:!0,configurable:!0}),e}();t.ShadowNodeImpl=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=function(){function e(e){this.nodes={},this.factory=e}return e.prototype.create=function(){return this.factory(this)},e.prototype.forEachCandidateFloatNodes=function(e){for(var t in this.nodes)e(this.nodes[t].leaf)},e.prototype.bind=function(e,t){var r=this.nodes[t.id];r||(r=this.nodes[t.id]={leaf:t,chunks:{}}),r.chunks[e.id]=e},e.prototype.unbind=function(e,t){var r=this.nodes[t.id];if(r){var i=r.chunks;delete i[e.id],n.hasKey(i)||delete this.nodes[t.id]}},e}();t.ChunkContext=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var c=r(0),u=r(6),l=r(26),p=function(e){function t(r,n,i,o){var a=e.call(this,i)||this;return a.ratio=1,a.cacheSize=t.initCacheSize,a.didCacheSizeUpdated=!1,a.projectiveRect=t.initProjectiveReact,a.painter=r,a.statistical=o,a.canvasPool=n,a.canvasRef=new l.CanvasRef(n),a}return i(t,e),t.prototype.onSplit=function(){var e;this.canvasRef.clear(),null===(e=this.statistical)||void 0===e||e.recordSplit()},t.prototype.onRemoved=function(){this.canvasRef.clear()},t.prototype.updateProjectiveRect=function(e){this.projectiveRect=e},t.prototype.updateCacheInfo=function(e,t,r){this.ratio=e,u.isEquals(this.cacheSize,t)||(this.cacheSize=t,this.didCacheSizeUpdated=!0),r&&this.didCacheSizeUpdated&&(this.canvasRef.clear(),this.didCacheSizeUpdated=!1)},t.prototype.onGlobalUpdate=function(){this.canvasRef.clear()},t.prototype.paint=function(e){var t,r,n,i=this.canvasRef.get();if(i)n=i.canvas;else{var o=this.canvasRef.allocate(this.cacheSize),a=o.context,s=o.canvas;a.scale(this.ratio,this.ratio),this.paintNodes(a,this,c.CanvasPaitingMode.GenerateCache),null===(t=this.statistical)||void 0===t||t.recordGenerateCache(),n=s}if(this.canvasRef.isSizeEquals(this.cacheSize))e.drawImage(n,0,0);else{var u=this.cacheSize,l=u.width,p=u.height;e.drawImage(n,0,0,l+1,p+1)}null===(r=this.statistical)||void 0===r||r.recordPaintCache()},t.prototype.onFuse=function(e,t){var r,n,i;if(!this.canvasRef.isEmpty()||this.hasAnyCache(e)||this.hasAnyCache(t)){var c=a(e,[this],t),u=o(c),p=u[0],h=u.slice(1),d=void 0;p.canvasRef.isSizeEquals(this.cacheSize)?d=p.canvasRef:(d=this.mergeChunk(new l.CanvasRef(this.canvasPool),p),this.canvasRef.clear());try{for(var f=s(h),y=f.next();!y.done;y=f.next()){var A=y.value;d=this.mergeChunk(d,A)}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}this.canvasRef=d}null===(i=this.statistical)||void 0===i||i.recordFuse(e.length+1+t.length)},t.prototype.hasAnyCache=function(e){var t,r;try{for(var n=s(e),i=n.next();!i.done;i=n.next())if(!i.value.canvasRef.isEmpty())return!0}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},t.prototype.mergeChunk=function(e,t){var r,n,i;if(i=e.isEmpty()?e.allocate(this.cacheSize).context:e.get().context,t.canvasRef.isEmpty()){var o=this.paintNodes(i,t,c.CanvasPaitingMode.GenerateCache);null===(r=this.statistical)||void 0===r||r.recordPaintCache(o)}else{i.resetTransform();var a=t.canvasRef.get().canvas;if(t.canvasRef.isSizeEquals(this.cacheSize))i.drawImage(a,0,0);else{var s=this.cacheSize,u=s.width,l=s.height;i.drawImage(a,0,0,u+1,l+1)}null===(n=this.statistical)||void 0===n||n.recordFuseCache()}return e},t.prototype.paintNodes=function(e,t,r){var n,i,o,a=0;try{for(var c=s(t),u=c.next();!u.done;u=c.next()){var l=u.value;e.resetTransform(),e.scale(this.ratio,this.ratio),null===(o=this.painter(l.id))||void 0===o||o.paint(e,r,this.projectiveRect),a+=1}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return a},t.initCacheSize=Object.freeze({width:1,height:1}),t.initProjectiveReact=Object.freeze({originX:0,originY:0,width:1,height:1}),t}(r(23).Chunk);t.PaintableChunk=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(12),o=function(){function e(e){var t=this,r=e.grid,n=e.chunkContext,i=e.visions,o=e.floatLeafPainter,a=e.bucketPainter;this.pendingByFloats={},this.paintableBucketsQueue=[],this.isFloatChunk=function(e){return e.id in t.chunkToFloatMap},this.grid=r,this.visions=i,this.floatLeafPainter=o,this.paintBucket=a,this.chunkToFloatMap=this.searchChunkToFloat(n)}return e.paintBuckets=function(t){var r=new e(t);r.collectBuckets(),r.runLoopToPaintAll()},e.prototype.searchChunkToFloat=function(e){var t=this,r={};return e.forEachCandidateFloatNodes((function(e){var n=e,i=t.searchCoverBuckets(n);if(i){var o={},a=!0,s=null;for(var c in i){var u=i[c].findChunk(n);if(!u||!u.isFloat){a=!1;break}s||(s={leaf:n,info:{untouched:i,pending:{}}}),o[u.id]=s}a&&s&&Object.assign(r,o)}})),r},e.prototype.searchCoverBuckets=function(e){var t=this,r=this.visions.vision(e.id);if(!r)return null;var o=i.GridRange.rectToRange(r.sceneRect,this.grid.unitSize),a=i.GridRange.calcIntersection(o,this.grid.range);if(!a)return null;var s={};return a.forEach((function(e,r){var n=t.grid.bucket(e,r);n&&(s[n.id]=n)})),n.hasKey(s)?s:null},e.prototype.collectBuckets=function(){var e=this;this.grid.forEachBuckets((function(t,r,n){e.startToPaintBucket({bucket:t,row:r,column:n})}))},e.prototype.runLoopToPaintAll=function(){for(;this.paintableBucketsQueue.length>0;)this.startToPaintBucket(this.paintableBucketsQueue.pop());n.hasKey(this.pendingByFloats)&&this.printPendingFloatNodesWarn()},e.prototype.printPendingFloatNodesWarn=function(){for(var e in console.warn("found pending float nodes were never paint"),this.pendingByFloats){var t=this.pendingByFloats[e],r=t.untouched,n=t.pending,i=Object.keys(r).join(", "),o=Object.keys(n).join(", ");console.warn("float "+e+" is waiting "+i+" to touch, and is padding buckets "+o)}},e.prototype.startToPaintBucket=function(e){var t=e.bucket,r=e.row,i=e.column,o=e.iterator,a=this.paintBucket(t,r,i,this.isFloatChunk,o),s=a.iterator,c=a.floatChunk;if(c){var u=this.pendingByFloatInfo(c);if(u){var l=u.untouched,p=u.pending,h=c.getSampleNode();delete l[t.id],p[t.id]={bucket:t,row:r,column:i,iterator:s},n.hasKey(l)||this.startToPaintFloatNode(h,p)}}},e.prototype.pendingByFloatInfo=function(e){var t=this.chunkToFloatMap[e.id];return t?t.info:null},e.prototype.startToPaintFloatNode=function(e,t){for(var r in this.floatLeafPainter(e.related),delete this.pendingByFloats[e.id],t){var n=t[r];this.paintableBucketsQueue.unshift(n)}},e}();t.PaintScheduler=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new(function(){function e(){"undefined"==typeof performance?this.fetch=this.fetchByMilliseconds:this.fetch=this.fetchByMicroseconds}return e.prototype.fetchByMilliseconds=function(){return 1e3*Date.now()},e.prototype.fetchByMicroseconds=function(){return Math.floor(1e3*performance.now())},e}());t.currentMicroseconds=function(){return n.fetch()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27),i=r(28);t.CNode=i.CNode,t.creatHTMLRenderEngine=function(e){return new n.HTMLRenderEngineImplement(e)},t.isHTMLRenderEngine=function(e){return e instanceof n.HTMLRenderEngineImplement}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(13),s=r(7),c=function(){function e(e){var t=this;this.setCNodeElement=function(e,r){var n=e.treeNode.id,i=t.shadowList.node(n);i&&(i.value=r)},this.engine=e.engine,this.renderComponent=e.renderComponent,this.screen=e.screen,this.fixedSize=e.fixedSize,this.className=e.className,this.style=e.style,this.visions=e.visions,this.leafFilter=e.leafFilter,this.mode=e.mode,this.camera=e.initCamera||this.screen.camera,this.context=this.screen.context,this.screenSize=Object.freeze({width:this.screen.width,height:this.screen.height}),this.shadowList=a.ShadowList.create({tree:e.tree,valueInitializer:function(){return null},initLeafFilter:function(r){return t.visions.includes(r.id)&&e.leafFilter(r)}})}return e.prototype.willInterruptEvent=function(e,t,r){var n=this.findComponentWithTarget(r);if(n){var i=this.engine.getDefinitionNode(n.definition);if(i)return i.willInterruptEvent(e,n,t)}return!1},e.prototype.findComponentWithTarget=function(e){var t=this.shadowList.findNode((function(t){var r=t.value;return!(!r||e!==r&&!r.contains(e))}));if(t){var r=t.related;if(r.value)return r.value}},e.prototype.update=function(e){var t=this.shadowList.appendDiff(e.diff),r=!1;e.camera&&(this.camera=e.camera,r=!0),e.screenSize&&(this.screenSize=e.screenSize,r=!0),e.context&&(this.context=e.context,r=!0),(s.hasKey(e.updateSet)||s.hasKey(e.moveSet)||t.addedNodes.length>0||t.removedNodes.length>0||t.sortedNodes.length>0)&&(r=!0),this.setState&&r&&this.setState(this.getRenderLayoutState())},e.prototype.getRender=function(){var e=this,t=this.renderComponent;return function(r){function n(t){var n=r.call(this,t)||this;return n.state=e.getRenderLayoutState(),e.setState=function(e){return n.setState(e)},n}return i(n,r),n.prototype.componentWillUnmount=function(){e.setState=void 0},n.prototype.render=function(){var r=this.state,n=r.camera,i=r.screenSize,a=r.context;return o.createElement(t,{engine:e.engine,screen:e.screen,mode:e.mode,visions:e.visions,leafFilter:e.leafFilter,camera:n,screenSize:i,context:a,fixedSize:e.fixedSize,className:e.className,style:e.style,onCNodeRef:e.setCNodeElement})},n}(o.Component)},e.prototype.getRenderLayoutState=function(){return{camera:this.camera,screenSize:this.screenSize,context:this.context}},e}();t.HTMLRenderLayout=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(5),c=r(28),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getPreviewURL=function(e){return this.props.mode===s.RenderLayoutMode.Preview?e.previewURL:void 0},t.prototype.getPositionInfo=function(e,t,r){var n,i,o,a=this.props.fixedSize;return o=e.absoluteCoordinates?1:r,a?(i={left:t.margin.left/o,right:t.margin.right/o,top:t.margin.top/o,bottom:t.margin.bottom/o},n={width:e.width,height:e.height}):(i=t.margin,n={width:t.screenRect.width-i.left-i.right,height:t.screenRect.height-i.top-i.bottom}),{margin:i,size:n,origin:{x:t.screenRect.originX,y:t.screenRect.originY},cnodeScale:o}},t.prototype.renderPreview=function(e,t,r,n){var i=this.props,o=i.screen,s=i.onCNodeRef,u=this.getPositionInfo(e,t,n),l=u.margin,p=u.size,h={vision:t,component:e,screen:o,onRef:s,margin:l,size:p,scale:u.cnodeScale};return a.createElement(c.CNode,{key:e.id,context:h},a.createElement("img",{src:r,alt:"",width:p.width,height:p.height}))},t.prototype.renderLeafNode=function(e,t,r,n){var i=e.definition,o=this.props,s=o.engine,c=o.context,u=o.screen,l=o.onCNodeRef,p=s.getDefinitionNode(i);if(p){var h=this.getPositionInfo(e,t,n),d=h.margin,f=h.size,y=h.origin,A=h.cnodeScale,m=p.render,g={vision:t,component:e,margin:d,size:f,scale:A,screen:u,onRef:l};return a.createElement(m,{key:e.id,id:e.id,cnode:g,screen:u,payload:e.payload,context:c,size:f,origin:y,margin:d,scale:r,layout:s.orderIndex})}return null},t.prototype.render=function(){var e=this,t=[],r=this.props,n=r.visions,i=r.leafFilter,s=r.style,c=r.className,u=r.engine,l=r.fixedSize;return n.forEach((function(r,n){if(i(r)){var o=r.value,a=e.getPreviewURL(o),s=l?n.scale:1;if(a)t.push(e.renderPreview(o,n,a,s));else{var c=l?1:n.scale,u=e.renderLeafNode(o,n,c,s);t.push(u)}}})),a.createElement("div",{className:c,style:o(o({},s),{width:"100%",height:"100%",position:"absolute",overflow:"hidden",zIndex:u.orderIndex})},t)},t}(a.Component);t.HTMLRenderLayoutComponent=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(5),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,r=t.origin,n=t.size,i=t.zIndex,o=t.margin,a=t.payload,s=t.context;return r.x!==e.origin.x||r.y!==e.origin.y||n.width!==e.size.width||n.height!==e.size.height||i!==e.zIndex||o.left!==e.margin.left||o.right!==e.margin.right||o.top!==e.margin.top||o.bottom!==e.margin.bottom||a!==e.payload||s!==e.context},t.prototype.render=function(){var e=this.props,t=e.render,r=e.screen,n=e.engine,i=e.component,o=e.context,s=e.origin,c=e.zIndex,u=e.size,l=e.margin,p=e.payload,h="translate("+s.x+"px,"+s.y+"px)";return a.createElement("g",{style:{transform:h,zIndex:c,WebkitTransform:h}},a.createElement(t,{id:i.id,screen:r,payload:p,context:o,size:u,origin:s,margin:l,scale:1,layout:n.orderIndex}))},t}(a.Component),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getPreviewURL=function(e){return this.props.mode===s.RenderLayoutMode.Preview?e.previewURL:void 0},t.prototype.createViewBox=function(){var e=this.props,t=e.screenSize,r=e.camera,n=r.scale,i=r.centerX,o=r.centerY,a=t.width/n,s=t.height/n;return Number.isNaN(a)&&(a=0),Number.isNaN(s)&&(s=0),i-a/2+" "+(o-s/2)+" "+a+" "+s},t.prototype.render=function(){var e=this,t=[],r=this.props,n=r.visions,i=r.leafFilter,s=r.className,u=r.screen,l=r.engine,p=r.context,h=r.style;return n.forEach((function(r,n){if(i(r)){var o=r.value,s=l.getDefinitionNode(o.definition);if(s){var h=e.getPreviewURL(o),d={x:o.originX,y:o.originY},f={width:o.width,height:o.height};if(h)t.push(a.createElement("image",{key:o.id,x:d.x,y:d.y,width:f.width,height:f.height,xlinkHref:h}));else{var y=n.margin,A=o.orderIndex;t.push(a.createElement(c,{key:o.id,screen:u,engine:l,render:s.render,context:p,component:o,margin:y,size:f,zIndex:A,origin:d,payload:o.payload}))}}}})),a.createElement("svg",{className:s,fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:this.createViewBox(),preserveAspectRatio:"xMidYMid",style:o(o({},h),{width:"100%",height:"100%",position:"absolute",overflow:"hidden",zIndex:l.orderIndex})},t)},t}(a.Component);t.SVGRenderLayoutComponent=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.nodes={}}return e.prototype.includes=function(e){return e in this.nodes},e.prototype.leaf=function(e){var t=this.nodes[e];return t?t.leaf:null},e.prototype.vision=function(e){var t=this.nodes[e];return t?t.vision:null},e.prototype.bindVision=function(e,t){var r=e.id,n=this.nodes[r];n?n.vision=t:this.nodes[r]={leaf:e,vision:t}},e.prototype.unbindVision=function(e){delete this.nodes[e]},e.prototype.forEach=function(e){for(var t in this.nodes){var r=this.nodes[t];e(r.leaf,r.vision)}},e.prototype.clean=function(){this.nodes={}},e}();t.VisionsHub=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(66),o=r(0),a=r(67),s=r(2),c=r(91),u=r(95),l=r(8),p=r(9),h=r(96),d=function(){function e(e){var t=this;this.screenUpdatedDispatcher=new p.EventDispatcher,this.cameraUpdatedDispatcher=new p.EventDispatcher,this.renderErrorCatchedDispatcher=new p.EventDispatcher,this.sizeUpdatedDispatcher=new p.EventDispatcher,this.centerX=0,this.centerY=0,this.scale=1,this.adaptedRectangle=null,this.dispatchUpdatedEvent=function(e,r){var n=t.convertVisionRectangle(e,t._width,t._height);t.screenUpdatedDispatcher.dispatch({width:t._width,height:t._height,camera:e,visionRectangle:n,isTransition:r}),t.cameraUpdatedDispatcher.dispatch(e)},this.onResize=function(e){var r=e[0];if(r){var n=r.contentRect,i=n.width,o=n.height;t.refreshSize(i,o)}},this.deviceType=e.scene.deviceType,this.scene=e.scene,this._className=e.className,this._style=e.style,this._context=e.context,this._width=e.width,this._height=e.height,this.cameraAnimation=new c.CameraAnimation(this.camera,this.dispatchUpdatedEvent),this.eventInterrupter=e.eventInterrupter,this.onRenderDuration=e.onRenderDuration,this.updater=new h.ScreenUpdater({screen:this,engines:e.engines,wrappedComponents:e.wrappedComponents,onRenderDuration:e.onRenderDuration}),e.autoResize&&(this.resizeObserver=new i.default(this.onResize))}return Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className!==e&&(this._className=e,this.updater.refreshScreenRendererState({className:e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(e){this._style!==e&&(this._style=e,this.updater.refreshScreenRendererState({style:e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappedComponents",{get:function(){return this.updater.wrappedComponents},set:function(e){this.updater.wrappedComponents=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"divElement",{get:function(){return this.updater.divElement},set:function(e){var t=this.updater.divElement;if(t!==e){if(this.resizeObserver&&t&&this.resizeObserver.unobserve(t),this.updater.divElement=e,e){var r=e.clientWidth,n=e.clientHeight;this.refreshSize(r,n),this.resizeObserver&&this.resizeObserver.observe(e)}this._eventProxy&&this._eventProxy.bindDivElement(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventProxy",{get:function(){return this._eventProxy||(this._eventProxy=new a.EventProxyImplement(this,this.eventInterrupter),this._eventProxy.bindDivElement(this.divElement)),this._eventProxy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(e){this._context!==e&&(this._context=e,this.updater.refreshScreenContext())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounding",{get:function(){if(this.divElement){var e=this.divElement.getBoundingClientRect();return{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height}}return{left:0,right:0,top:0,bottom:0,width:0,height:0}},enumerable:!0,configurable:!0}),e.prototype.bindCameraman=function(e){return new a.CameramanImplement(this,this.eventProxy,e)},e.prototype.convertPointToScreen=function(e,t){return{x:(e-this.centerX)*this.scale+this._width/2,y:(t-this.centerY)*this.scale+this._height/2}},e.prototype.convertPointToScene=function(e,t){return{x:(e-this._width/2)/this.scale+this.centerX,y:(t-this._height/2)/this.scale+this.centerY}},e.prototype.cameraWithAdaptRectangle=function(e,t){var r=e.originX+e.width/2,n=e.originY+e.height/2,i=this._width/e.width,a=this._height/e.height;switch((Number.isNaN(i)||i<=0)&&(i=1),(Number.isNaN(a)||a<=0)&&(a=1),t){case o.RectangleAdapterMode.Centering:return{centerX:r,centerY:n,scale:Math.min(i,a)};case o.RectangleAdapterMode.Tailor:return{centerX:r,centerY:n,scale:Math.max(i,a)};default:throw new Error("invalid adapter mode "+t)}},e.prototype.adaptRectangle=function(e){if(0===e.width||0===e.height)this.transformCamera({animationMode:e.animationMode,centerX:e.originX+e.width/2,centerY:e.originY+e.height/2,scale:1});else{var t=n(n({},this.cameraWithAdaptRectangle(e,e.adapterMode)),{animationMode:e.animationMode});this.setCameraTransfrom(t,!1),this.adaptedRectangle=Object.freeze({originX:e.originX,originY:e.originY,width:e.width,height:e.height,adapterMode:e.adapterMode})}},e.prototype.transformCamera=function(e){this.adaptedRectangle=null,this.setCameraTransfrom(e,!1)},e.prototype.setTransition=function(e){e!==this.cameraAnimation.isTransition&&this.updateCameraAnimation(this.camera,o.AnimationMode.Immediately,e)},e.prototype.setCameraTransfrom=function(e,t){var r=l.numberWithDefault(e.centerX,this.centerX),n=l.numberWithDefault(e.centerY,this.centerY),i=l.numberWithDefault(e.scale,this.scale);r===this.centerX&&n===this.centerY&&i===this.scale&&t===this.cameraAnimation.isTransition||(this.centerX=r,this.centerY=n,this.scale=i,this.updateCameraAnimation(this.camera,e.animationMode,t))},e.prototype.updateCameraAnimation=function(e,t,r){switch(t){case o.AnimationMode.Immediately:this.dispatchUpdatedEvent(e,r),this.cameraAnimation.moveToRightNow(e,r);break;case o.AnimationMode.Continuous:this.cameraAnimation.moveTo(e,r)}},Object.defineProperty(e.prototype,"camera",{get:function(){return{centerX:this.centerX,centerY:this.centerY,scale:this.scale}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visionRectangle",{get:function(){return this.convertVisionRectangle(this.camera,this._width,this._height)},enumerable:!0,configurable:!0}),e.prototype.willInterruptEvent=function(e,t){return this.updater.willInterruptEvent(e,t)},e.prototype.convertVisionRectangle=function(e,t,r){var n=t/e.scale,i=r/e.scale;return{originX:e.centerX-n/2,originY:e.centerY-i/2,width:n,height:i}},e.prototype.hitTest=function(e,t,r){return this.updater.hitTest(this.convertPointToScene(e,t),r)},e.prototype.findComponentWithTarget=function(e){return this.updater.findComponentWithTarget(e)},e.prototype.renderScreenshot=function(e){var t=l.valueWithDefault(e.camera,Object.freeze(this.camera)),r=l.valueWithDefault(e.width,this._width),n=l.valueWithDefault(e.height,this._height),i=new s.VisionsHub;return h.initVisions(i,this.scene,{width:this._width,height:this._height,camera:t,isTransition:!1,visionRectangle:this.convertVisionRectangle(t,r,n)}),new u.Screenshoter({visions:i,tree:this.scene.tree,screen:this,initCamera:t,engines:this.updater.engines,onRenderDuration:this.onRenderDuration}).render(this.updater.wrappedComponents)},e.prototype.resize=function(){if(this.divElement&&!this.resizeObserver){var e=this.divElement;this.refreshSize(e.clientWidth,e.clientHeight)}},e.prototype.refreshSize=function(e,t){var r;this._width===e&&this._height===t||(this._width=e,this._height=t,r=this.adaptedRectangle?this.cameraWithAdaptRectangle(this.adaptedRectangle,this.adaptedRectangle.adapterMode):this.camera,this.setCameraTransfrom(n(n({},r),{animationMode:o.AnimationMode.Immediately}),!1),this.dispatchUpdatedEvent(r,!1),this.sizeUpdatedDispatcher.dispatch({width:e,height:t}))},e.prototype.addCameraUpdatedListener=function(e){this.cameraUpdatedDispatcher.addListener(e)},e.prototype.removeCameraUpdatedListener=function(e){this.cameraUpdatedDispatcher.removeListener(e)},e.prototype.addRenderErrorCatchedListener=function(e){this.renderErrorCatchedDispatcher.addListener(e)},e.prototype.removeRenderErrorCatchedListener=function(e){this.renderErrorCatchedDispatcher.removeListener(e)},e.prototype.addSizeUpdatedListener=function(e){this.sizeUpdatedDispatcher.addListener(e)},e.prototype.removeSizeUpdatedListener=function(e){this.sizeUpdatedDispatcher.removeListener(e)},e.prototype.addScreenUpdatedListener=function(e){this.screenUpdatedDispatcher.addListener(e)},e.prototype.removeScreenUpdatedListener=function(e){this.screenUpdatedDispatcher.removeListener(e)},e.prototype.layoutComponentWithTarget=function(e){var t=this.findComponentWithTarget(e);return t?{componentId:t.component.id,layout:t.engine.orderIndex}:void 0},e}();t.ScreenImplement=d},function(e,t){e.exports=r(62)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(68)),n(r(80))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69),i=r(9),o=r(29),a=function(){function e(e,t){var r=this;this.eventDispatcher=new i.EventDispatcher,this.binder=null,this.fireEvent=function(e){var t=r.continuityNode.interruptEvent(e);t&&r.eventDispatcher.dispatch(t)},this.screen=e,this.eventInterrupter=t,this.continuityNode=o.createContinuityNode((function(e){return r.eventDispatcher.dispatch(e)}))}return e.prototype.bindDivElement=function(e){e!==(this.binder?this.binder.divElement:null)&&(this.binder&&this.binder.release(),this.binder=e?new n.EventBinder(this.screen.deviceType,e,this):null)},Object.defineProperty(e.prototype,"disable",{get:function(){return this.continuityNode.disable},set:function(e){this.continuityNode.disable=e},enumerable:!0,configurable:!0}),e.prototype.cancelCurrentContinuityEvent=function(){this.continuityNode.cancel()},e.prototype.toPointInScene=function(e,t){return this.screen.convertPointToScene(e,t)},e.prototype.willInterruptEvent=function(e,t){return!(this.disable||!this.eventInterrupter(e))||!!t&&this.screen.willInterruptEvent(e,t)},e.prototype.addListener=function(e){this.eventDispatcher.addListener(e)},e.prototype.removeListener=function(e){this.eventDispatcher.removeListener(e)},e}();t.EventProxyImplement=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(70))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(71),a=r(72),s=r(73),c=r(74),u=function(){function e(e,t,r){this.mouseEventHandler=new o.MouseEventHandler(this),this.touchEventHandler=new s.TouchEventHandler(this),this.wheelEventHandler=new a.WheelEventHandler(this),this.keyboardEventHandler=new c.KeyboardEventHandler(this),this.divElement=t,this.eventParamMap=this.createEventParamMap(e),this.delegate=r,this.addListeners()}return e.prototype.createEventParamMap=function(e){var t={};switch(e){case i.DeviceType.Desktop:t=n(n({},t),{keyup:{method:this.keyboardEventHandler.onKeyUp,element:document.body},keydown:{method:this.keyboardEventHandler.onKeyDown,element:document.body},mousedown:{method:this.mouseEventHandler.onMouseDown},mousemove:{method:this.mouseEventHandler.onMouseMove,element:document},mouseup:{method:this.mouseEventHandler.onMouseUp,element:document},mouseleave:{method:this.mouseEventHandler.onMouseLeave},wheel:{method:this.wheelEventHandler.onMouseWheel},gesturestart:{method:this.wheelEventHandler.onGestureStart,element:document.body},gesturechange:{method:this.wheelEventHandler.onGestureChange,element:document.body},gestureend:{method:this.wheelEventHandler.onGestureEnd,element:document.body}});break;case i.DeviceType.Touch:t=n(n({},t),{touchstart:{method:this.touchEventHandler.onTouchStart},touchmove:{method:this.touchEventHandler.onTouchMove},touchend:{method:this.touchEventHandler.onTouchEnd},touchcancel:{method:this.touchEventHandler.onTouchCancel}});break;case i.DeviceType.Surface:t=n(n({},t),{keyup:{method:this.keyboardEventHandler.onKeyUp,element:document.body},keydown:{method:this.keyboardEventHandler.onKeyDown,element:document.body},mousedown:{method:this.mouseEventHandler.onMouseDown},mousemove:{method:this.mouseEventHandler.onMouseMove,element:document},mouseup:{method:this.mouseEventHandler.onMouseUp,element:document},mouseleave:{method:this.mouseEventHandler.onMouseLeave},wheel:{method:this.wheelEventHandler.onMouseWheel},gesturestart:{method:this.wheelEventHandler.onGestureStart,element:document.body},gesturechange:{method:this.wheelEventHandler.onGestureChange,element:document.body},gestureend:{method:this.wheelEventHandler.onGestureEnd,element:document.body},touchstart:{method:this.touchEventHandler.onTouchStart},touchmove:{method:this.touchEventHandler.onTouchMove},touchend:{method:this.touchEventHandler.onTouchEnd},touchcancel:{method:this.touchEventHandler.onTouchCancel}})}return Object.freeze(t)},e.prototype.addListeners=function(){for(var e in this.eventParamMap){var t=this.eventParamMap[e],r=t.method;(t.element||this.divElement).addEventListener(e,r,!0)}},e.prototype.release=function(){for(var e in this.eventParamMap){var t=this.eventParamMap[e],r=t.method;(t.element||this.divElement).removeEventListener(e,r,!0)}},e.prototype.fireEvent=function(e){this.delegate.fireEvent(e)},e.prototype.getOS=function(){var e=window.navigator,t=e.userAgent,r=e.platform,n="";return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(r)?n="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(r)?n="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(r)?n="Windows":/Android/.test(t)?n="Android":!n&&/Linux/.test(r)&&(n="Linux"),n},e.prototype.toPointInScene=function(e,t){return this.delegate.toPointInScene(e,t)},e.prototype.willInterruptMouseOrTouchEvent=function(e,t){return!!t&&(!this.isEventFiredOnElement(t,this.divElement)||this.delegate.willInterruptEvent(e,t))},e.prototype.willInterruptKeyboardEvent=function(e,t){return!!t&&(!!this.delegate.willInterruptEvent(e,t)||t!==document.body&&!this.isEventFiredOnElement(t,this.divElement))},e.prototype.isEventFiredOnElement=function(e,t){for(var r=e;r;){if(r===t)return!0;r=r.parentElement}return!1},e.prototype.eventPosition=function(e){var t=this.divElement.getBoundingClientRect(),r=t.left,n=t.top;return{x:Math.floor(e.clientX)-r,y:Math.floor(e.clientY)-n}},e}();t.EventBinder=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){var t=this;this.binder=e,this.isLeftButtonPressed=!1,this.onMouseDown=function(e){if(0===e.button&&(t.checkMouseDidUp(e),t.isLeftButtonPressed=!0,!t.binder.willInterruptMouseOrTouchEvent(e,e.target))){var r=t.binder.eventPosition(e),i={kind:n.BoundlessEventKind.MouseDown,nativeEvent:e,isOnScreen:!0,pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(i)}},this.onMouseMove=function(e){if(0===e.button){t.checkMouseDidUp(e);var r=t.binder.eventPosition(e),i={kind:n.BoundlessEventKind.MouseMove,nativeEvent:e,isOnScreen:t.binder.isEventFiredOnElement(e.target,t.binder.divElement),pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(i)}},this.onMouseLeave=function(e){if(0===e.button&&(t.checkMouseDidUp(e),e.target===t.binder.divElement)){var r=t.binder.eventPosition(e),i={kind:n.BoundlessEventKind.MouseLeave,nativeEvent:e,isOnScreen:t.binder.isEventFiredOnElement(e.target,t.binder.divElement),pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(i)}},this.onMouseUp=function(e){0===e.button&&(t.isLeftButtonPressed=!1,t.fireMouseUpEvent(e))}}return e.prototype.checkMouseDidUp=function(e){var t=0!==e.which;this.isLeftButtonPressed&&!t&&this.fireMouseUpEvent(e)},e.prototype.fireMouseUpEvent=function(e){var t=this.binder.eventPosition(e),r={kind:n.BoundlessEventKind.MouseUp,nativeEvent:e,isOnScreen:this.binder.isEventFiredOnElement(e.target,this.binder.divElement),pointOnScreen:t,pointOnScene:this.binder.toPointInScene(t.x,t.y)};this.binder.fireEvent(r)},e}();t.MouseEventHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(t){var r=this;this.binder=t,this.latestScale=1,this.onMouseWheel=function(e){if(!r.binder.willInterruptMouseOrTouchEvent(e,e.target)){var t=r.binder.eventPosition(e),i=e.deltaX,o=e.deltaY,a=Math.sqrt(i*i+o*o),s=0,c=0;"Windows"===r.binder.getOS()&&(a=-a),i+o<0&&(a=-a),r.isMacTouchpadTwoFingerZoom(e)?a=.5*-a:r.isMacTouchpadTwoFingerScroll(e)?(s=-i,c=-o,a=0):a*=.035;var u={kind:n.BoundlessEventKind.MouseWheel,nativeEvent:e,isOnScreen:r.binder.isEventFiredOnElement(e.target,r.binder.divElement),offsetPoint:{x:s,y:c},scale:r.adjustScale(a),pointOnScreen:t,pointOnScene:r.binder.toPointInScene(t.x,t.y)};r.binder.fireEvent(u)}e.preventDefault()},this.onGestureStart=function(e){r.binder.willInterruptMouseOrTouchEvent(e,e.target)||(e.preventDefault(),r.latestScale=1)},this.onGestureChange=function(t){if(!r.binder.willInterruptMouseOrTouchEvent(t,t.target)){t.preventDefault();var i=(t.scale/r.latestScale-1)*e.safariScaleNumber,o={x:t.layerX,y:t.layerY},a={kind:n.BoundlessEventKind.MouseWheel,nativeEvent:t,isOnScreen:r.binder.isEventFiredOnElement(t.target,r.binder.divElement),offsetPoint:{x:0,y:0},scale:r.adjustScale(i),pointOnScreen:o,pointOnScene:r.binder.toPointInScene(o.x,o.y)};r.binder.fireEvent(a)}},this.onGestureEnd=function(e){r.binder.willInterruptMouseOrTouchEvent(e,e.target)||e.preventDefault()},this.isMacTouchpadTwoFingerZoom=function(e){return-1!==navigator.platform.indexOf("Mac")&&e.ctrlKey},this.isMacTouchpadTwoFingerScroll=function(e){return-1!==navigator.platform.indexOf("Mac")&&(e.wheelDelta%120!=0||0!==e.movementX||0!==e.deltaX)}}return e.prototype.adjustScale=function(t){return Math.max(t,e.minScaleStep)*e.scaleRate},e.safariScaleNumber=10,e.minScaleStep=-40,e.scaleRate=.02,e}();t.WheelEventHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){var t=this;this.binder=e,this.onTouchStart=function(e){var r=e.target,i=!r||r&&!r.classList.contains("ppt-event-source");e.cancelable&&i&&e.preventDefault();for(var o=[],a=0;a<e.changedTouches.length;++a){var s=e.changedTouches.item(a);if(!t.binder.willInterruptMouseOrTouchEvent(e,s.target)){var c=""+s.identifier,u=t.binder.eventPosition(s);o.push({identifier:c,pointOnScreen:u,pointOnScene:t.binder.toPointInScene(u.x,u.y)})}}if(o.length>0){var l={kind:n.BoundlessEventKind.TouchStart,nativeEvent:e,touches:o};t.binder.fireEvent(l)}},this.onTouchMove=function(e){e.cancelable&&e.preventDefault();for(var r=[],i=0;i<e.changedTouches.length;++i){var o=e.changedTouches.item(i),a=""+o.identifier,s=t.binder.eventPosition(o);r.push({identifier:a,pointOnScreen:s,pointOnScene:t.binder.toPointInScene(s.x,s.y)})}if(r.length>0){var c={kind:n.BoundlessEventKind.TouchMove,nativeEvent:e,touches:r};t.binder.fireEvent(c)}},this.onTouchEnd=function(e){var r=e.target,i=!r||r&&!r.classList.contains("ppt-event-source");e.cancelable&&i&&e.preventDefault();var o=t.cleanAcceptedTouchesByTouchEvent(e);if(o.length>0){var a={kind:n.BoundlessEventKind.TouchEnd,nativeEvent:e,touches:o};t.binder.fireEvent(a)}},this.onTouchCancel=function(e){e.cancelable&&e.preventDefault();var r=t.cleanAcceptedTouchesByTouchEvent(e);if(r.length>0){var i={kind:n.BoundlessEventKind.TouchCancel,nativeEvent:e,touches:r};t.binder.fireEvent(i)}}}return e.prototype.cleanAcceptedTouchesByTouchEvent=function(e){for(var t=[],r=0;r<e.changedTouches.length;++r){var n=e.changedTouches.item(r),i=""+n.identifier,o=this.binder.eventPosition(n);t.push({identifier:i,pointOnScreen:o,pointOnScene:this.binder.toPointInScene(o.x,o.y)})}return t},e}();t.TouchEventHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.KeyboardEventHandler=function(e){var t=this;this.binder=e,this.onKeyDown=function(e){if(!t.binder.willInterruptKeyboardEvent(e,e.target)){var r=e.key,i=e.altKey,o=e.ctrlKey,a=e.shiftKey,s={kind:n.BoundlessEventKind.KeyDown,nativeEvent:e,key:r,altKey:i,ctrlKey:o,shiftKey:a};t.binder.fireEvent(s)}},this.onKeyUp=function(e){var r=e.key,i=e.altKey,o=e.ctrlKey,a=e.shiftKey,s={kind:n.BoundlessEventKind.KeyUp,nativeEvent:e,key:r,altKey:i,ctrlKey:o,shiftKey:a};t.binder.fireEvent(s)}}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(0),a=function(){function e(){this.currentIdentifier=0}return e.prototype.setEventDescriptionStateGetter=function(e){this.getDescriptionState=e},e.prototype.isEventAccessible=function(e){return e.kind===o.BoundlessEventKind.MouseDown||e.kind===o.BoundlessEventKind.MouseMove||e.kind===o.BoundlessEventKind.MouseUp||e.kind===o.BoundlessEventKind.MouseLeave},e.prototype.convertToEvent=function(e,t){var r=n(t,1)[0].payload;return{kind:e.kind,nativeEvent:e.nativeEvent,isOnScreen:r.isOnScreen,pointOnScreen:r.pointOnScreen,pointOnScene:r.pointOnScene}},e.prototype.createCancelEvent=function(e){var t;for(var r in e)t=e[r];return{kind:o.BoundlessEventKind.MouseUp,isOnScreen:t.isOnScreen,pointOnScreen:t.pointOnScreen,pointOnScene:t.pointOnScene}},e.prototype.takeEventDescription=function(e){e.kind===o.BoundlessEventKind.MouseDown&&(this.currentIdentifier+=1);var t,r=""+this.currentIdentifier;switch(e.kind===o.BoundlessEventKind.MouseUp&&(this.currentIdentifier+=1),e.kind){case o.BoundlessEventKind.MouseDown:t=i.EventPhase.Start;break;case o.BoundlessEventKind.MouseMove:case o.BoundlessEventKind.MouseLeave:var n=this.getDescriptionState(r);if(n){if(n.isCanceled)return null;t=i.EventPhase.Update}else{if(!e.isOnScreen)return null;t=i.EventPhase.Other}break;case o.BoundlessEventKind.MouseUp:t=i.EventPhase.End;break;default:return null}return{identifier:r,phase:t,payload:{isOnScreen:e.isOnScreen,pointOnScreen:e.pointOnScreen,pointOnScene:e.pointOnScene}}},e}();t.MouseEventAdapter=a},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(0),s=function(){function e(){}return e.prototype.isEventAccessible=function(e){return e.kind===a.BoundlessEventKind.TouchStart||e.kind===a.BoundlessEventKind.TouchMove||e.kind===a.BoundlessEventKind.TouchEnd||e.kind===a.BoundlessEventKind.TouchCancel},e.prototype.convertToEvent=function(e,t){var r,o,a=[];try{for(var s=i(t),c=s.next();!c.done;c=s.next()){var u=c.value,l=u.identifier,p=u.payload;a.push(n({identifier:l},p))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return{kind:e.kind,nativeEvent:e.nativeEvent,touches:a}},e.prototype.createCancelEvent=function(e){var t=[];for(var r in e)t.push(n({identifier:r},e[r]));return{kind:a.BoundlessEventKind.TouchCancel,touches:t}},e.prototype.takeEventDescription=function(e){var t,r,n;switch(e.kind){case a.BoundlessEventKind.TouchStart:n=o.EventPhase.Start;break;case a.BoundlessEventKind.TouchMove:n=o.EventPhase.Update;break;case a.BoundlessEventKind.TouchEnd:case a.BoundlessEventKind.TouchCancel:n=o.EventPhase.End;break;default:return null}var s=[];try{for(var c=i(e.touches),u=c.next();!u.done;u=c.next()){var l=u.value,p=l.identifier,h=l.pointOnScene,d=l.pointOnScreen;s.push({identifier:p,phase:n,payload:{pointOnScene:h,pointOnScreen:d}})}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return s},e}();t.TouchEventAdapter=s},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(0),a=function(){function e(){}return e.prototype.isEventAccessible=function(e){return e.kind===o.BoundlessEventKind.SortedTouchStart||e.kind===o.BoundlessEventKind.SortedTouchMove||e.kind===o.BoundlessEventKind.SortedTouchEnd||e.kind===o.BoundlessEventKind.SortedTouchCancel},e.prototype.convertToEvent=function(e,t){var r=n(t,1)[0],i=r.identifier,o=r.payload;return{kind:e.kind,nativeEvent:e.nativeEvent,identifier:i,pointOnScene:o.pointOnScene,pointOnScreen:o.pointOnScreen}},e.prototype.createCancelEvent=function(e){var t;for(var r in e)t=r;var n=e[t],i=n.pointOnScene,a=n.pointOnScreen;return{kind:o.BoundlessEventKind.SortedTouchCancel,identifier:t,pointOnScene:i,pointOnScreen:a}},e.prototype.takeEventDescription=function(e){var t;switch(e.kind){case o.BoundlessEventKind.SortedTouchStart:t=i.EventPhase.Start;break;case o.BoundlessEventKind.SortedTouchMove:t=i.EventPhase.Update;break;case o.BoundlessEventKind.SortedTouchEnd:case o.BoundlessEventKind.SortedTouchCancel:t=i.EventPhase.End;break;default:return null}return[{identifier:e.identifier,phase:t,payload:{pointOnScene:e.pointOnScene,pointOnScreen:e.pointOnScreen}}]},e}();t.SortedTouchEventAdapter=a},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(0),a=function(){function e(){}return e.prototype.isEventAccessible=function(e){return e.kind===o.BoundlessEventKind.KeyUp||e.kind===o.BoundlessEventKind.KeyDown},e.prototype.convertToEvent=function(e,t){var r=n(t,1)[0].payload;return{kind:e.kind,nativeEvent:e.nativeEvent,key:r.key,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}},e.prototype.createCancelEvent=function(e){var t;for(var r in e)t=e[r];return{kind:o.BoundlessEventKind.KeyUp,key:t.key,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}},e.prototype.takeEventDescription=function(e){var t,r;if(null===(t=e.nativeEvent)||void 0===t?void 0:t.metaKey)r=i.EventPhase.Other;else switch(e.kind){case o.BoundlessEventKind.KeyDown:r=i.EventPhase.Start;break;case o.BoundlessEventKind.KeyUp:r=i.EventPhase.End;break;default:return null}return{identifier:e.key,phase:r,payload:{key:e.key,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}}},e}();t.KeyboardEventAdapter=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(0),o=function(){function e(){this.currentIdentifier=0}return e.prototype.setEventDescriptionStateGetter=function(e){this.getDescriptionState=e},e.prototype.isEventAccessible=function(e){return e.kind===i.BoundlessEventKind.MouseWheel},e.prototype.takeEventDescription=function(e){var t=""+this.currentIdentifier;this.getDescriptionState(t),this.currentIdentifier+=1;var r={isOnScreen:e.isOnScreen,pointOnScene:e.pointOnScene,pointOnScreen:e.pointOnScreen,offsetPoint:e.offsetPoint,scale:e.scale};return{identifier:t,phase:n.EventPhase.Other,payload:r}},e.prototype.convertToEvent=function(e,t){return e},e.prototype.createCancelEvent=function(e){return null},e}();t.WheelEventAdapter=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),o=r(81),a=r(82),s=r(29),c=r(85),u=r(90),l=r(0),p=function(){function e(e,t,r){var p=this;void 0===r&&(r={}),this.disableCameraTransform=!1,this.boundlessEventDispatcher=new i.EventDispatcher,this.transformationEventDispatcher=new i.EventDispatcher,this.handToolActiveEventDispatcher=new i.EventDispatcher,this.transformer=null,this.border=Object.freeze({damping:.75,centerX:0,centerY:0,width:Number.POSITIVE_INFINITY,height:Number.POSITIVE_INFINITY,minScale:0,maxScale:Number.POSITIVE_INFINITY}),this.moveToCamera=null,this.didRelease=!1,this.isPaddingCameraOperations=!1,this.paddingCameraOperation=null,this.onBoundlessEvent=function(e){switch(p.screen.deviceType){case l.DeviceType.Surface:p.handleBoundlessEventWhenItIsSurface(e);break;case l.DeviceType.Desktop:p.handleBoundlessEventWhenItIsDesktop(e);break;case l.DeviceType.Touch:p.handleBoundlessEventWhenItIsTouch(e)}},this.onScreenUpdatedListener=function(e){var t=e.camera,r=e.width,i=e.height,o=p.cameraView.screenSize;if(o.width!==r||o.height!==i){p.cameraView.screenSize=Object.freeze({width:r,height:i});var a=p.cameraView.transformToCombinedCamera(p.screen.camera,{x:r/2,y:i/2}).valid;t.centerX===a.centerX&&t.centerY===a.centerY&&t.scale===a.scale||p.screen.transformCamera(n(n({},a),{animationMode:l.AnimationMode.Immediately}))}},this.dispatchBoundlessEvent=function(e){var t=p.continuityNode.interruptEvent(e);p.handTool.willInterruptEvent(t)?p.handTool.moveCameraByEvent(t):t&&p.boundlessEventDispatcher.dispatch(t),p.handTool.handlePreviousEvent(t)},this.onAfterMouseWheel=function(){p.transformationEventDispatcher.dispatch(l.CameraTransformation.End),p.screen.setTransition(!1)},this.onBeginTransformCamera=function(e){p.disableCameraTransform||(p.isPaddingCameraOperations=!0,p.transformationEventDispatcher.dispatch(l.CameraTransformation.Begin),p.cameraView.beginWithCamera(p.screen.camera),p.transformer=new c.CameraBorderTransformer(p.border),p.onTransformCamera(e))},this.onTransformCamera=function(e){if(!p.disableCameraTransform){var t=p.cameraView.handleTouchesAndGetCameraMoving(e),r=n(n({},p.cameraAppendBorderTransform(t.view)),{animationMode:l.AnimationMode.Immediately});p.moveToCamera=t.view,p.screen.setCameraTransfrom(r,!0)}},this.onAfterTransformCamera=function(){if(!p.disableCameraTransform){var e=p.cameraView.completeAndGetValidCamera();p.isPaddingCameraOperations=!1,p.moveToCamera=p.cameraAppendBorderTransform(e),p.cameraView.setCameraBorder(p.border),p.paddingCameraOperation&&(p.paddingCameraOperation(),p.paddingCameraOperation=null),p.transformer=null,p.transformationEventDispatcher.dispatch(l.CameraTransformation.End)}},this.onCompleteGroupOfEvents=function(){if(p.moveToCamera){var e=p.screen.camera;if(p.moveToCamera.centerX!==e.centerX||p.moveToCamera.centerY!==e.centerY||p.moveToCamera.scale!==e.scale){var t=n(n({},p.moveToCamera),{animationMode:l.AnimationMode.Continuous});p.screen.setCameraTransfrom(t,!1)}else p.screen.setTransition(!1);p.moveToCamera=null}},this.onContinuityNodeCancel=function(e){p.boundlessEventDispatcher.dispatch(e),p.sorter&&p.sorter.cancel()},this.screen=e,this.eventProxy=t,this.afterWheelDelayer=new o.Delayer(this.onAfterMouseWheel),this.continuityNode=s.createContinuityNode(this.onContinuityNodeCancel),this.cameraView=new c.CameraView({width:e.width,height:e.height}),this.handTool=new u.HandTool({cameraman:this,activeDispatch:function(e){return p.handToolActiveEventDispatcher.dispatch(e)}}),this.setCameraBorder(r),e.deviceType!==l.DeviceType.Touch&&e.deviceType!==l.DeviceType.Surface||(this.sorter=new a.EventAndCameraSorter({onBeginTransformCamera:this.onBeginTransformCamera,onTransformCamera:this.onTransformCamera,onAfterTransformCamera:this.onAfterTransformCamera,onCompleteGroupOfEvents:this.onCompleteGroupOfEvents,onReceivedSortedTouchEvent:this.dispatchBoundlessEvent})),t.addListener(this.onBoundlessEvent),e.addScreenUpdatedListener(this.onScreenUpdatedListener)}return Object.defineProperty(e.prototype,"handToolActive",{get:function(){return this.handTool.active},set:function(e){this.handTool.active=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handToolKey",{get:function(){return this.handTool.key},set:function(e){this.handTool.key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameraBorder",{get:function(){return this.border},enumerable:!0,configurable:!0}),e.prototype.cancelCurrentContinuityEvent=function(){this.continuityNode.cancel()},e.prototype.setCameraBorder=function(e){var t=this.border,r=this.border=Object.freeze(n(n({},this.border),e));if(!c.isCameraBorderEquals(t,r)){var i=void 0;this.transformer?((i=this.transformer).setCurrentBorder(r),r=i.adaptOriginBorder):(i=new c.CameraBorderTransformer(t)).setCurrentBorder(r),this.cameraView.setCameraBorder(r);var o=this.moveToCamera||this.screen.camera,a=i.transform;0===a.deltaX&&0===a.deltaY&&1===a.scale||this.screen.transformCamera({animationMode:l.AnimationMode.Immediately,centerX:o.centerX+a.deltaX,centerY:o.centerY+a.deltaY,scale:o.scale*a.scale})}return this.border},Object.defineProperty(e.prototype,"disableBoundlessEvent",{get:function(){return this.continuityNode.disable},set:function(e){this.continuityNode.disable=e},enumerable:!0,configurable:!0}),e.prototype.transformCamera=function(e){var t=this;this.isPaddingCameraOperations?this.paddingCameraOperation=function(){return t.screen.transformCamera(e)}:this.screen.transformCamera(e)},e.prototype.adaptRectangle=function(e){var t=this;this.isPaddingCameraOperations?this.paddingCameraOperation=function(){return t.screen.adaptRectangle(e)}:this.screen.adaptRectangle(e)},e.prototype.release=function(){this.didRelease||(this.sorter&&this.sorter.cancel(),this.eventProxy.removeListener(this.onBoundlessEvent),this.screen.removeScreenUpdatedListener(this.onScreenUpdatedListener),this.afterWheelDelayer.cancel(),this.didRelease=!0)},e.prototype.handleBoundlessEventWhenItIsDesktop=function(e){switch(e.kind){case l.BoundlessEventKind.MouseWheel:this.onMouseWheel(e);break;case l.BoundlessEventKind.TouchStart:case l.BoundlessEventKind.TouchMove:case l.BoundlessEventKind.TouchEnd:case l.BoundlessEventKind.TouchCancel:break;case l.BoundlessEventKind.KeyDown:case l.BoundlessEventKind.KeyUp:this.handTool.isKeyEvent(e)?this.handTool.handleKeyEvent(e):this.dispatchBoundlessEvent(e);break;default:this.dispatchBoundlessEvent(e)}},e.prototype.handleBoundlessEventWhenItIsTouch=function(e){switch(e.kind){case l.BoundlessEventKind.TouchStart:case l.BoundlessEventKind.TouchMove:case l.BoundlessEventKind.TouchEnd:case l.BoundlessEventKind.TouchCancel:this.sorter.pushTouchEvent(e);break;case l.BoundlessEventKind.MouseDown:case l.BoundlessEventKind.MouseUp:case l.BoundlessEventKind.MouseMove:case l.BoundlessEventKind.MouseLeave:break;case l.BoundlessEventKind.KeyDown:case l.BoundlessEventKind.KeyUp:this.handTool.isKeyEvent(e)?this.handTool.handleKeyEvent(e):this.dispatchBoundlessEvent(e);break;default:this.dispatchBoundlessEvent(e)}},e.prototype.handleBoundlessEventWhenItIsSurface=function(e){switch(e.kind){case l.BoundlessEventKind.MouseWheel:this.onMouseWheel(e);break;case l.BoundlessEventKind.TouchStart:case l.BoundlessEventKind.TouchMove:case l.BoundlessEventKind.TouchEnd:case l.BoundlessEventKind.TouchCancel:this.sorter.pushTouchEvent(e);break;case l.BoundlessEventKind.MouseDown:case l.BoundlessEventKind.MouseUp:case l.BoundlessEventKind.MouseMove:case l.BoundlessEventKind.MouseLeave:default:this.dispatchBoundlessEvent(e)}},e.prototype.onMouseWheel=function(t){if(!this.disableCameraTransform){var r=this.screen.camera,i=r.centerX,o=r.centerY,a=r.scale;if(0!==t.scale){var s=1+t.scale,c=t.pointOnScreen.x,u=t.pointOnScreen.y,p=(1-1/s)/a;i+=p*(c-this.screen.width/2),o+=p*(u-this.screen.height/2),a*=s}i-=t.offsetPoint.x/a,o-=t.offsetPoint.y/a;var h=this.cameraView.transformToCombinedCamera({centerX:i,centerY:o,scale:a},t.pointOnScreen),d=n(n({},this.cameraAppendBorderTransform(h.valid)),{animationMode:l.AnimationMode.Immediately});this.transformationEventDispatcher.dispatch(l.CameraTransformation.Begin),this.afterWheelDelayer.refreshAndInvokeAfterInterval(e.RefreshTimeoutOnDesktop),this.screen.setCameraTransfrom(d,!0)}},e.prototype.cameraAppendBorderTransform=function(e){if(this.transformer){var t=this.transformer.transform;return Object.freeze({centerX:e.centerX+t.deltaX,centerY:e.centerY+t.deltaY,scale:e.scale*t.scale})}return e},e.prototype.addHandToolActiveListener=function(e){this.handToolActiveEventDispatcher.addListener(e)},e.prototype.removeHandToolActiveListener=function(e){this.handToolActiveEventDispatcher.removeListener(e)},e.prototype.addCameraTransformationListener=function(e){this.transformationEventDispatcher.addListener(e)},e.prototype.removeCameraTransformationListener=function(e){this.transformationEventDispatcher.removeListener(e)},e.prototype.addBoundlessEventListener=function(e){this.boundlessEventDispatcher.addListener(e)},e.prototype.removeBoundlessEventListener=function(e){this.boundlessEventDispatcher.removeListener(e)},e.RefreshTimeoutOnDesktop=200,e}();t.CameramanImplement=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.invoker=e,this.timer=null,this.invokeWhenTimeout=function(){t.timer=null,t.invoker()}}return Object.defineProperty(e.prototype,"isRunning",{get:function(){return null!==this.timer},enumerable:!0,configurable:!0}),e.prototype.refreshAndInvokeAfterInterval=function(e){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.invokeWhenTimeout,e)},e.prototype.cancel=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e}();t.Delayer=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0),s=r(83),c=r(84);!function(e){e[e.None=0]="None",e[e.Event=1]="Event",e[e.Camera=2]="Camera",e[e.Cancel=3]="Cancel"}(o||(o={}));var u=function(){function e(e){this.pressedTouches=new c.PressedTouches,this.state=o.None,this.pinchTouches=null,this.previousTouchesCount=0,this.firstPressedTouch=null,this.firstPressedTouchBeginX=0,this.firstPressedTouchBeginY=0,this.blocker=new s.MultiFingersToleranceBlocker(e.onReceivedSortedTouchEvent),this.callbacks=Object.freeze(n({},e))}return e.prototype.pushTouchEvent=function(e){switch(e.kind){case a.BoundlessEventKind.TouchStart:this.pressedTouches.receiveTouchStartOrMoveEvent(e),this.pushTouchStartEvent(e);break;case a.BoundlessEventKind.TouchMove:this.pressedTouches.receiveTouchStartOrMoveEvent(e),this.pushTouchMoveEvent(e);break;case a.BoundlessEventKind.TouchEnd:case a.BoundlessEventKind.TouchCancel:this.pressedTouches.receiveTouchEndOrCancelEvent(e),this.pushTouchEndOrCancelEvent(e)}},e.prototype.cancel=function(){var e=this;this.state!==o.None&&this.state!==o.Cancel&&(this.state=o.Cancel,this.pressedTouches.waitUntilNoPressedTouches().then((function(){e.state=o.None})).catch((function(e){return console.error(e)})))},e.prototype.pushTouchStartEvent=function(e){var t=e.touches;switch(this.state){case o.None:this.blocker.startOperation(),1===t.length?(this.state=o.Event,this.firstPressedTouchBeginX=t[0].pointOnScreen.x,this.firstPressedTouchBeginY=t[0].pointOnScreen.y,this.firstPressedTouch={identifier:t[0].identifier,x:this.firstPressedTouchBeginX,y:this.firstPressedTouchBeginY},this.blocker.pushBoundlessEvent(this.covertToSortedTouchEvent(e,0))):(this.state=o.Camera,this.pinchTouches=t.map((function(e){return{identifier:e.identifier,x:e.pointOnScreen.x,y:e.pointOnScreen.y}})),this.handleTouchEvents(this.pinchTouches));break;case o.Event:this.pinchTouches=[{identifier:this.firstPressedTouch.identifier,x:this.firstPressedTouch.x,y:this.firstPressedTouch.y}],this.blocker.unknownIsMultiFingers&&(this.blocker.assertMultiFingers(),this.firstPressedTouch=null),this.pushToPinchTouches(t),this.handleTouchEvents(this.pinchTouches),this.state=o.Camera;break;case o.Camera:this.pushToPinchTouches(t),this.handleTouchEvents(this.pinchTouches)}},e.prototype.pushTouchMoveEvent=function(e){var t,r,n=this,a=e.touches;switch(this.refreshFirstPressedTouch(a),this.state){case o.Event:var s=a.findIndex((function(e){return e.identifier===n.firstPressedTouch.identifier}));this.blocker.pushBoundlessEvent(this.covertToSortedTouchEvent(e,s));break;case o.Camera:var c=function(e){var t=a.find((function(t){return t.identifier===e.identifier}));t&&(e.x=t.pointOnScreen.x,e.y=t.pointOnScreen.y)};try{for(var u=i(this.pinchTouches),l=u.next();!l.done;l=u.next())c(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}this.handleTouchEvents(this.pinchTouches)}},e.prototype.pushTouchEndOrCancelEvent=function(e){var t,r,n=this,a=e.touches;if(this.firstPressedTouch&&this.state!==o.Cancel){var s=a.findIndex((function(e){return e.identifier===n.firstPressedTouch.identifier}));-1!==s&&(this.blocker.pushBoundlessEvent(this.covertToSortedTouchEvent(e,s)),this.firstPressedTouch=null)}switch(this.state){case o.Event:this.blocker.assertSingleFinger(),this.completeOperation();break;case o.Camera:this.blocker.assertMultiFingers();var c=function(e){var t=u.pinchTouches.findIndex((function(t){return t.identifier===e.identifier}));-1!==t&&u.pinchTouches.splice(t,1)},u=this;try{for(var l=i(a),p=l.next();!p.done;p=l.next())c(p.value)}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}this.firstPressedTouch&&1===this.pinchTouches.length?(this.state=o.Event,this.handleTouchEvents([]),this.pinchTouches=null):0===this.pinchTouches.length?(this.handleTouchEvents(this.pinchTouches),this.pinchTouches=null,this.completeOperation()):this.handleTouchEvents(this.pinchTouches)}},e.prototype.handleTouchEvents=function(e){try{0===this.previousTouchesCount&&e.length>0&&this.callbacks.onBeginTransformCamera(e),this.previousTouchesCount>0&&0===e.length?this.callbacks.onAfterTransformCamera():this.callbacks.onTransformCamera(e)}finally{this.previousTouchesCount=e.length}},e.prototype.pushToPinchTouches=function(e){var t,r;if(this.pinchTouches){var n=function(e){o.pinchTouches.some((function(t){return t.identifier===e.identifier}))||o.pinchTouches.push({x:e.pointOnScreen.x,y:e.pointOnScreen.y,identifier:e.identifier})},o=this;try{for(var a=i(e),s=a.next();!s.done;s=a.next())n(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},e.prototype.refreshFirstPressedTouch=function(e){var t,r;if(this.firstPressedTouch){try{for(var n=i(e),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.identifier===this.firstPressedTouch.identifier){this.firstPressedTouch.x=a.pointOnScreen.x,this.firstPressedTouch.y=a.pointOnScreen.y;break}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}if(this.blocker.unknownIsMultiFingers){var s=this.firstPressedTouch.x-this.firstPressedTouchBeginX,c=this.firstPressedTouch.y-this.firstPressedTouchBeginY;s*s+c*c>=9&&this.blocker.assertSingleFinger()}}},e.prototype.completeOperation=function(){this.state=o.None,this.blocker.unknownIsMultiFingers&&this.blocker.assertMultiFingers(),this.callbacks.onCompleteGroupOfEvents()},e.prototype.covertToSortedTouchEvent=function(e,t){var r,n=e.touches[t],i=n.identifier,o=n.pointOnScreen,s=n.pointOnScene;switch(e.kind){case a.BoundlessEventKind.TouchStart:r=a.BoundlessEventKind.SortedTouchStart;break;case a.BoundlessEventKind.TouchMove:r=a.BoundlessEventKind.SortedTouchMove;break;case a.BoundlessEventKind.TouchEnd:r=a.BoundlessEventKind.SortedTouchEnd;break;case a.BoundlessEventKind.TouchCancel:r=a.BoundlessEventKind.SortedTouchCancel;break;default:throw new Error("unexpected kind "+e.kind)}return{identifier:i,nativeEvent:e.nativeEvent,kind:r,pointOnScreen:o,pointOnScene:s}},e}();t.EventAndCameraSorter=u},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.onPushedBoundlessEvent=e,this.operationBuffer=[],this.willBlockOperation=!1,this.flushingOperationBufferTimer=null,this.flushOperationBuffer=function(){var e,r;if(t.operationBuffer){try{for(var i=n(t.operationBuffer),o=i.next();!o.done;o=i.next())(0,o.value)()}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}t.operationBuffer.splice(0,t.operationBuffer.length),t.willBlockOperation=!1}t.flushingOperationBufferTimer=null}}return Object.defineProperty(e.prototype,"unknownIsMultiFingers",{get:function(){return this.willBlockOperation},enumerable:!0,configurable:!0}),e.prototype.startOperation=function(){this.willBlockOperation=!0,this.flushingOperationBufferTimer=setTimeout(this.flushOperationBuffer,300)},e.prototype.assertMultiFingers=function(){this.operationBuffer.splice(0,this.operationBuffer.length),this.willBlockOperation=!1,null!==this.flushingOperationBufferTimer&&(clearTimeout(this.flushingOperationBufferTimer),this.flushingOperationBufferTimer=null)},e.prototype.assertSingleFinger=function(){null!==this.flushingOperationBufferTimer&&clearTimeout(this.flushingOperationBufferTimer),this.flushOperationBuffer()},e.prototype.pushBoundlessEvent=function(e){var t=this;this.willBlockOperation?this.operationBuffer.push((function(){return t.onPushedBoundlessEvent(e)})):this.onPushedBoundlessEvent(e)},e}();t.MultiFingersToleranceBlocker=i},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.pressedTouches={},this.emptyResolves=[],this.pressedTouchesCount=0}return e.prototype.receiveTouchStartOrMoveEvent=function(e){var t,r,i=e.touches;try{for(var o=n(i),a=o.next();!a.done;a=o.next()){var s=a.value;s.identifier in this.pressedTouches||(this.pressedTouchesCount+=1),this.pressedTouches[s.identifier]=s}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},e.prototype.receiveTouchEndOrCancelEvent=function(e){var t,r,i,o,a=e.touches;try{for(var s=n(a),c=s.next();!c.done;c=s.next()){var u=c.value;if(u.identifier in this.pressedTouches&&(this.pressedTouchesCount-=1,delete this.pressedTouches[u.identifier],0===this.pressedTouchesCount))try{for(var l=(i=void 0,n(this.emptyResolves.splice(0))),p=l.next();!p.done;p=l.next())(0,p.value)()}catch(e){i={error:e}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}},e.prototype.waitUntilNoPressedTouches=function(){var e=this;return 0===this.pressedTouchesCount?Promise.resolve():new Promise((function(t){return e.emptyResolves.push(t)}))},e}();t.PressedTouches=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(86);t.isCameraBorderEquals=n.isCameraBorderEquals,t.CameraBorderTransformer=n.CameraBorderTransformer;var i=r(87);t.CameraView=i.CameraView},function(e,t,r){"use strict";function n(e,t,r,n){if(t===1/0||n===1/0)return{center:0,scale:1/0};var i=t/n;return Number.isNaN(i)&&(i=1),{center:r-e,scale:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.isCameraBorderEquals=function(e,t){return e.centerX===t.centerX&&e.centerY===t.centerY&&e.damping===t.damping&&e.width===t.width&&e.height===t.height&&e.minScale===t.minScale&&e.maxScale===t.maxScale};var i=function(){function e(e){this.originBorder=e,this.currentBorder=e,this._transform=Object.freeze({deltaX:0,deltaY:0,scale:1})}return Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptOriginBorder",{get:function(){return this._adaptOriginBorder},enumerable:!0,configurable:!0}),e.prototype.setCurrentBorder=function(e){this.currentBorder=e;var t=n(this.originBorder.centerX,this.originBorder.width,this.currentBorder.centerX,this.currentBorder.width),r=t.center,i=t.scale,o=n(this.originBorder.centerY,this.originBorder.height,this.currentBorder.centerY,this.currentBorder.height),a=o.center,s=o.scale,c=Math.min(i,s);c===1/0&&(c=1),this._transform=Object.freeze({deltaX:r,deltaY:a,scale:c}),this._adaptOriginBorder=Object.freeze({damping:e.damping,centerX:e.centerX-r,centerY:e.centerY-a,width:e.width*c,height:e.height*c,maxScale:e.maxScale/c,minScale:e.minScale/c})},e}();t.CameraBorderTransformer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(88),i=r(0),o=r(89);function a(e,t){return{x:e.x-t.width/2,y:e.y-t.height/2}}function s(e,t,r){var n=e.x-t.width/2,i=e.y-t.height/2;return{x:r.centerX+n/r.scale,y:r.centerY+i/r.scale}}var c=function(){function e(e){this.pincher=null,this.damping=0,this.camera=null,this.lastValidCamera=null,this.domain=new o.ValidDomain(e)}return Object.defineProperty(e.prototype,"isHandingPinch",{get:function(){return!!this.pincher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenSize",{get:function(){return this.domain.screenSize},set:function(e){this.domain.screenSize=e},enumerable:!0,configurable:!0}),e.prototype.setCameraBorder=function(e){this.damping=e.damping,this.domain.scaleStart=e.minScale,this.domain.scaleEnd=e.maxScale,this.domain.border.centerX=e.centerX,this.domain.border.centerY=e.centerY,this.domain.border.width=e.width,this.domain.border.height=e.height},e.prototype.beginWithCamera=function(e){this.pincher=new n.Pincker,this.camera=e},e.prototype.handleTouchesAndGetCameraMoving=function(e){this.pincher.handleTouches(e);var t=this.pincher.centroid,r=this.currentTargetCamera();return this.transformToCombinedCamera(r,t)},e.prototype.transformToCombinedCamera=function(e,t){var r=this.domain.screenSize,n=s(t,r,e);this.domain.pinPoint=n;var i,o,a,c=this.domain.findClosestValidCamera(e);if(this.lastValidCamera=c,0===this.damping)i=e;else if(1===this.damping)i=c;else if(a=c,(o=e).centerX===a.centerX&&o.centerY===a.centerY&&o.scale===a.scale)i=e;else{var u=s(t,r,c);i=this.viewCamera(n,u,e,c,this.damping)}return{valid:c,view:i}},e.prototype.completeAndGetValidCamera=function(){var e=this.lastValidCamera;return this.pincher=null,this.camera=null,this.lastValidCamera=null,e},e.prototype.currentTargetCamera=function(){var e=this.camera,t=this.pincher,r=this.domain.screenSize,n=e.scale*t.scale,i=a(t.beginCentroid,r),o=a(t.centroid,r),s=i.x/e.scale-o.x/n,c=i.y/e.scale-o.y/n;return{centerX:e.centerX+s,centerY:e.centerY+c,scale:n}},e.prototype.viewCamera=function(e,t,r,n,o){var a=i.distance(r.centerX,r.centerY,e.x,e.y),s=i.midpoint(r.scale,n.scale,o),c=a*r.scale/s,u=i.midpoint(e.x,t.x,o),l=i.midpoint(e.y,t.y,o),p=i.unitVector(i.midpoint(r.centerX,n.centerX,o)-u,i.midpoint(r.centerY,n.centerY,o)-l);return{centerX:u+c*p.x,centerY:l+c*p.y,scale:s}},e}();t.CameraView=c},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.eccentricityRate=1,this.centroidXOffset=0,this.centroidYOffset=0,this.beginCentroidX=0,this.beginCentroidY=0,this.centroidX=0,this.centroidY=0,this._scale=1,this.isHanding=!1,this.previousTouchesCount=0}return Object.defineProperty(e.prototype,"beginCentroid",{get:function(){return this.isHanding?{x:this.beginCentroidX,y:this.beginCentroidY}:e.zeroPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centroid",{get:function(){return this.isHanding?{x:this.centroidX,y:this.centroidY}:e.zeroPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.isHanding?this._scale:1},enumerable:!0,configurable:!0}),e.prototype.handleTouches=function(e){var t=this.findTouchesExpression(e);this.isHanding?(this.previousTouchesCount!==e.length&&(this.centroidXOffset=this.centroidX-t.centroidX,this.centroidYOffset=this.centroidY-t.centroidY,this.eccentricityRate=this._scale/t.eccentricity,this.previousTouchesCount=e.length),this.centroidX=t.centroidX+this.centroidXOffset,this.centroidY=t.centroidY+this.centroidYOffset,this._scale=t.eccentricity*this.eccentricityRate):(this.centroidXOffset=0,this.centroidYOffset=0,this.eccentricityRate=1/t.eccentricity,this.beginCentroidX=t.centroidX,this.beginCentroidY=t.centroidY,this.centroidX=t.centroidX,this.centroidY=t.centroidY,this._scale=1,this.previousTouchesCount=e.length,this.isHanding=!0)},e.prototype.findTouchesExpression=function(e){var t,r,i,o,a=0,s=0;try{for(var c=n(e),u=c.next();!u.done;u=c.next()){var l=u.value,p=l.x,h=l.y;a+=p,s+=h}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}var d=a/e.length,f=s/e.length,y=0;try{for(var A=n(e),m=A.next();!m.done;m=A.next()){var g=m.value,v=(p=g.x,h=g.y,p-d),b=h-f;y+=Math.sqrt(v*v+b*b)}}catch(e){i={error:e}}finally{try{m&&!m.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}return 0===y&&(y=1),{eccentricity:y,centroidX:d,centroidY:f}},e.zeroPoint=Object.freeze({x:0,y:0}),e}();t.Pincker=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.border={centerX:0,centerY:0,width:Number.POSITIVE_INFINITY,height:Number.POSITIVE_INFINITY},this.scaleStart=0,this.scaleEnd=Number.POSITIVE_INFINITY,this.screenSize=e}return e.prototype.findClosestValidCamera=function(e){var t=this.findClosestValidScale(e.scale),r=e.centerX,n=e.centerY;if(this.pinPoint&&e.scale!==t){var i=r-this.pinPoint.x,o=n-this.pinPoint.y,a=t/e.scale;r=this.pinPoint.x+i/a,n=this.pinPoint.y+o/a}return{centerX:r=this.findClosestValidCenter(r,t,this.screenSize.width,this.border.centerX,this.border.width),centerY:n=this.findClosestValidCenter(n,t,this.screenSize.height,this.border.centerY,this.border.height),scale:t}},e.prototype.findClosestValidScale=function(e){var t=e;return this.scaleStart>t?t=this.scaleStart:this.scaleEnd<t&&(t=this.scaleEnd),t},e.prototype.findClosestValidCenter=function(e,t,r,n,i){var o=e;if(t<=r/i)o=n;else{var a=r/t/2,s=i/2,c=n-s+a,u=n+s-a;o<c?o=c:o>u&&(o=u)}return o},e}();t.ValidDomain=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this._isActive=!1,this._key=void 0,this.previousPressEvent=null,this.cameraman=e.cameraman,this.activeDispatch=e.activeDispatch}return Object.defineProperty(e.prototype,"active",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),e.prototype.willInterruptEvent=function(e){return this.active&&!!e&&(e.kind===n.BoundlessEventKind.SortedTouchMove||e.kind===n.BoundlessEventKind.MouseMove)},e.prototype.moveCameraByEvent=function(e){if(e&&this.previousPressEvent&&this.isMouseOrSortedTouch(this.previousPressEvent)&&this.isMouseOrSortedTouch(e)){var t=e.pointOnScreen.x-this.previousPressEvent.pointOnScreen.x,r=e.pointOnScreen.y-this.previousPressEvent.pointOnScreen.y,i=this.cameraman.screen.camera,o=i.centerX,a=i.centerY,s=i.scale,c={centerX:o-t/s,centerY:a-r/s,scale:s,animationMode:n.AnimationMode.Immediately};this.cameraman.transformCamera(c)}},e.prototype.handlePreviousEvent=function(e){this.needUpdatePrevious(e)?this.previousPressEvent=e:this.needReleasePrevious(e)&&(this.previousPressEvent=null)},e.prototype.isKeyEvent=function(e){return!!e.nativeEvent&&e.nativeEvent instanceof KeyboardEvent&&e.nativeEvent.key===this.key},e.prototype.handleKeyEvent=function(e){var t=this.active;e.kind===n.BoundlessEventKind.KeyDown&&!0!==t?this.active=!0:e.kind===n.BoundlessEventKind.KeyUp&&!1!==t&&(this.active=!1),t!==this.active&&this.activeDispatch(this.active)},e.prototype.isMouseOrSortedTouch=function(e){var t=e.kind;return t===n.BoundlessEventKind.MouseDown||t===n.BoundlessEventKind.MouseUp||t===n.BoundlessEventKind.MouseLeave||t===n.BoundlessEventKind.MouseMove||t===n.BoundlessEventKind.SortedTouchStart||t===n.BoundlessEventKind.SortedTouchMove||t===n.BoundlessEventKind.SortedTouchEnd||t===n.BoundlessEventKind.SortedTouchCancel},e.prototype.needUpdatePrevious=function(e){if(e){if(this.previousPressEvent&&(e.kind===n.BoundlessEventKind.MouseMove||e.kind===n.BoundlessEventKind.SortedTouchMove))return!0;if(e.kind===n.BoundlessEventKind.MouseDown||e.kind===n.BoundlessEventKind.SortedTouchStart)return!0}return!1},e.prototype.needReleasePrevious=function(e){return!!e&&(e.kind===n.BoundlessEventKind.MouseUp||e.kind===n.BoundlessEventKind.SortedTouchEnd||e.kind===n.BoundlessEventKind.SortedTouchCancel)},e}();t.HandTool=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15),i=r(16),o=function(){function e(t,r){var n=this;this.referPoint=[],this._isTransition=!1;var o=r&&function(e,t){var i=n.convertPointToCamera(e),o=n._isTransition||!t;r(i,o)};this.referPoint[0]=t.centerX,this.referPoint[1]=t.centerY,this.referPoint[2]=t.scale*e.kScale,this.spaceSpring=e.spaceSpringFactory.create(i.AnimationPriority.CameraMoving,[0,0,0],o)}return Object.defineProperty(e.prototype,"isTransition",{get:function(){return this._isTransition},enumerable:!0,configurable:!0}),e.prototype.convertPointToCamera=function(t){return{centerX:this.referPoint[0]+t[0],centerY:this.referPoint[1]+t[1],scale:(this.referPoint[2]+t[2])/e.kScale}},e.prototype.moveTo=function(t,r){var n=[this.referPoint[0]-t.centerX,this.referPoint[1]-t.centerY,this.referPoint[2]-t.scale*e.kScale];this._isTransition=r,this.referPoint[0]=t.centerX,this.referPoint[1]=t.centerY,this.referPoint[2]=t.scale*e.kScale,this.spaceSpring.moveToAndChangeCoordinate(n,[0,0,0])},e.prototype.moveToRightNow=function(t,r){this._isTransition=r,this.referPoint[0]=t.centerX,this.referPoint[1]=t.centerY,this.referPoint[2]=t.scale*e.kScale,this.spaceSpring.moveRightNow([0,0,0])},e.kScale=700,e.spaceSpringFactory=new n.SpaceSpringFactory({matchingDistance:2,zeroSpeed:.55,kDistance:.17,velocityDamping:.55,heavyDampingRadius:15,heavyDampingSpeed:.25,pedesisSpeedMean:0,pedesisSpeedVariance:0},{matchingDistance:2,zeroSpeed:.55,kDistance:.12,velocityDamping:.35,heavyDampingRadius:15,heavyDampingSpeed:.35,pedesisSpeedMean:0,pedesisSpeedVariance:0}),e}();t.CameraAnimation=o},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(31),s=function(){function e(){var e=this;this.animationPriorities=[],this.animations={},this.afterAnimationsInvokers=[],this.animationId=null,this.isInAnimationFrame=!1,this.onAnimationFrame=function(){var t,r,i,a,s,c;try{e.isInAnimationFrame=!0;try{for(var u=n(e.animationPriorities),l=u.next();!l.done;l=u.next()){var p=l.value;try{for(var h=(i=void 0,n(o(e.animations[p]))),d=h.next();!d.done;d=h.next())(0,d.value)()}catch(e){i={error:e}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var f=n(o(e.afterAnimationsInvokers)),y=f.next();!y.done;y=f.next())(0,y.value)()}catch(e){s={error:e}}finally{try{y&&!y.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}e.animationPriorities.length>0?e.animationId=window.requestAnimationFrame(e.onAnimationFrame):e.animationId=null}finally{e.isInAnimationFrame=!1}}}return e.prototype.addAnimation=function(e,t){var r=this.animations[e],n=!1;r||(r=this.animations[e]=[],this.animationPriorities.push(e),this.animationPriorities.sort(),n=1===this.animationPriorities.length),a.arrayPut(r,t),n&&null===this.animationId&&(this.animationId=window.requestAnimationFrame(this.onAnimationFrame))},e.prototype.removeAnimation=function(e,t){var r=this.animations[e];r&&(a.arrayRemove(r,t),0===r.length&&(delete this.animations[e],a.arrayRemove(this.animationPriorities,e),0!==this.animationPriorities.length||this.isInAnimationFrame||null===this.animationId||(window.cancelAnimationFrame(this.animationId),this.animationId=null)))},e.prototype.addAfterAnimationsInvoker=function(e){a.arrayPut(this.afterAnimationsInvokers,e)},e.prototype.removeAfterAnimationsInvoker=function(e){a.arrayRemove(this.afterAnimationsInvokers,e)},e}();t.AnimationFrames=s},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(94),s=r(30),c=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.configurations=Object.freeze(e.map((function(e){return Object.freeze(n({},e))})))}return e.prototype.create=function(e,t,r){return new u(e,o(this.configurations),t,r)},e}();t.SpaceSpringFactory=c;var u=function(){function e(t,r,n,c){var u=this;this.priority=t,this._point=n,this.onPointUpdate=c,this.completeTick=!1,this.playingAnimation=null,this.updateIdealPoint=function(t){e.setPoint(u.idealPoint,t),!u.playingAnimation&&u.shouldContinueMoving()&&(u.playingAnimation=s.animation.createAnimation(u.priority,u.onTick)),u.completeTick=!1},this.onTick=function(){if(u.completeTick)u.stop();else{u.executePhysicalSimulate();var e=!u.shouldContinueMoving();u.onPointUpdate&&u.onPointUpdate(u._point,e),e&&(u.completeTick=!0)}};var l=i(r.splice(0,1),1)[0];this.configuration=l,this._point=o(n),this.idealPoint=o(n),this.velocity=n.map((function(){return 0})),r.length>0&&(this.guider=new e(this.priority,r,n,this.updateIdealPoint));var p=this.configuration.pedesisSpeedMean,h=this.configuration.pedesisSpeedVariance;this.gaussian=0!==p&&0!==h?a.gaussian(p,h):null,this.noPedesisRadius=(p+Math.sqrt(h))*e.noPedesisRadiusRate}return Object.defineProperty(e.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlayingAnimation",{get:function(){return!!this.playingAnimation},enumerable:!0,configurable:!0}),e.prototype.moveRightNow=function(t){this.guider&&this.guider.moveRightNow(t),e.setPoint(this.idealPoint,t),e.setPoint(this._point,t),e.setPointZero(this.velocity),this.playingAnimation&&(this.playingAnimation.release(),this.playingAnimation=null),this.completeTick=!1},e.prototype.moveTo=function(e){this.guider?this.guider.moveTo(e):this.updateIdealPoint(e)},e.prototype.moveToAndChangeCoordinate=function(e,t){for(var r=0;r<this._point.length;++r)this._point[r]+=e[r];this.guider?this.guider.moveToAndChangeCoordinate(e,t):this.updateIdealPoint(t)},e.prototype.stop=function(){e.setPoint(this.idealPoint,this._point),e.setPointZero(this.velocity),this.playingAnimation&&(this.playingAnimation.release(),this.playingAnimation=null),this.completeTick=!1},e.prototype.executePhysicalSimulate=function(){for(var e=this.squareDistanceToIdealPoint(),t=this.velocityDamping(e),r=e>this.noPedesisRadius*this.noPedesisRadius,n=0;n<this._point.length;++n){var i=this.idealPoint[n]-this._point[n],o=this.configuration.kDistance*i;if(this.velocity[n]+=o,r&&this.gaussian){var a=this.gaussian.ppf(Math.random());Math.random()>=.5&&(a=-a),this.velocity[n]+=a}this._point[n]+=this.velocity[n],this.velocity[n]*=1-t}},e.prototype.velocityDamping=function(e){for(var t=0,r=0;r<this.velocity.length;++r)t+=this.velocity[r]*this.velocity[r];var n=this.configuration,i=n.heavyDampingRadius,o=n.heavyDampingSpeed;return t<o*o||e>i*i?this.configuration.velocityDamping:Math.min(1,t*this.configuration.velocityDamping)},e.prototype.squareDistanceToIdealPoint=function(){for(var e=0,t=0;t<this.velocity.length;++t){var r=this.idealPoint[t]-this._point[t];e+=r*r}return e},e.prototype.shouldContinueMoving=function(){for(var e=0;e<this._point.length;++e){if(Math.abs(this._point[e]-this.idealPoint[e])>this.configuration.matchingDistance)return!0;if(Math.abs(this.velocity[e])>this.configuration.zeroSpeed)return!0}return!1},e.setPoint=function(e,t){for(var r=0;r<e.length;++r)e[r]=r in t?t[r]:0},e.setPointZero=function(e){for(var t=0;t<e.length;++t)e[t]=0},e.noPedesisRadiusRate=2.7,e}();t.SpaceSpring=u},function(e,t,r){"use strict";function n(e){var t=Math.abs(e),r=1/(1+t/2),n=r*Math.exp(-t*t-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(r*(.27886807+r*(r*(1.48851587+r*(.17087277*r-.82215223))-1.13520398))-.18628806)))));return e>=0?n:2-n}function i(e,t){return new a(e,t)}function o(e,t){return i(t/e,1/e)}Object.defineProperty(t,"__esModule",{value:!0}),t.gaussian=i;var a=function(){function e(e,t){this.mean=e,this.variance=t,this.standardDeviation=Math.sqrt(t)}return e.prototype.pdf=function(e){var t=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(e-this.mean,2)/(2*this.variance))/t},e.prototype.cdf=function(e){return.5*n(-(e-this.mean)/(this.standardDeviation*Math.sqrt(2)))},e.prototype.ppf=function(e){return this.mean-this.standardDeviation*Math.sqrt(2)*function(e){if(e>=2)return-100;if(e<=0)return 100;for(var t=e<1?e:2-e,r=Math.sqrt(-2*Math.log(t/2)),i=-.70711*((2.30753+.27061*r)/(1+r*(.99229+.04481*r))-r),o=0;o<2;o++){var a=n(i)-t;i+=a/(1.1283791670955126*Math.exp(-i*i)-i*a)}return e<1?i:-i}(2*e)},e.prototype.mul=function(e){if("number"==typeof e)return this.scale(e);var t=1/this.variance,r=1/e.variance;return o(t+r,t*this.mean+r*e.mean)},e.prototype.div=function(e){if("number"==typeof e)return this.scale(1/e);var t=1/this.variance,r=1/e.variance;return o(t-r,t*this.mean-r*e.mean)},e.prototype.add=function(e){return i(this.mean+e.mean,this.variance+e.variance)},e.prototype.sub=function(e){return i(this.mean-e.mean,this.variance+e.variance)},e.prototype.scale=function(e){return i(this.mean*e,this.variance*e*e)},e}();t.Gaussian=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(32),a=r(33),s=function(){function e(e){this.className=e.screen.className,this.layouts=Object.freeze(a.createLayouts({tree:e.tree,screen:e.screen,initCamera:e.initCamera,visions:e.visions,engines:e.engines,onRenderDuration:e.onRenderDuration,mode:i.RenderLayoutMode.Preview}))}return e.prototype.render=function(e){var t=[];for(var r in this.layouts){var i=this.layouts[r].getRender();t.push(n.createElement(i,{key:r}))}return o.wrapContent(e,n.createElement("div",{className:this.className,style:{width:"100%",height:"100%",position:"relative"}},t))},e}();t.Screenshoter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97);t.ScreenUpdater=n.ScreenUpdater;var i=r(35);t.initVisions=i.initVisions},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(98),s=r(32),c=r(2),u=r(34),l=r(100),p=r(17),h=function(){function e(e){this.context=null,this.screen=e.screen,this.engines=e.engines,this.onRenderDuration=e.onRenderDuration,this.visions=new c.VisionsHub,this._wrappedComponents=Object.freeze(i(e.wrappedComponents))}return e.prototype.hitTest=function(e,t){var r=this,n=[];if(this.context){var i=t/this.screen.camera.scale;this.context.visibleTestNode.forEachVisibleComponent((function(t){r.isHitComponent(t,e,i)&&n.push(t.id)}))}return n.reverse()},e.prototype.findComponentWithTarget=function(e){return this.context?this.context.visibleTestNode.findComponentWithTarget(e):void 0},e.prototype.willInterruptEvent=function(e,t){return!!this.context&&this.context.visibleTestNode.willInterruptEvent(e,t)},e.prototype.refreshScreenRendererState=function(e){var t;null===(t=this.context)||void 0===t||t.visibleTestNode.renderer.setState(e)},e.prototype.refreshScreenContext=function(){this.context&&this.context.visibleTestNode.refreshScreenContext()},e.prototype.isHitComponent=function(e,t,r){var n=t.x,i=t.y,o=p.getMarginOnScene(e,this.screen.camera.scale),a=Math.max(o.left,r),s=Math.max(o.right,r),c=Math.max(o.top,r),l=Math.max(o.bottom,r),h=e.originX-a,d=e.originY-c,f=e.width+a+s,y=e.height+c+l;return!!u.RectangleTesting.testPoint(h,d,f,y,n,i)&&e.definition.hitTest(this.screen,e,n,i,r)},Object.defineProperty(e.prototype,"divElement",{get:function(){return this.context&&this.context.divElement},set:function(e){e!==(this.context&&this.context.divElement)&&(this.context&&(this.context.visibleTestNode.release(),a.unmountComponentAtNode(this.context.divElement)),e?this.context=Object.freeze({divElement:e,visibleTestNode:new l.VisibleTestNode({screen:this.screen,engines:this.engines,visions:this.visions,onRenderDuration:this.onRenderDuration})}):(this.visions.clean(),this.context=null),this.refreshScreenRender())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappedComponents",{get:function(){return this._wrappedComponents},set:function(e){this._wrappedComponents!==e&&(this._wrappedComponents=Object.freeze(i(e)),this.refreshScreenRender())},enumerable:!0,configurable:!0}),e.prototype.refreshScreenRender=function(){if(this.context){var e=o.createElement(this.context.visibleTestNode.renderer.getRender()),t=s.wrapContent(this._wrappedComponents,e);a.render(t,this.context.divElement)}},e}();t.ScreenUpdater=h},function(e,t){e.exports=r(18)},function(e,t,r){"use strict";var n;function i(e,t,r,i){var o=t,a=r,s=i,c=e>a;if(c){var u=o;a=e,o=s,s=u}return o<a?n.Result.Disjoint:o<s?n.Result.Cross:c?n.Result.IncludeByRectangle:n.Result.IncludeRectangle}Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t;!function(e){e[e.Disjoint=0]="Disjoint",e[e.Cross=1]="Cross",e[e.IncludeRectangle=2]="IncludeRectangle",e[e.IncludeByRectangle=3]="IncludeByRectangle"}(t=e.Result||(e.Result={})),e.testPoint=function(e,t,r,n,i,o){return i>=e&&i<=e+r&&o>=t&&o<=t+n},e.testRectangle=function(e,r,n,o,a,s,c,u){var l=i(e,e+n,a,a+c),p=i(r,r+o,s,s+u);return l===t.Disjoint||p===t.Disjoint?t.Disjoint:l===t.Cross||p===t.Cross?t.Cross:l===t.IncludeRectangle&&p===t.IncludeRectangle?t.IncludeRectangle:l===t.IncludeByRectangle&&p===t.IncludeByRectangle?t.IncludeByRectangle:t.Cross},e.iterate=function(e,t,r,n,i){i(e,t),i(e+r,t),i(e+r,t+n),i(e,t+n)},e.allPoints=function(e,t,r,n){return[{x:e,y:t},{x:e+r,y:t},{x:e+r,y:t+n},{x:e,y:t+n}]}}(n=t.RectangleTesting||(t.RectangleTesting={}))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=r(101),a=r(102),s=r(103),c=r(17),u=r(4),l=r(35),p=r(7),h=r(6),d=function(){function e(e){var t=this;this.isCameraUpdated=!1,this.toTestAppearSet={},this.toTestVisibleSet={},this.toUpdateSet={},this.toSortSet={},this.toMoveSet={},this.toShowSet={},this.toHideSet={},this.onScreenUpdate=function(e){h.isEquals(t.screenState,e)||(t.isCameraUpdated=!0,t.screenState=e,t.refreshFrameNode.fire(e.isTransition))},this.onGroupSorted=function(e){t.toSortSet[e.treeNode.id]=e,t.refreshFrameNode.fire()},this.onComponentUpdate=function(e){var r=e.node;switch(e.behavior){case u.ComponentUpdaterBehavior.Removed:delete t.toTestAppearSet[r.treeNode.id],delete t.toUpdateSet[r.treeNode.id],delete t.toTestVisibleSet[r.treeNode.id];break;case u.ComponentUpdaterBehavior.Added:case u.ComponentUpdaterBehavior.AppearUpdated:t.toTestAppearSet[r.treeNode.id]=r;break;case u.ComponentUpdaterBehavior.VisibleUpdated:r instanceof u.ComponentImplement&&(t.toTestVisibleSet[r.treeNode.id]=r);break;case u.ComponentUpdaterBehavior.PropertiesUpdated:r instanceof u.ComponentImplement&&(t.toUpdateSet[r.treeNode.id]=r)}t.refreshFrameNode.fire()},this.handleFrame=function(e){try{t.sortAllGroups();var r=t.diffBuffer.fetchDiff();t.testComponents(r);var n=t.commitVisibleAndDecorateDiff(r);t.notify(n,e),t.cleanSet()}catch(e){t.logger.error(e)}},this.refreshComponent=function(e,r){var n=e.treeNode.id,i=t.visions.leaf(n),o=t.visions.vision(n);if(o){var a=o.sceneRect,s=i.value;h.isEquals(a,r.sceneRect)&&h.isEquals(s.parallaxMargin,e.parallaxMargin)&&h.isEquals(s.sceneMargin,e.sceneMargin)||(t.toMoveSet[n]={component:e,vision:r})}else t.toShowSet[n]={component:e,vision:r};i&&t.visions.bindVision(i,r)},this.removeComponent=function(e){var r=e.treeNode;t.visions.includes(r.id)&&(t.toHideSet[r.id]=e),t.visions.unbindVision(r.id)},this.screen=e.screen,this.visions=e.visions,this.logger=this.screen.scene.logger,this.tree=this.screen.scene.tree,this.diffBuffer=this.tree.createDiffBuffer(),this.screenState={width:this.screen.width,height:this.screen.height,camera:Object.freeze(n({},this.screen.camera)),visionRectangle:this.screen.visionRectangle,isTransition:!1},l.initVisions(this.visions,this.screen.scene,this.screenState),this.renderer=new o.ScreenRenderer({screen:this.screen,engines:e.engines,tree:this.tree,visions:this.visions,onRenderDuration:e.onRenderDuration});var r=this.screen,i=r.context,c=r.camera;this.notifier=new a.EngineNotifier(this.renderer,this.visions,i,c,Object.freeze({width:this.screen.width,height:this.screen.height})),this.refreshFrameNode=new s.RefreshFrameNode(this.handleFrame),this.screen.addScreenUpdatedListener(this.onScreenUpdate),this.screen.scene.addGroupSortedListener(this.onGroupSorted),this.screen.scene.addComponentUpdateListener(this.onComponentUpdate)}return e.prototype.willInterruptEvent=function(e,t){for(var r in this.renderer.renderLayouts)if(this.renderer.renderLayouts[r].willInterruptEvent(this.screen,e,t))return!0;return!1},e.prototype.findComponentWithTarget=function(e){for(var t in this.renderer.renderLayouts){var r=this.renderer.renderLayouts[t],n=r.findComponentWithTarget(e);if(n)return{component:n,engine:r.engine}}},e.prototype.forEachVisibleComponent=function(e){var t,r;try{for(var n=i(this.tree),o=n.next();!o.done;o=n.next())e(o.value.value)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.release=function(){this.refreshFrameNode.release(),this.diffBuffer.release(),this.screen.removeScreenUpdatedListener(this.onScreenUpdate),this.screen.scene.removeGroupSortedListener(this.onGroupSorted),this.screen.scene.removeComponentUpdateListener(this.onComponentUpdate)},e.prototype.refreshScreenContext=function(){this.refreshFrameNode.fire()},e.prototype.sortAllGroups=function(){for(var e in this.toSortSet)this.toSortSet[e].sortIfNeed()},e.prototype.testComponents=function(e){for(var t in e.removedSet)this.visions.includes(t)&&(this.toHideSet[t]=e.removedSet[t].value);if(this.isCameraUpdated)c.iterateComponentsWithScene(this.screen.scene,this.screenState,this.refreshComponent,this.removeComponent),this.isCameraUpdated=!1;else for(var t in this.toTestAppearSet){var r=this.toTestAppearSet[t];r.treeNode.parent&&c.iterateComponentsWithNode(r,this.screenState,this.refreshComponent,this.removeComponent)}},e.prototype.commitVisibleAndDecorateDiff=function(e){var t=[],r=[],n=[];for(var i in this.toShowSet){var o=this.toShowSet[i],a=o.vision,s=o.component.treeNode;e.addedSet[i]||t.push(s),this.visions.bindVision(s,a)}for(var i in this.toMoveSet){var c=this.toMoveSet[i];a=c.vision,s=c.component.treeNode,this.visions.bindVision(s,a)}for(var i in this.toHideSet)s=this.toHideSet[i].treeNode,e.removedSet[i]||r.push(s),this.visions.unbindVision(i);for(var i in e.addedSet)this.visions.includes(i)||n.push(i);return e.decorate({insertToAdded:t,insertToRemoved:r,maskAdded:n})},e.prototype.notify=function(e,t){var r={};for(var n in this.toMoveSet)r[n]=this.toMoveSet[n].component;for(var n in this.toUpdateSet)this.visions.includes(n)||delete this.toUpdateSet[n];for(var n in this.toTestVisibleSet)this.visions.includes(n)||delete this.toTestVisibleSet[n];this.notifier.flush({context:this.screen.context,camera:this.screenState.camera,diff:e,isTransition:t,moveSet:r,testSet:this.toTestVisibleSet,updateSet:this.toUpdateSet,screenSize:Object.freeze({width:this.screen.width,height:this.screen.height})})},e.prototype.cleanSet=function(){this.toTestVisibleSet={},this.toUpdateSet={},p.hasKey(this.toTestAppearSet)&&(this.toTestAppearSet={}),p.hasKey(this.toSortSet)&&(this.toSortSet={}),p.hasKey(this.toMoveSet)&&(this.toMoveSet={}),p.hasKey(this.toShowSet)&&(this.toShowSet={}),p.hasKey(this.toHideSet)&&(this.toHideSet={})},e}();t.VisibleTestNode=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(2),c=r(33),u=function(){function e(e){this.component=null,this.componentState={className:e.screen.className},this.layouts=Object.freeze(c.createLayouts({tree:e.tree,screen:e.screen,engines:e.engines,visions:e.visions,onRenderDuration:e.onRenderDuration,mode:s.RenderLayoutMode.Normal})),this.logger=e.screen.scene.logger,this.renderClass=this.createRender()}return e.prototype.setState=function(e){var t;this.componentState=o({},e),null===(t=this.component)||void 0===t||t.setState(e)},Object.defineProperty(e.prototype,"renderLayouts",{get:function(){return this.layouts},enumerable:!0,configurable:!0}),e.prototype.getRender=function(){return this.renderClass},e.prototype.createRender=function(){var e=this;return function(t){function r(r){var n=t.call(this,r)||this;return n.state=o({},e.componentState),e.component=n,n}return i(r,t),r.prototype.componentWillUnmount=function(){e.component=null},r.prototype.render=function(){var t=[],r=this.state,n=r.className,i=r.style,s=o(o({},i),{width:"100%",height:"100%",position:"relative"});for(var c in e.layouts)t.push(a.createElement(l,{key:c,logger:e.logger,layout:e.layouts[c]}));return a.createElement("div",{className:n,style:s},t)},r}(a.Component)},e}();t.ScreenRenderer=u;var l=function(e){function t(t){var r=e.call(this,t)||this;return r.state={error:void 0},r}return i(t,e),t.prototype.shouldComponentUpdate=function(e,t){var r=this.props.layout,n=this.state.error;return r!==e.layout||n!==t.error},t.getDerivedStateFromError=function(e){return console.error(e),{error:e}},t.prototype.componentDidCatch=function(e,t){var r=this.props,n=r.layout;r.logger.error("boundless layout "+n.engine.id+" render catch error:",e," stack: ",t.componentStack)},t.prototype.render=function(){var e=this.props.layout;if(this.state.error)return null;var t=e.getRender();return a.createElement(t,null)},t}(a.Component)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=function(){function e(e,t,r,n,i){var o={},a=function(r){var n=e.renderLayouts[r],i={};t.forEach((function(e){e.value.isVisible(n.engine)&&(i[e.id]=!0)})),o[r]=Object.seal({layout:n,visibleSet:i})};for(var s in e.renderLayouts)a(s);this.camera=n,this.screenSize=i,this.context=r,this.engineNodes=Object.freeze(o)}return e.prototype.flush=function(e){var t,r,i;for(var o in n.isEquals(this.camera,e.camera)||(t=this.camera=e.camera),n.isEquals(this.screenSize,e.screenSize)||(r=this.screenSize=e.screenSize),this.context!==e.context&&(i=this.context=e.context),this.engineNodes)this.flushEngine(this.engineNodes[o],e,i,t,r)},e.prototype.flushEngine=function(e,t,r,n,i){var o=e.visibleSet,a=e.layout.engine,s=t.testSet,c=t.updateSet,u=t.moveSet,l=t.isTransition,p=t.diff,h=p.addedSet,d=p.removedSet,f=[],y=[],A=[];for(var m in h)(g=h[m].value).isVisible(a)?o[m]=!0:A.push(m);for(var m in s){var g,v=(g=s[m]).treeNode,b=g.isVisible(a),P=m in o;P&&!b?(y.push(v),delete o[m]):!P&&b&&(f.push(v),o[m]=!0)}for(var m in d)delete o[m];var S=t.diff.decorate({insertToAdded:f,insertToRemoved:y,maskAdded:A}),w={},x={};for(var m in c)m in o&&(w[m]=c[m].treeNode);for(var m in u)m in o&&(x[m]=u[m].treeNode);e.layout.update({context:r,camera:n,screenSize:i,isTransition:l,diff:S,updateSet:w,moveSet:x})},e}();t.EngineNotifier=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15),i=r(16),o=function(){function e(e){var t=this;this.frameInvoker=n.animation.createAnimationFrameInvoker(i.AnimationPriority.Rendering),this.didReceiveTransitionFalse=!1,this.onFrameInvoke=function(){var e=!t.didReceiveTransitionFalse;t.didReceiveTransitionFalse=!1,t.frameHandler(e)},this.frameHandler=e}return e.prototype.release=function(){this.frameInvoker.release()},e.prototype.fire=function(e){void 0===e&&(e=!1),e||(this.didReceiveTransitionFalse=!0),this.frameInvoker.invoke(this.onFrameInvoke)},e}();t.RefreshFrameNode=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(105);t.LegacyLayoutNode=n.LegacyLayoutNode},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),c=r(2),u=r(4),l=r(27),p=r(106),h=function(){function e(e){var t,r;this.definitionNodes=[];var i=o(e).sort((function(e,t){return e.layout-t.layout})),c={},u={};try{for(var l=a(i),p=l.next();!p.done;p=l.next()){var h=p.value,d=this.createEngine(h);h.renderMode===s.LayoutRenderMode.Screen&&(u[d.id]=!0),c[d.id]=d}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}this.engines=Object.freeze(n({},c)),this.absoluteCoordinatesSet=Object.freeze(n({},u))}return e.prototype.createEngine=function(e){var t,r=e.layout,n=e.kind,i=e.renderMode,o=e.className,a=e.style;switch(n){case s.LayoutKind.HTML:case s.LayoutKind.SVG:t=c.creatHTMLRenderEngine({orderIndex:r,fixedSize:i===s.LayoutRenderMode.AbsoluteSize,isSVG:n===s.LayoutKind.SVG,className:o,style:a});break;case s.LayoutKind.CANVAS:t=c.createCanvasRenderEngine({orderIndex:r,fixedSize:!0});break;default:throw new Error("invalid kind "+n)}return t},e.prototype.adaptComponentConstructor=function(e){if(e.definition)return e;var t=e,r=this.findDefinitionNode(t).definition,n=this.checkIsAbsoluteCoordinates(t);return{id:t.id,definition:r,originX:t.originX,originY:t.originY,width:t.width,height:t.height,parallaxMargin:t.parallaxMargin,sceneMargin:t.sceneMargin,disableVisionTrim:t.disableVisionTrim,absoluteCoordinates:n,payload:t.payload,orderIndex:t.orderIndex}},e.prototype.checkIsAbsoluteCoordinates=function(e){for(var t in e.render.layouts){var r=this.findEngineWithLayout(parseInt(t,10));if(r)return!!this.absoluteCoordinatesSet[r.id]}return!1},e.prototype.findDefinitionNode=function(e){var t,r,n=null;try{for(var i=a(this.definitionNodes),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.render===e.render){n=s;break}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n||(n=Object.freeze({definition:this.createDefinition(e),render:e.render,painter:e.painter}),this.definitionNodes.push(n)),n},e.prototype.createDefinition=function(e){var t,r=e.render,n=new u.ComponentDefinitionImplement({name:r.name||"ComponentDefinition",hitTest:null===(t=r.hitTest)||void 0===t?void 0:t.bind(r)});for(var i in r.layouts){var o=this.findEngineWithLayout(parseInt(i,10)),a=r.layouts[i].isVisible;o instanceof l.HTMLRenderEngineImplement&&o.bind(n)(p.createLegacyHTMLRender(o,r,a))}return n},e.prototype.findEngineWithLayout=function(e){for(var t in this.engines)if(this.engines[t].orderIndex===e)return this.engines[t];return null},e}();t.LegacyLayoutNode=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1);t.createLegacyHTMLRender=function(e,t,r){var n=t,a=e.orderIndex;return function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return i(s,e),s.willInterruptEvent=function(e,r,n){return"function"==typeof t.willInterruptEvent?t.willInterruptEvent(e,r,a,n):"boolean"==typeof t.willInterruptEvent&&t.willInterruptEvent},s.prototype.render=function(){var e=this.props,t=e.id,r=e.margin,i=e.origin,s=e.size,c=e.scale,u=e.payload,l=e.context,p=e.cnode;return o.createElement(n,{id:t,layout:a,margin:r,origin:i,size:s,scale:c,payload:u,context:l,cnode:p})},s.isVisible=r,s}(o.Component)}},function(e,t){e.exports=r(31)},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.sortComponents=function(e,t){var r,i,o,a,s,c,u=[],l=[];try{for(var p=n(e),h=p.next();!h.done;h=p.next()){var d=h.value;void 0===t(d)?l.push(d):u.push(d)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}u.sort((function(e,r){return t(e)-t(r)}));var f=0;try{for(var y=n(u),A=y.next();!A.done;A=y.next())d=A.value,e[f]=d,f+=1}catch(e){o={error:e}}finally{try{A&&!A.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}try{for(var m=n(l),g=m.next();!g.done;g=m.next())d=g.value,e[f]=d,f+=1}catch(e){s={error:e}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(s)throw s.error}}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Centering="centering",e.Tailor="tailor"}(t.RectangleAdapterMode||(t.RectangleAdapterMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19);t.createComponentDefinition=function(e){return new n.ComponentDefinitionImplement(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Group=0]="Group",e[e.Component=1]="Component"}(t.ComponentKind||(t.ComponentKind={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.isHTMLRenderEngine=n.isHTMLRenderEngine,t.isCanvasRenderEngine=n.isCanvasRenderEngine,function(e){e[e.Unchanged=0]="Unchanged",e[e.Overlay=1]="Overlay",e[e.Changed=2]="Changed"}(t.CanvasRenderState||(t.CanvasRenderState={})),function(e){e[e.Directly=0]="Directly",e[e.GenerateCache=1]="GenerateCache",e[e.Overlay=2]="Overlay",e[e.OverlayOnCache=3]="OverlayOnCache"}(t.CanvasPaitingMode||(t.CanvasPaitingMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Begin="Begin",e.End="End"}(t.CameraTransformation||(t.CameraTransformation={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Continuous="continuous",e.Immediately="immediately"}(t.AnimationMode||(t.AnimationMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.midpoint=function(e,t,r){return e+(t-e)*r},t.unitVector=function(e,t){var r=Math.sqrt(e*e+t*t);return 0===r?{x:1,y:0}:{x:e/r,y:t/r}},t.distance=function(e,t,r,n){var i=e-r,o=t-n;return Math.sqrt(i*i+o*o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.HTML=0]="HTML",e[e.SVG=1]="SVG",e[e.CANVAS=2]="CANVAS"}(t.LayoutKind||(t.LayoutKind={})),function(e){e[e.AbsoluteSize=0]="AbsoluteSize",e[e.RelativeSize=1]="RelativeSize",e[e.Screen=2]="Screen"}(t.LayoutRenderMode||(t.LayoutRenderMode={}))}]))},function(e,t){e.exports=r("q1tI")},function(e,t){e.exports=r("Pzfo")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment=function e(t){if("object"!=A(t)||null===t)return t;if(t.constructor===Object){var r={};for(var n in t)r[n]=e(t[n]);return Object.freeze(r)}if(Array.isArray(t)){r=[];for(var i=0;i<t.length;++i)r[i]=e(t[i]);return Object.freeze(r)}return t}({sdkVersion:"2.13.11",defaultRegion:"cn-hz",modules:{identifier:"link.netless/white-model-render",origin:"https://sdk.netless.link"},shuntApiHosts:["api.netless.link"],hosts:{pptApi:"api.netless.link"},log:{argusOptions:{reportResourceURL:"https://rest-argus-ad.agoralab.co/v3/report",vid:3}}})},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(83)),n(r(85)),n(r(86)),n(r(87)),n(r(88)),n(r(89)),n(r(90)),n(r(91))},function(t,r){!function(e,t){for(var r in t)e[r]=t[r]}(r,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);!function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(5));var i=r(1);t.TypeCreator=i.TypeCreator;var o=r(14);t.replaceTypeIds=o.replaceTypeIds;var a=new n.TypeCreator;t.getSingletonType=a.getSingletonType.bind(a),t.getFunctionType=a.getFunctionType.bind(a),t.getObjectType=a.getObjectType.bind(a),t.getCompoundType=a.getCompoundType.bind(a),t.getGenericType=a.getGenericType.bind(a),t.getGeneratorType=a.getGeneratorType.bind(a),t.getReferenceType=a.getReferenceType.bind(a),t.getGlobalReferenceType=a.getGlobalReferenceType.bind(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=function(){function e(){this.singletonMap=e.createSingletonMap()}return e.createSingletonMap=function(){for(var e={},t=0,r=[n.TypeEnum.Any,n.TypeEnum.Never,n.TypeEnum.Undefined,n.TypeEnum.Null,n.TypeEnum.String,n.TypeEnum.Number,n.TypeEnum.Boolean];t<r.length;t++){var i=r[t];e[i]={typeEnum:i}}return Object.freeze(e)},e.prototype.getSingletonType=function(e){return this.singletonMap[e]},e.prototype.getFunctionType=function(){return{typeEnum:n.TypeEnum.Function}},e.prototype.getObjectType=function(e){var t=void 0===e?{}:e,r=t.key,i=t.index,o=t.properties;return{typeEnum:n.TypeEnum.Object,key:r||this.getSingletonType(n.TypeEnum.Undefined),index:i||this.getSingletonType(n.TypeEnum.Undefined),properties:o||{}}},e.prototype.getCompoundType=function(e,t){return void 0===t&&(t=[]),{typeEnum:e,children:t}},e.prototype.getGenericType=function(e){return{index:e,typeEnum:n.TypeEnum.Generic}},e.prototype.getGeneratorType=function(e){var t=e.template,r=e.params;return{typeEnum:n.TypeEnum.Generator,template:t,params:r||[]}},e.prototype.getReferenceType=function(e){return{typeEnum:n.TypeEnum.Reference,name:e}},e.prototype.getGlobalReferenceType=function(e,t){return{typeEnum:n.TypeEnum.GlobalReference,path:e,name:t}},e}();t.TypeCreator=i},function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(13),s=new function(){var t=this;this.create=function(e){return t.nodeBuffer?new o.NodeAkkoBuffer(t.nodeBuffer.alloc(e),t.create):new a.BrowserAkkoBuffer(new ArrayBuffer(e))},this.wrap=function(e){return t.nodeBuffer&&e instanceof t.nodeBuffer?new o.NodeAkkoBuffer(e,t.create):new a.BrowserAkkoBuffer(e)},this.nodeBuffer="function"==typeof n?e.Buffer:null};r.createBuffer=s.create,r.wrapBuffer=s.wrap,r.isAkkoBuffer=function(e){return e instanceof o.ReadonlyNodeAkkoBuffer||e instanceof a.ReadonlyBrowserAkkoBuffer}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return void 0===this._id&&(this._id=""+e.nextBufferId,e.nextBufferId+=1),this._id},enumerable:!0,configurable:!0}),e.nextBufferId=0,e}();t.BaseAkkoBuffer=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){for(var e={},t=0;t<256;++t){var r=t.toString(16);1===r.length&&(e["0"+r]=t),e[r]=t}return Object.freeze(e)}(),i=function(){for(var e=[],t=0;t<256;++t){var r=t.toString(16);1===r.length?e[t]="0"+r:e[t]=r}return Object.freeze(e)}();t.setUint64=function(e,t,r){for(var i=new String(new Number(r).toString(16)),o=16-i.length,a=0;a<8;++a){var s=2*a-o;if(s<-1)e.setUint8(t+a,0);else if(-1===s){var c=i.substr(0,1),u=n[c];e.setUint8(t+a,u)}else c=i.substr(s,2),u=n[c],e.setUint8(t+a,u)}},t.getUint64=function(e,t){for(var r="",n=0;n<8;++n){var o=e.getUint8(t+n);r+=i[o]}return parseInt(r,16)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Any="any",e.Never="never",e.Undefined="undefined",e.Null="null",e.String="string",e.Number="number",e.Boolean="boolean",e.Function="function",e.Object="object",e.And="and",e.Or="or",e.Generic="generic",e.Generator="generator",e.Reference="reference",e.GlobalReference="globalReference"}(t.TypeEnum||(t.TypeEnum={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r.name="RuntimeError",r}return i(t,e),t}(Error);t.RuntimeError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.RuntimeError=n.RuntimeError;var i=r(19);t.linkTypes=i.linkTypes;var o=r(8);t.DefinitionFinder=o.DefinitionFinder;var a=r(20);t.linkClasses=a.linkClasses},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=function(){function e(e){this.definitionAdapter=e}return e.prototype.findPath=function(e,t,r){var i=t;i=void 0===i?e:n.resolve(this.findDirectory(e),i);var o=this.findFinalPath(i,r);if(!o)throw new Error("can't find "+i+":"+r+" in "+e);return o},e.prototype.findFinalPath=function(e,t){var r=e,i=this.definitionAdapter.getFileDefinitions(r);if(i||(r+="/index",i=this.definitionAdapter.getFileDefinitions(r)),!i)return null;if("default"===t){var o=i.defaultRef;if(!o)throw new Error("path "+JSON.stringify(r)+" doesn't have default");return o.path&&(r=n.resolve(this.findDirectory(r),o.path)),this.findFinalPath(r,o.name)}return this.findFinalPathFromDefinitions(i,r,t)},e.prototype.findFinalPathFromDefinitions=function(e,t,r){if(this.definitionAdapter.isDefined(t,r))return{path:t,name:r};for(var i=this.findDirectory(t),o=0,a=e.externals;o<a.length;o++){var s=a[o],c=s.path,u=s.clauses,l=n.resolve(i,c);if(u){for(var p in u)if(u[p]===r)return this.findFinalPath(l,p)}else{var h=this.findFinalPath(l,r);if(h)return h}}return null},e.prototype.findDirectory=function(e){var t=e.split("/");return t.pop(),t.join("/")},e}();t.DefinitionFinder=i},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};function i(e){var t=e.split("/");return t.length>0&&("."===t[0]&&t.shift(),""===t[t.length-1]&&t.pop()),t}function o(e){return e.length>0&&""!==e[0]}function a(e,t){var r=s(e),i=s(t);if(r.pureCells.length>i.doubleDotsCount){for(var o=0;o<i.doubleDotsCount;++o)r.pureCells.pop();return n(c(r.doubleDotsCount),r.pureCells,i.pureCells)}var a=i.doubleDotsCount-r.pureCells.length;return n(c(r.doubleDotsCount+a),i.pureCells)}function s(e){for(var t=[],r=0,n=0,i=e;n<i.length;n++){var o=i[n];".."===o?r+=1:t.push(o)}return{doubleDotsCount:r,pureCells:t}}function c(e){for(var t=[],r=0;r<e;++r)t.push("..");return t}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];return e.map((function(e){return i(e)})).forEach((function(e){r=0!==r.length&&o(e)?a(r,e):e})),r.join("/")}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(11)),n(r(0)),n(r(15)),n(r(7));var i=r(22);t.Delayer=i.Delayer;var o=r(23);t.InvokeFrequencyLimiter=o.InvokeFrequencyLimiter;var a=r(9);t.resolve=a.resolve;var s=r(24);t.Version=s.Version,t.AkkoVersion="1.4.4"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.isBuffer=n.isAkkoBuffer;var i=r(2);t.createBuffer=i.createBuffer,t.wrapBuffer=i.wrapBuffer},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(4),s=function(e){function t(t,r){var n=e.call(this)||this;return n.buffer=t,n.create=r,n}return i(t,e),Object.defineProperty(t.prototype,"readonly",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteLength",{get:function(){return this.buffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primitiveBuffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),t.prototype.isEqualsTo=function(e){if(this.byteLength!==e.byteLength)return!1;for(var t=0;t<this.byteLength;++t)if(this.getUint8(t)!==e.getUint8(t))return!1;return!0},t.prototype.slice=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.buffer.length-e);for(var r=this.create(t),n=r.buffer,i=0;i<t;++i)n.writeUInt8(this.buffer.readUInt8(e+i),i);return r},t.prototype.getFloat64=function(e){return this.buffer.readDoubleLE(e)},t.prototype.getUint16=function(e){return this.buffer.readUInt16LE(e)},t.prototype.getInt32=function(e){return this.buffer.readInt32LE(e)},t.prototype.getUint32=function(e){return this.buffer.readUInt32LE(e)},t.prototype.getUint8=function(e){return this.buffer.readUInt8(e)},t.prototype.getUint64=function(e){return a.getUint64(this,e)},t}(o.BaseAkkoBuffer);t.ReadonlyNodeAkkoBuffer=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"readonly",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.freeze=function(){return Object.setPrototypeOf(this,s.prototype),this},t.prototype.fill=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=e.byteLength-r);var i=e.primitiveBuffer;if(i instanceof ArrayBuffer){for(var o=new DataView(i),a=this.buffer.byteLength-t,s=Math.min(n,a),c=0;c<s;++c)this.buffer.writeUInt8(o.getUint8(c+r),c+t);return s}return i.copy(this.buffer,t,r,r+n)},t.prototype.setFloat64=function(e,t){this.buffer.writeDoubleLE(t,e)},t.prototype.setUint16=function(e,t){this.buffer.writeUInt16LE(t,e)},t.prototype.setInt32=function(e,t){this.buffer.writeInt32LE(t,e)},t.prototype.setUint32=function(e,t){this.buffer.writeUInt32LE(t,e)},t.prototype.setUint8=function(e,t){this.buffer.writeUInt8(t,e)},t.prototype.setUint64=function(e,t){a.setUint64(this,e,t)},t}(s);t.NodeAkkoBuffer=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(4),s=function(e){function t(t){var r=e.call(this)||this;return r.arrayBuffer=t,r.dataView=new DataView(t),r}return i(t,e),Object.defineProperty(t.prototype,"readonly",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteLength",{get:function(){return this.arrayBuffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primitiveBuffer",{get:function(){return this.arrayBuffer},enumerable:!0,configurable:!0}),t.prototype.isEqualsTo=function(e){if(this.byteLength!==e.byteLength)return!1;for(var t=0;t<this.byteLength;++t)if(this.getUint8(t)!==e.getUint8(t))return!1;return!0},t.prototype.slice=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.dataView.byteLength-e);for(var r=new ArrayBuffer(t),n=new DataView(r),i=0;i<t;++i)n.setUint8(i,this.dataView.getUint8(e+i));return new c(r)},t.prototype.getFloat64=function(e){return this.dataView.getFloat64(e,!0)},t.prototype.getUint16=function(e){return this.dataView.getUint16(e,!0)},t.prototype.getInt32=function(e){return this.dataView.getInt32(e,!0)},t.prototype.getUint32=function(e){return this.dataView.getUint32(e,!0)},t.prototype.getUint8=function(e){return this.dataView.getUint8(e)},t.prototype.getUint64=function(e){return a.getUint64(this,e)},t}(o.BaseAkkoBuffer);t.ReadonlyBrowserAkkoBuffer=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"readonly",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.freeze=function(){return Object.setPrototypeOf(this,s.prototype),this},t.prototype.fill=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=Number.MAX_SAFE_INTEGER);var i=e.primitiveBuffer,o=this.dataView.byteLength-t,a=Math.min(n,o);if(i instanceof ArrayBuffer)for(var s=new DataView(i),c=0;c<a;++c)this.dataView.setUint8(c+t,s.getUint8(c+r));else for(c=0;c<a;++c)this.dataView.setUint8(c+t,i.readUInt8(c+r));return a},t.prototype.setFloat64=function(e,t){this.dataView.setFloat64(e,t,!0)},t.prototype.setUint16=function(e,t){this.dataView.setUint16(e,t,!0)},t.prototype.setInt32=function(e,t){this.dataView.setInt32(e,t,!0)},t.prototype.setUint32=function(e,t){this.dataView.setUint32(e,t,!0)},t.prototype.setUint8=function(e,t){this.dataView.setUint8(e,t)},t.prototype.setUint64=function(e,t){a.setUint64(this,e,t)},t}(s);t.BrowserAkkoBuffer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0);t.replaceTypeIds=function(e){return(new o).replaceIds(e)};var o=function(){function e(){for(var e in this.nextId=0,this.singletonMap=n.TypeCreator.createSingletonMap(),this.singletonMap)this.singletonMap[e].id=this.createId()}return e.prototype.replaceIds=function(e){var t={};for(var r in e)t[r]=this.replaceIdsWithType(e[r]);return t},e.prototype.replaceIdsWithType=function(e){switch(e.typeEnum){case i.TypeEnum.Any:case i.TypeEnum.Never:case i.TypeEnum.Undefined:case i.TypeEnum.Null:case i.TypeEnum.String:case i.TypeEnum.Number:case i.TypeEnum.Boolean:return this.singletonMap[e.typeEnum];case i.TypeEnum.Object:return this.replaceIdsWithObjectType(e);case i.TypeEnum.And:case i.TypeEnum.Or:return this.replaceIdsWithCompoundType(e);case i.TypeEnum.Generator:return this.replaceIdsWithGeneratorType(e);default:return e.id=this.createId(),e}},e.prototype.replaceIdsWithObjectType=function(e){for(var t in e.id=this.createId(),e.key=this.replaceIdsWithType(e.key),e.index=this.replaceIdsWithType(e.index),e.properties)e.properties[t]=this.replaceIdsWithType(e.properties[t]);return e},e.prototype.replaceIdsWithCompoundType=function(e){e.id=this.createId();for(var t=0;t<e.children.length;++t)e.children[t]=this.replaceIdsWithType(e.children[t]);return e},e.prototype.replaceIdsWithGeneratorType=function(e){e.id=this.createId(),e.template=this.replaceIdsWithType(e.template);for(var t=0;t<e.params.length;++t)e.params[t]=this.replaceIdsWithType(e.params[t]);return e},e.prototype.createId=function(){return this.nextId+=1,""+this.nextId},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);t.Initializer=n.Initializer;var i=r(21);t.isClassProperty=i.isClassProperty,t.isClassMethod=i.isClassMethod,t.ClassMemberType=i.ClassMemberType,t.ClassReflectionPropertyMode=i.ClassReflectionPropertyMode},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(17),o=r(7);t.Initializer=function(e){var t=this;this.contextsStack=[],this.context=function(e){switch(e){case"index":var r=i.createContext({akkoVersion:t.akkoVersion,akkoObjectBaseClass:t.akkoObjectBaseClass,libraryFactory:t.libraryFactory,coreFunctions:t.coreFunctions,onCreatedLibrary:function(){return t.contextsStack.pop()}});return t.contextsStack.push(r),r;case"module":var n=t.contextsStack[t.contextsStack.length-1];if(!n)throw new o.RuntimeError("can't import index out of library");return n;default:throw new o.RuntimeError("unexpect mode "+JSON.stringify(e))}},this.isAkkoObject=function(e){return e instanceof t.akkoObjectBaseClass},this.getLibrary=function(e){if("function"==typeof e){var r=e.__library;if("object"==A(r))return r}else if(t.isAkkoObject(e))return t.getLibrary(e.constructor)},this.akkoVersion=e.akkoVersion,this.akkoObjectBaseClass=e.akkoObjectBaseClass,this.libraryFactory=e.libraryFactory,this.coreFunctions=Object.freeze(n({},e.coreFunctions))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18);t.createContext=function(e){var t=new n.PrecompiledContext(e.akkoVersion,e.akkoObjectBaseClass,e.libraryFactory,e.onCreatedLibrary);return Object.freeze({baseClass:t.baseClass.bind(t),wrapSuperClass:t.wrapSuperClass.bind(t),declareClass:t.declareClass.bind(t),createLibrary:t.createLibrary.bind(t),creator:e.coreFunctions.creator,updater:e.coreFunctions.updater,wrapper:e.coreFunctions.wrapper,unwrapper:e.coreFunctions.unwrapper,jsxUnwrapper:e.coreFunctions.jsxUnwrapper,getter:e.coreFunctions.getter,setter:e.coreFunctions.setter,caller:e.coreFunctions.caller,remover:e.coreFunctions.remover,prefix:e.coreFunctions.prefix,postfix:e.coreFunctions.postfix})}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=function(){function e(e,t,r,n){this.akkoVersion=e,this.akkoObjectBaseClass=t,this.libraryFactory=r,this.onCreatedLibrary=n,this.classHandlers={}}return e.prototype.baseClass=function(){return this.akkoObjectBaseClass},e.prototype.wrapSuperClass=function(e){if(e===Object)return this.akkoObjectBaseClass;if("function"!=typeof e)return e;for(var t=e;t!==this.akkoObjectBaseClass;){var r=Object.getPrototypeOf(t.prototype);if(!r)throw new i.RuntimeError("class "+e.name+" can't be extended, it's out of library");t=r.constructor}return e},e.prototype.declareClass=function(e){var t=e.classId,r=e.clazz,n=e.superClass,o=e.memberDecorators;if(this.classHandlers[t])throw new i.RuntimeError("class id "+t+" was declared");this.classHandlers[t]={classId:t,clazz:r,superClass:n,memberDecorators:o||{}}},e.prototype.createLibrary=function(e,t){var r={};for(var i in t.classes){for(var o=t.classes[i],a=this.classHandlers[i],s=[],c=0,u=o.members;c<u.length;c++){var l=u[c],p=a.memberDecorators[l.name];s.push(n(n({},l),{decorators:p||Object.freeze([])}))}r[i]={classId:a.classId,clazz:a.clazz,superClass:a.superClass,objectFormatId:o.objectFormatId,members:s}}var h=this.libraryFactory({appIdentifier:t.identifier,appVersion:t.version,akkoVersion:t.akko,formatBase64:t.formatBase64,formatHash:t.formatHash,rootConstructor:e,classDeclarations:r});return Object.defineProperty(e,"__library",{enumerable:!1,configurable:!1,writable:!1,value:h}),this.onCreatedLibrary(h),e},e}();t.PrecompiledContext=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(8);t.linkTypes=function(e){return new o(e).link()};var o=function(){function e(e){var t=this;this.typeBundle=e,this.definitionFinder=new i.DefinitionFinder({getFileDefinitions:function(e){return t.typeBundle[e]},isDefined:function(e,r){return!(!t.typeBundle[e]||!t.typeBundle[e].types[r])}})}return e.prototype.link=function(){return this.referenceIdBundle=this.createReferenceIdBundle(),{referenceIdBundle:this.referenceIdBundle,flatTypeBundle:this.flatTypeBundle()}},e.prototype.createReferenceIdBundle=function(){for(var e=0,t={},r=0,n=Object.keys(this.typeBundle).sort();r<n.length;r++){for(var i=n[r],o=this.typeBundle[i].types,a={},s=0,c=Object.keys(o).sort();s<c.length;s++)a[c[s]]=e,e+=1;t[i]=Object.freeze(a)}return Object.freeze(t)},e.prototype.flatTypeBundle=function(){var e={};for(var t in this.referenceIdBundle){var r=this.typeBundle[t].types,n=this.referenceIdBundle[t];for(var i in n){var o=n[i],a=r[i];e[o]=this.replaceType(t,a)}}return Object.freeze(e)},e.prototype.replaceType=function(e,t){switch(t.typeEnum){case n.TypeEnum.Object:this.refreshObjectType(e,t);break;case n.TypeEnum.And:case n.TypeEnum.Or:this.refreshCompoundType(e,t);break;case n.TypeEnum.Generator:this.refreshGenerator(e,t);break;case n.TypeEnum.Reference:case n.TypeEnum.GlobalReference:return this.replaceReference(e,t)}return t},e.prototype.replaceReference=function(e,t){var r=t.name,i=this.findReferencePath(t),o=this.definitionFinder.findPath(e,i,r),a=this.referenceIdBundle[o.path][o.name];return{typeEnum:n.TypeEnum.Reference,name:""+a}},e.prototype.findReferencePath=function(e){return e.typeEnum===n.TypeEnum.GlobalReference?e.path:void 0},e.prototype.refreshObjectType=function(e,t){for(var r in t.key=this.replaceType(e,t.key),t.index=this.replaceType(e,t.index),t.properties)t.properties[r]=this.replaceType(e,t.properties[r])},e.prototype.refreshCompoundType=function(e,t){for(var r=t.children,n=0;n<r.length;++n)r[n]=this.replaceType(e,r[n])},e.prototype.refreshGenerator=function(e,t){t.template=this.replaceType(e,t.template);for(var r=0;r<t.params.length;++r)t.params[r]=this.replaceType(e,t.params[r])},e}()},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.linkClasses=function(e){for(var t=0,r={},i=0,o=Object.keys(e).sort();i<o.length;i++){for(var a=o[i],s={},c=0,u=n(e[a]).sort();c<u.length;c++)s[u[c]]=t,t+=1;r[a]=Object.freeze(s)}return Object.freeze(r)}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.isClassProperty=function(e){return e.type===n.Property},t.isClassMethod=function(e){return e.type===n.Method},function(e){e.Method="method",e.Property="property"}(n=t.ClassMemberType||(t.ClassMemberType={})),function(e){e.Value="value",e.Readonly="readonly",e.Writeonly="writeonly",e.Accessible="accessible"}(t.ClassReflectionPropertyMode||(t.ClassReflectionPropertyMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.invoker=e,this.timer=null,this.invokeWhenTimeout=function(){t.timer=null,t.invoker()}}return Object.defineProperty(e.prototype,"isRunning",{get:function(){return null!==this.timer},enumerable:!0,configurable:!0}),e.prototype.refreshAndInvokeAfterInterval=function(e){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.invokeWhenTimeout,e)},e.prototype.cancel=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e}();t.Delayer=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.isFreezed=!1,this.shouldInvokeAfterFreeze=!1,this.latestInvokeTimestamp=0,this.timer=-1,this._limitDuration=e,this.invoker=t,this.invokeWhenTimeout=this.invokeWhenTimeout.bind(this)}return Object.defineProperty(e.prototype,"limitDuration",{get:function(){return this._limitDuration},set:function(e){if(this._limitDuration!==e){if(this._limitDuration=e,-1!==this.timer){clearTimeout(this.timer);var t=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,t)}this.invoke()}},enumerable:!0,configurable:!0}),e.prototype.invoke=function(){if(this.isFreezed)this.shouldInvokeAfterFreeze=!0;else if(-1===this.timer){var e=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,e)}},e.prototype.nextInvokeTimeDuration=function(){var e=Date.now(),t=this.latestInvokeTimestamp+this.limitDuration-e;return Math.max(0,t)},e.prototype.invokeWhenTimeout=function(){this.timer=-1,this.latestInvokeTimestamp=Date.now(),this.invoker()},e.prototype.cancel=function(){this.isFreezed?this.shouldInvokeAfterFreeze=!1:-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1)},e.prototype.freeze=function(){this.isFreezed||(-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1,this.shouldInvokeAfterFreeze=!0),this.isFreezed=!0)},e.prototype.unfreeze=function(){this.isFreezed&&(this.isFreezed=!1,this.shouldInvokeAfterFreeze&&(this.shouldInvokeAfterFreeze=!1,this.invoke()))},e}();t.InvokeFrequencyLimiter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.freeze(["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"]),i=function(){function e(e,t,r,n){this.x=e,this.y=t,this.z=r,this.suffix=n,Object.freeze(this)}return e.prototype.withoutSuffix=function(){return new e(this.x,this.y,this.z)},e.prototype.toString=function(){var e=this.x+"."+this.y+"."+this.z;return this.suffix&&(e+="-"+this.suffix.greekLetter+"."+this.suffix.number),e},e.parse=function(t){if(!/^\d+\.\d+\.\d+(-\w+\.\d+)?$/i.test(t))throw new Error("invalid version format "+JSON.stringify(t));var r,n=t.match(/-\w+\.\d+$/),i=t;n&&(r=e.parseSuffix(t,n[0].replace(/^-/i,"")),i=t.substring(0,t.length-n[0].length));var o=e.parseVersionArray(t,i);return new e(o[0],o[1],o[2],r)},e.parseSuffix=function(e,t){var r=t.split("."),i=r[0];if(-1===n.indexOf(i))throw new Error("invalid Greek letter "+JSON.stringify(i)+" of "+JSON.stringify(e));var o=parseInt(r[1],10);if(!Number.isSafeInteger(o))throw new Error("invalid version number "+JSON.stringify(o)+" of "+JSON.stringify(e));return Object.freeze({greekLetter:i,number:o})},e.parseVersionArray=function(e,t){for(var r=[],n=0,i=t.split(".");n<i.length;n++){var o=i[n],a=parseInt(o,10);if(!Number.isSafeInteger(a))throw new Error("invalid version number "+JSON.stringify(o)+" of "+JSON.stringify(e));r.push(a)}return r},e.compare=function(e,t){var r=e.x-t.x;if(0!==r)return r;if(0!=(r=e.y-t.y))return r;if(0!=(r=e.z-t.z))return r;if(!e.suffix&&t.suffix)return 1;if(e.suffix&&!t.suffix)return-1;if(!e.suffix&&!t.suffix)return 0;var i=e.suffix.greekLetter,o=t.suffix.greekLetter;return 0!=(r=n.indexOf(i)-n.indexOf(o))?r:e.suffix.number-t.suffix.number},e}();t.Version=i}]))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Triangle="triangle",e.Rhombus="rhombus",e.Pentagram="pentagram",e.SpeechBalloon="speechBalloon"}(t.ShapeType||(t.ShapeType={})),function(e){e.selector="selector",e.clicker="clicker",e.laserPointer="laserPointer",e.pencil="pencil",e.rectangle="rectangle",e.ellipse="ellipse",e.shape="shape",e.eraser="eraser",e.text="text",e.straight="straight",e.arrow="arrow",e.hand="hand"}(t.ApplianceNames||(t.ApplianceNames={})),function(e){e.None="none",e.Dir="dir",e.Page="page"}(t.ScenePathType||(t.ScenePathType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SVG="svg",e.Canvas="canvas"}(t.RenderEngine||(t.RenderEngine={})),function(e){e.Freedom="freedom",e.Follower="follower",e.Broadcaster="broadcaster"}(t.ViewMode||(t.ViewMode={}))},function(e,t){e.exports=r("NbXW")},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(39)),n(r(7)),n(r(20)),n(r(43)),n(r(110)),n(r(49)),n(r(123));var i=r(23);t.ViewVisionMode=i.ViewVisionMode;var o=r(13);t.RoomConsumer=o.RoomConsumer,t.PlayerConsumer=o.PlayerConsumer,t.DisplayerConsumer=o.DisplayerConsumer},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t){e.exports=r(6)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(18)),n(r(26)),n(r(27))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pow32=Math.pow(2,32),t.Pow16=Math.pow(2,16),t.Uint32Mask=t.Pow32-1,t.Uint16Mask=t.Pow16-1,t.Uint8Mask=255},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r.name="FormatError",r}return i(t,e),t}(Error);t.FormatError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Never=0]="Never",e[e.Undefined=1]="Undefined",e[e.Null=2]="Null",e[e.String=3]="String",e[e.Integer32=4]="Integer32",e[e.Integer53=5]="Integer53",e[e.Float=6]="Float",e[e.Function=7]="Function",e[e.Object=8]="Object",e[e.Array=9]="Array",e[e.True=10]="True",e[e.False=11]="False",e[e.Buffer=12]="Buffer",e[e.HangUpObject=13]="HangUpObject"}(t.AkkoPrimitiveType||(t.AkkoPrimitiveType={})),function(e){e[e.Array=0]="Array",e[e.DeducedObject=1]="DeducedObject",e[e.AssertedObject=2]="AssertedObject",e[e.HangUpObject=3]="HangUpObject"}(t.ObjectType||(t.ObjectType={}))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(13)),n(r(22))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i="0".charCodeAt(0),o="9".charCodeAt(0)+1,a="a".charCodeAt(0),s="f".charCodeAt(0)+1,c=function(){function e(){for(var e=[],t=[],r=0;r<16;++r){var n=r.toString(16).charCodeAt(0);e[r]=n,t[n]=r}this.integerToCode=Object.freeze(e),this.codeToInteger=Object.freeze(t)}return e.prototype.cleanUnmeaningZero=function(e,t){for(;e.length>t&&0===this.codeToInteger[e[e.length-1]];)e.pop()},e.prototype.pushInt53=function(e,t){var r=0|t,i=(t-r)/n.Pow32;this.pushUint32(e,r),this.pushUint32(e,i)},e.prototype.readInt53=function(e,t){var r=this.readInt32(e,t);return this.readInt32(e,t+8)*n.Pow32+r},e.prototype.pushUint32=function(e,t){var r=e.length;e[r]=this.integerToCode[15&t],e[r+1]=this.integerToCode[t>>4&15],e[r+2]=this.integerToCode[t>>8&15],e[r+3]=this.integerToCode[t>>12&15],e[r+4]=this.integerToCode[t>>16&15],e[r+5]=this.integerToCode[t>>20&15],e[r+6]=this.integerToCode[t>>24&15],e[r+7]=this.integerToCode[t>>28&15]},e.prototype.readUint32=function(e,t){var r=this.readInt32(e,t);return r<0&&(r+=n.Pow32),r},e.prototype.readInt32=function(e,t){for(var r=0,n=0;n<8;++n){var i=this.codeToInteger[e.charCodeAt(t+n)];if(void 0===i)return NaN;r|=i<<4*n}return r},e.prototype.parseCode=function(e){return this.codeToInteger[e]},e.prototype.toCode=function(e){return this.integerToCode[e]},e.prototype.increment=function(e,t){for(var r=t;;){if(e.length<=r){e[r]=i+1;break}var n=!0;switch(e[r]+=1,e[r]){case o:e[r]=a;break;case s:e[r]=i,r+=1,n=!1}if(n)break}},e.prototype.parseString=function(e){for(var t=new String(e),r=[],n=0;n<t.length;++n)r.push(t.charCodeAt(n));return r},e.prototype.stringify=function(e){return String.fromCharCode.apply(String,e)},e}();t.BigInteger=c,t.bigInteger=new c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r.name="SerializerError",r}return i(t,e),t}(Error);t.SerializerError=o;var a=function(e){function t(t){var r=e.call(this,t)||this;return r.name="DeserializerError",r}return i(t,e),t}(Error);t.DeserializerError=a},function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Array=0]="Array",e[e.Object=1]="Object",e[e.HangUpObject=2]="HangUpObject"}(n=t.ObjectEnum||(t.ObjectEnum={}));var o=function(){function e(e){void 0===e&&(e=function(){}),this.decorateObjectEnums=Object.freeze([n.Object]),this.decorateObject=e}return e.prototype.createObject=function(e,t){var r=t===n.Array?[]:{};return Object.defineProperty(r,"__identifier",{enumerable:!1,configurable:!0,value:e}),r},e.prototype.findIdentifier=function(e){return e.__identifier},e.prototype.findHangUpMetadata=function(e){return e.__hangUpMetadata},e.prototype.checkObjectEnum=function(e){return e.constructor===Array?n.Array:"__hangUpMetadata"in e?n.HangUpObject:n.Object},e.prototype.length=function(e){return e.length},e.prototype.keys=function(e){return Object.keys(e)},e.prototype.hasKey=function(e,t){return t in e},e.prototype.getValue=function(e,t){return e[t]},e.prototype.setValue=function(e,t,r){e[t]=r},e.prototype.completeHangUpObject=function(e,t){Object.defineProperty(e,"__hangUpMetadata",{enumerable:!1,configurable:!0,value:Object.freeze(i({},t))})},e}();t.DefaultObjectAdapter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.length=function(e){for(var t=new String(e),r=0,n=0,i=0;i<t.length;++i)(n=t.charCodeAt(i))<128?r+=1:n<2048?r+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(i+1))?(++i,r+=4):r+=3;return r},t.read=function(e,t,r){var n=t;if(r<1)return"";for(var i,o=n+r,a=[],s=null,c=0;n<o;)(i=e.getUint8(n++))<128?a[c++]=i:i>191&&i<224?a[c++]=(31&i)<<6|63&e.getUint8(n++):i>239&&i<365?(i=((7&i)<<18|(63&e.getUint8(n++))<<12|(63&e.getUint8(n++))<<6|63&e.getUint8(n++))-65536,a[c++]=55296+(i>>10),a[c++]=56320+(1023&i)):a[c++]=(15&i)<<12|(63&e.getUint8(n++))<<6|63&e.getUint8(n++),c>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),c=0);return s?(c&&s.push(String.fromCharCode.apply(String,a.slice(0,c))),s.join("")):String.fromCharCode.apply(String,a.slice(0,c))},t.write=function(e,t){for(var r,n,i=new String(e),o=0;o<i.length;++o)(r=i.charCodeAt(o))<128?t.pushUint8(r):r<2048?(t.pushUint8(r>>6|192),t.pushUint8(63&r|128)):55296==(64512&r)&&56320==(64512&(n=i.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&n),++o,t.pushUint8(r>>18|240),t.pushUint8(r>>12&63|128),t.pushUint8(r>>6&63|128),t.pushUint8(63&r|128)):(t.pushUint8(r>>12|224),t.pushUint8(r>>6&63|128),t.pushUint8(63&r|128))}},function(e,t){e.exports=r(29)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.AkkoPrimitiveType=n.AkkoPrimitiveType,t.ObjectType=n.ObjectType;var i=r(20);t.Serialization=i.Serialization;var o=r(14);t.convertToAkkoSerVersion=o.convertToAkkoSerVersion,t.AkkoSerVersion=o.AkkoSerVersion;var a=r(8);t.ObjectEnum=a.ObjectEnum,t.DefaultObjectAdapter=a.DefaultObjectAdapter;var s=r(7);t.SerializerError=s.SerializerError,t.DeserializerError=s.DeserializerError},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSelfloopObjectFormats=function(){var e={id:-1};return e.key=e,e.index=e,e.properties=Object.freeze({}),Object.freeze(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.NullIdentifier="",t.NoEffectScopeId=-1,t.ScopeIdHexCount=16,t.scopeIdWith=function(e){return n.bigInteger.readInt53(e,0)},t.objectIdWith=function(e){return n.bigInteger.readInt53(e,t.ScopeIdHexCount)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0);!function(e){e[e.V0=0]="V0",e[e.V1=1]="V1"}(n=t.AkkoSerVersion||(t.AkkoSerVersion={}));var o=i.Version.parse("1.4.2");t.convertToAkkoSerVersion=function(e){var t=e;return"string"==typeof t&&(t=i.Version.parse(t)),i.Version.compare(t,o)<0?n.V0:n.V1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Indeterminate=0]="Indeterminate",e[e.Circular=1]="Circular",e[e.Noncircular=2]="Noncircular"}(t.HandleState||(t.HandleState={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(3);!function(e){e[e.Border=0]="Border",e[e.Compound=1]="Compound",e[e.Object=2]="Object",e[e.Handle=3]="Handle"}(n=t.ExpandedNodeClass||(t.ExpandedNodeClass={}));var a=function(){function e(e,t,r){this.templateEnvironment=e,this.templateType=t,this.params=r,this.expandedParamNodes=[],this.convertTypeToGeneratorParam=this.convertTypeToGeneratorParam.bind(this);for(var n=0;n<r.length;++n)this.expandedParamNodes[n]=void 0}return e.prototype.getExpandedExpression=function(){return this.expandNode(this.templateType)},e.prototype.expandNode=function(e){switch(e.typeEnum){case i.TypeEnum.Any:case i.TypeEnum.Never:case i.TypeEnum.Undefined:case i.TypeEnum.Null:case i.TypeEnum.String:case i.TypeEnum.Number:case i.TypeEnum.Boolean:case i.TypeEnum.Function:return{type:e,clazz:n.Border};case i.TypeEnum.Object:var t=e,r={};for(var a in t.properties){var s=t.properties[a];r[a]=this.expandNode(s)}return{type:t,clazz:n.Object,key:this.expandNode(t.key),index:this.expandNode(t.index),properties:r};case i.TypeEnum.And:case i.TypeEnum.Or:for(var c=e,u=[],l=0,p=c.children;l<p.length;l++){var h=p[l];u.push(this.expandNode(h))}return{type:c,clazz:n.Compound,children:u};case i.TypeEnum.Generator:return this.expandGeneratorType(e);case i.TypeEnum.Generic:return this.expandGenericType(e);case i.TypeEnum.Reference:case i.TypeEnum.GlobalReference:return this.expandReferenceType(e)}throw new o.FormatError("unrecognized enum type "+e.typeEnum)},e.prototype.expandGeneratorType=function(e){var t=e.params.map(this.convertTypeToGeneratorParam),r=this.templateEnvironment.getTemplate(e.template);return{clazz:n.Handle,handle:r.getHandle(t)}},e.prototype.convertTypeToGeneratorParam=function(e){var t=this.expandNode(e);return t.clazz===n.Handle?t.handle:t.type},e.prototype.expandGenericType=function(e){var t=e.index,r=this.expandedParamNodes[t];if(!r){var n=this.params[t];if(!n)throw new o.FormatError("generic index "+t+" is out of range: 0 ~ "+(this.params.length-1));r=this.covertParamTypeToExpandedNode(n),this.expandedParamNodes[t]=r}return r},e.prototype.expandReferenceType=function(e){var t,r=this.templateEnvironment.replaceReferenceType(e);return t=r.typeEnum===i.TypeEnum.Generator?r:{typeEnum:i.TypeEnum.Generator,template:r,params:[]},this.expandGeneratorType(t)},e.prototype.covertParamTypeToExpandedNode=function(e){return"id"in e?this.expandNode(e):{clazz:n.Handle,handle:e}},e}();t.ExpandedExpressionGenerator=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.Reader=n.Reader,t.Writer=n.Writer,t.MD5ZeroBinary=n.MD5ZeroBinary,t.MD5BinaryLength=n.MD5BinaryLength;var i=r(28);t.FormatFactory=i.FormatFactory,t.FormatError=i.FormatError;var o=r(11);t.convertToAkkoSerVersion=o.convertToAkkoSerVersion,t.ObjectEnum=o.ObjectEnum,t.AkkoSerVersion=o.AkkoSerVersion,t.Serialization=o.Serialization,t.AkkoPrimitiveType=o.AkkoPrimitiveType,t.ObjectType=o.ObjectType,t.DefaultObjectAdapter=o.DefaultObjectAdapter,t.SerializerError=o.SerializerError,t.DeserializerError=o.DeserializerError;var a=r(5);t.scopeIdWith=a.scopeIdWith,t.objectIdWith=a.objectIdWith,t.createIdentifierGenerator=a.createIdentifierGenerator,t.createV0IdentifierGenerator=a.createV0IdentifierGenerator,t.NoEffectScopeId=a.NoEffectScopeId,t.NullIdentifier=a.NullIdentifier,t.AdminObserverId=Math.pow(2,32)-1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=r(2),o=r(19),a=r(11),s=r(6),c="0".charCodeAt(0),u=function(){function e(){this.buffer=new o.ExtendableBuffer}return e.prototype.generateHash=function(e,t){return this.buffer.generateHash(e,t)},Object.defineProperty(e.prototype,"didWriteBytes",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),e.prototype.writeBuffer=function(e){this.buffer.pushUint32(e.byteLength),e.byteLength>0&&this.buffer.pushBuffer(e,0,e.byteLength)},e.prototype.writeUint8=function(e){this.buffer.pushUint8(e)},e.prototype.putUint8Holder=function(){return this.buffer.pushUint8Holder()},e.prototype.writeUint16=function(e){this.buffer.pushUint16(e)},e.prototype.writeInt32=function(e){this.buffer.pushInt32(e)},e.prototype.writeUint32=function(e){this.buffer.pushUint32(e)},e.prototype.putUint32Holder=function(){return this.buffer.pushUint32Holder()},e.prototype.writeInt53=function(e){var t=0|e,r=(e-t)/i.Pow32;this.buffer.pushInt32(t),this.buffer.pushInt32(r)},e.prototype.writeFloat64=function(e){this.buffer.pushFloat64(e)},e.prototype.writeString=function(e){var t=n.length(e);this.writeInt32(t),n.write(e,this.buffer)},e.prototype.writeBigInt=function(e){var t=new String(e);if(t.length>255)throw new a.SerializerError("length of identifier "+t.length+" is greater than 255");this.buffer.pushUint8(t.length);for(var r=Math.ceil(t.length/2),n=0;n<r;++n){var i=t.charCodeAt(2*n),o=t.charCodeAt(2*n+1);Number.isNaN(o)&&(o=c);var u=s.bigInteger.parseCode(i),l=s.bigInteger.parseCode(o);if(void 0===u||void 0===l)throw new a.SerializerError("invalid big integer "+JSON.stringify(e));this.buffer.pushUint8(u|l<<4)}},e.prototype.writeReadSlice=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t],i=n.offset,o=n.byteLength,a=n.buffer;this.buffer.pushBuffer(a,i,o)}},e.prototype.toBuffer=function(){return this.buffer.toBuffer()},e}();t.Writer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(0),o=function(){function e(){this._length=0,this.bufferChunks=[],this.appendNewChunk()}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.toBuffer=function(){for(var e=i.createBuffer(this.length),t=0,r=0,n=this.bufferChunks;r<n.length;r++){var o=n[r];e.fill(o.buffer,t,0,o.length),t+=o.length}return e},e.prototype.generateHash=function(e,t){for(var r=0,i=e;;){if(r>=this.bufferChunks.length)return"";var o=this.bufferChunks[r].length;if(i<o)break;i-=o,r+=1}for(var a=t,s=new n,c=[0];r<this.bufferChunks.length;++r){for(var u=this.bufferChunks[r],l=u.buffer,p=u.length,h=i;h<p;++h)if(c[0]=l.getUint8(h),s.appendBinary(String.fromCharCode.apply(String,c)),(a-=1)<=0)return s.end(!0);i=0}return s.end(!0)},e.prototype.pushBuffer=function(e,t,r){var n=Math.min(r,this.currentChunk.buffer.byteLength-this.currentChunk.length);n>0&&(this.currentChunk.buffer.fill(e,this.currentChunk.length,t,n),this.currentChunk.length+=n,this._length+=n);var i=r-n;i>0&&(this.currentChunk={buffer:e.slice(t+n,i),length:i},this.bufferChunks.push(this.currentChunk),this._length+=i)},e.prototype.pushUint8=function(e){this.currentChunk.length+1>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setUint8(this.currentChunk.length,e),this.currentChunk.length+=1,this._length+=1},e.prototype.pushUint8Holder=function(){this.currentChunk.length+1>this.currentChunk.buffer.byteLength&&this.appendNewChunk();var e=this.currentChunk.length,t=this.currentChunk.buffer;return this.currentChunk.length+=1,this._length+=1,function(r){return t.setUint8(e,r)}},e.prototype.pushUint16=function(e){this.currentChunk.length+2>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setUint16(this.currentChunk.length,e),this.currentChunk.length+=2,this._length+=2},e.prototype.pushInt32=function(e){this.currentChunk.length+4>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setInt32(this.currentChunk.length,e),this.currentChunk.length+=4,this._length+=4},e.prototype.pushUint32=function(e){this.currentChunk.length+4>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setUint32(this.currentChunk.length,e),this.currentChunk.length+=4,this._length+=4},e.prototype.pushUint32Holder=function(){this.currentChunk.length+4>this.currentChunk.buffer.byteLength&&this.appendNewChunk();var e=this.currentChunk.length,t=this.currentChunk.buffer;return this.currentChunk.length+=4,this._length+=4,function(r){return t.setUint32(e,r)}},e.prototype.pushFloat64=function(e){this.currentChunk.length+8>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setFloat64(this.currentChunk.length,e),this.currentChunk.length+=8,this._length+=8},e.prototype.appendNewChunk=function(){var e=i.createBuffer(256);this.currentChunk={buffer:e,length:0},this.bufferChunks.push(this.currentChunk)},e}();t.ExtendableBuffer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),i=r(23),o=r(24),a=r(14),s=function(){function e(e){this.format=e.format,this.objectAdapter=e.objectAdapter,this.assertObjectFormat=e.assertObjectFormat||function(){}}return e.prototype.serialize=function(e){var t=e.writer,r=e.values,i=e.objectFormats,o=e.includesHash;new n.Serializer(t,i,this.objectAdapter,this.assertObjectFormat).serialize(r,o)},e.prototype.deserialize=function(e){var t=e.reader,r=e.objectFormats,n=e.ignoreHashChecking;switch(e.version){case a.AkkoSerVersion.V0:return new o.LegacyDeserializer(t,this.format,r,this.objectAdapter).deserialize(n);case a.AkkoSerVersion.V1:return new i.Deserializer(t,this.format,this.objectAdapter,r.length).deserialize(n);default:return[]}},e}();t.Serialization=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=r(12),a=r(5),s=r(7),c=r(4),u=r(8),l=Math.pow(2,31)-1,p=-Math.pow(2,31),h=function(){function e(e,t,r,n){this.writer=e,this.objectFormats=t,this.objectAdapter=r,this.assertObjectFormat=n,this.anyObjectFormat=o.createSelfloopObjectFormats(),this.serializeTasksQueue=[],this.serializeBufferQueue=[],this.didObjectInQueueSet={},this.bufferIndexMap={}}return e.prototype.serialize=function(e,t){var r=this.writer.putUint32Holder(),n=this.writer.didWriteBytes;1!==this.objectFormats.length&&this.writer.writeUint32(e.length);for(var o=0;o<e.length;++o){var s=this.objectFormats[o]||this.anyObjectFormat,c=e[o];this.serializeValue(s,c)}for(;this.serializeTasksQueue.length>0;)this.handleSerializeTask(this.serializeTasksQueue.shift());this.writer.writeBigInt(a.NullIdentifier),this.writer.writeUint32(this.serializeBufferQueue.length);for(var u=0,l=this.serializeBufferQueue;u<l.length;u++){var p=l[u];this.writer.writeUint8(p.readonly?255:0),this.writer.writeBuffer(p)}var h=this.writer.didWriteBytes-n,d=t?this.writer.generateHash(n,h):i.MD5ZeroBinary;this.serializeHash(d),r(h+i.MD5BinaryLength)},e.prototype.serializeValue=function(e,t){"object"!=A(t)?this.serializeNotObjectValue(t):null===t?this.writer.writeUint8(c.AkkoPrimitiveType.Null):n.isBuffer(t)?this.serializeBufferValue(t):this.serializeObjectValue(e,t)},e.prototype.handleSerializeTask=function(e){var t=e.identifier,r=e.object,i=e.objectEnum,o=e.deducedFormat;switch(this.writer.writeBigInt(t),i){case u.ObjectEnum.Array:this.writer.writeUint8(c.ObjectType.Array),this.handleArraySerializeTask(r,o);break;case u.ObjectEnum.Object:var a=this.assertObjectFormat(r),s=a?c.ObjectType.AssertedObject:c.ObjectType.DeducedObject,l=a||o,p=!a;this.writer.writeUint8(s),this.handleObjectSerializeTask(r,l,p);break;case u.ObjectEnum.HangUpObject:var h=this.objectAdapter.findHangUpMetadata(r),d=n.Version.parse(h.version),f=d.x,y=d.y,A=d.z;this.writer.writeUint8(c.ObjectType.HangUpObject),this.writer.writeUint32(h.objectFormatId),this.writer.writeUint16(f),this.writer.writeUint16(y),this.writer.writeUint16(A),this.writer.writeUint8(c.AkkoPrimitiveType.Never),this.handleHangUpObjectSerializeTask(r)}},e.prototype.serializeNotObjectValue=function(e){switch(A(e)){case"undefined":this.writer.writeUint8(c.AkkoPrimitiveType.Undefined);break;case"string":this.writer.writeUint8(c.AkkoPrimitiveType.String),this.writer.writeString(e);break;case"number":Number.isSafeInteger(e)?p<=e&&e<=l?(this.writer.writeUint8(c.AkkoPrimitiveType.Integer32),this.writer.writeInt32(e)):(this.writer.writeUint8(c.AkkoPrimitiveType.Integer53),this.writer.writeInt53(e)):(this.writer.writeUint8(c.AkkoPrimitiveType.Float),this.writer.writeFloat64(e));break;case"boolean":e?this.writer.writeUint8(c.AkkoPrimitiveType.True):this.writer.writeUint8(c.AkkoPrimitiveType.False);break;default:throw new s.SerializerError("not support "+A(e)+" now")}},e.prototype.serializeBufferValue=function(e){var t=this.bufferIndexMap[e.id];void 0===t&&(t=this.serializeBufferQueue.length,this.bufferIndexMap[e.id]=t,this.serializeBufferQueue[t]=e),this.writer.writeUint8(c.AkkoPrimitiveType.Buffer),this.writer.writeUint32(t)},e.prototype.serializeObjectValue=function(e,t){var r,n=this.objectAdapter.findIdentifier(t),i=this.objectAdapter.checkObjectEnum(t);switch(i){case u.ObjectEnum.Array:r=c.AkkoPrimitiveType.Array;break;case u.ObjectEnum.Object:r=c.AkkoPrimitiveType.Object;break;case u.ObjectEnum.HangUpObject:r=c.AkkoPrimitiveType.HangUpObject;break;default:throw new Error("unrecognized object enum "+i)}this.writer.writeUint8(r),this.writer.writeUint8(0),this.writer.writeBigInt(n),this.pushToSerializeTaskQueueIfFirstCall({identifier:n,object:t,deducedFormat:e,objectEnum:i})},e.prototype.pushToSerializeTaskQueueIfFirstCall=function(e){this.didObjectInQueueSet[e.identifier]||(this.didObjectInQueueSet[e.identifier]=!0,this.serializeTasksQueue.push(e))},e.prototype.handleArraySerializeTask=function(e,t){var r=this.objectAdapter.length(e),n=t.index;this.writer.writeUint32(r);for(var i=0;i<r;++i)this.serializeValue(n,this.objectAdapter.getValue(e,i))},e.prototype.handleObjectSerializeTask=function(e,t,r){for(var n in this.writer.writeUint32(t.id),t.properties){var i=t.properties[n];this.objectAdapter.hasKey(e,n)?this.serializeValue(i,this.objectAdapter.getValue(e,n)):this.writer.writeUint8(c.AkkoPrimitiveType.Never)}if(r){for(var o=this.writer.putUint32Holder(),a=0,s=0,u=this.objectAdapter.keys(e);s<u.length;s++)(n=u[s])in t.properties||(this.writer.writeString(n),this.serializeValue(t.key,this.objectAdapter.getValue(e,n)),a+=1);o(a)}else this.writer.writeUint32(0)},e.prototype.handleHangUpObjectSerializeTask=function(e){for(var t=this.writer.putUint32Holder(),r=0,n=0,i=this.objectAdapter.keys(e);n<i.length;n++){var o=i[n];this.writer.writeString(o),this.serializeValue(this.anyObjectFormat,this.objectAdapter.getValue(e,o)),r+=1}t(r)},e.prototype.serializeHash=function(e){for(var t=0;t<i.MD5BinaryLength;++t)t<e.length?this.writer.writeUint8(e.charCodeAt(t)):this.writer.writeUint8(0)},e}();t.Serializer=h},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(13),o=r(6),a=r(2);t.createIdentifierGenerator=function(e,t){var r=[];return o.bigInteger.pushInt53(r,e),"number"==typeof t&&(o.bigInteger.pushInt53(r,t),o.bigInteger.cleanUnmeaningZero(r,i.ScopeIdHexCount)),new s(e,r)},t.createV0IdentifierGenerator=function(e,t){if(e>a.Uint32Mask)throw new Error("observerId "+e+" is out of range 0 ~ "+a.Uint32Mask);var r=[],n=new c(e,r);return o.bigInteger.pushUint32(r,e),n.makeSureNextGenerationIdAfter(t),n};var s=function(){function e(e,t){this.scopeId=e,this.codes=t}return e.prototype.generate=function(){var e=o.bigInteger.stringify(this.codes);return o.bigInteger.increment(this.codes,i.ScopeIdHexCount),e},Object.defineProperty(e.prototype,"createdCount",{get:function(){for(var e=i.ScopeIdHexCount,t=0,r=0,n=0;n<8;++n)t|=(s=void 0===(s=this.codes[e+n])?0:o.bigInteger.parseCode(s))<<4*n;for(e+=8,n=0;n<8;++n){var s;r|=(s=void 0===(s=this.codes[e+n])?0:o.bigInteger.parseCode(s))<<4*n}return r*a.Pow32+t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.scopeId,n(this.codes))},e}();t.ObserverIdHexCount=8;var c=function(){function e(e,t){this.observerId=e,this.codes=t,this._createdCount=0}return Object.defineProperty(e.prototype,"scopeId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createdCount",{get:function(){return this._createdCount},enumerable:!0,configurable:!0}),e.prototype.generate=function(){return this._createdCount+=1,o.bigInteger.increment(this.codes,t.ObserverIdHexCount),o.bigInteger.stringify(this.codes)},e.prototype.clone=function(){return new e(this.observerId,n(this.codes))},e.prototype.makeSureNextGenerationIdAfter=function(e){for(var r=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);if(void 0===o.bigInteger.parseCode(i))throw new Error("invalid generationId");r[n]=i}for(n=0;n<r.length;++n)this.codes[n+t.ObserverIdHexCount]=r[n]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(4),o=r(5),a=r(8),s=r(7),c=function(){function e(e,t,r,n){this.reader=e,this.format=t,this.objectAdapter=r,this.valuesLength=n,this.objectStateMap={},this.holdersMap={},this.deserializeBufferSetterQueue=[],this.cacheMap=Object.freeze([{},{},{}])}return e.prototype.deserialize=function(t){for(var r=e.simpleObjectAdapter,i=this.reader.readUint32(),a=this.reader.didReadBytes,c=this.deserializeRootValuesLength(),u=[],l=0;l<c;++l)this.deserializeValue(r,u,l);for(;;){var p=this.reader.readBigInt();if(p===o.NullIdentifier)break;this.deserializeArrayOrObjectBody(p)}this.handleAllDeserializeBuffers(),this.invokeObjectDecorator();var h=this.reader.didReadBytes-a;if(i!==h+n.MD5BinaryLength)throw new s.DeserializerError("expect bytes "+i+", instead of "+h);var d=this.deserializeHash();if(!t&&d!==n.MD5ZeroBinary&&d!==this.reader.generateHash(a,h))throw new s.DeserializerError("hash isn't matched");return u},e.prototype.deserializeRootValuesLength=function(){return 1!==this.valuesLength?this.reader.readUint32():1},e.prototype.invokeObjectDecorator=function(){for(var e=Object.freeze([]),t=0,r=this.objectAdapter.decorateObjectEnums;t<r.length;t++){var n=r[t],i=this.cacheMap[n];for(var o in i){var a=i[o],s=this.objectStateMap[o];if(s){var c=this.holdersMap[o]||e,u=s.type,l=s.objectFormat;this.objectAdapter.decorateObject(a,u,c,l)}}}},e.prototype.deserializeValue=function(e,t,r){var n,o=this.reader.readUint8();switch(o){case i.AkkoPrimitiveType.Undefined:e.setValue(t,r,void 0);break;case i.AkkoPrimitiveType.Null:e.setValue(t,r,null);break;case i.AkkoPrimitiveType.String:e.setValue(t,r,this.reader.readString());break;case i.AkkoPrimitiveType.Integer32:e.setValue(t,r,this.reader.readInt32());break;case i.AkkoPrimitiveType.Integer53:e.setValue(t,r,this.reader.readInt53());break;case i.AkkoPrimitiveType.Float:e.setValue(t,r,this.reader.readFloat64());break;case i.AkkoPrimitiveType.True:e.setValue(t,r,!0);break;case i.AkkoPrimitiveType.False:e.setValue(t,r,!1);break;case i.AkkoPrimitiveType.Array:this.reader.readUint8(),n=this.reader.readBigInt();var c=this.readAndPushToDeserializeTaskQueueIfNeed(n,a.ObjectEnum.Array);e.setValue(t,r,c);break;case i.AkkoPrimitiveType.Object:this.reader.readUint8(),n=this.reader.readBigInt(),c=this.readAndPushToDeserializeTaskQueueIfNeed(n,a.ObjectEnum.Object),e.setValue(t,r,c);break;case i.AkkoPrimitiveType.HangUpObject:this.reader.readUint8(),n=this.reader.readBigInt(),c=this.readAndPushToDeserializeTaskQueueIfNeed(n,a.ObjectEnum.HangUpObject),e.setValue(t,r,c);break;case i.AkkoPrimitiveType.Buffer:var u=this.reader.readUint32(),l=this.deserializeBufferSetterQueue[u];l||(l=this.deserializeBufferSetterQueue[u]=[]),l.push((function(n){return e.setValue(t,r,n)}));break;case i.AkkoPrimitiveType.Never:break;default:throw new s.SerializerError("unrecognized primitiveType "+JSON.stringify(o))}return n},e.prototype.readAndPushToDeserializeTaskQueueIfNeed=function(e,t){var r=this.cacheMap[t],n=r[e];return n||(r[e]=n=this.objectAdapter.createObject(e,t)),n},e.prototype.deserializeArrayOrObjectBody=function(e){var t=this.reader.readUint8();switch(t){case i.ObjectType.Array:this.objectStateMap[e]={type:t},this.handleArrayDeserializerTask(this.cacheMap[a.ObjectEnum.Array][e]);break;case i.ObjectType.DeducedObject:case i.ObjectType.AssertedObject:var r=this.cacheMap[a.ObjectEnum.Object][e],n=this.reader.readUint32(),o=this.format.findObjectFormat(n);this.objectStateMap[e]={type:t,objectFormat:o},this.handleObjectDeserializerTask(r,o);break;case i.ObjectType.HangUpObject:var s=this.cacheMap[a.ObjectEnum.HangUpObject][e],c=(n=this.reader.readUint32(),this.reader.readUint16()),u=this.reader.readUint16(),l=this.reader.readUint16();this.objectStateMap[e]={type:t},this.reader.readUint8(),this.handleHangUpObjectDeserializerTask(s,{objectFormatId:n,version:c+"."+u+"."+l})}},e.prototype.handleAllDeserializeBuffers=function(){for(var e=this.reader.readUint32(),t=0;t<e;++t){var r=this.reader.readUint8(),n=this.reader.readBuffer();r&&n.freeze();for(var i=0,o=this.deserializeBufferSetterQueue[t];i<o.length;i++)(0,o[i])(n)}},e.prototype.handleArrayDeserializerTask=function(e){for(var t=this.reader.readUint32(),r=0;r<t;++r)this.deserializeValueAndRecordHolders(e,r)},e.prototype.handleObjectDeserializerTask=function(e,t){for(var r in t.properties)this.deserializeValueAndRecordHolders(e,r);for(var n=this.reader.readUint32(),i=0;i<n;++i)r=this.reader.readString(),this.deserializeValueAndRecordHolders(e,r)},e.prototype.handleHangUpObjectDeserializerTask=function(e,t){for(var r=this.reader.readUint32(),n=0;n<r;++n){var i=this.reader.readString();this.deserializeValueAndRecordHolders(e,i)}this.objectAdapter.completeHangUpObject(e,t)},e.prototype.deserializeValueAndRecordHolders=function(e,t){var r=this.deserializeValue(this.objectAdapter,e,t);if(void 0!==r){var n=this.holdersMap[r];n||(this.holdersMap[r]=n=[]),n.push({object:e,key:t})}},e.prototype.deserializeHash=function(){for(var e=new Array(n.MD5BinaryLength),t=0;t<n.MD5BinaryLength;++t)e[t]=this.reader.readUint8();return String.fromCharCode.apply(String,e)},e.simpleObjectAdapter=new a.DefaultObjectAdapter,e}();t.Deserializer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(25);t.LegacyDeserializer=n.LegacyDeserializer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(12),o=r(4),a=r(5),s=r(7),c=r(8),u=function(){function e(e,t,r,n){this.reader=e,this.format=t,this.objectFormats=r,this.objectAdapter=n,this.arrayCacheMap={},this.objectCacheMap={},this.objectStateMap={},this.holdersMap={},this.deserializeTasksQueue=[],this.deserializeBufferSetterQueue=[]}return e.prototype.deserialize=function(t){for(var r=e.simpleObjectAdapter,i=this.reader.readUint32(),o=this.reader.didReadBytes,c=this.deserializeRootValuesLength(),u=[],l=0;l<c;++l){var p=this.objectFormats[l]||e.neverObjectFormat;this.deserializeValue(p,r,u,l)}for(;;){var h=this.reader.readBigInt();if(h===a.NullIdentifier)break;var d=this.takeNextDeserializerTask(h);this.handleDeserializerTask(d)}this.handleAllDeserializeBuffers(),this.invokeObjectDecorator();var f=this.reader.didReadBytes-o;if(i!==f+n.MD5BinaryLength)throw new s.DeserializerError("expect bytes "+i+", instead of "+f);var y=this.deserializeHash();if(!t&&y!==n.MD5ZeroBinary&&y!==this.reader.generateHash(o,f))throw new s.DeserializerError("hash isn't matched");return u},e.prototype.deserializeRootValuesLength=function(){return 1!==this.objectFormats.length?this.reader.readUint32():1},e.prototype.invokeObjectDecorator=function(){var e=Object.freeze([]);for(var t in this.objectCacheMap){var r=this.objectCacheMap[t],n=this.holdersMap[t]||e,i=this.objectStateMap[t],o=i.objectFormat,a=i.type;this.objectAdapter.decorateObject(r,a,n,o)}},e.prototype.deserializeValueAndRecordHolders=function(e,t,r){var n=this.deserializeValue(e,this.objectAdapter,t,r);if(void 0!==n){var i=this.holdersMap[n];i||(this.holdersMap[n]=i=[]),i.push({object:t,key:r})}},e.prototype.deserializeValue=function(e,t,r,n){var i;switch(this.reader.readUint8()){case o.AkkoPrimitiveType.Undefined:t.setValue(r,n,void 0);break;case o.AkkoPrimitiveType.Null:t.setValue(r,n,null);break;case o.AkkoPrimitiveType.String:t.setValue(r,n,this.reader.readString());break;case o.AkkoPrimitiveType.Integer32:t.setValue(r,n,this.reader.readInt32());break;case o.AkkoPrimitiveType.Integer53:t.setValue(r,n,this.reader.readInt53());break;case o.AkkoPrimitiveType.Float:t.setValue(r,n,this.reader.readFloat64());break;case o.AkkoPrimitiveType.True:t.setValue(r,n,!0);break;case o.AkkoPrimitiveType.False:t.setValue(r,n,!1);break;case o.AkkoPrimitiveType.Object:i=this.reader.readBigInt();var a=this.readAndPushToDeserializeTaskQueueIfNeed(i,e,!1);t.setValue(r,n,a);break;case o.AkkoPrimitiveType.Array:i=this.reader.readBigInt(),a=this.readAndPushToDeserializeTaskQueueIfNeed(i,e,!0),t.setValue(r,n,a);break;case o.AkkoPrimitiveType.Buffer:var s=this.reader.readUint32(),c=this.deserializeBufferSetterQueue[s];c||(c=this.deserializeBufferSetterQueue[s]=[]),c.push((function(e){return t.setValue(r,n,e)}))}return i},e.prototype.readAndPushToDeserializeTaskQueueIfNeed=function(e,t,r){var n=r?this.arrayCacheMap:this.objectCacheMap,i=n[e];return i||(n[e]=i=this.objectAdapter.createObject(e,r?c.ObjectEnum.Array:c.ObjectEnum.Object),this.deserializeTasksQueue.push({isArray:r,identifier:e,deducedFormat:t,object:i})),i},e.prototype.takeNextDeserializerTask=function(e){for(var t=0;t<this.deserializeTasksQueue.length;++t){var r=this.deserializeTasksQueue[t];if(e===r.identifier)return this.deserializeTasksQueue.splice(t,1),r}throw new s.DeserializerError("can't find identifier "+e+" in task queue")},e.prototype.handleDeserializerTask=function(e){var t=this.reader.readUint8(),r=e.identifier;switch(t){case o.ObjectType.Array:if(!e.isArray)throw new s.DeserializerError("expect array");this.objectStateMap[r]={type:t,objectFormat:e.deducedFormat},this.handleArrayDeserializerTask(e.object,e.deducedFormat);break;case o.ObjectType.DeducedObject:if(e.isArray)throw new s.DeserializerError("expect object");this.objectStateMap[r]={type:t,objectFormat:e.deducedFormat},this.handleObjectDeserializerTask(e.object,e.deducedFormat);break;case o.ObjectType.AssertedObject:if(e.isArray)throw new s.DeserializerError("expect object");var n=this.reader.readUint32(),i=this.format.findObjectFormat(n);this.objectStateMap[r]={type:t,objectFormat:i},this.handleObjectDeserializerTask(e.object,i)}},e.prototype.handleAllDeserializeBuffers=function(){for(var e=this.reader.readUint32(),t=0;t<e;++t){var r=this.reader.readUint8(),n=this.reader.readBuffer();r&&n.freeze();for(var i=0,o=this.deserializeBufferSetterQueue[t];i<o.length;i++)(0,o[i])(n)}},e.prototype.handleArrayDeserializerTask=function(e,t){for(var r=t.index,n=this.reader.readUint32(),i=0;i<n;++i)this.deserializeValueAndRecordHolders(r,e,i)},e.prototype.handleObjectDeserializerTask=function(e,t){for(var r in t.properties)this.deserializeValueAndRecordHolders(t.properties[r],e,r);for(var n=this.reader.readUint32(),i=0;i<n;++i)r=this.reader.readString(),this.deserializeValueAndRecordHolders(t.key,e,r)},e.prototype.deserializeHash=function(){for(var e=new Array(n.MD5BinaryLength),t=0;t<n.MD5BinaryLength;++t)e[t]=this.reader.readUint8();return String.fromCharCode.apply(String,e)},e.neverObjectFormat=i.createSelfloopObjectFormats(),e.simpleObjectAdapter=new c.DefaultObjectAdapter,e}();t.LegacyDeserializer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(9),o=r(2),a=r(6),s=[],c=[0],u=[0,0],l=[0,0,0],p=[0,0,0,0],h=[0,0,0,0,0],d=[0,0,0,0,0,0],f=[0,0,0,0,0,0,0],y=[0,0,0,0,0,0,0,0],A=function(){function e(e){this._offset=0,this.buffer=e}return Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.generateHash=function(e,t){for(var r=Math.min(e+t-1,this.buffer.byteLength-1),i=new n,o=[0],a=e;a<=r;++a)o[0]=this.buffer.getUint8(a),i.appendBinary(String.fromCharCode.apply(String,o));return i.end(!0)},Object.defineProperty(e.prototype,"didReadBytes",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.readBuffer=function(){var e=this.buffer.getUint32(this._offset);this._offset+=4;var t=this.buffer.slice(this._offset,e);return this._offset+=e,t},e.prototype.readUint8=function(){var e=this.buffer.getUint8(this._offset);return this._offset+=1,e},e.prototype.readUint16=function(){var e=this.buffer.getUint16(this._offset);return this._offset+=2,e},e.prototype.readInt32=function(){var e=this.buffer.getInt32(this._offset);return this._offset+=4,e},e.prototype.readUint32=function(){var e=this.buffer.getUint32(this._offset);return this._offset+=4,e},e.prototype.readInt53=function(){var e=this.buffer.getInt32(this._offset);this._offset+=4;var t=this.buffer.getInt32(this._offset);return this._offset+=4,t*o.Pow32+e},e.prototype.readFloat64=function(){var e=this.buffer.getFloat64(this._offset);return this._offset+=8,e},e.prototype.readString=function(){var e=this.readInt32(),t=i.read(this.buffer,this._offset,e);return this._offset+=e,t},e.prototype.readBigInt=function(){for(var e=this.readUint8(),t=Math.ceil(e/2),r=function(e){switch(e){case 0:return s;case 1:return c;case 2:return u;case 3:return l;case 4:return p;case 5:return h;case 6:return d;case 7:return f;case 8:return y;default:return[]}}(e),n=0;n<t;++n){var i=this.readUint8(),o=15&i,A=i>>4&15;r[2*n]=a.bigInteger.toCode(o),2*n+1<e&&(r[2*n+1]=a.bigInteger.toCode(A))}return String.fromCharCode.apply(String,r)},e.prototype.skipBytes=function(e){return this._offset+=e,e},e.prototype.sliceLatestBytes=function(e){return[{offset:this._offset-e,buffer:this.buffer,byteLength:e}]},e}();t.Reader=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MD5BinaryLength=16,t.MD5ZeroBinary=function(){for(var e=[],r=0;r<t.MD5BinaryLength;++r)e[r]=0;return String.fromCharCode.apply(String,e)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.FormatError=n.FormatError;var i=r(29);t.FormatFactory=i.FormatFactory},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(3),o=r(30),a=r(2),s=function(){function e(){this.replaceReferenceType=function(){throw new i.FormatError("not define referenceTypeReplacer")}}return e.prototype.createWithRecords=function(e,t){for(var r=new o.FormatConstructor(t||this.replaceReferenceType),n=[],i={},a=0,s=e;a<s.length;a++){var u=s[a],l=u.type,p=u.interrupter,h=r.covert(l);p&&(i[h.id]=p),n.push(h.id)}for(var d=r.getObjectFormatRecords().map((function(e){var t=i[e.id];return t?t(e):e})),f=new c(d),y=[],A=0,m=n;A<m.length;A++){var g=m[A];y.push(f.findObjectFormat(g))}return{format:f,objectFormats:y}},e.prototype.createWithBuffer=function(e){return new c(c.deserialize(e))},e}();t.FormatFactory=s;var c=function(){function e(e){this.records={},this.formats={};for(var t=null,r=0,n=e;r<n.length;r++){var i=n[r],o={};this.records[i.id]=i,this.formats[i.id]=o,this.isAnyObjectFormatRecord(i)&&(t=o)}for(var a=0,s=e;a<s.length;a++)i=s[a],this.completeObjectFormat(this.formats[i.id],i);if(!t)throw new Error("can't find any object format");this.anyObjectFormat=t,this.objectFormatIds=Object.freeze(e.map((function(e){return e.id})).sort())}return e.prototype.isAnyObjectFormatRecord=function(e){for(var t in e.properties)return!1;return e.index===e.id&&e.key===e.id},e.prototype.completeObjectFormat=function(e,t){for(var r in e.id=t.id,e.key=this.formats[t.key],e.index=this.formats[t.index],e.properties={},t.properties)e.properties[r]=this.formats[t.properties[r]];Object.freeze(e.properties),Object.freeze(e)},e.prototype.findObjectFormat=function(e){var t=this.formats[e];if(!t)throw new Error("can't find ObjectFormat with id "+e);return t},e.prototype.serialize=function(){var e=[],t=new n.Writer;for(var r in this.records)e.push(this.records[r]);e.sort((function(e,t){return e.id-t.id})),t.writeUint32(e.length);for(var i=0,o=e;i<o.length;i++){var a=o[i];this.serializeRecord(a,t)}return t.toBuffer()},e.prototype.serializeRecord=function(e,t){if(e.id>a.Uint32Mask)throw new i.FormatError("ObjectFormat's number can't greater than "+a.Uint32Mask);var r=Object.keys(e.properties).sort();if(r.length>a.Uint32Mask)throw new i.FormatError("ObjectFormat's properties number can't greater than "+a.Uint32Mask);t.writeUint32(e.id),t.writeUint32(e.key),t.writeUint32(e.index),t.writeUint32(r.length);for(var n=0,o=r;n<o.length;n++){var s=o[n];t.writeString(s),t.writeUint32(e.properties[s])}},e.deserialize=function(e){for(var t=[],r=new n.Reader(e),i=r.readUint32(),o=0;o<i;++o){for(var a=r.readUint32(),s=r.readUint32(),c=r.readUint32(),u=r.readUint32(),l={},p=0;p<u;++p){var h=r.readString(),d=r.readUint32();l[h]=d}t.push({id:a,key:s,index:c,properties:l})}return t},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31);t.FormatConstructor=n.FormatConstructor},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(32),o=function(){function e(e){this.collapsedNodeToRecordMap={},this.recordMap={},this.nextRecordId=0,this.templateEnvironment=new i.TemplateEnvironment(e);var t=this.nextRecordId;this.nextRecordId+=1,this.recordMap[t]=this.anyObjectFormatRecord={id:t,key:t,index:t,properties:{}}}return e.prototype.covert=function(e){var t=this.templateEnvironment.getTemplate(e).getHandle([]).collapsedNode,r=this.findRecordId(t);return this.recordMap[r]},e.prototype.getObjectFormatRecords=function(){var e=[];for(var t in this.recordMap)e.push(this.recordMap[t]);return e},e.prototype.findRecordId=function(e){if(e.types.some((function(e){return e===n.TypeEnum.Object}))){var t=this.collapsedNodeToRecordMap[e.id];if(!t){var r={id:this.nextRecordId};this.nextRecordId+=1,this.collapsedNodeToRecordMap[e.id]=r,this.recordMap[r.id]=r,this.convertCollapsedNodeAndFillObjectFormatRecord(e,r),t=r}return t.id}return this.anyObjectFormatRecord.id},e.prototype.convertCollapsedNodeAndFillObjectFormatRecord=function(e,t){for(var r=e;r.handle;)r=r.handle.collapsedNode;var n=r.object,i={};for(var o in n.properties)i[o]=this.findRecordId(n.properties[o]);t.key=this.findRecordId(n.key),t.index=this.findRecordId(n.index),t.properties=i},e}();t.FormatConstructor=o},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(15),o=r(16),a=r(33),s=r(3),c=function(){function e(e){this.replaceReferenceType=e,this.templatesTable={}}return e.prototype.getTemplate=function(e){if(void 0===e.id)throw new s.FormatError("templateType don't have id");var t=this.templatesTable[e.id];return t||(t=new u(this,e),this.templatesTable[e.id]=t),t},e}();t.TemplateEnvironment=c;var u=function(){function e(e,t){this.templateEnvironment=e,this.templateType=t,this.handlesCache=[]}return e.prototype.getHandle=function(e){var t=this.getHandleByParams(e);if(!t){t={state:i.HandleState.Indeterminate},this.setHandleWithParams(t,n(e));var r=this.createCollapsedNode(e);t.collapsedNode=r,t.state=r.hasCircular?i.HandleState.Circular:i.HandleState.Noncircular}return t},e.prototype.createCollapsedNode=function(e){var t=new o.ExpandedExpressionGenerator(this.templateEnvironment,this.templateType,e).getExpandedExpression();return new a.CollapsedExpressionGenerator(t).getCollapsedExpression()},e.prototype.getHandleByParams=function(t){for(var r=0,n=this.handlesCache;r<n.length;r++){var i=n[r];if(e.isParamsEquals(i.params,t))return i.handle}},e.prototype.setHandleWithParams=function(e,t){if(this.handlesCache.length>=2500)throw new s.FormatError("the template's definition is divergence");this.handlesCache.push({handle:e,params:t})},e.isParamsEquals=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r){var n=e[r],i=t[r];if(n!==i){if(!("id"in n)||!("id"in i))return!1;if(n.id!==i.id)return!1}}return!0},e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(15),a=r(3),s=r(16),c=function(){function e(e){this.rootExpandedNode=e}return e.generateId=function(){var e=this.nextId;return this.nextId+=1,""+e},e.prototype.getCollapsedExpression=function(){return this.collapseNode(this.rootExpandedNode)},e.prototype.collapseNode=function(t){switch(t.clazz){case s.ExpandedNodeClass.Border:return{id:e.generateId(),hasCircular:!1,types:[t.type.typeEnum]};case s.ExpandedNodeClass.Object:return this.collapseObjectExpandedNode(t);case s.ExpandedNodeClass.Handle:return this.collapseHandleExpandedNode(t);case s.ExpandedNodeClass.Compound:return this.collapseCompoundExpandedNode(t,t.type.typeEnum);default:throw new Error("invalid class "+t.clazz)}},e.prototype.collapseObjectExpandedNode=function(t){var r=t.key,n=t.index,o=t.properties,a=this.collapseNode(r),s=this.collapseNode(n),c=a.hasCircular||s.hasCircular,u={};for(var l in o){var p=o[l],h=this.collapseNode(p);u[l]=h,c=c||h.hasCircular}var d={key:a,index:s,properties:u};return this.isCollapsedObjectHasNeverPropertyTypes(d)?e.neverCollapsedNode:{id:e.generateId(),hasCircular:c,types:[i.TypeEnum.Object],object:d}},e.prototype.collapseHandleExpandedNode=function(t){var r=t.handle;switch(r.state){case o.HandleState.Noncircular:return r.collapsedNode;case o.HandleState.Indeterminate:case o.HandleState.Circular:return{id:e.generateId(),hasCircular:!0,types:[i.TypeEnum.Object],handle:r};default:throw new Error("invalid state "+r.state)}},e.prototype.collapseCompoundExpandedNode=function(t,r){for(var n=[],s=0,c=t.children;s<c.length;s++){var u=c[s];n.push(this.collapseNode(u))}if(0===n.length)return e.neverCollapsedNode;if(1===n.length)return n[0];for(var l=0,p=n;l<p.length;l++){var h=p[l];if(h.handle&&h.handle.state===o.HandleState.Indeterminate){var d=r===i.TypeEnum.And?"&":"|";throw new a.FormatError('can not operate an indeterminate expression with "'+d+'" sign')}}return r===i.TypeEnum.And?this.pruneAndMergeNodes(n):this.flattenNodes(n)},e.prototype.pruneAndMergeNodes=function(t){var r=this.collectCrossTypeEnumsWith(t);if(0===r.length||r.find((function(e){return e===i.TypeEnum.Never})))return e.neverCollapsedNode;var n=this.collectAllObjectCollapsedNodesIn(t);return this.handleObjectCollapsedNodesWithTypeEnums(n,r,i.TypeEnum.And)},e.prototype.flattenNodes=function(t){var r=this.collectUnionTypeEnumsWith(t);if(0===(r=r.filter((function(e){return e!==i.TypeEnum.Never}))).length)return e.neverCollapsedNode;if(r.find((function(e){return e===i.TypeEnum.Any})))return{id:e.generateId(),hasCircular:!1,types:[i.TypeEnum.Any]};var n=this.collectAllObjectCollapsedNodesIn(t);return this.handleObjectCollapsedNodesWithTypeEnums(n,r,i.TypeEnum.Or)},e.prototype.collectCrossTypeEnumsWith=function(e){for(var t={},r=0,n=e;r<n.length;r++)for(var i=0,o=n[r].types;i<o.length;i++){var a=o[i];void 0===(u=t[a])&&(u=0),t[a]=u+1}var s=[];for(var c in t){var u;(u=t[c])===e.length&&s.push(c)}return s},e.prototype.collectUnionTypeEnumsWith=function(e){for(var t={},r=0,n=e;r<n.length;r++)for(var i=0,o=n[r].types;i<o.length;i++)t[o[i]]=!0;var a=[];for(var s in t)t[s]&&a.push(s);return a},e.prototype.collectAllObjectCollapsedNodesIn=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];(i.object||i.handle)&&t.push(i)}return t},e.prototype.handleObjectCollapsedNodesWithTypeEnums=function(t,r,o){var s=t;if(0===s.length)return{id:e.generateId(),hasCircular:!1,types:r};if(1===s.length)return n(n({},s[0]),{id:e.generateId(),types:r});var c=[];if(s=s.filter((function(e){return!e.handle||(c.push(e),!1)})),c.length>=2){var u=o===i.TypeEnum.And?"&":"|";throw new a.FormatError("can not "+c.length+' circular expression with "'+u+'" sign')}s.push.apply(s,c);for(var l=s[0].object,p=1;p<s.length;++p){if(o===i.TypeEnum.And&&this.isCollapsedObjectHasNeverPropertyTypes(l))return e.neverCollapsedNode;var h=s[p],d=this.getObjectFromObjectCollapsedNode(h);l=o===i.TypeEnum.And?this.factorizeWithAndOperation(l,d):this.factorizeWithOrOperation(l,d)}return this.isCollapsedObjectHasNeverPropertyTypes(l)?e.neverCollapsedNode:{id:e.generateId(),types:r,hasCircular:this.hasCircularIn(s),object:l}},e.prototype.getObjectFromObjectCollapsedNode=function(e){for(var t=e;;){if(t.object)return t.object;t=t.handle.collapsedNode}},e.prototype.hasCircularIn=function(e){for(var t=0,r=e;t<r.length;t++)if(r[t].hasCircular)return!0;return!1},e.prototype.factorizeWithAndOperation=function(e,t){var r=[],n=[],i=[];for(var o in e.properties)o in t.properties?r.push(o):n.push(o);for(var o in t.properties)o in e.properties||i.push(o);for(var a={},s=0,c=r;s<c.length;s++){o=c[s];var u=e.properties[o],l=t.properties[o];a[o]=this.pruneAndMergeNodes([u,l])}for(var p=0,h=n;p<h.length;p++)a[o=h[p]]=e.properties[o];for(var d=0,f=i;d<f.length;d++)a[o=f[d]]=t.properties[o];return{key:this.pruneAndMergeKeyOrIndexNodes(e.key,t.key),index:this.pruneAndMergeKeyOrIndexNodes(e.index,t.index),properties:a}},e.prototype.factorizeWithOrOperation=function(e,t){var r=[];for(var n in e.properties)n in t.properties&&r.push(n);for(var i={},o=0,a=r;o<a.length;o++){n=a[o];var s=e.properties[n],c=t.properties[n];i[n]=this.flattenNodes([s,c])}return{key:this.flattenNodesKeyOrIndexNodes(e.key,t.key),index:this.flattenNodesKeyOrIndexNodes(e.index,t.index),properties:i}},e.prototype.pruneAndMergeKeyOrIndexNodes=function(e,t){return this.isCollapsedNodeTypeEqual(e,i.TypeEnum.Undefined)?t:this.isCollapsedNodeTypeEqual(t,i.TypeEnum.Undefined)?e:this.pruneAndMergeNodes([e,t])},e.prototype.flattenNodesKeyOrIndexNodes=function(e,t){return this.isCollapsedNodeTypeEqual(e,i.TypeEnum.Undefined)?t:this.isCollapsedNodeTypeEqual(t,i.TypeEnum.Undefined)?e:this.flattenNodes([e,t])},e.prototype.isCollapsedObjectHasNeverPropertyTypes=function(e){if(this.isCollapsedNodeTypeEqual(e.key,i.TypeEnum.Never))return!0;if(this.isCollapsedNodeTypeEqual(e.index,i.TypeEnum.Never))return!0;for(var t in e.properties)if(this.isCollapsedNodeTypeEqual(e.properties[t],i.TypeEnum.Never))return!0;return!1},e.prototype.isCollapsedNodeTypeEqual=function(e,t){return 1===e.types.length&&e.types[0]===t},e.nextId=0,e.neverCollapsedNode={id:e.generateId(),hasCircular:!1,types:[i.TypeEnum.Never]},e}();t.CollapsedExpressionGenerator=c}]))},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyAndCleanUndefinedValues=function(e){var t={};for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}return t},t.copyValueAndFreeze=function e(t){if("object"!=A(t)||null===t)return t;if(t instanceof Array){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];r.push(e(o))}return Object.freeze(r)}var a={};for(var s in t)a[s]=e(t[s]);return Object.freeze(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LevelToIndexMap=Object.freeze({debug:0,info:1,warn:2,error:3})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.DefaultLoggerHub=n.DefaultLoggerHub;var i=r(1);t.LevelToIndexMap=i.LevelToIndexMap;var o=r(4);t.createLogger=o.createLogger;var a=r(5);t.createCommitter=a.createCommitter;var s=r(6);t.ArgusEncoder=s.ArgusEncoder;var c=r(8);t.LogQueue=c.LogQueue},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e){var t=void 0===e?{}:e,r=t.prefix,i=t.levelMask;this.prefix=r,this.levelMaskIndex=n.LevelToIndexMap[i||"info"]}return e.prototype.log=function(e,t,r){n.LevelToIndexMap[t]>=this.levelMaskIndex&&(this.prefix?console[t](this.prefix,r):console[t](r))},e.prototype.commit=function(){},e.prototype.isSupportedEvents=function(e){return!0},e}();t.DefaultLoggerHub=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);function o(e,t,r,n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var c=0;c<i.length;++c)i[c]=s(i[c]);var u=a(n),l=i.join(" ");e.log(r,t,l,u)}}function a(e){var t;if(e.context)for(var r in t||(t={}),e.context)t[r]=e.context[r];return Object.freeze(t)}function s(e){if(e instanceof Error){var t="Error: "+e.message+"\n";return"string"==typeof e.stack?t+e.stack.replace(t,""):t}return String(e)}t.createLogger=function(e,t,r){if(!e.isSupportedEvents(t))throw new Error("unsupported event name: "+t);return function e(t,r,i){var a={debug:o(t,"debug",r,i),info:o(t,"info",r,i),warn:o(t,"warn",r,i),error:o(t,"error",r,i),withContext:function(o){return e(t,r,{context:n(n({},i.context),o)})}};return Object.defineProperty(a,"context",{enumerable:!1,set:function(e){return i.context=e},get:function(){return i.context}}),Object.freeze(a)}(e,t,r?{context:i.copyAndCleanUndefinedValues(r)}:{})}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);t.createCommitter=function(e,t,r){if(void 0===r&&(r={}),!e.isSupportedEvents(t))throw new Error("unsupported event name: "+t);var o=Object.freeze(i.copyAndCleanUndefinedValues(r));return Object.freeze({commit:function(r){e.commit(t,n(n({},o),r))}})}},function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),s=r(0),c=function(){function e(e,t){this.argusEvents=s.copyValueAndFreeze(e),this.vid=t}return e.prototype.encode=function(e,t){var r=o(o({},t),{vid:this.vid,lts:Date.now(),clientIP:"__#CLIENT_IP#__"}),s=this.argusEvents[e],c=s.eventID,u=s.proto,l=u.verify(r);if(l)throw new Error(l);var p=u.create(r),h=function(e){if("object"==(void 0===i?"undefined":A(i))&&i+""=="[object process]")return n.from(e).toString("base64");for(var t="",r=void 0,o=0,a=e.length;o<a;)r=e.subarray(o,Math.min(o+32768,a)),t+=String.fromCharCode.apply(null,r),o+=32768;return btoa(t)}(u.encode(p).finish()),d="whiteBoard",f=Math.floor(Date.now()/1e3),y=a.hash("payload="+h+"&src="+d+"&ts="+f);return{id:c,src:d,payload:h,qos:1===this.vid?101:1,ts:f,sign:y}},e}();t.ArgusEncoder=c},function(e,t){e.exports=r(29)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.queue=[]}return e.prototype.append=function(e){this.queue.push(e)},Object.defineProperty(e.prototype,"next",{get:function(){return this.queue[0]},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),e}();t.LogQueue=n}]))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.displayerContext=n.createContext(void 0),t.roomContext=n.createContext(void 0),t.playerContext=n.createContext(void 0),t.createWrappedComponent=function(e,t){var r=e.Provider;return function(e){return n.createElement(r,{value:t},e.children)}},t.DisplayerConsumer=t.displayerContext.Consumer,t.RoomConsumer=t.roomContext.Consumer,t.PlayerConsumer=t.playerContext.Consumer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50);t.iconURL=function(e){return n.default[e]}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=function(e){function t(t){var r=e.call(this,t)||this;return r.didUnmount=!1,r.onMouseDown=function(e){if(0===e.button){r.setState({isPressed:!0});document.body.addEventListener("mouseup",(function e(t){0===t.button&&(document.body.removeEventListener("mouseup",e),r.didUnmount||r.setState({isPressed:!1}))}))}},r.state={isHover:!1,isPressed:!1},r}return i(t,e),t.prototype.componentWillUnmount=function(){this.didUnmount=!0},t.prototype.render=function(){var e=this,t="button";return void 0!==this.props.className&&(t+=" "+this.props.className),o.createElement("div",{className:t,ref:this.props.refObject,onMouseEnter:function(){return e.setState({isHover:!0})},onMouseLeave:function(){return e.setState({isHover:!1})},onMouseDown:this.onMouseDown,onClick:this.props.onClick},this.props.children)},t}(o.Component);t.Button=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(1),a=r(3),s=r(9),c=r(2),u=r(32),l=r(68),p=r(69),h=r(70),d=r(4);!function(e){e.DisableCache="disableCache",e.StoreAsBlob="storeAsBlob",e.StoreAsBase64="storeAsBase64"}(n=t.AsyncModuleLoadMode||(t.AsyncModuleLoadMode={}));var f=n.StoreAsBase64,y=null;t.setAsyncModuleLoadMode=function(e){if(void 0===f)throw new Error("cannot set async module load mode after joined or replay any room");f=e},t.loadModules=function(e){return y||(y=function(e){var t,r;switch(e){case n.DisableCache:t=!1,r=!1;break;case n.StoreAsBlob:t=!0,r=!1;break;case n.StoreAsBase64:t=!0,r=!0}return h.defineModulesLoader({libName:d.environment.modules.identifier,timeout:12e4,cache:t,storeBase64:r,origin:d.environment.modules.origin,findPath:function(e){return"/dynamic-libraries/"+e+".js"},dependencies:{akko:i,boundless:o,mobx:a,"mobx-react":s,react:c,"netless-ppt":u,"url-parse":l,"textarea-caret-ts":p}})}(f),f=void 0),Promise.all([y.require(e,"white-model"),y.require(e,"white-render")]).then((function(e){return Object.freeze({WhiteModel:e[0],WhiteRender:e[1]})}))}},function(e,t){e.exports=r("cr+I")},function(e,t){e.exports=r("i8i4")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEquals=function e(t,r){if(A(t)!=A(r))return!1;if("object"!=A(t)||null===t)return t===r;if(t.constructor!==r.constructor)return!1;if(t.constructor===Object){for(var n in t){if(!(n in r))return!1;if(!e(t[n],r[n]))return!1}for(var n in r)if(!(n in t))return!1;return!0}if(t.constructor===Array){var i=t,o=r;if(i.length!==o.length)return!1;for(var a=0;a<i.length;++a)if(!e(t[a],r[a]))return!1;return!0}return!0}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),c=r(1),u=r(94),l=r(21),p=r(16),h=r(13),d=r(22),f=r(4),y=r(5),m=r(5),g=r(23),v=r(7);function b(e){return"object"==A(e)&&null!==e}t.PathSegmentSeparator="/";var P=function(){function e(e){var t=this,r=e.logger,n=e.region,c=e.boundless,l=e.useMobXState,h=e.preloadDynamicPPT,A=e.userFonts,v=e.pptHandler,b=e.globalStateUpdater,P=e.screenType,S=e.cameraBound,w=e.renderEngine,x=e.autoResize,O=e.plugins,k=e.wrappedComponents,M=e.floatBarClass,C=e.useMultiViews,T=e.willHideSelfCursor,_=e.disableCameraTransform,I=e.onlyCallbackRemoteStateModify,E=e.invisiblePlugins,j=e.handToolKey,R=e.fontFamily,N=e.disableOperations,B=e.disableOthersSelectingBox,L=e.cursorAdapter,F=e.eraserRadiusCursor,D=e.textareaHub,z=e.eventInterrupter,V=e.callbacks,W=e.urlInterrupter,U=e.onTextareaUpdate,H=e.userPayload,G=e.pptParams;this.magixEventsManager=new u.MagixEventsManager,this.preloadDynamicPPT=!1,this.mainViewProxy=null,this.context=null,this._views=null,this.libraryNodeFetcher=function(e){return i(t,void 0,void 0,(function(){var t,r,n;return o(this,(function(i){switch(i.label){case 0:return t=f.environment.modules.identifier+"/"+e.libIdentifier,[4,p.loadModules(t)];case 1:return r=i.sent(),n=r.WhiteModel.default,this.logger.info("load modules ",t),[2,Object.freeze({modules:r,libraryClass:n,appVersion:e.appVersion})]}}))}))},this.covertMemberDisplayerToMember=function(e){var r=e.information,n=r?r.session:"",i=r&&r.payload;return{memberId:e.memberId,memberState:t.memberState(e.memberId),session:n,payload:s.copy(i)}},this.logger=r,this.region=n,this.useMobXState=l,this.textareaHub=D,this.boundless=c,this.screenType=P,this.eraserRadiusCursor=F,this.pluginOperator=this.createPluginOperator(),this.plugins=O,this.autoResize=x,this.cameraObserver=new y.CameraObserver,this.wrappedComponents=Object.freeze(a(k)),this.onlyCallbackRemoteStateModify=I,this.invisiblePluginNode=new d.InvisiblePluginNode(r,this,E),this.callbacks=new m.CallbacksImplement(V),this.preloadDynamicPPT=h,this.viewsParams=Object.freeze({logger:r,renderEngine:w,boundless:c,cameraBound:S,fontFamily:R,cursorAdapter:L,autoResize:x,floatBarClass:M,wrappedComponents:this.createWrappedComponents(),disableOperations:N,disableOthersSelectingBox:B,willHideSelfCursor:T,handToolKey:j,eventInterrupter:z,urlInterrupter:W,onTextareaUpdate:U,textareaHub:D,userPayload:H,pptParams:G,onScreenSizeUpdated:function(e){return t.onScreenSizeUpdated(e)}}),this.dynamicPptParams=Object.freeze({globalStateUpdater:b,observerId:s.AdminObserverId,userFonts:A,preload:h,pptHandler:v,logger:r,pptParams:G,userPayload:H,pptAssetsOrigin:"https://convertcdn.netless.link/dynamicConvert",onPPTLoadProgress:function(e,r){return t.callbacks.dispatch("onPPTLoadProgress",(function(t){return t(e,r)}))},onPPTMediaPause:function(e,r){return t.callbacks.dispatch("onPPTMediaPause",(function(t){return t(e,r)}))},onPPTMediaPlay:function(e,r){return t.callbacks.dispatch("onPPTMediaPlay",(function(t){return t(e,r)}))}}),this.viewsHubProxy=new g.StateProxy({observerId:s.AdminObserverId,forcePPTLandscape:!1,disalbeImageHit:!1,disableBoundlessEvent:!0,disableOthersSelectingBox:!1,cursorClass:null,cursorStyle:null,playerState:Object.freeze({isPlaying:!0,timestamp:0,playbackSpeed:1})}),C||(this.mainViewProxy=new g.StateProxy({cameraBound:{},handToolActive:!1,divElement:null,disableCameraTransform:!!_}))}return Object.defineProperty(e.prototype,"enableWriteNow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceType",{get:function(){return this.boundless.deviceType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observerId",{get:function(){return this.viewsHubProxy.state.observerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewsHub",{get:function(){return this.viewsHubProxy.owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useMultiViews",{get:function(){return!this.mainViewProxy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainView",{get:function(){return this.assertMainViewProxy().owner},enumerable:!0,configurable:!0}),e.prototype.onScreenSizeUpdated=function(e){},e.prototype.createWrappedComponents=function(){return a(this.wrappedComponents,[h.createWrappedComponent(h.displayerContext,this)])},e.prototype.createPluginOperator=function(){return Object.freeze({remove:function(){throw new Error("it is not a writable room")},update:function(){throw new Error("it is not a writable room")}})},e.prototype.scalePptToFit=function(e){void 0===e&&(e=c.AnimationMode.Continuous);var t=this.state.sceneState.scenes[this.state.sceneState.index];t.ppt&&this.moveCameraToContain({originX:-t.ppt.width/2,originY:-t.ppt.height/2,width:t.ppt.width,height:t.ppt.height,animationMode:e})},e.prototype.scenePathType=function(e){var r=e.replace(/\/$/g,"").split(t.PathSegmentSeparator);r.shift();var n=this.applianceManager.scenes.findSceneOrGroup(r),i=this.context.modules.WhiteModel.SceneNode;return void 0===n?v.ScenePathType.None:s.isInstanceOf(n,i)?v.ScenePathType.Page:v.ScenePathType.Dir},e.prototype.entireScenes=function(){for(var e=this.applianceManager,r={},n=0,i=s.copy(e.getAllScenePaths());n<i.length;n++){var o=i[n],a=s.copy(e.getScene(o)),c=o.slice(0,-1),u=""+t.PathSegmentSeparator+c.join(t.PathSegmentSeparator);r[u]=r[u]||[],a&&r[u].push(a)}return r},e.prototype.refreshViewSize=function(){var e;this.autoResize||null===(e=this.viewsHubProxy.owner)||void 0===e||e.forEach((function(e){return e.resizeScreen()}))},e.prototype.getCurrentSceneState=function(){for(var e,t=this.applianceManager,r=s.copy(t.getCurrentScenePath()),n=l.scenePathConverter.stringify(r),i=r.pop(),o=t.getSceneNames(r),c=l.scenePathConverter.stringify(r),u=[],p=Number.NaN,h=0;h<o.length;++h){var d=o[h],f=t.getScene(a(r,[d]));(null===(e=f)||void 0===e?void 0:e.name)===i&&(p=h),u[h]=s.copy(f)}return{sceneName:i,scenePath:n,contextPath:c,scenes:u,index:p}},e.prototype.assignAttributes=function(e,t){if(this.context){if(void 0===t||b(t)){var r=this.context.pluginManager.findPlugin(e);r&&b(r.defaultAttributes)&&(t=n(n({},r.defaultAttributes),t))}return t}},Object.defineProperty(e.prototype,"hasLibraryNode",{get:function(){return!!this.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bezierCurvePainter",{get:function(){return this.context?this.context.bezierCurvePainter:null},enumerable:!0,configurable:!0}),e.prototype.putPlayerState=function(e){var t=Object.freeze(n(n({},this.viewsHubProxy.state.playerState),e));this.viewsHubProxy.putState({playerState:t})},e.prototype.updateLibraryNode=function(e){var t=e.modules,r=t.WhiteRender,i=r.createDynamicPpt,o=r.EnginesHub,a=r.BezierCurvePainter,s=this.createPluginManager(t,this.pluginOperator,this.plugins),c=this.createBezierCurvePainter(a),u=i(n(n({},this.dynamicPptParams),{observerId:this.viewsHubProxy.state.observerId})),l=Object.freeze({appVersion:e.appVersion,applianceManager:this.applianceManager,pluginManager:s,dynamicPpt:u,engines:o&&new o(this.viewsParams.renderEngine),modules:t});if(this.viewsHubProxy.owner)this.viewsHubProxy.owner.updateContext(l);else{var p=this.viewsHubProxy.state,h=new g.ViewsHub(this.viewsParams,p,l);if(this.viewsHubProxy.updateOwner(h),this._views=new g.ViewsImplement(h),this.mainViewProxy){var d=this.mainViewProxy.state,f=h.createView(d);f.mode=g.ViewVisionMode.Writable,this.mainViewProxy.updateOwner(f),this.cameraObserver.setupMainView(f),f.callbacks.forwardTo("onHandToolActive",this.callbacks),f.callbacks.forwardTo("onRenderDuration",this.callbacks)}}this.context=Object.freeze({modules:t,pluginManager:s,bezierCurvePainter:c}),this.refreshViewSize()},e.prototype.createPluginManager=function(e,t,r){var n=new(0,e.WhiteRender.PluginManager)(r?r.plugins:{},t);return r&&r.setPluginManager(n),n},e.prototype.createBezierCurvePainter=function(e){var t=null;return e&&(t=new e([.1,.3,.5,.7,.9,1])),t},e.prototype.refreshRender=function(){var e;null===(e=this.viewsHubProxy.owner)||void 0===e||e.forEach((function(e){return e.refreshRender()}))},Object.defineProperty(e.prototype,"disableOthersSelectingBox",{get:function(){return this.viewsHubProxy.state.disableOthersSelectingBox},set:function(e){this.viewsHubProxy.putState({disableOthersSelectingBox:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"views",{get:function(){if(this.mainViewProxy)throw new Error("you can only read views when useMultiViews is true");if(!this._views)throw new Error("views is not ready");return this._views},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e;null===(e=this.viewsHubProxy.owner)||void 0===e||e.forEach((function(e){return e.release()})),this.eraserRadiusCursor.release(),this.invisiblePluginNode.dispose(),this.cameraObserver.dispose()},e.prototype.setObserverId=function(e){var t;(null===(t=this.viewsHubProxy.owner)||void 0===t?void 0:t.putState({observerId:e}))&&this.dynamicPpt.updateObserverId&&this.dynamicPpt.updateObserverId(e)},Object.defineProperty(e.prototype,"dynamicPpt",{get:function(){return this.viewsHubProxy.owner.dynamicPpt},enumerable:!0,configurable:!0}),e.prototype.fetchNextPptSlideIfNeeded=function(e){var t;if(this.preloadDynamicPPT&&e.index+1<e.scenes.length){var r=null===(t=e.scenes[e.index+1].ppt)||void 0===t?void 0:t.src;this.viewsHubProxy.owner.dynamicPpt.getPptSildeDefinition(r||"")}},e.prototype.getInvisiblePlugin=function(e){return this.invisiblePluginNode.get(e)},e.prototype.dispatchMagixEventWithObject=function(e){this.magixEventsManager.dispatchMagixEvent(e)},e.prototype.addMagixEventListener=function(e,t,r){void 0===r?this.magixEventsManager.addMagixEventListener(e,t):(r<500&&(this.logger.warn("fireInterval "+r+"ms of event "+JSON.stringify(e)+" can't less than 500ms, it's will be reset as 500ms"),r=500),this.magixEventsManager.addMagixEventsListener(e,t,r))},e.prototype.removeMagixEventListener=function(e,t){this.magixEventsManager.removeMagixEventListener(e,t)},e.prototype.waitMagixEvent=function(e){return this.magixEventsManager.waitMagixEvent(e)},e.prototype.assertMainViewProxy=function(){var e=this.mainViewProxy;if(!e)throw new Error("can not use these methods or properties. you should pass useMultiViews: false");return e},e.prototype.scenePreview=function(e,t,r,n){var i=this.assertMainViewProxy().owner;i&&i.scenePreview(e,t,r,n)},e.prototype.generateScreenshot=function(e,t,r){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.assertMainViewProxy().owner.generateScreenshot(e,t,r)]}))}))},e.prototype.fillSceneSnapshot=function(e,t,r,n){var i;null===(i=this.assertMainViewProxy().owner)||void 0===i||i.fillSceneSnapshot(e,t,r,n)},e.prototype.convertToPointInWorld=function(e){var t=this.assertMainViewProxy().owner;return t?t.convertToPointInWorld(e):{x:e.x,y:e.y}},Object.defineProperty(e.prototype,"handToolActive",{get:function(){return this.assertMainViewProxy().state.handToolActive},set:function(e){this.assertMainViewProxy().putState({handToolActive:e})&&this.onlyCallbackRemoteStateModify&&this.callbacks.dispatch("onHandToolActive",(function(t){return t(e)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handToolKey",{get:function(){return this.assertMainViewProxy().state.handToolKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disableCameraTransform",{get:function(){return this.assertMainViewProxy().state.disableCameraTransform},set:function(e){this.assertMainViewProxy().putState({disableCameraTransform:e})&&this.onlyCallbackRemoteStateModify&&this.callbacks.dispatch("onHandToolActive",(function(t){return t(e)}))},enumerable:!0,configurable:!0}),e.prototype.bindHtmlElement=function(e){this.assertMainViewProxy().putState({divElement:e})},e.prototype.setCameraBound=function(e){this.assertMainViewProxy().putState({cameraBound:e})},e.prototype.moveCamera=function(e){this.assertMainViewProxy().putState({cameraMoving:{camera:e}})},e.prototype.moveCameraToContain=function(e){this.assertMainViewProxy().putState({cameraMoving:{toContaint:e}})},e}();t.DisplayerImplement=P},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.parse=function(e){var t=e.split("/");if(""!==t[0])throw new Error("path "+JSON.stringify(e)+' should start with "/"');""===t[t.length-1]&&t.pop();for(var r=[],n=1;n<t.length;++n)r.push(t[n].trim());return r},e.prototype.stringify=function(e){return"/"+e.join("/")},e}();t.ScenePathConverter=n,t.scenePathConverter=new n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96);t.createPlugins=n.createPlugins,t.PluginsImplement=n.PluginsImplement;var i=r(97);t.InvisiblePlugin=i.InvisiblePlugin,t.InvisiblePluginNode=i.InvisiblePluginNode},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(98);t.ViewsHub=n.ViewsHub;var i=r(40);t.ViewVisionMode=i.ViewVisionMode,t.ViewImplement=i.ViewImplement;var o=r(108);t.ViewsImplement=o.ViewsImplement;var a=r(109);t.StateProxy=a.StateProxy},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BecomeInactivityDuration=5600,t.KeepActiveMaxDistance=4,t.HoverMouseEventLimitTimeInterval=100,t.MaxMouseEventLimitTimeInterval=17,t.CustomEventLimitTimeInterval=75,t.TransformLimitTimeInterval=100},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=function(e){function t(r){var n=e.call(this,r)||this;return n.divRef=a.createRef(),n.onMouseDown=function(e){var r=n.divRef.current,i=e.target;r&&!t.isEventFiredOnElement(i,r)&&n.props.onShouldBecomeHide(i)},document.body.addEventListener("mousedown",n.onMouseDown),n}return i(t,e),t.prototype.componentWillUnmount=function(){document.body.removeEventListener("mousedown",this.onMouseDown)},t.isEventFiredOnElement=function(e,t){for(;e;){if(e===t)return!0;e=e.parentElement}return!1},t.prototype.render=function(){var e=o(o({},this.props),{ref:this.divRef});return delete e.onShouldBecomeHide,a.createElement("div",o({},e),this.props.children)},t}(a.Component);t.Menu=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(131);!function(e){e.Connected="connected",e.ConnectFailed="connectFailed",e.Sample="sample"}(t.QualityKind||(t.QualityKind={})),t.whiteEvents=Object.freeze({Realtime:Object.freeze({eventID:9115,proto:n.WhiteBoardRealtime}),Player:Object.freeze({eventID:9118,proto:n.WhiteBoardPlayer})}),t.qualityEvents=Object.freeze({QualityConnection:Object.freeze({eventID:9120,proto:n.WhiteBoardQualityConnection}),QualityDisconnection:Object.freeze({eventID:9121,proto:n.WhiteBoardQualityDisconnection}),QualitySample:Object.freeze({eventID:9123,proto:n.WhiteBoardQualitySample})})},function(e,t){e.exports=r("/OGU")},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=23)}([function(e,t){e.exports=r(11)},function(e,t){e.exports=r(6)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(25);n(r(10)),n(r(27)),n(r(29)),t.createFrameSerialization=function(e,t){return new i.FrameSerializationImplement(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32);!function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(33)),t.contextStack=new n.ContextStackImplement},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(52)),n(r(53))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(42)),n(r(43)),n(r(44)),n(r(45)),n(r(46))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(34)),n(r(7)),n(r(35)),n(r(36))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.isAkkoDecorator=function(e){return e instanceof n},t.createDecorator=function(e){var t=function(e,t,r){return r};return Object.setPrototypeOf(t,n.prototype),Object.defineProperty(t,"payload",{enumerable:!0,configurable:!1,writable:!1,value:e}),t}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(39)),n(r(40)),n(r(13)),n(r(14)),n(r(49))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(41))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Invoker=0]="Invoker",e[e.Event=1]="Event",e[e.Ack=2]="Ack",e[e.Enter=3]="Enter",e[e.Leave=4]="Leave"}(n=t.ActionFrameType||(t.ActionFrameType={})),t.isInvokerFrame=function(e){return e.type===n.Invoker},t.isEventFrame=function(e){return e.type===n.Event},t.isEnterFrame=function(e){return e.type===n.Enter},t.isLeaveFrame=function(e){return e.type===n.Leave},function(e){e[e.System=0]="System",e[e.App=1]="App",e[e.Custom=2]="Custom",e[e.Magix=3]="Magix"}(t.EventScope||(t.EventScope={}))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(56)),n(r(57)),n(r(58)),n(r(59)),n(r(60)),n(r(61)),n(r(15)),n(r(62)),n(r(63)),n(r(64))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(37)),n(r(38))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(5),a=r(9),s=function(){function e(e){this.base64Parser=new o.Base64Parser(e)}return e.prototype.create=function(e){if(!this.isSupportedAkkoVersion(e.akkoVersion))throw new n.RuntimeError("can not support library (built by akko "+e.akkoVersion+")");var t=this.createFormat(e.formatBase64),r=this.createClassReflections(t,e.rootConstructor,e.classDeclarations),i=this.createObjectFormatToClassMap(r);return new c(e.appIdentifier,e.appVersion,e.formatHash,e.akkoVersion,e.rootConstructor,(function(e){return i[e]}),t,r)},e.prototype.isSupportedAkkoVersion=function(e){var t=n.AkkoVersion.split("."),r=e.split(".");return!(r.length<2||t[0]!==r[0]||t[1]!==r[1]||t.length>=3&&!(t[2]>=r[2]))},e.prototype.createFormat=function(e){var t=new i.FormatFactory,r=this.base64Parser.parse(e);return t.createWithBuffer(r)},e.prototype.createClassReflections=function(e,t,r){var i={};for(var o in r){var s=r[o],c=s.clazz,u=c===t,l=this.searchThisAndSuperClassDeclarations(s,r),p=l[0],h=l.slice(1),d=new a.ClassReflectionImplement(e,u,p,h);if(void 0!==Object.getOwnPropertyDescriptor(c,a.ClassReflectionName))throw new n.RuntimeError("class "+c.name+' has defined  reserved word static property "'+a.ClassReflectionName);Object.defineProperty(c,a.ClassReflectionName,{value:d,writable:!1,configurable:!1}),i[o]=d}return Object.freeze(i)},e.prototype.createObjectFormatToClassMap=function(e){var t={};for(var r in e){var n=e[r];t[n.objectFormat.id]=n.clazz}return Object.freeze(t)},e.prototype.searchThisAndSuperClassDeclarations=function(e,t){for(var r=[],n=e;r.push(n),n.superClass&&n.superClass!==Object;)n=this.findClassDeclarationsWithConstructor(n.superClass,t);return r},e.prototype.findClassDeclarationsWithConstructor=function(e,t){for(var r in t){var i=t[r];if(i.clazz===e)return i}throw new n.RuntimeError("can not find superClass")},e}();t.LibraryFactory=s;var c=function(){function e(e,t,r,n,i,o,a,s){this.appIdentifier=e,this.appVersion=t,this.appHash=r,this.akkoVersion=n,this.rootClass=i,this.covertObjectFormatIdToClass=o,this.format=a,this.classReflections=s}return e.prototype.classReflection=function(e){var t=this.classReflections[e];if(!t)throw new Error("can't find class with id "+e);return t},e}();t.Library=c},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),r(3).contextStack.addListener((function(e,t){n=t?e.coreFunctions.creator:void 0})),t.AkkoObject=function(){if(!n){var e=this.constructor&&this.constructor.name;throw e?new Error("can't construct "+e+" out of Magix, it's an AkkoObject"):new Error("can't construct an AkkoObject out of Magix")}n(this)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Readonly=0]="Readonly",e[e.Writable=1]="Writable"}(t.AccessUpdaterKind||(t.AccessUpdaterKind={})),t.getKindWithAccessUpdaterBuffer=function(e){return e.getUint8(0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=function(){function e(e,t,r){this.nextFrameId=0,this.userId=e,this.scopeStorage=t,this.nextFrameId=r}return e.prototype.createFrameId=function(){var e=this.nextFrameId;return this.nextFrameId+=1,e},e.prototype.appendScopeSlices=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.scopeStorage.appendScopeSlice(n)}},e.prototype.allocateIdentifierGenerator=function(){var e=this.scopeStorage.allocScopeId();if(void 0===e)throw new n.RuntimeError("run out of scope ID");return i.createIdentifierGenerator(e)},e}();t.ImageAuthor=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(5),a=r(8),s=r(2),c=function(){function e(e,t,r,n){this.objectOperator=t,this.proxyFrameHandler=r,this.deserializerVersion=n;var o=a.getClassReflection(e.rootClass),c=new i.Serialization({format:e.format,objectAdapter:new s.ParamsObjectAdapter});this.flatFrameSerialization=s.createFrameSerialization(c,o)}return e.prototype.deserialize=function(e,t){var r,n;try{s.ParamsObjectAdapter.startCollection(),r=this.flatFrameSerialization.deserializeActionFrame(e,this.deserializerVersion,t)}finally{n=s.ParamsObjectAdapter.completeCollection()}for(var i=0,o=n;i<o.length;i++){var a=o[i];Object.freeze(a)}return r},e.prototype.serialize=function(e,t,r){var i=new o.ObjectLikeBinder(e,this.objectOperator);try{this.replaceWithBindsActionFrame(i,t);var a=n(n({},t),{beginObjectId:e.createdCount});return this.flatFrameSerialization.serializeActionFrame(a,r)}finally{i.complete()}},e.prototype.getIllusionFrameResult=function(e){return{frameBuffer:e,illusionFrame:this.proxyFrameHandler.deserializeActionFrame(e,this.deserializerVersion,!0)}},e.prototype.replaceWithBindsActionFrame=function(e,t){if(s.isEventFrame(t))e.bind(t.payload);else if(s.isInvokerFrame(t))for(var r=0,n=t.parameters;r<n.length;r++){var i=n[r];e.bind(i)}else s.isEnterFrame(t)?(e.bind(t.userPayload),e.bind(t.connectedPayload)):s.isLeaveFrame(t)&&e.bind(t.payload)},e}();t.ActionFrameHelper=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(11),o=r(16),a=function(){function e(e,t){if(this.users={},this._usersCount=0,this.paddingImageCreatingTask=null,this.proxyRuntime=e,t)for(var r=0,i=t;r<i.length;r++){var o=i[r];this.users[o.userId]={userId:o.userId,nextFrameId:o.nextFrameId,session:o.session,payload:o.payload},this._usersCount+=1}else this.users[n.AdminObserverId]={userId:n.AdminObserverId,nextFrameId:0,session:"",payload:void 0},this._usersCount+=1}return e.prototype.hasUser=function(e){return e in this.users},Object.defineProperty(e.prototype,"userIds",{get:function(){var e=[];for(var t in this.users)e.push(parseInt(t,10));return e.sort()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usersCount",{get:function(){return this._usersCount},enumerable:!0,configurable:!0}),e.prototype.user=function(e,t){var r=this.users[e];if(r){var n=r.payload;return t||(n=this.proxyRuntime.objectOperator.wrapDisplayer(this.proxyRuntime,n)),{userId:e,session:r.session,payload:n}}},e.prototype.snapshotUsers=function(){for(var e=[],t=0,r=this.userIds;t<r.length;t++){var n=r[t],i=this.users[n];e.push({userId:n,nextFrameId:i.nextFrameId,session:i.session,payload:i.payload})}return e},e.prototype.createImageAuthor=function(e){var t=this,r=e.userId,n=this.users[r];if(n){var a=new i.ScopeStorage(e.initializeSlices),s=new o.ImageAuthor(e.userId,a,n.nextFrameId);return Promise.resolve(s)}return new Promise((function(r){t.paddingImageCreatingTask={allocatedUser:e,resolve:r}}))},e.prototype.cancelImageAuthorCreating=function(){this.paddingImageCreatingTask&&(this.paddingImageCreatingTask.resolve(null),this.paddingImageCreatingTask=null)},e.prototype.updateUserNextFrameId=function(e,t){var r=this.users[e];r&&(r.nextFrameId=t)},e.prototype.userEnter=function(e,t,r,n){if(e in this.users||(this._usersCount+=1),this.users[e]={userId:e,nextFrameId:t,session:r,payload:n},this.paddingImageCreatingTask){var a=this.paddingImageCreatingTask.allocatedUser,s=a.userId,c=a.initializeSlices;if(s===e){var u=new i.ScopeStorage(c),l=new o.ImageAuthor(e,u,t);this.paddingImageCreatingTask.resolve(l),this.paddingImageCreatingTask=null}}this.proxyRuntime.reportUsersChanged(this._usersCount)},e.prototype.userLeave=function(e){e in this.users&&(this._usersCount-=1,delete this.users[e]),this.proxyRuntime.reportUsersChanged(this._usersCount)},e}();t.ImageUsers=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=function(){function e(e,t,r){this.author=e,this.actionFrameHelper=t,this.includesFrameHash=r}return e.prototype.appendScopeSlices=function(e){this.author.appendScopeSlices(e)},e.prototype.createIllusionEventFrame=function(e,t,r,n){var i=this.createEventFrame(e,t,r,n);return this.actionFrameHelper.getIllusionFrameResult(i)},e.prototype.createIllusionInvokerFrame=function(e,t,r,n){var i=this.createInvokerFrame(e,t,r,n);return this.actionFrameHelper.getIllusionFrameResult(i)},e.prototype.createEventFrame=function(e,t,r,i){var o=this.author.createFrameId(),a={frameId:o,originalFrameId:o,timestamp:r,authorId:this.author.userId,type:n.ActionFrameType.Event,scopeId:i.scopeId,beginObjectId:0,event:e,payload:t,scope:n.EventScope.Custom};return this.actionFrameHelper.serialize(i,a,this.includesFrameHash)},e.prototype.createInvokerFrame=function(e,t,r,i){var o=this.author.createFrameId(),a={frameId:o,originalFrameId:o,timestamp:r,authorId:this.author.userId,type:n.ActionFrameType.Invoker,scopeId:i.scopeId,beginObjectId:0,methodId:e,parameters:t};return this.actionFrameHelper.serialize(i,a,this.includesFrameHash)},e}();t.IllusionFrameGenerator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=r(11),a=r(21),s=r(72),c=r(18);!function(e){e.Real="real",e.Illusion="illusion"}(t.ImagePhase||(t.ImagePhase={}));var u=function(){function e(e){this.proxyManager=e}return e.prototype.createAccessUpdaterSerialization=function(e){return new o.AccessUpdaterSerialization(this.proxyManager.objectOperator,e)},e.prototype.createWithParameters=function(t){var r=this.findOriginProxyRuntime(t),n=this.proxyManager.createProxyRuntime(t.library,r),i=new c.ImageUsers(n),o=Date.now();n.setupWithParameters(t.constructorScopeId,t.args,o,{logger:t.logger,imageUsers:i,snapshotManager:a.createSnapshotManager(t.library,t.roomUUID),toolsExtra:t.toolsExtra});var u=new s.ImageImplement({frameId:0,timestamp:o,library:t.library,logger:t.logger,proxyRuntime:n,actionFrames:[],imageUsers:i,strategy:e.wrapStrategy(t),callbacks:t.callbacks});return r?n.rootObject.initializeWithOriginRootObject(r.rootObject):n.rootObject.initialize(),u},e.prototype.createWithSnapshot=function(t){var r=this.findOriginProxyRuntime(t),o=this.proxyManager.createProxyRuntime(t.library,r),u=t.snapshotDeserializerVersion;void 0===u&&(u=n.convertToAkkoSerVersion(i.AkkoVersion));var l=o.frameHandler.deserializeSnapshotFrame(t.snapshotFrame,u,t.ignoreHashChecking),p=l.rootObject,h=new c.ImageUsers(o,l.users);o.setupWithRootObject(p,{logger:t.logger,imageUsers:h,snapshotManager:a.createSnapshotManager(t.library,t.roomUUID),toolsExtra:t.toolsExtra});var d=new s.ImageImplement({frameId:l.frameId,timestamp:l.timestamp,library:t.library,logger:t.logger,actionFrames:t.actionFrames,proxyRuntime:o,imageUsers:h,strategy:e.wrapStrategy(t),callbacks:t.callbacks});return r?o.rootObject.initializeWithOriginRootObject(r.rootObject):o.rootObject.initialize(),d},e.wrapStrategy=function(e){var t=e.actionDeserializerVersion;return void 0===t&&(t=n.convertToAkkoSerVersion(i.AkkoVersion)),Object.freeze({roomUUID:e.roomUUID,ignoreHashChecking:e.ignoreHashChecking,includesFrameHash:e.includesFrameHash,deserializerVersion:t})},e.prototype.findOriginProxyRuntime=function(e){var t=e.originalImage;return t?t.proxyRuntime:void 0},e}();t.ImageFactory=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(67))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.idGeneratorWithFrame=function(e){return void 0===e.beginGenerationId?n.createIdentifierGenerator(e.scopeId,e.beginObjectId):n.createV0IdentifierGenerator(e.authorId,e.beginGenerationId)}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(24)),n(r(50));var i=r(4);t.CoreFunctionsMode=i.CoreFunctionsMode,t.ObjectKind=i.ObjectKind,t.DisplayerPhase=i.DisplayerPhase;var o=r(54);t.UpdateEventKind=o.UpdateEventKind;var a=r(8);t.isAkkoObject=a.isAkkoObject,t.getClassReflection=a.getClassReflection,t.getLibrary=a.getLibrary,t.AkkoObject=a.AkkoObject,t.Library=a.Library;var s=r(2);t.createFrameSerialization=s.createFrameSerialization,t.translateToAckFrame=s.translateToAckFrame,t.FramePicker=s.FramePicker,t.ActionFrameType=s.ActionFrameType;var c=r(11);t.socketFactory=c.socketFactory,t.serializeAllocatedUser=c.serializeAllocatedUser,t.serializeSessionBuild=c.serializeSessionBuild,t.getKindWithAccessUpdaterBuffer=c.getKindWithAccessUpdaterBuffer,t.deserializeScopeSlices=c.deserializeScopeSlices,t.deserializeAllocatedUser=c.deserializeAllocatedUser,t.deserializeSessionBuild=c.deserializeSessionBuild,t.deserializeOnlineState=c.deserializeOnlineState,t.deserializePing=c.deserializePing,t.deserializePong=c.deserializePong,t.serializeOnlineState=c.serializeOnlineState,t.serializeScopeSlices=c.serializeScopeSlices,t.serializePing=c.serializePing,t.serializePong=c.serializePong,t.AccessUpdaterSerialization=c.AccessUpdaterSerialization,t.LibraryDescriptionSerialization=c.LibraryDescriptionSerialization,t.AccessUpdaterKind=c.AccessUpdaterKind,t.SocketErrorCode=c.SocketErrorCode,t.ScopeStorage=c.ScopeStorage;var u=r(66);t.ImageUsers=u.ImageUsers,t.ImageFactory=u.ImageFactory,t.ImagePhase=u.ImagePhase,t.IllusionFrameGenerator=u.IllusionFrameGenerator,t.ActionFrameHelper=u.ActionFrameHelper,t.ImageAuthor=u.ImageAuthor;var l=r(3);t.contextStack=l.contextStack,t.ForwardMode=l.ForwardMode;var p=r(9);t.ClassReflectionName=p.ClassReflectionName;var h=r(6);t.isAkkoDecorator=h.isAkkoDecorator,t.isEventPayload=h.isEventPayload;var d=r(21);t.createSnapshotManager=d.createSnapshotManager;var f=r(5);t.wrapCallbacks=f.wrapCallbacks,t.PhaseNode=f.PhaseNode;var y=r(12);t.getEventWithDescription=y.getEventWithDescription,t.Scope=y.Scope,t.EventPhase=y.EventPhase;var A=r(76);t.createClassStaticMethods=A.createClassStaticMethods,t.ArrayMethodDescriptions=A.ArrayMethodDescriptions},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.AdminObserverId=n.AdminObserverId;var i=r(1);t.isBuffer=i.isBuffer,t.createBuffer=i.createBuffer;var o=r(2);t.EventScope=o.EventScope;var a=r(30);t.getResource=a.getResource;var s=r(6);t.event=s.event,t.noEffects=s.noEffects,t.transient=s.transient;var c=r(8);t.__context=c.__context,t.getEnvironment=c.getEnvironment,t.getCurrentTimestamp=c.getCurrentTimestamp,t.getAuthorId=c.getAuthorId,t.hasUser=c.hasUser,t.getUsersCount=c.getUsersCount,t.getUser=c.getUser,t.getUserIds=c.getUserIds,t.getSnapshot=c.getSnapshot,t.Environment=c.Environment},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(26),a=r(10),s=function(){function e(e,t){var r=e.format.anyObjectFormat;this.serialization=e,this.rootClassReflection=t,this.rootObjectFormats=Object.freeze([this.rootClassReflection.objectFormat]),this.oneAnyObjectFormats=Object.freeze([r]),this.twoAnyObjectFormats=Object.freeze([r,r])}return e.prototype.serializeSnapshotFrame=function(e){var t=new i.Writer;return this.serializeFrameHeader(t,e),this.serializeUsers(t,e.users),this.serialization.serialize({writer:t,values:[e.rootObject],objectFormats:this.rootObjectFormats,includesHash:!0}),t.toBuffer()},e.prototype.serializeUsers=function(e,t){var r=[this.serialization.format.anyObjectFormat];e.writeUint32(t.length);for(var n=0,i=t;n<i.length;n++){var o=i[n];e.writeUint32(o.userId),e.writeUint32(o.nextFrameId),e.writeString(o.session),this.serialization.serialize({writer:e,values:[o.payload],objectFormats:r,includesHash:!0})}},e.prototype.deserializeSnapshotFrame=function(e,t,r){var a,s=new i.Reader(e),c=this.deserializeFrameHeader(s);a=t!==i.AkkoSerVersion.V0?this.deserializeUsers(s,t,r):o.deserializeLegacyIdentifierContext(s);var u=this.serialization.deserialize({reader:s,objectFormats:this.rootObjectFormats,ignoreHashChecking:r,version:t})[0];return n(n({},c),{users:a,rootObject:u})},e.prototype.deserializeUsers=function(e,t,r){for(var n=e.readUint32(),i=[],o=[this.serialization.format.anyObjectFormat],a=0;a<n;++a){var s=e.readUint32(),c=e.readUint32(),u=e.readString(),l=this.serialization.deserialize({reader:e,objectFormats:o,ignoreHashChecking:r,version:t})[0];i.push({userId:s,nextFrameId:c,session:u,payload:l})}return Object.freeze(i)},e.prototype.serializeActionFrame=function(e,t){var r=new i.Writer;if(this.serializeFrameHeader(r,e),r.writeUint8(e.type),r.writeInt53(e.scopeId),r.writeInt53(e.beginObjectId),a.isInvokerFrame(e)){r.writeUint32(e.methodId);var n=this.rootClassReflection.methodNames[e.methodId],o=this.rootClassReflection.methods[n].parameterFormatObjects;this.serialization.serialize({writer:r,values:e.parameters,objectFormats:o,includesHash:t})}else a.isEventFrame(e)?(r.writeUint8(e.scope),r.writeString(e.event),this.serialization.serialize({writer:r,values:[e.payload],objectFormats:this.oneAnyObjectFormats,includesHash:t})):a.isEnterFrame(e)?(r.writeString(e.session),this.serialization.serialize({writer:r,values:[e.userPayload,e.connectedPayload],objectFormats:this.twoAnyObjectFormats,includesHash:t})):a.isLeaveFrame(e)&&this.serialization.serialize({writer:r,values:[e.payload],objectFormats:this.oneAnyObjectFormats,includesHash:t});return r.toBuffer()},e.prototype.deserializeActionFrame=function(e,t,r){var o,s=new i.Reader(e),c=this.deserializeFrameHeader(s),u=s.readUint8(),l=0,p=0;switch(t!==i.AkkoSerVersion.V0&&(l=s.readInt53(),p=s.readInt53()),u){case a.ActionFrameType.Invoker:var h=s.readUint32(),d=this.rootClassReflection.methodNames[h],f=this.rootClassReflection.methods[d].parameterFormatObjects,y=this.serialization.deserialize({reader:s,objectFormats:f,ignoreHashChecking:r,version:t});return t===i.AkkoSerVersion.V0&&(o=s.readBigInt()),n(n({},c),{type:u,scopeId:l,beginObjectId:p,beginGenerationId:o,methodId:h,parameters:y});case a.ActionFrameType.Event:var A=s.readUint8(),m=s.readString(),g=this.serialization.deserialize({reader:s,objectFormats:this.oneAnyObjectFormats,ignoreHashChecking:r,version:t})[0];return t===i.AkkoSerVersion.V0&&(o=s.readBigInt()),n(n({},c),{type:u,scopeId:l,beginObjectId:p,beginGenerationId:o,scope:A,event:m,payload:g});case a.ActionFrameType.Ack:return n(n({},c),{type:u,scopeId:l,beginObjectId:p});case a.ActionFrameType.Enter:var v=s.readString(),b=this.serialization.deserialize({reader:s,objectFormats:this.twoAnyObjectFormats,ignoreHashChecking:r,version:t}),P=b[0],S=b[1];return n(n({},c),{type:u,scopeId:l,beginObjectId:p,session:v,userPayload:P,connectedPayload:S});case a.ActionFrameType.Leave:return g=this.serialization.deserialize({reader:s,objectFormats:this.oneAnyObjectFormats,ignoreHashChecking:r,version:t})[0],n(n({},c),{type:u,scopeId:l,beginObjectId:p,payload:g});default:throw new Error("invalid type "+u)}},e.prototype.serializeFrameHeader=function(e,t){e.writeUint32(t.frameId),e.writeUint32(t.originalFrameId),e.writeInt53(t.timestamp),e.writeUint32(t.authorId)},e.prototype.deserializeFrameHeader=function(e){return{frameId:e.readUint32(),originalFrameId:e.readUint32(),timestamp:e.readInt53(),authorId:e.readUint32()}},e}();t.FrameSerializationImplement=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeLegacyIdentifierContext=function(e){var t=e.readInt32();e.readInt32();for(var r=[],n=0;n<t;++n){var i=e.readUint32();r.push({userId:i,nextFrameId:0,session:"",payload:void 0})}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(10),o=r(28);function a(e,t){var r=e.getInt32(t);return e.getInt32(t+4)*o.Pow32+r}t.translateToAckFrame=function(e){for(var t=new n.Reader(e),r=new n.Writer,o=0;o<20;++o)r.writeUint8(t.readUint8());return r.writeUint8(i.ActionFrameType.Ack),r.toBuffer()};var s=function(){function e(e){if(e.byteLength<20)throw new Error("Buffer is to short");this.frameBuffer=e}return Object.defineProperty(e.prototype,"frameId",{get:function(){return this.frameBuffer.getUint32(0)},set:function(e){this.frameBuffer.setUint32(0,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalFrameId",{get:function(){return this.frameBuffer.getUint32(4)},set:function(e){this.frameBuffer.setUint32(4,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return a(this.frameBuffer,8)},set:function(e){var t=0|e,r=(e-t)/o.Pow32;this.frameBuffer.setInt32(8,t),this.frameBuffer.setInt32(12,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorId",{get:function(){return this.frameBuffer.getUint32(16)},set:function(e){this.frameBuffer.setUint32(16,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.frameBuffer.getUint8(20)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scopeId",{get:function(){return a(this.frameBuffer,21)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beginObjectId",{get:function(){return a(this.frameBuffer,29)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.frameBuffer.getUint8(37)},enumerable:!0,configurable:!0}),e.prototype.fetchEventContent=function(){var e=new n.Reader(this.frameBuffer);if(e.skipBytes(37),this.type===i.ActionFrameType.Event){var t=e.readUint8();return{event:e.readString(),scope:t}}},e}();t.FramePicker=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pow32=Math.pow(2,32),t.Pow16=Math.pow(2,16),t.UInt32Mask=t.Pow32-1,t.UInt16Mask=t.Pow16-1,t.UInt8Mask=255},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.createObject=function(r,n){var i=e.prototype.createObject.call(this,r,n);return t.objectsCollection&&t.objectsCollection.push(i),i},t.startCollection=function(){this.objectsCollection=[]},t.completeCollection=function(){try{if(!this.objectsCollection)return[];for(var e=0,t=this.objectsCollection;e<t.length;e++)delete t[e].__identifier;return this.objectsCollection}finally{this.objectsCollection=void 0}},t.objectsCollection=void 0,t}(r(0).DefaultObjectAdapter);t.ParamsObjectAdapter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(31))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),r(3).contextStack.addListener((function(e,t){n=t&&e.tools?e.tools.extra:void 0})),t.getResource=function(){if(!n)throw new Error("you can not call this function out of Magix");return n.resource}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.listeners=[]}return Object.defineProperty(e.prototype,"currentNode",{get:function(){return this._currentNode},enumerable:!0,configurable:!0}),e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.runWith=function(e,t){var r=this._currentNode;this._currentNode=e,this.dispatch(e,!0);try{return t()}finally{this._currentNode=r,this.dispatch(e,!1),r&&this.dispatch(r,!0)}},e.prototype.dispatch=function(e,t){for(var r=0,n=this.listeners;r<n.length;r++){var i=n[r];try{i(e,t)}catch(e){console.error(e)}}},e}();t.ContextStackImplement=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SingleForward=0]="SingleForward",e[e.DoubleForward=1]="DoubleForward"}(t.ForwardMode||(t.ForwardMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);t.transient=n.createDecorator(null)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);t.noEffects=n.createDecorator(null)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(7),o=function(e){this.eventFilter=new n.EventFilterHub(e).filter};t.isEventPayload=function(e){return"object"==A(e)&&null!==e&&e instanceof o},t.event=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.createDecorator(new o(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventFilterHub=function(e){var t=this;this.filters=[],this.filter=function(e,r,n){for(var i=0,o=t.filters;i<o.length;i++)if((0,o[i])(e,r,n))return!0;return!1};for(var r=[],n=function(e){var t=void 0;if("function"==typeof e)t=e;else if("string"==typeof e)t=function(t){return t===e};else{if(!(e instanceof RegExp))throw new Error("unrecognized condition "+e);t=function(t){return e.test(t)}}r.push(t)},i=0,o=e;i<o.length;i++)n(o[i]);this.filters=Object.freeze(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(2);function o(e){switch(e){case i.EventScope.System:return n.System;case i.EventScope.App:return n.App;case i.EventScope.Custom:return n.Custom;default:return n.Magix}}!function(e){e.System="system",e.App="app",e.Custom="custom",e.Magix="magix"}(n=t.Scope||(t.Scope={})),function(e){e.Dispatched="dispatched",e.Updated="updated",e.Canceled="canceled"}(t.EventPhase||(t.EventPhase={})),t.getEventWithDescription=function(e,t){return{event:e.event,payload:e.payload,authorId:e.authorId,scope:o(e.scope),phase:t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Real="real",e.Illusion="illusion",e.NoEffects="noEffects"}(t.Environment||(t.Environment={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1),o=r(9),a=r(3),s=r(13),c=r(47),u=r(14);a.contextStack.addListener((function(e,t){n=t?e.proxyRuntime.objectOperator:void 0}));var l,p,h=(l=function(){if("undefined"!=typeof window&&void 0!==window.document)return window.atob.bind(window);var e=r(48);if(!e)throw new i.RuntimeError('need install "atob" before launch');return e}(),p=new s.LibraryFactory(l),new i.Initializer({akkoVersion:i.AkkoVersion,akkoObjectBaseClass:u.AkkoObject,libraryFactory:p.create.bind(p),coreFunctions:c.getInitializerCoreFunctions()}));t.__context=h.context,t.getLibrary=h.getLibrary,t.isAkkoObject=function(e){if(!n)throw new Error("can't call isAkkoObject out of Magix");return n.isValidObject(e)||h.isAkkoObject(e)},t.getClassReflection=function e(t){if("function"==typeof t){var r=t[o.ClassReflectionName];if("object"==A(r)&&null!==r)return r}else if(h.isAkkoObject(t))return e(t.constructor)}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(6),a=r(1);t.ClassReflectionPropertyMode=a.ClassReflectionPropertyMode,t.ClassReflectionName="__reflection";var s=function(){function e(e,t,r,o){this.isRootClass=t,this.id=r.classId,this.name=r.clazz.name,this.clazz=r.clazz,this.superClass=r.superClass,this.objectFormat=e.findObjectFormat(r.objectFormatId);for(var a={},s={},c=n([r],o),u=c.length-1;u>=0;--u)for(var l=c[u],p=l.clazz,h=0,d=l.members;h<d.length;h++){var f=d[h];i.isClassProperty(f)?a[f.name]=this.createProperty(f,p,this.objectFormat):i.isClassMethod(f)&&(s[f.name]=this.createMethod(f,p,e))}this.properties=Object.freeze(a),this.methods=Object.freeze(s),this.methodNames=Object.freeze(Object.keys(this.methods))}return e.prototype.createProperty=function(e,t,r){var n=e.decorators.some((function(e){return e===o.transient}));return Object.freeze({name:e.name,mode:e.mode,belongsClass:t,isTransient:n,isPublic:e.isPublic,objectFormat:r.properties[e.name],decorators:e.decorators})},e.prototype.createMethod=function(e,t,r){for(var i=e.name,o=e.parameters,a=e.decorators,s=[],c=0,u=o;c<u.length;c++){var l=u[c];s.push(r.findObjectFormat(l))}return Object.freeze({name:i,belongsClass:t,isPublic:e.isPublic,parameterFormatObjects:Object.freeze(s),decorators:Object.freeze(n(a))})},e}();t.ClassReflectionImplement=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e){this.atob=e}return e.prototype.parse=function(e){for(var t=new String(this.atob(e)),r=n.createBuffer(t.length),i=0;i<t.length;++i)r.setUint8(i,t.charCodeAt(i));return r},e}();t.Base64Parser=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbacks=function(e){var t={},r=function(r){var n=e[r];t[r]="function"==typeof n?function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{e=n.apply(t,r)}catch(e){console.error(e)}return e}:n};for(var n in e)r(n);return Object.freeze(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function i(e,t){Object.defineProperty(e,"__identifier",{enumerable:!1,configurable:!0,value:t})}var o=function(){function e(e,t){this.foundObjects=[],this.idGenerator=e,this.operator=t}return e.prototype.complete=function(){for(var e=0,t=this.foundObjects;e<t.length;e++)delete t[e].__identifier},e.prototype.bind=function(e){if("object"!=A(e))return e;if(null===e)return e;if(n.isBuffer(e))return e;if(this.operator.isDisplayerObject(e))return this.operator.copyDisplayer(e);if(e.constructor===Array)return this.bindArray(e);if(e.constructor===Object)return this.bindObject(e);throw new Error("can't let object of "+e.constructor.name+" pass Magix border")},e.prototype.bindArray=function(e){var t=e.__identifier;void 0===t&&(i(e,t=this.idGenerator.generate()),this.foundObjects.push(e));for(var r=0;r<e.length;++r)this.bind(e[r])},e.prototype.bindObject=function(e){var t=e.__identifier;for(var r in void 0===t&&(i(e,t=this.idGenerator.generate()),this.foundObjects.push(e)),e)this.bind(e[r])},e}();t.ObjectLikeBinder=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._phase=e.phase||e.getCurrentPhase(),this.getCurrentPhase=e.getCurrentPhase,this.onPhaseChanged=e.onPhaseChanged}return Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),e.prototype.touch=function(){var e=this.getCurrentPhase(),t=this._phase;t!==e&&(this._phase=e,this.onPhaseChanged&&this.onPhaseChanged(e,t))},e}();t.PhaseNode=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r=this;this.paddingPayloadList=null,this.callback=function(e){if(r.paddingPayloadList)r.paddingPayloadList.push(e);else try{r._callback(e)}catch(e){r.logger.error(e)}},this.logger=e,this._callback=t}return Object.defineProperty(e.prototype,"isPadding",{get:function(){return!!this.paddingPayloadList},set:function(e){if(this.isPadding!==e)if(e)this.paddingPayloadList=[];else{for(var t=0,r=this.paddingPayloadList;t<r.length;t++){var n=r[t];try{this._callback(n)}catch(e){this.logger.error(e)}}this.paddingPayloadList=null}},enumerable:!0,configurable:!0}),e}();t.CallbackPaddingNode=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o,a,s,c,u,l,p,h,d,f=r(3);function y(e){n=e.creator,i=e.updater,o=e.wrapper,a=e.unwrapper,s=e.jsxUnwrapper,c=e.getter,u=e.setter,l=e.caller,p=e.remover,h=e.prefix,d=e.postfix}t.getInitializerCoreFunctions=function(){return{creator:function(e){return n(e)},updater:function(e){return i(e)},wrapper:function(e){return o(e)},unwrapper:function(e){return a(e)},jsxUnwrapper:function(e){return s(e)},getter:function(e,t){return c(e,t)},setter:function(e,t,r){return u(e,t,r)},caller:function(e,t,r,n){return l(e,t,r,n)},remover:function(e,t){return p(e,t)},prefix:function(e,t,r){return h(e,t,r)},postfix:function(e,t,r){return d(e,t,r)}}};var A=Object.freeze({creator:function(e){return e},updater:function(e){return e},wrapper:function(e){return e},unwrapper:function(e){return e},jsxUnwrapper:function(e){return e},getter:function(e,t){return e[t]},setter:function(e,t,r){return e[t]=r},caller:function(e,t,r,n){return(n||e)[t].apply(e,r)},remover:function(e,t){return delete e[t]},prefix:function(e,t,r){return e[t]+=r},postfix:function(e,t,r){var n=e[t];return e[t]+=r,n}});y(A),f.contextStack.addListener((function(e,t){y(t?e.coreFunctions:A)}))},function(e,t){e.exports=r(59)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3);function o(){return new Error("you can not call this function out of Magix")}i.contextStack.addListener((function(e,t){n=t&&e.tools?e.tools:void 0})),t.isInMagix=function(){return!!i.contextStack.currentNode},t.getEnvironment=function(){if(!n)throw o();return n.environment},t.getCurrentTimestamp=function(){if(!n)throw o();return n.timestamp},t.getAuthorId=function(){if(!n)throw o();return n.functions.getAuthorId()},t.hasUser=function(e){if(!n)throw o();return n.functions.hasUser(e)},t.getUsersCount=function(){if(!n)throw o();return n.functions.getUsersCount()},t.getUser=function(e){if(!n)throw o();return n.functions.getUser(e)},t.getUserIds=function(){if(!n)throw o();return n.functions.getUserIds()},t.getSnapshot=function(){if(!n)throw o();return n.snapshot}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(51))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RoomDelete="roomDelete",e.RoomZombie="roomZombie",e.RoomBan="roomBan",e.GatewayAdjust="GatewayAdjust",e.KickByAdmin="kickByAdmin",e.ReplaceByOther="replaceByOther",e.Crash="crash"}(t.KickReason||(t.KickReason={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FlatObject=0]="FlatObject",e[e.AkkoObject=1]="AkkoObject",e[e.Array=2]="Array",e[e.Displayer=3]="Displayer"}(t.ObjectKind||(t.ObjectKind={})),function(e){e[e.Uncommitted=0]="Uncommitted",e[e.Committed=1]="Committed",e[e.Rejected=2]="Rejected"}(t.DisplayerPhase||(t.DisplayerPhase={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Illusion=0]="Illusion",e[e.IllusionRebuild=1]="IllusionRebuild",e[e.Real=2]="Real",e[e.RealAck=3]="RealAck",e[e.Outside=4]="Outside"}(t.CoreFunctionsMode||(t.CoreFunctionsMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(55))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Inserted=0]="Inserted",e[e.Updated=1]="Updated",e[e.Removed=2]="Removed"}(t.UpdateEventKind||(t.UpdateEventKind={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.serializeAllocatedUser=function(e){var t=new n.Writer;t.writeUint32(e.userId),t.writeUint32(e.initializeSlices.length);for(var r=0,i=e.initializeSlices;r<i.length;r++){var o=i[r];t.writeInt53(o.beginScopeId),t.writeUint32(o.count)}return t.toBuffer()},t.deserializeAllocatedUser=function(e){for(var t=new n.Reader(e),r=t.readUint32(),i=[],o=t.readUint32(),a=0;a<o;++a){var s=t.readInt53(),c=t.readUint32();i.push(Object.freeze({beginScopeId:s,count:c}))}return Object.freeze({userId:r,initializeSlices:Object.freeze(i)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(2),a=r(5),s=r(15),c=function(){function e(e,t){var r=t.format.anyObjectFormat;this.serialization=new i.Serialization({format:t.format,objectAdapter:new o.ParamsObjectAdapter}),this.objectOperator=e,this.oneAnyObjectFormats=Object.freeze([r]),this.twoAnyObjectFormats=Object.freeze([r,r])}return e.prototype.serialize=function(e){var t=new i.Writer,r=i.createIdentifierGenerator(i.NoEffectScopeId),n=new a.ObjectLikeBinder(r,this.objectOperator);t.writeUint8(e.kind);try{switch(e.kind){case s.AccessUpdaterKind.Writable:var o=e,c=o.userPayload,u=o.connectedPayload;n.bind(c),n.bind(u),this.serialization.serialize({writer:t,values:[c,u],objectFormats:this.twoAnyObjectFormats,includesHash:!1});break;case s.AccessUpdaterKind.Readonly:var l=e.payload;n.bind(l),this.serialization.serialize({writer:t,values:[l],objectFormats:this.oneAnyObjectFormats,includesHash:!1})}return t.toBuffer()}finally{n.complete()}},e.prototype.deserialize=function(t){try{o.ParamsObjectAdapter.startCollection();var r=new i.Reader(t),n=r.readUint8();switch(n){case s.AccessUpdaterKind.Writable:var a=this.serialization.deserialize({reader:r,objectFormats:this.twoAnyObjectFormats,ignoreHashChecking:!0,version:e.akkoSerVersion});return{kind:n,userPayload:a[0],connectedPayload:a[1]};case s.AccessUpdaterKind.Readonly:return{kind:n,payload:this.serialization.deserialize({reader:r,objectFormats:this.oneAnyObjectFormats,ignoreHashChecking:!0,version:e.akkoSerVersion})[0]};default:throw new Error("invalid kind "+n)}}finally{o.ParamsObjectAdapter.completeCollection()}},e.akkoSerVersion=i.convertToAkkoSerVersion(n.AkkoVersion),e}();t.AccessUpdaterSerialization=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){}return e.prototype.serialize=function(e){var t=new n.Writer;return t.writeString(e.libIdentifier),t.writeString(e.appIdentifier),t.writeString(e.appVersion),t.writeString(e.appHash),t.toBuffer()},e.prototype.deserialize=function(e){var t=new n.Reader(e);return{libIdentifier:t.readString(),appIdentifier:t.readString(),appVersion:t.readString(),appHash:t.readString()}},e}();t.LibraryDescriptionSerialization=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.serializeSessionBuild=function(e){var t=new n.Writer;return t.writeString(e.session),t.writeString(e.sessionToken),t.writeString(e.slice),t.toBuffer()},t.deserializeSessionBuild=function(e){var t=new n.Reader(e),r=t.readString(),i=t.readString(),o=t.readString();return Object.freeze({session:r,sessionToken:i,slice:o})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function i(e){var t=new n.Writer;return t.writeUint32(e.id),t.writeInt53(e.timestamp),t.toBuffer()}function o(e){var t=new n.Reader(e),r=t.readUint32(),i=t.readInt53();return Object.freeze({id:r,timestamp:i})}t.serializePing=function(e){return i(e)},t.serializePong=function(e){return i(e)},t.deserializePing=function(e){return o(e)},t.deserializePong=function(e){return o(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.serializeOnlineState=function(e){var t=new n.Writer;return t.writeUint32(e.userId),t.writeUint8(e.isOnline?255:0),t.toBuffer()},t.deserializeOnlineState=function(e){var t=new n.Reader(e),r=t.readUint32(),i=!!t.readUint8();return Object.freeze({userId:r,isOnline:i})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){if(this.storageSlices=[],this.usingSlice=void 0,this.nextScopeId=0,e)for(var t=0,r=e;t<r.length;t++){var n=r[t];this.appendScopeSlice(n)}}return e.prototype.allocScopeId=function(){if(this.usingSlice){var e=this.nextScopeId;return e===this.usingSlice.beginScopeId+this.usingSlice.count-1?(this.usingSlice=this.storageSlices.shift(),this.usingSlice&&(this.nextScopeId=this.usingSlice.beginScopeId)):this.nextScopeId+=1,e}},e.prototype.appendScopeSlice=function(e){this.usingSlice?this.storageSlices.push(e):(this.usingSlice=e,this.nextScopeId=e.beginScopeId)},e}();t.ScopeStorage=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.deserializeScopeSlices=function(e){for(var t=new n.Reader(e),r=[],i=t.readUint32(),o=0;o<i;++o){var a=t.readInt53(),s=t.readUint32();r.push(Object.freeze({beginScopeId:a,count:s}))}return Object.freeze(r)},t.serializeScopeSlices=function(e){var t=new n.Writer;t.writeUint32(e.length);for(var r=0,i=e;r<i.length;r++){var o=i[r];t.writeInt53(o.beginScopeId),t.writeUint32(o.count)}return t.toBuffer()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65);t.socketFactory=new n.AkkoSocketFactory(["error","snapshot","action","chunk","session-build","update-online","allocate-user","release-user","allocate-scope","update-access","ban-access","hang-up","library-description","ping","pong"]),function(e){e[e.Undefined=0]="Undefined",e[e.NoUserToRelease=1]="NoUserToRelease",e[e.WritableAccessForbidden=2]="WritableAccessForbidden",e[e.StuffedOfWritableUsers=3]="StuffedOfWritableUsers",e[e.WrongWritablePhase=4]="WrongWritablePhase"}(t.SocketErrorCode||(t.SocketErrorCode={}))},function(e,t){e.exports=r(30)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);t.ImageAuthor=n.ImageAuthor;var i=r(17);t.ActionFrameHelper=i.ActionFrameHelper;var o=r(18);t.ImageUsers=o.ImageUsers;var a=r(19);t.IllusionFrameGenerator=a.IllusionFrameGenerator;var s=r(20);t.ImagePhase=s.ImagePhase,t.ImageFactory=s.ImageFactory},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(68);t.createSnapshotManager=function(e,t){return void 0===t&&(t=""),new n.SnapshotManagerImplement(t,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(3),a=r(4),s=r(69),c=null,u=null;o.contextStack.addListener((function(e,t){t&&e.tools?(n=e.coreFunctions,u=e.tools.idGenerator,c=e.proxyRuntime):(n=null,u=null,c=null)}));var l=function(){function e(e,t){this.format=t.format,this.covertIdToClass=t.covertObjectFormatIdToClass,this.description=Object.freeze({roomUUID:e,appIdentifier:t.appIdentifier,appVersion:t.appVersion,appHash:t.appHash,akkoVersion:t.akkoVersion})}return e.prototype.createSnapshot=function(e,t){if(void 0===t&&(t=!1),!o.contextStack.currentNode)throw new Error("can't call createSnapshot out of Magix");var r=n.wrapper(e),a=new i.Writer,s=this.readObjectFormatWith(r),u=t;return a.writeUint8(t?255:0),t&&(a.writeString(this.description.roomUUID),a.writeString(this.description.appIdentifier),a.writeString(this.description.appVersion),a.writeString(this.description.appHash),a.writeString(this.description.akkoVersion)),a.writeUint32(s.id),c.frameHandler.createSerialization(this.format).serialize({writer:a,values:[r],objectFormats:[s],includesHash:u}),a.toBuffer().freeze()},e.prototype.recoverWithSnapshot=function(e,t){if(!o.contextStack.currentNode)throw new Error("can't call recoverWithSnapshot out of Magix");var r=n.wrapper(t),a=new i.Reader(e),l=this.readDescription(a),p=a.readUint32();if(r&&this.readObjectFormatWith(r).id!==p)throw new Error("target's class isn't matching");var h=this.format.findObjectFormat(p),d=this.shouldOverrideTarget(l)?r:void 0;return new s.ObjectPutter({rootObject:d,format:this.format,snapshotObjectFormats:[h],idGenerator:u,proxyRuntime:c,covertIdToClass:this.covertIdToClass}).recoverFrom(a,void 0!==l)},e.prototype.readObjectFormatWith=function(e){var t=c.objectOperator;if(t.kind(e)!==a.ObjectKind.AkkoObject)throw new Error("can't only create snapshot of AkkoObject");return t.getClassReflection(e).objectFormat},e.prototype.readDescription=function(e){if(e.readUint8()){var t=e.readString(),r=e.readString(),n=e.readString(),i=e.readString(),o=e.readString();if(r!==this.description.appIdentifier)throw new Error("invalid snapshot: appIdentifier not matches");if(n!==this.description.appVersion)throw new Error("invalid snapshot: appVersion not matches");if(i!==this.description.appHash)throw new Error("invalid snapshot: appHash not matches");if(o!==this.description.akkoVersion)throw new Error("invalid snapshot: akkoVersion not matches");return{roomUUID:t,appIdentifier:r,appVersion:n,appHash:i,akkoVersion:o}}},e.prototype.shouldOverrideTarget=function(e){return!e||e.roomUUID===this.description.roomUUID},e}();t.SnapshotManagerImplement=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(70),a=r(71),s=function(){function e(e){var t=this;this.assertObjectFormat=function(e){var r=t.proxyRuntime.objectOperator.getClassReflection(e);if(r)return r.objectFormat};var r=new o.ObjectsFlatter(e.proxyRuntime.objectOperator);this.format=e.format,this.snapshotObjectFormats=e.snapshotObjectFormats,this.idGenerator=e.idGenerator,this.proxyRuntime=e.proxyRuntime,this.covertIdToClass=e.covertIdToClass,r.collectValue(e.rootObject),this.floatObjects=r.floatObjects}return e.prototype.recoverFrom=function(t,r){for(var n,o=[],s=new a.OverrideObjectAdapter(this.proxyRuntime,this.covertIdToClass,this.idGenerator,this.floatObjects,(function(e,t,r){return o.push({object:e,tempObject:t,classReflection:r})})),c=!r,u=new i.Serialization({format:this.format,objectAdapter:s,assertObjectFormat:this.assertObjectFormat}).deserialize({reader:t,objectFormats:this.snapshotObjectFormats,ignoreHashChecking:c,version:e.akkoSerVersion})[0],l=0,p=o;l<p.length;l++){var h=p[l],d=h.object,f=h.tempObject,y=h.classReflection;this.proxyRuntime.objectOperator.override(d,f,y),f===u&&(n=d)}return n},e.akkoSerVersion=i.convertToAkkoSerVersion(n.AkkoVersion),e}();t.ObjectPutter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.operator=e,this.floatObjects={}}return e.prototype.collectValue=function(e){var t=this;if("object"==A(e)&&null!==e){var r=this.operator.identifier(e);return r in this.floatObjects||(this.floatObjects[r]=e,this.operator.forEach(e,(function(e){t.collectValue(e)}))),r}},e}();t.ObjectsFlatter=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=r(4),s=r(9),c=function(e){function t(t,r,n,i,a){var s=e.call(this,(function(e,t,r,n){return s.handleDecorateObject(e,t,r,n)}))||this;return s.decorateObjectEnums=Object.freeze([o.ObjectEnum.Object,o.ObjectEnum.Array]),s.proxyRuntime=t,s.idGenerator=n,s.covertIdToClass=r,s.toOverrideObjects=i,s.overrideNodeCatcher=a,s}return i(t,e),t.prototype.createObject=function(t,r){if(r===o.ObjectEnum.HangUpObject)throw new o.DeserializerError("not support hang up object: "+t);return e.prototype.createObject.call(this,t,r)},t.prototype.handleDecorateObject=function(e,t,r,n){var i=e.__identifier,a=this.proxyRuntime.objectOperator,s=this.getClassReflection(t,n),c=this.toOverrideObjects[i];if(!c||!this.isTypeMatch(c,t))switch(t){case o.ObjectType.Array:c=a.createObject(this.idGenerator.generate(),[]);break;case o.ObjectType.DeducedObject:c=a.createObject(this.idGenerator.generate(),{});break;case o.ObjectType.AssertedObject:Object.setPrototypeOf(e,s.clazz.prototype),c=a.createObject(this.idGenerator.generate(),e);break;default:throw new o.DeserializerError("invalid ObjectType "+t)}for(var u=0,l=r;u<l.length;u++){var p=l[u];p.object[p.key]=c}this.overrideNodeCatcher(c,e,s)},t.prototype.isTypeMatch=function(e,t){switch(this.proxyRuntime.objectOperator.kind(e)){case a.ObjectKind.Array:return t===o.ObjectType.Array;case a.ObjectKind.FlatObject:return t===o.ObjectType.DeducedObject;case a.ObjectKind.AkkoObject:return t===o.ObjectType.AssertedObject;default:return!1}},t.prototype.getClassReflection=function(e,t){if(e===o.ObjectType.AssertedObject){if(!t)throw new o.DeserializerError("expect object format");var r=this.covertIdToClass(t.id);if(!r)throw new o.DeserializerError("can't find class by object format id "+t.id);return r[s.ClassReflectionName]}return null},t}(o.DefaultObjectAdapter);t.OverrideObjectAdapter=c},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(4),c=r(20),u=r(5),l=r(73),p=r(74),h=r(17),d=r(22),f=r(19),y=r(2),A=function(){function e(e){var t=this;if(this.modifiable=!0,this.frameGenerator=null,this.didDestroy=!1,this.assertAppendFrameId=function(e){var r=e.frameId,n=t.triggerInvoker.frameId+1;if(n!==r)throw new Error("find unexpected frame id "+r+", wanna "+n)},this.invokeMethod=function(e,r){var n;t.assertEnableSendActionFrames();var i=Date.now(),o=t.frameGenerator;if(!o)throw new Error("cannot invoke "+e+", frameGenerator is not prepare");var a=o.author.allocateIdentifierGenerator(),c=t.proxyRuntime.block.runWithContinuousUpdated((function(){var c=t.proxyRuntime.createFrameSection(),u={authorId:o.author.userId,mode:s.CoreFunctionsMode.Illusion,frameSection:c,timestamp:i,identifierGenerator:a};n=t.proxyRuntime.block.runWithMagix(u,(function(){var n,s=t.triggerInvoker.methodNameToId(e);try{n=o.createIllusionInvokerFrame(s,r,i,a)}catch(e){throw t.clientCrashWithError(e),e}try{return t.triggerInvoker.invoke(e,n.illusionFrame.parameters)}finally{t.handleActionFrame(n.frameBuffer,c)}}))}));return t.callbacks.onModified&&c.didUpdated&&t.callbacks.onModified(),n},this.currentPhase=function(){var e=t.branchImageHelper.illusionQueue;return e&&0===e.length?c.ImagePhase.Real:c.ImagePhase.Illusion},this.library=e.library,this.logger=e.logger,this.proxyRuntime=e.proxyRuntime,this.actionFrameHelper=this.createActionFrameHelper(e),this.imageUsers=e.imageUsers,this.strategy=e.strategy,this.callbacks=u.wrapCallbacks(e.callbacks||{}),this.callbacks.onEventFire&&(this.eventFireNode=new u.CallbackPaddingNode(e.logger,this.callbacks.onEventFire),this.eventFireNode.isPadding=!0),this.triggerInvoker=new l.TriggerInvoker({library:this.library,imageUsers:this.imageUsers,proxyRuntime:e.proxyRuntime,onEventFire:this.eventFireNode&&this.eventFireNode.callback,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame}),this.triggerInvoker.frameId=e.frameId,this.triggerInvoker.timestamp=e.timestamp,this.proxyRuntime.rootObject.onInvokedTriggerMethod=this.invokeMethod,e.actionFrames)for(var r=0,n=e.actionFrames;r<n.length;r++){var i=n[r],o=this.proxyRuntime.frameHandler.deserializeActionFrame(i,this.strategy.deserializerVersion,this.strategy.ignoreHashChecking),a=d.idGeneratorWithFrame(o);this.triggerInvoker.appendAction(o,{authorId:o.authorId,timestamp:o.timestamp,mode:s.CoreFunctionsMode.Real,identifierGenerator:a})}this.phaseNode=new u.PhaseNode({phase:c.ImagePhase.Real,getCurrentPhase:this.currentPhase,onPhaseChanged:this.callbacks.onPhaseChanged}),this.branchImageHelper=new p.BranchImageHelper(this.logger,this.strategy,this.proxyRuntime,this.triggerInvoker,this.assertAppendFrameId,this.callbacks.onReceivedRttReport||function(){},this.callbacks.onIllusionQueueLengthChanged||function(){}),this.triggerInvoker.completeInit(),this.eventFireNode&&Promise.resolve().then((function(){return t.eventFireNode.isPadding=!1})).catch((function(e){return console.error(e)}))}return e.prototype.createActionFrameHelper=function(e){return new h.ActionFrameHelper(e.library,e.proxyRuntime.objectOperator,e.proxyRuntime.frameHandler,e.strategy.deserializerVersion)},Object.defineProperty(e.prototype,"hasDoubleLines",{get:function(){return this.proxyRuntime.hasDoubleLines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this.proxyRuntime.rootObject.displayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userIds",{get:function(){return this.imageUsers.userIds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usersCount",{get:function(){return this.imageUsers.usersCount},enumerable:!0,configurable:!0}),e.prototype.hasUser=function(e){return this.imageUsers.hasUser(e)},e.prototype.user=function(e){return this.imageUsers.user(e,!1)},Object.defineProperty(e.prototype,"verifiedFrameId",{get:function(){return this.triggerInvoker.frameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameId",{get:function(){var e=this.triggerInvoker.frameId,t=this.branchImageHelper.illusionQueue;return t&&(e+=t.length),e},set:function(e){var t=this.branchImageHelper.illusionQueue,r=e;t&&(r-=t.length),this.triggerInvoker.frameId=r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.triggerInvoker.timestamp},enumerable:!0,configurable:!0}),e.prototype.appendActionFrames=function(e){var t,r,n=this;this.eventFireNode&&(this.eventFireNode.isPadding=!0);try{t=this.proxyRuntime.block.runWithContinuousUpdated((function(){r=n.proxyRuntime.hasDoubleLines?n.proxyRuntime.hasBranch?n.branchImageHelper.appendActionFrames(e):n.branchImageHelper.appendActionFramesWithDoubleMode(e):n.appendActionFramesWithSingleMode(e)})),this.phaseNode.touch()}finally{this.eventFireNode&&(this.eventFireNode.isPadding=!1)}return this.callbacks.onModified&&t.didUpdated&&this.callbacks.onModified(),r},e.prototype.appendScopeSlices=function(e){this.frameGenerator&&this.frameGenerator.appendScopeSlices(e)},e.prototype.appendActionFramesWithSingleMode=function(e){for(var t,r=0,n=e;r<n.length;r++){var i=n[r],o=this.proxyRuntime.frameHandler.deserializeActionFrame(i,this.strategy.deserializerVersion,this.strategy.ignoreHashChecking),a=d.idGeneratorWithFrame(o);this.assertAppendFrameId(o),t=this.triggerInvoker.appendAction(o,{authorId:o.authorId,mode:s.CoreFunctionsMode.Real,timestamp:o.timestamp,identifierGenerator:a})}return t},e.prototype.dispatch=function(e,t){var r=this;this.assertEnableSendActionFrames();var n=Date.now(),i=this.frameGenerator;if(!i)throw new Error("cannot dispatch event "+e+", frameGenerator is not prepare");var o=i.author.allocateIdentifierGenerator(),a=this.proxyRuntime.block.runWithContinuousUpdated((function(){var a=r.proxyRuntime.createFrameSection(),c={authorId:i.author.userId,mode:s.CoreFunctionsMode.Illusion,timestamp:n,frameSection:a,identifierGenerator:o};r.proxyRuntime.block.runWithMagix(c,(function(){var s;try{s=i.createIllusionEventFrame(e,t,n,o)}catch(e){throw r.clientCrashWithError(e),e}try{return r.triggerInvoker.dispatch(e,s.illusionFrame.payload)}finally{r.handleActionFrame(s.frameBuffer,a)}}))}));this.eventFireNode&&this.eventFireNode.callback({event:e,payload:t,scope:y.EventScope.Custom,authorId:i.author.userId}),this.callbacks.onModified&&a.didUpdated&&this.callbacks.onModified()},e.prototype.handleActionFrame=function(e,t){var r=new y.FramePicker(e);this.branchImageHelper.illusionQueue.pushIllusionActionFrame(r,t),this.phaseNode.touch(),this.callbacks.onGeneratedActionFrame&&this.callbacks.onGeneratedActionFrame(e)},e.prototype.snapshot=function(){var e=this,t=this.frameGenerator?this.frameGenerator.author.userId:a.AdminObserverId,r={frameId:this.frameId,originalFrameId:this.frameId,timestamp:this.timestamp,authorId:t,rootObject:this.proxyRuntime.rootObject.snapshotRootObject(),users:this.imageUsers.snapshotUsers()},n={authorId:t,mode:s.CoreFunctionsMode.Outside,timestamp:r.timestamp,identifierGenerator:a.createIdentifierGenerator(a.NoEffectScopeId)};return this.proxyRuntime.block.runWithMagix(n,(function(){return e.proxyRuntime.frameHandler.serializeSnapshotFrame(r)}))},e.prototype.setAllocatedUser=function(e){return i(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,this.imageUsers.createImageAuthor(e)];case 1:return(t=r.sent())&&(this.frameGenerator=new f.IllusionFrameGenerator(t,this.actionFrameHelper,this.strategy.includesFrameHash),this.proxyRuntime.reportObserverIdChanged(e.userId),this.branchImageHelper.setObserverId(t.userId)),[2]}}))}))},e.prototype.removeAllocatedUser=function(){return this.imageUsers.cancelImageAuthorCreating(),this.frameGenerator=null,this.proxyRuntime.reportObserverIdChanged(a.AdminObserverId),this.branchImageHelper.cleanObserverId()},e.prototype.destroy=function(){this.didDestroy||(this.imageUsers.cancelImageAuthorCreating(),this.frameGenerator=null,this.didDestroy=!0,this.proxyRuntime.dispose(),this.phaseNode.touch())},e.prototype.createInvokerFrameBuffer=function(e){var t=this.triggerInvoker.methodNameToId(e.method);if(void 0===t)throw new Error("can't find method "+JSON.stringify(e.method));if(this.triggerInvoker.isNoEffectMethod(e.method))throw new Error("can't create frame for no effects method "+JSON.stringify(e.method));var r=n(n({},this.createFrameHeader(e)),{type:y.ActionFrameType.Invoker,scopeId:e.identifierGenerator.scopeId,methodId:t,parameters:e.parameters});return this.serializeActionFrame(e.identifierGenerator,r)},e.prototype.createEventFrameBuffer=function(e){var t=n(n({},this.createFrameHeader(e)),{type:y.ActionFrameType.Event,scopeId:e.identifierGenerator.scopeId,scope:e.scope,event:e.event,payload:e.payload});return this.serializeActionFrame(e.identifierGenerator,t)},e.prototype.createEnterFrameBuffer=function(e){var t=n(n({},this.createFrameHeader(e)),{type:y.ActionFrameType.Enter,scopeId:e.identifierGenerator.scopeId,session:e.session,userPayload:e.userPayload,connectedPayload:e.connectedPayload});return this.serializeActionFrame(e.identifierGenerator,t)},e.prototype.createLeaveFrameBuffer=function(e){var t=n(n({},this.createFrameHeader(e)),{type:y.ActionFrameType.Leave,scopeId:e.identifierGenerator.scopeId,payload:e.payload});return this.serializeActionFrame(e.identifierGenerator,t)},e.prototype.createFrameHeader=function(e){var t=e.frameId,r=e.originalFrameId,n=e.authorId;return{frameId:t,originalFrameId:void 0===r?t:r,timestamp:Date.now(),authorId:n,beginObjectId:0}},e.prototype.serializeActionFrame=function(e,t){var r=this,n={authorId:this.frameGenerator?this.frameGenerator.author.userId:a.AdminObserverId,mode:s.CoreFunctionsMode.Outside,timestamp:t.timestamp,identifierGenerator:e};return this.proxyRuntime.block.runWithMagix(n,(function(){return r.actionFrameHelper.serialize(e,t,r.strategy.includesFrameHash)}))},e.prototype.assertEnableSendActionFrames=function(){if(this.didDestroy)throw new Error("image was desctroy");var e=this.branchImageHelper.illusionQueue;if((e?e.length:0)>=700)throw this.clientCrashWithError(new Error("illusion queue is overflow")),new Error("can't modify. illusion queue is overflow")},e.prototype.clientCrashWithError=function(e){var t=this;this.callbacks.onClientCrashWithError&&Promise.resolve().then((function(){return t.callbacks.onClientCrashWithError(e)})).catch((function(e){return console.error(e)}))},e}();t.ImageImplement=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(8),o=r(6),a=r(4),s=function(){function e(t){this.didCompleteInit=!1,this.proxyRuntime=t.proxyRuntime,this.imageUsers=t.imageUsers,this.onEventFire=t.onEventFire,this.onCatchErrorWhenAppendFrame=t.onCatchErrorWhenAppendFrame;var r=i.getClassReflection(t.library.rootClass),n=[],o={},a={};for(var s in r.methods){var c=r.methods[s],u=e.findEventPayloadWithDecorators(c.decorators);u&&n.push(Object.freeze({filter:u.eventFilter,method:s})),a[s]=e.findNoEffectsWithDecorators(c.decorators)}for(var l=0;l<r.methodNames.length;++l)o[r.methodNames[l]]=l;this.methodNames=r.methodNames,this.methodNameToIdMap=Object.freeze(o),this.eventHandlers=Object.freeze(n),this.noEffectsMethods=Object.freeze(a)}return e.prototype.completeInit=function(){this.didCompleteInit=!0},e.prototype.methodNameToId=function(e){return this.methodNameToIdMap[e]},e.prototype.isNoEffectMethod=function(e){return this.noEffectsMethods[e]},e.prototype.dispatch=function(e,t){for(var r=this.proxyRuntime.rootObject.target,i=n.EventScope.Custom,o=0,a=this.eventHandlers;o<a.length;o++){var s=a[o],c=s.filter,u=s.method;c(e,t,i)&&this.proxyRuntime.rootObject.getRootMethod(u).apply(r,[e,t,i])}},e.prototype.invoke=function(e,t){var r=this.proxyRuntime.rootObject.target;return this.proxyRuntime.rootObject.getRootMethod(e).apply(r,t)},e.prototype.appendAction=function(e,t){var r=this;t.mode!==a.CoreFunctionsMode.Real&&t.mode!==a.CoreFunctionsMode.RealAck||this.imageUsers.updateUserNextFrameId(e.authorId,e.originalFrameId+1);var i=!this.isForcesOnIllusionLine(t.mode);try{var o;return this.proxyRuntime.block.runWithMagix(t,(function(){n.isInvokerFrame(e)?o=r.invokeActionFrame(e):n.isEventFrame(e)?r.handleEventActionFrame(e):n.isEnterFrame(e)?r.handleEnterActionFrame(e):n.isLeaveFrame(e)&&r.handleLeaveActionFrame(e)})),o}catch(t){return void(this.onCatchErrorWhenAppendFrame&&this.onCatchErrorWhenAppendFrame(e.authorId,t))}finally{i&&(this.frameId=e.frameId,this.timestamp=e.timestamp),this.onEventFire&&this.dispatchEventIfNeed(e,this.proxyRuntime.rootObject.observerId,this.onEventFire)}},e.prototype.invokeActionFrame=function(e){var t=e.methodId,r=e.parameters,n=this.proxyRuntime.rootObject.target,i=this.methodNames[t];return this.proxyRuntime.rootObject.getRootMethod(i).apply(n,r)},e.prototype.handleEventActionFrame=function(e){if(void 0!==e.beginGenerationId&&e.scope===n.EventScope.System)switch(e.event){case"Enter":var t=e.authorId,r=e.originalFrameId+1;this.imageUsers.userEnter(t,r,"",void 0);break;case"Leave":this.imageUsers.userLeave(e.authorId)}this.invokeEventCallbacks(e.event,e.payload,e.scope)},e.prototype.handleEnterActionFrame=function(e){var t=e.authorId,r=e.originalFrameId+1,i=e.session,o=e.userPayload;this.imageUsers.userEnter(t,r,i,o),this.invokeEventCallbacks("Enter",e.connectedPayload,n.EventScope.System)},e.prototype.handleLeaveActionFrame=function(e){var t=e.authorId,r=e.payload;this.imageUsers.userLeave(t),this.invokeEventCallbacks("Leave",r,n.EventScope.System)},e.prototype.invokeEventCallbacks=function(e,t,r){for(var n=this.proxyRuntime.rootObject.target,i=0,o=this.eventHandlers;i<o.length;i++){var a=o[i],s=a.filter,c=a.method;s(e,t,r)&&this.proxyRuntime.rootObject.getRootMethod(c).apply(n,[e,t,r])}},e.prototype.dispatchEventIfNeed=function(e,t,r){this.didCompleteInit&&(n.isEventFrame(e)?e.authorId!==t&&r({event:e.event,payload:this.proxyRuntime.objectOperator.copyDisplayer(e.payload),scope:e.scope,authorId:e.authorId}):n.isEnterFrame(e)?r({event:"Enter",payload:this.proxyRuntime.objectOperator.copyDisplayer(e.connectedPayload),scope:n.EventScope.System,authorId:e.authorId}):n.isLeaveFrame(e)&&r({event:"Leave",payload:this.proxyRuntime.objectOperator.copyDisplayer(e.payload),scope:n.EventScope.System,authorId:e.authorId}))},e.findEventPayloadWithDecorators=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(o.isAkkoDecorator(n)&&o.isEventPayload(n.payload))return n.payload}},e.findNoEffectsWithDecorators=function(e){for(var t=0,r=e;t<r.length;t++)if(r[t]===o.noEffects)return!0;return!1},e.prototype.isForcesOnIllusionLine=function(e){switch(e){case a.CoreFunctionsMode.Real:case a.CoreFunctionsMode.RealAck:return!1;case a.CoreFunctionsMode.Illusion:case a.CoreFunctionsMode.IllusionRebuild:return!0;case a.CoreFunctionsMode.Outside:return this.proxyRuntime.hasDoubleLines&&this.proxyRuntime.hasBranch;default:throw new Error("invalid mode "+e)}},e}();t.TriggerInvoker=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(75),i=r(4),o=r(22),a=function(){function e(e,t,r,n,i,o,a){this.logger=e,this.strategy=t,this.proxyRuntime=r,this.triggerInvoker=n,this.assertAppendFrameId=i,this.onReceivedRttReport=o,this.onIllusionQueueLengthChanged=a,this.observerId=null,this._illusionQueue=null}return Object.defineProperty(e.prototype,"illusionQueue",{get:function(){return this._illusionQueue},enumerable:!0,configurable:!0}),e.prototype.setObserverId=function(e){if(this._illusionQueue)throw new Error("did set observer ID");this.observerId=e,this._illusionQueue=new n.IllusionQueue(e,this.logger,this.onIllusionQueueLengthChanged)},e.prototype.cleanObserverId=function(){var e=this,t=this._illusionQueue;return 0===t.length?(this.observerId=null,this._illusionQueue=null,this.onIllusionQueueLengthChanged(t.length),Promise.resolve()):new Promise((function(t){e.onIllusionQueueEmpty=function(){e.observerId=null,e._illusionQueue=null,t()}}))},e.prototype.appendActionFramesWithDoubleMode=function(e){for(var t,r=0,n=e;r<n.length;r++){var a=n[r],s=this.proxyRuntime.frameHandler.deserializeActionFrame(a,this.strategy.deserializerVersion,this.strategy.ignoreHashChecking,{mode:i.CoreFunctionsMode.Real}),c=o.idGeneratorWithFrame(s);this.assertAppendFrameId(s),t=this.triggerInvoker.appendAction(s,{authorId:s.authorId,mode:i.CoreFunctionsMode.Real,timestamp:s.timestamp,identifierGenerator:c})}return t},e.prototype.appendActionFrames=function(e){for(var t,r=this,n=[],a=[],s=!1,c=0,u=e;c<u.length;c++){var l=u[c],p=this._illusionQueue.replaceActionFrame(l);p.isAck||(s=!0);var h={frameBuffer:p.replacedBuffer,frameSection:p.section};s?a.push(h.frameBuffer):n.push(h),void 0!==p.rttTimeInterval&&this.onReceivedRttReport(p.rttTimeInterval)}return this.proxyRuntime.block.runWithDisableObserve((function(){for(var e=0,t=n;e<t.length;e++){var a=t[e],s=a.frameBuffer,c=a.frameSection,u=r.proxyRuntime.frameHandler.deserializeActionFrame(s,r.strategy.deserializerVersion,r.strategy.ignoreHashChecking,{mode:i.CoreFunctionsMode.RealAck,frameSection:c}),l=o.idGeneratorWithFrame(u);r.assertAppendFrameId(u),r.triggerInvoker.appendAction(u,{authorId:u.authorId,mode:i.CoreFunctionsMode.RealAck,timestamp:u.timestamp,frameSection:c,identifierGenerator:l}),c.completeACK()}})),a.length>0&&(this.proxyRuntime.mergeBranch(),t=this.appendActionFramesWithDoubleMode(a),this._illusionQueue.length>0&&this.rebuildIllusionBranch()),this.proxyRuntime.hasBranch&&0===this._illusionQueue.length&&this.proxyRuntime.hasDoubleLines&&this.proxyRuntime.mergeBranch(),this.onIllusionQueueEmpty&&0===this._illusionQueue.length&&(this.onIllusionQueueEmpty(),this.onIllusionQueueEmpty=void 0),t},e.prototype.rebuildIllusionBranch=function(){var e=this;this.proxyRuntime.forkBranchRuntime();var t=this._illusionQueue;this._illusionQueue=new n.IllusionQueue(this.observerId,this.logger,this.onIllusionQueueLengthChanged),t.forFrames((function(t,r){var n=e.proxyRuntime.createFrameSection(r);e._illusionQueue.pushIllusionActionFrame(t,n);var a=e.proxyRuntime.frameHandler.deserializeActionFrame(t.frameBuffer,e.strategy.deserializerVersion,e.strategy.ignoreHashChecking,{mode:i.CoreFunctionsMode.IllusionRebuild,frameSection:n}),s=o.idGeneratorWithFrame(a);e.triggerInvoker.appendAction(a,{authorId:a.authorId,mode:i.CoreFunctionsMode.IllusionRebuild,timestamp:a.timestamp,frameSection:n,identifierGenerator:s}),n.completeRebuild()})),t.length>0&&this.onIllusionQueueLengthChanged(this._illusionQueue.length)},e}();t.BranchImageHelper=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=function(){function e(e,t,r){this.observerId=e,this.logger=t,this.onLengthChanged=r,this.queue=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),e.prototype.pushIllusionActionFrame=function(e,t){this.queue.push({frameId:e.originalFrameId,timestamp:e.timestamp,picker:e,section:t}),this.onLengthChanged(this.queue.length)},e.prototype.forFrames=function(e){for(var t=0,r=this.queue;t<r.length;t++){var n=r[t],i=n.frameId,o=n.timestamp;e(n.picker,n.section,i,o)}},e.prototype.replaceActionFrame=function(e){var t,r,i,o=new n.FramePicker(e),a=this.isAckFrame(o);if(a){var s=this.takeIllusionFrame(o.frameId,o.originalFrameId),c=s.picker;t=Date.now()-s.timestamp,c.frameId=o.frameId,c.originalFrameId=o.originalFrameId,c.timestamp=o.timestamp,r=c.frameBuffer,i=s.section}else{if(o.type===n.ActionFrameType.Ack)throw new Error("received others' ACK frame");r=e}return{replacedBuffer:r,isAck:a,rttTimeInterval:t,section:i}},e.prototype.takeIllusionFrame=function(e,t){var r=this.queue.findIndex((function(e){return e.frameId===t}));if(r>0&&this.logger.warn("received frame can't touch first illusion frame"),-1===r)throw new Error("not found frameId "+t+" match to ACK frameId");var n=this.queue.splice(r,1)[0];return this.onLengthChanged(this.queue.length),n},e.prototype.isAckFrame=function(e){switch(e.type){case n.ActionFrameType.Ack:case n.ActionFrameType.Invoker:return e.authorId===this.observerId;case n.ActionFrameType.Event:if(e.scope===n.EventScope.Custom)return e.authorId===this.observerId}return!1},e}();t.IllusionQueue=i},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(77)),n(r(78))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayMethodDescriptions=Object.freeze([{methodName:"toString",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"toLocaleString",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"join",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"indexOf",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"lastIndexOf",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"every",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"some",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"forEach",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"reduce",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"reduceRight",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"concat",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"reverse",returnArray:!0,lengthChanged:!1,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"slice",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"splice",returnArray:!0,lengthChanged:!0,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e,t){var r,n=t[0];if(n>=0&&n<e.length)if(t.length>1){var i=t[1];void 0===i&&(i=0);var o=t.length-2;o<0&&(o=0),o===i?o>0&&(r={beginIndex:n,length:o}):r={beginIndex:n,length:e.length-n}}else r={beginIndex:n,length:e.length-n};return r}},{methodName:"map",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"filter",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"sort",returnArray:!0,lengthChanged:!1,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"push",returnArray:!1,lengthChanged:!0,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:e.length-1,length:1}}},{methodName:"pop",returnArray:!1,lengthChanged:!0,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:e.length,length:1}}},{methodName:"shift",returnArray:!1,lengthChanged:!0,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length+1}}},{methodName:"unshift",returnArray:!1,lengthChanged:!0,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79);t.createClassStaticMethods=function(){return new n.ClassStaticMethodsImplement([{clazz:Object,proxyList:["assign"],banList:["getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","create","defineProperty","defineProperties"]},{clazz:Array,proxyList:[],banList:["from"]},{clazz:String,proxyList:["fromCodePoint","fromCharCode"],banList:[]},{clazz:Number,proxyList:["isFinite","isInteger","isNaN","isSafeInteger","parseFloat","parseInt"],banList:[]}])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.nodes={};for(var t={},r=function(e,r,n){var i={},o=e.name;t[o]=Object.freeze({clazz:e,methods:i});for(var a=function(e){i[e]=function(){throw new Error(o+"."+e+" is ban in Magix")}},s=0,c=r;s<c.length;s++)a(c[s]);for(var u=function(e){i[e]=function(){throw new Error(o+"."+e+" is not defined")}},l=0,p=n;l<p.length;l++)u(p[l]);Object.seal(i)},n=0,i=e;n<i.length;n++){var o=i[n];r(o.clazz,o.banList,o.proxyList)}this.nodes=t}return e.prototype.findMethod=function(e,t){var r=this.findNode(e);return r?r.methods[t]:void 0},e.prototype.proxyMethod=function(e,t,r){var n=this.findNode(e);if(!n)throw new Error("invalid class");if(!(t in n.methods))throw new Error("invalid method "+JSON.stringify(t));n.methods[t]=r},e.prototype.findNode=function(e){var t=e.name,r=this.nodes[t];if(r&&r.clazz===e)return r},e}();t.ClassStaticMethodsImplement=n}]))},function(e,t){e.exports=r("aaBP")},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.typesMap={},this.typeToIndexMap={},this.typesMap=Object.freeze(this.createTypesMap(e)),this.typeToIndexMap=Object.freeze(this.createTypeToIndexMap(this.typesMap))}return e.create=function(t){return new e(t)},e.prototype.createTypesMap=function(e){for(var t={},r=0;r<e.length;++r)t[r]=e[r];return t},e.prototype.createTypeToIndexMap=function(e){var t={};for(var r in e){var n=parseInt(r,10),i=e[n];if(i in t)throw new Error('find duplicated type "'+i+' in parameters of new TypesMap(...)"');t[i]=n}return t},e.prototype.hasType=function(e){return e in this.typeToIndexMap},e.prototype.findTypeId=function(e){var t=this.typeToIndexMap[e];if(void 0===t)throw new Error("can't find id with type "+e);return t},e.prototype.findTypeById=function(e){var t=this.typesMap[e];if(!t)throw new Error("can't find type with id "+e);return t},e.prototype.extendsTypesMap=function(t){var r=[];for(var n in this.typesMap)r.push(this.typesMap[n]);for(var n in t.typesMap)r.push(t.typesMap[n]);return new e(r)},e}();t.TypesMap=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(6),a=r(2),s=function(){function e(e,t,r,i,s){var c=this;this.receivedWhenNotWorkingBuffer=[],this.remoteHeartbeatTimeout=void 0,this.crashByChannelError=!1,this.isWorking=!1,this.isLimit=!1,this.becameLimitTimestamp=0,this.sendHeartbeat=function(){c.isWorking&&(c.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(c.akkoSocket.params.heartbeatInterval),c.chanel.sendPackage("heartbeat"))},this.handleRemoteHeartbeatTimeout=function(){c.crashByChannelError||(c.crashByChannelError=!0,c.callbacks.onRemoteHeartbeatTimeout())},this.onReceivedPackage=function(e,t){if(!c.crashByChannelError)if(!e&&t)if(c.isWorking)try{c.handleReceivedPackage(t)}finally{c.delayRemoteHeartbeatTimeoutChecking()}else c.receivedWhenNotWorkingBuffer.push(t);else e&&!t&&c.callbacks.onParseMessageFailed(e)},this.akkoSocket=e,this.logger=r,this.chanel=new o.PackagesChannel(i,t,this.onReceivedPackage),this.callbacks=Object.freeze(n({},s)),this.sendHeartbeatDelayer=new a.Delayer(this.sendHeartbeat),this.remoteHeartbeatTimeoutDelayer=new a.Delayer(this.handleRemoteHeartbeatTimeout)}return e.prototype.send=function(e,t){if(this.isWorking)if(t instanceof Array)for(var r=0,n=t;r<n.length;r++){var i=n[r];this.sendPackage(e,i)}else this.sendPackage(e,t)},e.prototype.sendPackage=function(e,t){if(this.checkBufferedAmountOverflow())throw this.crashByChannelError||(this.crashByChannelError=!0,this.callbacks.onSendingBufferOverflow()),new Error("sending buffer overflow");this.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatInterval),this.chanel.sendPackage(e,t)},e.prototype.checkBufferedAmountOverflow=function(){var e=!1,t=this.akkoSocket.params,r=t.sendingBufferCrash,n=t.sendingBufferLimit,i=t.sendingBufferLimitDuration,o=this.chanel,a=o.bufferedAmount,s=o.maxPackageBytesInLatestThree;if(a>r+s)e=!0;else if(a>n+s){var c=Date.now();this.isLimit?c-this.becameLimitTimestamp>i&&(this.isLimit=!1,e=!0):(this.isLimit=!0,this.becameLimitTimestamp=c)}else this.isLimit=!1;return e},e.prototype.dispatchClose=function(e){var t=JSON.stringify(e);this.chanel.sendPackage("close",t)},e.prototype.start=function(){this.isWorking||(this.isWorking=!0,this.delayRemoteHeartbeatTimeoutChecking(),this.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatInterval),this.chanel.sendPackage("setHeartbeatTimeout",this.akkoSocket.params.heartbeatTimeout),this.cleanReceivedWhenNotWorkingBuffer())},e.prototype.cleanReceivedWhenNotWorkingBuffer=function(){var e=this.receivedWhenNotWorkingBuffer.splice(0,this.receivedWhenNotWorkingBuffer.length);if(e.length>0)try{for(var t=0,r=e;t<r.length;t++){var n=r[t];this.handleReceivedPackage(n)}}finally{this.delayRemoteHeartbeatTimeoutChecking()}},e.prototype.stop=function(){this.isWorking&&(this.isWorking=!1,this.sendHeartbeatDelayer.cancel(),this.remoteHeartbeatTimeoutDelayer.cancel(),this.remoteHeartbeatTimeout=void 0)},e.prototype.handleReceivedPackage=function(t){if(e.sessionEventTypesMap.hasType(t.type)){if("setHeartbeatTimeout"===t.type)"number"==typeof t.data&&t.data>0?this.remoteHeartbeatTimeout=t.data:this.logger.warn("illegal remote heartbeat timeout: "+t.data);else if("close"===t.type){var r=void 0;if("string"==typeof t.data)try{r=JSON.parse(t.data)}catch(e){this.logger.warn("parse close payload as JSON failed: "+e.message)}this.callbacks.onCloseByRemote(r)}}else this.callbacks.onEvent(t.type,t.data)},e.prototype.delayRemoteHeartbeatTimeoutChecking=function(){void 0===this.remoteHeartbeatTimeout?this.remoteHeartbeatTimeoutDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatTimeout):this.remoteHeartbeatTimeoutDelayer.refreshAndInvokeAfterInterval(this.remoteHeartbeatTimeout)},e.sessionEventTypesMap=i.TypesMap.create(["heartbeat","setHeartbeatTimeout","close"]),e}();t.SessionChannel=s},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(12)),n(r(13)),n(r(14))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.sockets=[],this.logger=e}return Object.defineProperty(e.prototype,"socketsCount",{get:function(){return this.sockets.length},enumerable:!0,configurable:!0}),e.prototype.addSocket=function(e){-1===this.sockets.indexOf(e)&&this.sockets.push(e)},e.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);-1!==t&&this.sockets.splice(t,1)},e.prototype.forEachSockets=function(e){this.sockets.forEach(e)},e.prototype.emit=function(e,t){for(var r=0,n=this.sockets;r<n.length;r++){var i=n[r];try{i.emit(e,t)}catch(e){this.logger.error(e)}}},e}();t.CombinedSockets=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(5),a=r(1),s=r(3),c=function(){function e(e){this.eventTypesMap=a.SessionChannel.sessionEventTypesMap.extendsTypesMap(i.TypesMap.create(e))}return e.prototype.createSocket=function(t,r,i){return void 0===i&&(i={}),new o.AkkoSocketImplement(t,r,this.eventTypesMap,n(n({},e.defaultSocketParams),i))},e.prototype.createCombinedSockets=function(e){return new s.CombinedSockets(e)},e.defaultSocketParams=Object.freeze({heartbeatInterval:4e4,heartbeatTimeout:12e4,sendingBufferLimit:5242880,sendingBufferLimitDuration:3e4,sendingBufferCrash:104857600,onDisconnect:function(){},onPhaseChanged:function(){}}),e}();t.AkkoSocketFactory=c,function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(t.AkkoSocketPhase||(t.AkkoSocketPhase={})),function(e){e.Normal="normal",e.WebSocketError="webSocketError",e.CommunicationError="communicationError",e.RemoteError="remoteError"}(t.AkkoSocketDisconnectReason||(t.AkkoSocketDisconnectReason={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(10),u=r(1),l=r(15),p=r(2),h=r(4),d=function(e){function t(t,r,n,i){var a=e.call(this)||this;return a.connectingManager=null,a.connectFailError=void 0,a.onError=function(){a.logger.warn("websocket received error")},a.onCloseByRemote=function(e){if(a._phase===h.AkkoSocketPhase.Connected){a.sessionChannel.stop(),a.closeSocket(1e3),a.updatePhase(h.AkkoSocketPhase.Disconnected);var t=e&&e.error,r=e&&e.reason;t?a.params.onDisconnect({reason:h.AkkoSocketDisconnectReason.RemoteError,message:t,remoteCode:e.errorCode}):a.params.onDisconnect({reason:h.AkkoSocketDisconnectReason.Normal,message:r||"ok"})}},a.onClose=function(e){var t=e.code,r=void 0===t?1e3:t,n=e.reason;if(a._phase===h.AkkoSocketPhase.Connected){var i=a.errorMessageWithCode(r)||"disconnected with code "+r+' "'+n+'"';a.sessionChannel.stop(),a.updatePhase(h.AkkoSocketPhase.Disconnected),a.params.onDisconnect({reason:h.AkkoSocketDisconnectReason.WebSocketError,message:i,webSocketCode:r})}},a.socket=t,a.socket.binaryType="arraybuffer",a.logger=r,a.params=Object.freeze(o({},i)),a.sessionChannel=new u.SessionChannel(a,t,r,n,{onCloseByRemote:a.onCloseByRemote,onEvent:function(e,t){return a.dispatchToListeners(e,t)},onRemoteHeartbeatTimeout:function(){return a.onCommunicationErrorMessage("remote heartbeat timeout")},onSendingBufferOverflow:function(){return a.onCommunicationErrorMessage("sending buffer overflow")},onParseMessageFailed:function(e){return a.onCommunicationErrorMessage("parse message failed: "+e.message)}}),a.initializePhaseWithSocketReadyState(),a}return i(t,e),t.prototype.initializePhaseWithSocketReadyState=function(){switch(this.socket.readyState){case c.ReadyState.CONNECTING:this._phase=h.AkkoSocketPhase.Connecting,this.connect();break;case c.ReadyState.OPEN:this._phase=h.AkkoSocketPhase.Connected,this.addSessionListeners(),this.sessionChannel.start();break;default:var e=c.ReadyState[this.socket.readyState];throw e||(e=""+this.socket.readyState),new Error("invalid readyState of WebSocket: "+e)}},Object.defineProperty(t.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),t.prototype.updatePhase=function(e){if(this._phase!==e)try{this.params.onPhaseChanged(e)}finally{this._phase=e}},t.prototype.emit=function(e,t){if(this._phase!==h.AkkoSocketPhase.Connected)throw new Error("AkkoSocket can't emit when phase is "+this.phase);try{this.sessionChannel.send(e,t)}catch(e){throw this.disconnectForceWithCode(1e3),this.params.onDisconnect({reason:h.AkkoSocketDisconnectReason.WebSocketError,message:e.message}),e}},t.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),this.connectingManager=new l.ConnectingManager(this.socket,this.logger),[4,this.connectingManager.waitToConnected()];case 1:return t.sent(),this.addSessionListeners(),this.sessionChannel.start(),this.updatePhase(h.AkkoSocketPhase.Connected),[3,4];case 2:return e=t.sent(),this.updatePhase(h.AkkoSocketPhase.Disconnected),this.connectFailError=e,[3,4];case 3:return this.connectingManager=null,[7];case 4:return[2]}}))}))},t.prototype.addSessionListeners=function(){this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("error",this.onError)},t.prototype.waitToConnected=function(){if(this.connectFailError)throw this.connectFailError;if(this._phase===h.AkkoSocketPhase.Connected)return Promise.resolve({duration:0});if(this._phase===h.AkkoSocketPhase.Connecting)return this.connectingManager.waitToConnected();throw new Error("AkkoSocket's phase had became "+this._phase)},t.prototype.disconnect=function(e){return e?this.disconnectWithCodeAndReason({reason:e}):this.disconnectWithCodeAndReason()},t.prototype.disconnectWithErrorDescription=function(e){var t=e.message,r=e.code;return this.disconnectWithCodeAndReason({error:t,errorCode:r})},t.prototype.disconnectForce=function(){this._phase===h.AkkoSocketPhase.Connected&&this.disconnectForceWithCode(1e3)},t.prototype.disconnectForceWithCode=function(e){this.sessionChannel.stop(),this.closeSocket(e),this.updatePhase(h.AkkoSocketPhase.Disconnected)},t.prototype.disconnectWithCodeAndReason=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:if(this.didCallDisconnect)throw new Error("AkkoSocket did call disconnect");switch(this.didCallDisconnect=!0,t=!0,this._phase){case h.AkkoSocketPhase.Disconnecting:case h.AkkoSocketPhase.Disconnected:return[3,1];case h.AkkoSocketPhase.Connecting:return[3,2]}return[3,6];case 1:throw new Error("AkkoSocket can't disconnect when phase is "+this.phase);case 2:return r.trys.push([2,4,,5]),[4,this.waitToConnected()];case 3:return r.sent(),[3,5];case 4:return r.sent(),t=!1,[3,5];case 5:return[3,6];case 6:return t?(this.updatePhase(h.AkkoSocketPhase.Disconnecting),this.sessionChannel.dispatchClose(e),[4,this.waitUtilCloseAndCheckTimeout()]):[3,8];case 7:r.sent()&&this.closeSocket(1e3),this.sessionChannel.stop(),this.updatePhase(h.AkkoSocketPhase.Disconnected),r.label=8;case 8:return[2]}}))}))},t.prototype.waitUtilCloseAndCheckTimeout=function(){var e=this,t=null,r=new Promise((function(e){t=setTimeout((function(){t=null,e(!0)}),3e3)})),n=new Promise((function(t){e.socket.readyState===c.ReadyState.CLOSED?t(!1):e.socket.addEventListener("close",(function(){return t(!1)}))}));return Promise.race([r,n]).then((function(e){return null!==t&&clearTimeout(t),e}))},t.prototype.onCommunicationErrorMessage=function(e){this._phase===h.AkkoSocketPhase.Connected&&(this.disconnectForce(),this.params.onDisconnect({reason:h.AkkoSocketDisconnectReason.CommunicationError,message:e}))},t.prototype.closeSocket=function(e){try{this.socket.close(e)}catch(e){this.logger.error(e)}},t.prototype.errorMessageWithCode=function(e){switch(e){case 1e3:return"CLOSE_NORMAL";case 1001:return"CLOSE_GOING_AWAY";case 1002:return"CLOSE_PROTOCOL_ERROR";case 1003:return"CLOSE_UNSUPPORTED";case 1005:return"CLOSE_NO_STATUS";case 1006:return"CLOSE_ABNORMAL";case 1007:return"Unsupported Data";case 1008:return"Policy Violation";case 1009:return"CLOSE_TOO_LARGE";case 1010:return"Missing Extension";case 1011:return"Internal Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1015:return"TLS Handshake";default:return}},t}(p.EventsManagers);t.AkkoSocketImplement=d},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=r(2),a=r(7),s=function(){function e(e,t,r){var n=this;this.typesMap=e,this.socket=t,this.receiver=r,this.latestThreePackageBytes=[0,0,0],this.nextSelfPackageId=0,this._latestReceivedRemoteId=-1,this.onMessage=function(e){try{if(n.receivedPackageHeadBuffer){var t=n.receivedPackageHeadBuffer,r=i.wrapBuffer(e.data),o=n.parsePackage(t,r);n._latestReceivedRemoteId=Math.max(o.id,n._latestReceivedRemoteId),n.receivedPackageHeadBuffer=void 0,n.receiver(null,o)}else n.receivedPackageHeadBuffer=i.wrapBuffer(e.data)}catch(e){n.receiver(e,null)}},t.binaryType="arraybuffer",t.addEventListener("message",this.onMessage)}return Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this.socket.bufferedAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPackageBytesInLatestThree",{get:function(){return Math.max.apply(Math,n([0],this.latestThreePackageBytes))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latestReceivedRemoteId",{get:function(){return this._latestReceivedRemoteId},enumerable:!0,configurable:!0}),e.prototype.sendPackage=function(e,t){void 0===t&&(t=0);var r=Object.freeze({id:this.nextSelfPackageId,receivedId:this._latestReceivedRemoteId,type:e,data:t});this.nextSelfPackageId+=1;var n=this.createPackageHead(r),i=this.wrapPackageData(r.data),o=n.byteLength+i.byteLength;return this.socket.send(n.primitiveBuffer),this.socket.send(i.primitiveBuffer),this.latestThreePackageBytes[0]=this.latestThreePackageBytes[1],this.latestThreePackageBytes[1]=this.latestThreePackageBytes[2],this.latestThreePackageBytes[2]=o,r.id},e.prototype.createPackageHead=function(e){var t=i.createBuffer(18);return o.setInt64(t,0,e.id),o.setInt64(t,8,e.receivedId),t.setUint8(16,this.typesMap.findTypeId(e.type)),t.setUint8(17,a.findDataTypeWith(e.data)),t},e.prototype.wrapPackageData=function(e){if("string"==typeof e){for(var t=new String(e),r=i.createBuffer(2*t.length),n=0;n<t.length;++n)r.setUint16(2*n,65535&t.charCodeAt(n));return r}return"number"==typeof e?(r=i.createBuffer(8),o.setInt64(r,0,e),r):e},e.prototype.parsePackage=function(e,t){var r,n=o.getInt64(e,0),i=o.getInt64(e,8),s=e.getUint8(16),c=e.getUint8(17);switch(c){case a.PackageDataType.String:for(var u=t.byteLength/2,l=[],p=0;p<u;++p)l[p]=t.getUint16(2*p);r=String.fromCharCode.apply(String,l);break;case a.PackageDataType.Integer:r=o.getInt64(t,0);break;case a.PackageDataType.Buffer:r=t;break;default:throw new Error("unrecognized data type "+c)}return Object.freeze({id:n,receivedId:i,type:this.typesMap.findTypeById(s),data:r})},e}();t.PackagesChannel=s},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Buffer=0]="Buffer",e[e.String=1]="String",e[e.Integer=2]="Integer"}(n=t.PackageDataType||(t.PackageDataType={})),t.findDataTypeWith=function(e){switch(A(e)){case"number":return n.Integer;case"string":return n.String;default:return n.Buffer}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.CombinedSockets=n.CombinedSockets;var i=r(9);t.AkkoSocketPhase=i.AkkoSocketPhase,t.AkkoSocketDisconnectReason=i.AkkoSocketDisconnectReason,t.AkkoSocketFactory=i.AkkoSocketFactory},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(4)),n(r(5)),n(r(7)),n(r(6)),n(r(0)),n(r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.ReadyState||(t.ReadyState={}))},function(e,t){e.exports=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.invoker=e,this.timer=null,this.invokeWhenTimeout=function(){t.timer=null,t.invoker()}}return e.prototype.refreshAndInvokeAfterInterval=function(e){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.invokeWhenTimeout,e)},e.prototype.cancel=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e}();t.Delayer=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.eventListeners={}}return e.prototype.on=function(e,t){var r=this.eventListeners[e];r||(r=[],this.eventListeners[e]=r),-1===r.indexOf(t)&&r.push(t)},e.prototype.off=function(e,t){var r=this.eventListeners[e];if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),0===r.length&&delete this.eventListeners[e])}},e.prototype.once=function(e,t){var r=this;this.on(e,(function n(i){try{t(i)}finally{r.off(e,n)}}))},e.prototype.dispatchToListeners=function(e,t){var r=this.eventListeners[e];if(r)for(var n=0,i=r;n<i.length;n++){var o=i[n];try{o(t)}catch(e){console.error(e)}}},e}();t.EventsManagers=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32);t.setInt64=function(e,t,r){var i=r%n,o=(r-i)/n;e.setInt32(t,i),e.setInt32(t+4,o)},t.getInt64=function(e,t){var r=e.getInt32(t);return e.getInt32(t+4)*n+r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r=this;this.socket=e,this.logger=t,this.paddingExecutors=[],this.createdAt=Date.now(),this.isConnecting=!0,this.onOpen=function(){if(r.isConnecting){r.finishConnecting();for(var e=Date.now()-r.createdAt,t=0,n=r.paddingExecutors.splice(0);t<n.length;t++)n[t].resolve({duration:e})}},this.onError=function(e){if(r.isConnecting){r.finishConnecting();for(var t=new Error(e.message||"connect failed"),n=0,i=r.paddingExecutors.splice(0);n<i.length;n++)i[n].reject(t)}},this.onTimeout=function(){if(r.isConnecting){r.finishConnecting();for(var e=new Error("timeout"),t=0,n=r.paddingExecutors.splice(0);t<n.length;t++)n[t].reject(e);try{r.socket.close(1e3)}catch(e){r.logger.error(e)}}},e.addEventListener("open",this.onOpen),e.addEventListener("error",this.onError),this.timeoutTimer=setTimeout(this.onTimeout,25e3)}return e.prototype.waitToConnected=function(){var e=this;return new Promise((function(t,r){e.paddingExecutors.push({resolve:t,reject:r})}))},e.prototype.finishConnecting=function(){this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("error",this.onError),this.isConnecting=!1,this.timeoutTimer=null},e}();t.ConnectingManager=n}]))},function(e,t){e.exports=r("lOZ2")},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=25)}([function(e,t,r){"use strict";function n(e){return"string"==typeof e?parseFloat(e):e}Object.defineProperty(t,"__esModule",{value:!0}),t.EmuToPt=12700,t.EmuToPx=9525,t.STPercentage100=1e5,t.FontToPt=100,t.DefaultTopPadding=45720,t.DefaultLeftPadding=91440,t.Degree=6e4,t.PaddingWebFix=4.5*t.EmuToPt,t.DefatultHeightLine=1,t.parseSTPercentage=function(e){if("number"==typeof e)return e/t.STPercentage100;var r=e.endsWith("%");return parseFloat(e)/(r?100:t.STPercentage100)},t.toPt=function(e){return n(e)/t.EmuToPt+"pt"},t.toDeg=function(e){return e/t.Degree},t.toNumber=n,t.pxToPt=function(e){return.75*n(e)},t.ptToPx=function(e){return n(e)/.75}},function(e,t){e.exports=r(2)},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(3),a=r(5),s=r(14),c=r(0);t.None=s("#FFFFFF").alpha(0),t.UNDEFINED=s("#FFFFFF").alpha(0),function(e){e.None="none",e.Norm="norm",e.Lighten="lighten",e.LightenLess="lightenLess",e.Darken="darken",e.DarkenLess="darkenLess"}(i=t.PathFillMode||(t.PathFillMode={}));var u=function(){function e(){this.fillColor=t.None.hsl()}return e.prototype.setFillColor=function(e){this.fillColor=e},e.prototype.hsl=function(){return this.fillColor.hsl()},e.prototype.rgb=function(){return this.fillColor.rgb()},e}();t.GroupFill=u;var l=function(){function e(e){this.alphaModFix=1,this.resId=e.childElement("a:blip").attr.getString("r:embed"),void 0!==e.childElementOptional("a:tile")?this.tile=!0:this.tile=!1;var t=e.childElement("a:blip").childElementOptional("a:alphaModFix");if(void 0!==t){var r=t.attr.getNumberOptional("amt");r&&(this.alphaModFix=c.parseSTPercentage(r))}}return e.prototype.getResId=function(){return this.resId},e.prototype.getAlphaModFix=function(){return this.alphaModFix},e.prototype.hsl=function(){return t.None.hsl()},e.prototype.rgb=function(){return t.None.rgb()},e}();t.ImageFill=l;var p=function(){function e(e,t,r){this.colors=[],this.rotation=0,this.path=void 0;var i=e.hasChildElementWithName("a:gsLst")?e.childElement("a:gsLst").elementsWithName("a:gs"):[];if(this.colors=i.sort((function(e,t){return e.attr.getNumber("pos")/c.STPercentage100-t.attr.getNumber("pos")/c.STPercentage100})).map((function(e){return{stop:e.attr.getNumber("pos")/c.STPercentage100,color:h(e.childElement(new(o.TagOrExpr.bind.apply(o.TagOrExpr,n([void 0],a.ALL_COLOR_TYPE)))),t,r)}})),e.hasChildElementWithName("a:lin")&&(this.rotation=c.toDeg(e.childElement("a:lin").attr.getNumber("ang",0))),e.hasChildElementWithName("a:path")){var s=e.childElement("a:path"),u=s.attr.getStringOptional("path"),l=s.childElementOptional("a:fillToRect");if(!l)return void(this.path={path:u,fillToRect:{left:0,top:0,bottom:0,right:0}});var p=l.attr.getNumber("l",0),d=l.attr.getNumber("t",0),f=l.attr.getNumber("b",0),y=l.attr.getNumber("r",0);this.path={path:u,fillToRect:{left:p,top:d,bottom:f,right:y}}}}return e.prototype.getGradientPath=function(){return this.path},e.prototype.getColors=function(){return this.colors},e.prototype.getRotation=function(){return this.rotation},e.prototype.hsl=function(){return this.colors&&this.colors.length>0&&this.colors[0].color?this.colors[0].color.hsl():t.None.hsl()},e.prototype.rgb=function(){return this.colors&&this.colors.length>0&&this.colors[0].color?this.colors[0].color.rgb():t.None.rgb()},e}();function h(e,t,r){if(e.attr.has("val")){var n=e.childElementOptional("a:alpha"),i=e.childElementOptional("a:shade"),o=e.childElementOptional("a:tint"),u=e.childElementOptional("a:lumMod"),l=e.childElementOptional("a:satMod"),p=e.childElementOptional("a:satOff"),h=e.childElementOptional("a:lumOff"),f=e.childElementOptional("a:hueMod"),y=e.childElementOptional("a:hueOff");switch(e.name){case"a:prstClr":return d(s(e.attr.getString("val")),n,i,u,o,l,h,p,f,y);case"a:srgbClr":return d(s("#"+e.attr.getString("val")),n,i,u,o,l,h,p,f,y);case"a:schemeClr":var A=e.attr.getString("val");return"phClr"===A&&(A=r.attr.getString("val")),d(s("#"+a.getSchemeClr(A,t)),n,i,u,o,l,h,p,f,y);case"a:hslClr":var m=e.attr.getNumber("hue")/c.Degree,g=e.attr.getNumber("sat")/c.STPercentage100,v=e.attr.getNumber("lum")/c.STPercentage100;return d(s({h:m,s:g,l:v}),n,i,u,o,l,h);case"a:scrgbClr":var b=255*e.attr.getNumber("r")/c.STPercentage100,P=255*e.attr.getNumber("g")/c.STPercentage100,S=255*e.attr.getNumber("b")/c.STPercentage100;return d(s({r:b,g:P,b:S}),n,i,u,o,l,h);case"a:sysClr":return d(s("#"+e.attr.getString("lastClr")),n,i,u,o,l,h,p,f,y);default:return}}}function d(e,t,r,n,i,o,a,u,l,p){if(i&&(e=e.mix(s("white"),1-i.attr.getNumber("val")/c.STPercentage100)),r&&(e=e.mix(s("black"),1-r.attr.getNumber("val")/c.STPercentage100)),o){var h=e.hsl().object(),d=h.h,f=h.s,y=h.l,A=f*o.attr.getNumber("val")/c.STPercentage100;e=s({l:y,s:A,h:d})}if(u){var m=e.hsl().object();d=m.h,f=m.s,y=m.l,A=u.attr.getNumber("val")/c.STPercentage100*100+f,e=s({l:y,s:A,h:d})}if(n){var g=e.hsl().object(),v=(d=g.h,f=g.s,(y=g.l)*n.attr.getNumber("val")/c.STPercentage100);e=s({l:v,s:f,h:d})}if(a){var b=e.hsl().object();d=b.h,f=b.s,y=b.l,v=a.attr.getNumber("val")/c.STPercentage100*100+y,e=s({l:v,s:f,h:d})}if(l){var P=e.hsl().object(),S=(d=P.h,f=P.s,y=P.l,d*l.attr.getNumber("val")/c.STPercentage100);e=s({l:y,s:f,h:S})}if(p){var w=e.hsl().object();d=w.h,f=w.s,y=w.l,S=p.attr.getNumber("val")/c.Degree+d,e=s({l:y,s:f,h:S})}return t&&(e=e.alpha(t.attr.getNumber("val")/c.STPercentage100)),e}t.GradientColor=p,t.getColor=h;var f=function(){function e(e){this.placeHolderColor=e}return e.prototype.read=function(e,r){if(void 0===e)return t.UNDEFINED;switch(e.name){case"a:noFill":return t.None;case"a:solidFill":return h(e.childElement(new(o.TagOrExpr.bind.apply(o.TagOrExpr,n([void 0],a.ALL_COLOR_TYPE)))),r,this.placeHolderColor);case"a:gradFill":return new p(e,r,this.placeHolderColor);case"a:blipFill":return void 0!==(e.hasChildElementWithName("a:blip")?e.childElement("a:blip").attr.getStringOptional("r:embed"):void 0)?new l(e):t.None;case"a:grpFill":return new u;case"a:pattFill":default:return t.UNDEFINED}},e}();t.FillOrLineFillReader=f,t.ensureColor=function(e){return e instanceof l||void 0===e?"none":e.rgb().string()},t.getPathFillColor=function(e,t){if("none"===e)return e;switch(t){case i.None:return"none";case i.Norm:return e;case i.Darken:return s(e).darken(.4).rgb().string();case i.DarkenLess:return s(e).darken(.2).rgb().string();case i.Lighten:return s(e).lighten(.4).rgb().string();case i.LightenLess:return s(e).lighten(.2).rgb().string();default:return e}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(47),o=r(48),a=r(49),s=function(){function e(e,t){this.picker=t,this.resourceType=e}return e.prototype.parse=function(e){return new u(this.picker,null,0,i.xml2js(e,{compact:!1,captureSpacesBetweenElements:!0}),this.resourceType)},e}();t.XMLNodeRuntime=s;var c=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.tagNames=e}return e.prototype.execute=function(e){return void 0!==this.tagNames.find((function(t){return t===e}))},e.prototype.toString=function(){return this.tagNames.join(" or ")},e}();t.TagOrExpr=c;var u=function(){function e(t,r,i,o,s){this.picker=t,this.parent=r,this.index=i,this.resourceType=s,this.name=o.name,this.type=o.type,this.attr=new a.LocalAttributes(this.name,Object.freeze(n({},o.attributes))),this.extraAttr=t?new a.ExtraAttributes(this,t,s):new a.EmptyAttributes(this.name);var c=[];if(o.elements)for(var u=0;u<o.elements.length;++u){var l=o.elements[u];"text"===l.type?this.text=l.text:c.push(new e(t,this,u,l,s))}this.elements=Object.freeze(c)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elements[0]},enumerable:!0,configurable:!0}),e.prototype.displayer=function(e){return o.createXMLNodeDisplayer(this,e)},e.prototype.elementWithName=function(e){for(var t=0,r=this.elements;t<r.length;t++){var n=r[t];if(n.name===e)return n}},e.prototype.extraElementWithName=function(e){if(this.picker&&this.name)return this.cachedXMLMap||(this.cachedXMLMap={}),this.picker.getChild(this.name,e,this,this.cachedXMLMap,this.resourceType)},e.prototype.elementsWithName=function(e){for(var t=[],r=0,n=this.elements;r<n.length;r++){var i=n[r];i.name===e&&t.push(i)}return t},e.prototype.childElementOptional=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.searchChildElement(e),n=r.xml,i=r.found;return i?n:void 0},e.prototype.childElement=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.searchChildElement(e),n=r.xml,i=r.found;if(i)return n;"string"==typeof this.name&&e.unshift(this.name);var o=e.join(" -> "),a=e.findIndex((function(e){return e===n.name})),s=e.splice(a+1)[0],c=e.join(" -> ");throw new Error("can't find child "+o+": lack of child "+s+" from "+c)},e.prototype.searchChildElement=function(e){for(var t=this,r=0;r<e.length;++r){for(var n=e[r],i=t,o=0,a=t.elements;o<a.length;o++){var s=a[o];if("string"==typeof n){if(s.name===n){t=s;break}}else if(n.execute(s.name)){t=s;break}}if(i===t)return{xml:t,found:!1}}return{xml:t,found:!0}},e.prototype.hasChildElementWithName=function(e){for(var t=0,r=this.elements;t<r.length;t++)if(r[t].name===e)return!0;return!1},e.prototype.parentElement=function(e){var t=this.parentElementOptional(e);if(t)return t;throw new Error("can't find parent "+e+" from "+this.name)},e.prototype.parentElementOptional=function(e){for(var t=this.parent;t;){if("string"==typeof e){if(t.name===e)return t}else if(e.execute(t.name))return t;t=t.parent}},e}()},function(e,t){e.exports=r(63)},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(17);function a(e){var t={},r=e.childElementOptional("a:latin"),n=e.childElementOptional("a:ea"),i=e.childElementOptional("a:cs");r&&(t.latin=""===r.attr.getString("typeface","")?[]:[r.attr.getString("typeface")]),n&&(t.ea=""===n.attr.getString("typeface","")?[]:[n.attr.getString("typeface")]),i&&(t.cs=""===i.attr.getString("typeface","")?[]:[i.attr.getString("typeface")]);var o=e.elementsWithName("a:font").filter((function(e){return["Hans","Hant","Jpan","Hang"].includes(e.attr.getString("script"))})).map((function(e){return e.attr.getString("typeface")}));return void 0!==t.ea?t.ea=t.ea.concat(o):t.ea=o,t}function s(e){return e.theme.childElement("a:theme","a:themeElements","a:fontScheme")}function c(e){var t=[];return void 0!==e.latin&&t.concat(e.latin),void 0!==e.ea&&t.concat(e.ea),void 0!==e.cs&&t.concat(e.cs),t}t.getSchemeClr=function(e,t){if(t.masterThemeColorMapping[e]){var r="a:"+t.masterThemeColorMapping[e];return(n=t.theme.childElementOptional("a:theme","a:themeElements","a:clrScheme",r,"a:srgbClr"))?n.attr.getString("val"):(i=t.theme.childElementOptional("a:theme","a:themeElements","a:clrScheme",r,"a:sysClr"))?i.attr.getString("lastClr",e):e}var n,i;return r="a:"+e,(n=t.theme.childElementOptional("a:theme","a:themeElements","a:clrScheme",r,"a:srgbClr"))?n.attr.getString("val"):(i=t.theme.childElementOptional("a:theme","a:themeElements","a:clrScheme",r,"a:sysClr"))?i.attr.getString("lastClr",e):e},t.getMajorFont=function(e){var t=s(e).childElementOptional("a:majorFont");return void 0===t?{}:a(t)},t.getMinorFont=function(e){var t=s(e).childElementOptional("a:minorFont");return void 0===t?{}:a(t)},t.parseAndLoadThemeFont=function(e,t){return"none"!==e?c(a(s(t).childElement("a:"+e+"Font"))).filter((function(e){return!e.startsWith("+")&&""!==e})).map((function(e){return o.loadFont(e,t.userFonts),e})):[]},t.getFontList=c,t.ALL_FILL_TYPE=["a:blipFill","a:gradFill","a:grpFill","a:noFill","a:pattFill","a:solidFill"],t.ALL_COLOR_TYPE=["a:hslClr","a:schemeClr","a:srgbClr","a:scrgbClr","a:sysClr","a:prstClr"],t.mergeShapeStyle=function(e,r){var o=r.theme.childElement("a:theme","a:themeElements","a:fmtScheme"),a=e.childElement("a:effectRef"),c=a.childElement(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],t.ALL_COLOR_TYPE)))),u=a.attr.getNumber("idx"),l=o.childElement("a:effectStyleLst").elements[u-1],p=e.childElement("a:fillRef"),h=p.childElement(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],t.ALL_COLOR_TYPE)))),d=p.attr.getNumber("idx"),f=o.childElement("a:fillStyleLst").elements[d-1],y=e.childElement("a:fontRef"),A=y.attr.getString("idx"),m=void 0;"none"!==A&&(m=s(r).childElement("a:"+A+"Font"));var g=e.childElement("a:lnRef"),v=g.childElement(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],t.ALL_COLOR_TYPE)))),b=g.attr.getNumber("idx");return{effect:{xml:l,phClr:c},fill:{xml:f,phClr:h},font:{xml:m,fontRef:y},ln:{xml:o.childElement("a:lnStyleLst").elements[b-1],phClr:v}}}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(2),a=r(5);t.Parser=function(e,t){this.animation=e,this.context=t,this.shapeAnimationParams=m(e.spId,t)};var s=r(107);t.AnimParser=s.AnimParser;var c=r(108);t.AnimRotateParser=c.AnimRotateParser;var u=r(109);t.AnimScaleParser=u.AnimScaleParser;var l=r(110);t.AnimEffectParser=l.AnimEffectParser;var p=r(111);t.AnimColorParser=p.AnimColorParser;var h=r(112);t.AnimSetParser=h.AnimSetParser;var d=r(113);t.AnimCmdParser=d.AnimCmdParser;var f=r(114);t.AnimMotionParser=f.AnimMotionParser;var y,A=r(13);function m(e,t){var r=t.shapeParamsIndex[parseInt(e)];return r?{ppt_x:r.rectangle.x/t.slideWidth,ppt_y:r.rectangle.y/t.slideHeight,ppt_w:r.rectangle.width/t.slideWidth,ppt_h:r.rectangle.height/t.slideHeight}:{ppt_x:0,ppt_y:0,ppt_w:.5,ppt_h:.5}}function g(e,t,r){var s,c=e.childElement(new i.TagOrExpr("p:strVal","p:fltVal","p:clrVal","p:intVal"));switch(s="p:clrVal"===c.name?o.getColor(c.childElement(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],a.ALL_COLOR_TYPE)))),r.slideContext):c.attr.getString("val"),c.name){case"p:strVal":return"num"===t?{attrValue:s=s.replace(/#/g,"$"),attrValueType:y.formulaType}:{attrValue:s,attrValueType:y.stringType};case"p:fltVal":return{attrValue:parseFloat(s),attrValueType:y.floatType};case"p:clrVal":return{attrValue:s,attrValueType:y.colorType};case"p:intVal":return{attrValue:parseInt(s),attrValueType:y.intType};default:return{attrValue:s,attrValueType:y.stringType}}}t.TimeFilter=A.TimeFilter,t.TimeFilterResolver=A.TimeFilterResolver,function(e){e[e.floatType=0]="floatType",e[e.stringType=1]="stringType",e[e.colorType=2]="colorType",e[e.intType=3]="intType",e[e.formulaType=4]="formulaType"}(y=t.AnimatedAttrValueType||(t.AnimatedAttrValueType={})),t.toShapeParams=m,t.parseBehaviorAttr=function(e){var t=e.childElement("p:cTn"),r=t.childElementOptional("p:stCondLst","p:cond"),n=0;r&&(n=r.attr.getNumber("delay",0));var i,o=t.attr.getStringOptional("dur");i=void 0===o?1:"indefinite"===o?-1:parseInt(o);var a=t.attr.getStringOptional("fill"),s=t.attr.getStringOptional("tmFilter"),c=e.childElementOptional("p:attrNameLst"),u=[];return c&&c.elementsWithName("p:attrName").forEach((function(e){u.push(e.text)})),{duration:i,delay:n,animationAttrNames:u,timeFilter:s,fill:a}},t.getValueHolderOptional=function(e,t,r){if(void 0!==e)return g(e,t,r)},t.getValueHolder=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(78),o=function(){function e(e){this.behaviorNode=e.childElement("p:cBhvr"),this.timingNode=this.behaviorNode.childElement("p:cTn")}return e.prototype.animeId=function(){var e;return String(null!=(e=this.timingNode.attr.getNumberOptional("id"))?e:Date.now())},e.prototype.duration=function(){var e=this.timingNode.attr.getStringOptional("dur");return e?"indefinite"===e?1/0:parseInt(e):1},e.prototype.delay=function(){var e=this.timingNode.childElementOptional("p:stCondLst","p:cond");return e?e.attr.getNumber("delay",0):0},e.prototype.ease=function(){var e=i.parseTimeFilter(this.timingNode.attr.getStringOptional("tmFilter")),t=this.timingNode.attr.getStringOptional("spd");if(t){var r=n.parseSTPercentage(t);if(!Number.isNaN(r)&&1!==r&&0!==r)return r>0?function(t){return e(t/r)}:function(t){return 1-e(t/-r)}}return e},e.prototype.reverse=function(){return Boolean(this.timingNode.attr.getBooleanOptional("autoRev"))},e.prototype.rewind=function(){var e=this.timingNode.attr.getStringOptional("fill");return"transition"===e||"remove"===e},e.prototype.repeat=function(){var e=this.timingNode.attr.get("repeatCount","");if(!e)return 1;if("indefinite"===e)return 1/0;var t=Number(e)/1e3;return Number.isNaN(t)?1:t},e.prototype.attrNames=function(){var e=this.behaviorNode.childElementOptional("p:attrNameLst"),t=[];if(e)for(var r=0,n=e.elementsWithName("p:attrName");r<n.length;r++){var i=n[r],o=this.mapAttrName(i.text);o&&t.push(o)}return t},e.prototype.mapAttrName=function(e){if("string"==typeof e){var t=e.toLowerCase();switch(t){case"ppt_x":case"ppt_y":case"ppt_w":case"ppt_h":case"xshear":case"yshear":case"fillcolor":return t;case"scalex":return"scaleX";case"scaley":return"scaleY";case"style.rotation":case"r":return"rotate";case"style.visibility":return"visible";case"style.opacity":return"opacity"}}},e}();t.AnimationBehavior=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(24),s=r(42),c=r(6),u=r(43),l=function(e){function t(t,r,n,i,o){var a=e.call(this)||this;if(a.playingSoundEffecting=!1,a.animeId=t.animation.id,a.sequenceIndex=t.animation.sequenceIndex,a.shapeId=t.animation.spId,a.atomAnimeId=t.props.animeId,a.delay=t.props.delay+i,a.duration=t.props.duration,a.parentAnimeDelay=t.animation.delay+i,a.sequenceBeginAt=i,a.parentAnimeDuration=t.animation.duration,a.parentAnimeAutoRev=t.animation.autoRev,a.autoRev=t.props.autoRev,a.fill=t.props.fill,a.presetClass=t.animation.presetClass,a.presetID=t.animation.presetID,a.repeatCount=t.animation.repeatCount,a.repeatEndCondition=t.animation.repeatEndCondition,a.animeIndex=o,a.eventSourceId=void 0===t.animation.eventSourceShapeId?s.mainSequenceEventSourceId:t.animation.eventSourceShapeId,a.animatedValueAttrs=t.props.animatedValueAttrs,a.shapeParam=n.shapeParamsIndex[parseInt(a.shapeId)],a.shapeAnimationParams=c.toShapeParams(a.shapeId,n),a.soundEffectId=t.animation.soundEffectId,void 0!==a.animatedValueAttrs){var u=a.animatedValueAttrs;a.formulas=u.slice(0,u.length-1).map((function(e,t){var i=u[t],o=u[t+1];void 0!==u[t].formula&&(o.formula=i.formula);var s=a.parseValue(i,r,n),c=a.parseValue(o,r,n);return{from:s.value,to:c.value,startProcessRate:i.time,endProcessRate:o.time,formula:s.formula,fromType:s.type,toType:c.type}}))}return a}return i(t,e),t.prototype.createState=function(e,t,r){if(this.shouldPlaySoundEffecting(),this.setAnimePlayState(e),e===this.sequenceBeginAt&&(this.ended=!1),!0===this.ended&&!1===this.stateCache.playingSoundEffecting)return this.stateCache;if(void 0===this.repeatCount||"none"===this.repeatCount){!0===this.parentAnimeAutoRev?e>=this.parentAnimeDelay+2*this.parentAnimeDuration&&(this.ended=!0):!0===this.autoRev?e>=this.delay+2*this.duration&&(this.ended=!0):e>=this.delay+this.duration&&(this.ended=!0);var n=this.getAutoRevEffectiveTime(e);return this.getState(n,t)}var i=this.getRepeatEffectiveTime(e,r);return n=this.getAutoRevEffectiveTime(i),this.getState(n,t)},t.prototype.getRepeatEffectiveTime=function(e,t){var r=this.parentAnimeDuration;return!0===this.parentAnimeAutoRev&&(r=2*this.parentAnimeDuration),"indefinite"===this.repeatCount?(void 0===this.loopStartTime&&(this.loopStartTime=t),(t-this.loopStartTime+this.sequenceBeginAt-this.parentAnimeDelay)%r+this.parentAnimeDelay):Math.floor((e-this.parentAnimeDelay)/r)>=this.repeatCount?(this.ended=!0,this.delay+this.duration-1):(e-this.parentAnimeDelay)%r+this.parentAnimeDelay},t.prototype.getAutoRevEffectiveTime=function(e){var t;if(!0===this.parentAnimeAutoRev){var r=(n=this.delay)+this.duration;t=e>(o=(i=this.parentAnimeDelay+this.parentAnimeDuration+(this.parentAnimeDelay+this.parentAnimeDuration-r))+this.duration)?n:e>i&&e<=o?n+o-e:e>r&&e<=r?r:e}else if(!0===this.autoRev){var n,i,o;t=e>(o=(i=r=(n=this.delay)+this.duration)+this.duration)?n:e>i&&e<=o?n+o-e:e}else t=e;return t},t.prototype.parseValue=function(e,t,r){return void 0!==e.formula?{value:e.attrValue,type:"formula",formula:u.parse(e.formula).compile()}:e.attrValueType===c.AnimatedAttrValueType.formulaType?{value:u.parse(e.attrValue).compile(),type:"variableFormula"}:{value:this.translateAttrValue(e.attrValue,t,r),type:"static"}},t.prototype.translateAttrValue=function(e,t,r){if(!e)return e;if(!this.shapeParam)throw new Error("not found shape "+this.shapeId+" data");return e},t.prototype.cacluateAttr=function(e,t,r){var n;if(void 0!==e){var i=(t-e.startProcessRate)/(e.endProcessRate-e.startProcessRate),a=o(o({},r),{$ppt_x:this.shapeAnimationParams.ppt_x,$ppt_y:this.shapeAnimationParams.ppt_y,$ppt_w:this.shapeAnimationParams.ppt_w,$ppt_h:this.shapeAnimationParams.ppt_h,pi:Math.PI});if("variableFormula"===e.fromType){var s=e.from.evaluate(a);n=s+(("variableFormula"===e.toType?e.to.evaluate(a):e.to)-s)*i}else if("formula"===e.fromType){var c=e.from+(e.to-e.from)*i;n=e.formula.evaluate(o(o({},a),{$:c}))}else n=(s=e.from)+(("variableFormula"===e.toType?e.to.evaluate(a):e.to)-s)*i;return n}},t.prototype.getExcutingFormula=function(e,t){for(var r,n=0;n<t.length;n++)if(n+1===t.length){if(t[n].startProcessRate<=e){r=t[n];break}}else if(t[n].startProcessRate<=e&&t[n+1].startProcessRate>e){r=t[n];break}return r},t.prototype.shouldPlaySoundEffecting=function(){this.readyToPlaySoundEffect===a.SoundEffectPlayState.Ready?this.readyToPlaySoundEffect=a.SoundEffectPlayState.Playing:this.readyToPlaySoundEffect===a.SoundEffectPlayState.Playing?(this.playingSoundEffecting=!0,this.readyToPlaySoundEffect=a.SoundEffectPlayState.Stop):this.playingSoundEffecting=!1},t.prototype.setAnimePlayState=function(e){e<=this.sequenceBeginAt?this.animePlayState=a.AnimePlayState.Ready:e>=this.sequenceBeginAt+this.duration?this.animePlayState=a.AnimePlayState.Stop:this.animePlayState=a.AnimePlayState.Playing},t}(a.CacheTimingAnime);t.AtomTimingAnime=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){this.delay=e,this.duration=t,this.timeFilter=r,this.fill=n}return Object.defineProperty(e.prototype,"rate",{get:function(){return this._rate},enumerable:!0,configurable:!0}),e.prototype.caclulate=function(e){var t;return t=e<this.delay?"beforePlay":e<this.delay+this.duration?(e-this.delay)/this.duration:"hold"===this.fill?1:"end",this.timeFilter&&"number"==typeof t&&(t=this.timeFilter.filter(t)),this._rate=t,this},e}();t.LinearRateCaculator=n;var i=function(){function e(e,t,r){this.delay=e,this.duration=t,this.fill=r}return Object.defineProperty(e.prototype,"rate",{get:function(){return this._rate},enumerable:!0,configurable:!0}),e.prototype.caclulate=function(e){var t;return t=e<this.delay?"beforePlay":e<this.delay+this.duration?0:"hold"===this.fill?1:"end",this._rate=t,this},e}();t.DiscreteRateCaculator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.logger=e}return e.prototype.createMonitor=function(){return new i(this.logger).ref},e}();t.ImageLoadingMonitor=n;var i=function(){function e(e){var t=this;this.logger=e,this.image=null,this.timer=null,this.beginTimestamp=0,this.ref=function(e){e?t.bindImage(e):t.releaseImage()},this.onLoad=function(){0!==t.beginTimestamp&&(t.beginTimestamp=0,t.clearTimer())},this.onError=function(e){var r,n;0!==t.beginTimestamp&&(t.beginTimestamp=0,t.clearTimer(),n="string"==typeof e?new Error(e):new Error(""+e.message),null===(r=t.logger)||void 0===r||r.error("loading image "+t.getImageUrl()+" with error: "+n))},this.onTimeout=function(){var e;t.beginTimestamp=0,null===(e=t.logger)||void 0===e||e.warn("loading image "+t.getImageUrl()+" timeout for 10000ms")},this.getImageUrl=function(){var e,r;return t.image&&t.image instanceof SVGImageElement?null===(e=t.image)||void 0===e?void 0:e.href.animVal:null===(r=t.image)||void 0===r?void 0:r.src}}return e.prototype.bindImage=function(e){e.onload=this.onLoad,e.onerror=this.onError,this.image=e,this.timer=setTimeout(this.onTimeout,1e4),this.beginTimestamp=Date.now()},e.prototype.releaseImage=function(){this.image&&(this.image.onload=null,this.image.onerror=null,this.image=null,this.beginTimestamp=0,this.clearTimer())},e.prototype.clearTimer=function(){null!==this.timer&&clearTimeout(this.timer)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeColor=function(e,t){e=e.replace("#","");var r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return"number"==typeof t?"rgba("+r+","+n+","+i+","+t+")":"rgb("+r+","+n+","+i+")"},t.toFlexAlign=function(e){switch(e){case"b":return"flex-end";case"ctr":return"center";default:return"flex-start"}},t.isCenter=function(e){return"center"===e||"ctr"===e},t.toTextAlign=function(e){switch(e){case"l":return"left";case"r":return"right";case"ctr":return"center";case"just":case"dist":return"justify";default:return"left"}},t.toUnderLine=function(e){switch(e){case"sng":return"underline";default:return"none"}},t.getShapeScale=function(e,t){var r=t.scaleX,n=t.scaleY;return Math.abs(Math.cos(e/180*Math.PI))>=Math.abs(Math.sin(e/180*Math.PI))?{scaleX:r,scaleY:n}:{scaleX:n,scaleY:r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32);t.FormulaRegistry=n.FormulaRegistry,t.FormulaEval=n.FormulaEval;var i=r(60);t.LumiaFactory=i.LumiaFactory,t.LumiaContext=i.LumiaContext,t.getPresetShapeDefinition=i.getPresetShapeDefinition;var o=r(62);t.Lumia=o.Lumia},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.timeFilterNodes=e}return e.prototype.filter=function(e){var t=this,r=this.timeFilterNodes.slice(0,this.timeFilterNodes.length-1).map((function(e,r){return[t.timeFilterNodes[r],t.timeFilterNodes[r+1]]})).filter((function(t){var r=t[0],n=t[1];return r.timeInput<=e&&n.timeInput>=e}))[0],n=r[0],i=r[1];return(e-n.timeInput)/(i.timeInput-n.timeInput)*(i.timeOutput-n.timeOutput)+n.timeOutput},e}();t.TimeFilter=n;var i=function(){function e(){}return e.prototype.resolve=function(e){return new n(this.standardizationTokenSplit(e).split(";").map((function(e){var t=e.split(","),r=t[0],n=t[1];return{timeInput:parseFloat(r),timeOutput:parseFloat(n)}})))},e.prototype.standardizationTokenSplit=function(e){return e.replace(/\s+/g,"")},e}();t.TimeFilterResolver=i},function(e,t){e.exports=r(64)},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function a(e,t,r,n){var a;return i(this,void 0,void 0,(function(){return o(this,(function(i){return window&&window.postMessage({name:"pptDataLoadError",src:e,event:"PPT data load failed",status:t},"*"),null===(a=r)||void 0===a||a.error("fetch "+JSON.stringify(e)+" failed with "+t+" : ",n),[2]}))}))}function s(e,t,r,a){var s;return i(this,void 0,void 0,(function(){var i,c,u;return o(this,(function(o){switch(o.label){case 0:i=setTimeout((function(){var t;null===(t=r)||void 0===t||t.warn("fetch "+e+" for "+a+"ms")}),a),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,n({},t))];case 2:return c=o.sent(),clearTimeout(i),[2,c];case 3:throw u=o.sent(),clearTimeout(i),null===(s=r)||void 0===s||s.error("fetch "+e+" with error "+u),u;case 4:return[2]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchText=function(e,t){return i(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return[4,s(e,void 0,t,5e3)];case 1:return 200===(r=i.sent()).status?[3,3]:[4,r.text()];case 2:throw n=i.sent(),a(e,r.status,t,new Error(n)),new Error("fetch "+e+" failed with "+r.status);case 3:return[4,r.text()];case 4:return[2,i.sent()]}}))}))},t.fetchJSON=function(e,t){return i(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return[4,s(e,{headers:{"content-type":"application/json",Accept:"application/json"}},t,5e3)];case 1:return 200===(r=i.sent()).status?[3,3]:[4,r.text()];case 2:throw n=i.sent(),a(e,r.status,t,new Error(n)),new Error("fetch "+e+" failed with "+r.status);case 3:return[4,r.json()];case 4:return[2,i.sent()]}}))}))},t.fetchResourceFailedCallback=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(74),i=r(75),o=r(4),a=r(42);t.mainSequenceEventSourceId=a.mainSequenceEventSourceId;var s=r(105);t.AnimationsCombiner=s.AnimationsCombiner,t.createSlideAnimations=function(e,t){var r=new n.AnimationsCollector(e,t).collect(),a=new i.AnimationManager(r,t);return a.triggerEvent.on("onNext",(function(e){"slide"===e.target&&a.mainSeq.next()})),a.triggerEvent.on("onPrev",(function(e){"slide"===e.target&&a.mainSeq.back()})),a.triggerEvent.on("onEnd",(function(e){"slide"===e.target&&a.end()})),a.triggerEvent.on("onUnmount",(function(e){"slide"===e.target&&(a.pause(),o.sync.render((function(){a.clearCache()}),!1,!1))})),{animationManager:a,sequenceAnimesCounts:{get"-1"(){return a.mainSeq.length}}}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultFonts={"Arial Rounded MT Bold":"https://convertcdn.netless.link/fonts/ArialRoundedMTBold.woff",Arial:"https://convertcdn.netless.link/fonts/arial.woff","Cooper Black":"https://convertcdn.netless.link/fonts/COOPBL.woff",Calibri:"https://convertcdn.netless.link/fonts/Calibri.woff","微软雅黑":"https://convertcdn.netless.link/fonts/msyh.woff","华文新魏":"https://convertcdn.netless.link/fonts/HuaWenXinWei-1.woff","雅痞-简":"https://convertcdn.netless.link/fonts/yuppy.woff","黑体":"https://convertcdn.netless.link/fonts/simhei.woff","楷体":"https://convertcdn.netless.link/fonts/simkai.woff",Heiti:"https://convertcdn.netless.link/fonts/simhei.woff",Aharoni:"https://convertcdn.netless.link/fonts/Aharoni.woff","Aharoni Bold":"https://convertcdn.netless.link/fonts/Aharoni%20Bold.woff","source-han-sans":"https://convertcdn.netless.link/fonts/simhei.woff"},t.loadSubsetFonts=function(e,t,r){if(document&&r){var n=document.getElementById("netless-ppt-font-face-"+t);if(n)return;(n=document.createElement("style")).id="netless-ppt-font-face-"+t,document.head.appendChild(n);var i=r.filter((function(e){return e.src})).map((function(r){var n,i=r.src.split("."),o=i[(null===(n=i)||void 0===n?void 0:n.length)-1],a={"font-style":r.fontStyle,"font-weight":r.fontWeight,"font-family":'"'+r.fontFamily+"-"+t+'"',src:'url("'+e+"/fonts/"+r.src+'") format("'+o+'")'};return JSON.parse(JSON.stringify(a))})).map((function(e){return"@font-face {"+Object.keys(e).reduce((function(t,r){return t+"\n"+r+": "+e[r]+";"}),"")+"}"}));n.innerHTML=i.join("\n")}};var o=new Map;function a(e,t,r){return n(this,void 0,void 0,(function(){var n,a,s;return i(this,(function(i){switch(i.label){case 0:return t?[4,fetch(t,{cache:"force-cache"})]:[3,3];case 1:return[4,i.sent().arrayBuffer()];case 2:n=i.sent(),i.label=3;case 3:if(!n)return[3,8];a=new FontFace(e,n,r),i.label=4;case 4:return i.trys.push([4,6,,7]),[4,a.load()];case 5:return i.sent(),document.fonts.add(a),[3,7];case 6:return s=i.sent(),console.error(e+" load error font",s),[3,7];case 7:return[3,9];case 8:o.delete(e),i.label=9;case 9:return[2]}}))}))}t.loadFont=function(e,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){return o.has(e)||(o.set(e,!0),r&&r[e]?a(e,r[e]):r&&r["*"]?(a(e,r["*"]),a(e,r["*-bold"],{weight:"500"}),a(e,r["*-italic"],{style:"italic"}),a(e,r["*-bold-italic"],{weight:"500",style:"italic"})):t.DefaultFonts[e]&&a(e,t.DefaultFonts[e])),[2]}))}))}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.tasks={slideDidUpdate:!1},this.isLoadFinished=!1}return e.prototype.reset=function(e){this.tasks={slideDidUpdate:!1},this.eventHub=e},e.prototype.endLoadTask=function(e){var t=this;return this.tasks[e]=!0,!!Object.keys(this.tasks).every((function(e){return t.tasks[e]}))&&(this.eventHub.emit("__PresetTransactionReady__"),!0)},e.prototype.addLoadTask=function(e){this.tasks[e]=!1},e.prototype.loadImage=function(e){var t=this;return new Promise((function(r){return n(t,void 0,void 0,(function(){var t,n,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch(e)];case 1:return t=i.sent(),n=new FileReader,[4,t.blob()];case 2:return o=i.sent(),n.onload=function(e){var t;r(null===(t=e.target)||void 0===t?void 0:t.result)},n.onerror=function(){r(e)},n.readAsDataURL(o),[3,4];case 3:return i.sent(),r(e),[3,4];case 4:return[2]}}))}))}))},e}();t.imageLoader=new o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(0);function a(e){switch(void 0===e&&(e=i.Horz),e){case i.MongolianVert:case i.WordArtVert:return"vertical-lr";case i.WordArtVertRtl:case i.EaVert:return"vertical-rl";default:return"horizontal-tb"}}function s(e){var t,r,n=null!=(t=e.left)?t:0,i=null!=(r=e.right)?r:0,a=e.width,s=e.height;return{left:o.toPt(n?n-a/2+s/2:a/2-s/2),top:o.toPt(i?i-s/2+a/2:s/2-a/2),width:o.toPt(s),height:o.toPt(a)}}!function(e){e.Horz="horz",e.Vert="vert",e.Vert270="vert270",e.WordArtVert="wordArtVert",e.EaVert="eaVert",e.MongolianVert="mongolianVert",e.WordArtVertRtl="wordArtVertRtl"}(i=t.TextVerticalType||(t.TextVerticalType={})),t.getTextVerticalAlignType=a,t.getTXBodyOlStyle=function(e){return void 0===e&&(e=i.Horz),e!==i.Horz?{maxHeight:"100%",width:void 0}:{}},t.getFontStyle=function(e){return void 0===e&&(e=i.Horz),e===i.WordArtVert||e===i.WordArtVertRtl?{padding:"0.1em"}:{}},t.getNeedSideWayCharacterList=function(e){switch(void 0===e&&(e=i.Horz),e){case i.EaVert:return["～","（","）","｛","｝","【","】","《","》","〈","〉"];case i.WordArtVertRtl:case i.WordArtVert:return["《","》","…","…","[","]","{","}","<",">","～","〈","〉","(",")"];default:return[]}},t.getNeedUpRightCharacterList=function(e){switch(void 0===e&&(e=i.Horz),e){case i.EaVert:return["“","”","‘","’","："];default:return[]}},t.getConvertedRect=s,t.getTxBodyStyles=function(e,t,r){var o;switch(void 0===e&&(e=i.Horz),e){case i.EaVert:return n(n({},t),{writingMode:a(e)});case i.WordArtVert:case i.WordArtVertRtl:return n(n({},t),{writingMode:a(e),textOrientation:"upright"});case i.Vert:case i.Vert270:var c=s(r),u=null!=(o=t.transform)?o:"";return n(n(n({},t),c),{top:r.insideTable?0:c.top,minHeight:r.insideTable?void 0:c.height,transform:e===i.Vert?u+" rotate(90deg)":u+" rotate(-90deg)"});default:return t}},t.getVerticalType=function(e){var t=e.childElement("a:bodyPr").attr.getStringOptional("vert");if(!t){var r=e.parentElementOptional("a:tc");if(r){var n=r.childElementOptional("a:tcPr");n&&(t=n.attr.getStringOptional("vert"))}}return t||i.Horz},t.getParagraphMargin=function(e,t){return void 0===e&&(e=i.Horz),e===i.WordArtVertRtl?n(n({},t),{marginTop:t.marginLeft,marginLeft:t.marginBottom,marginRight:t.marginTop}):e===i.EaVert||e===i.WordArtVert?n(n({},t),{marginTop:t.marginLeft,marginLeft:t.marginTop,marginRight:t.marginBottom}):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);function i(e){if(e){var t=e.childElementOptional(new n.TagOrExpr("p:nvSpPr","p:nvCxnSpPr"));if(t){var r=t.childElementOptional("p:nvPr","p:ph");if(r){var i=r.attr.getStringOptional("idx"),o=r.attr.getStringOptional("type");return"title"!==o&&"ctrTitle"!==o||(i=i||"0"),{idx:i,type:o}}}}}function o(e,r,n){if(r.masterIndex.txStyle){var i=r.masterIndex.txStyle[e];return i||(i=n?r.masterIndex.txStyle[t.BODY_TEXT_STYLE]:r.masterIndex.txStyle[t.DEFAULT_TEXT_STYLE]),i}}function a(e){return e.main.childElementOptional("p:presentation","p:defaultTextStyle")}function s(e){switch(e){case"ctrTitle":case"title":return"title";case"dt":return"dt";case"ftr":return"ftr";case"sldNum":return"sldNum";default:return"body"}}t.DEFAULT_TEXT_STYLE="other",t.BODY_TEXT_STYLE="body",t.isMajor=function(e){switch(e){case"title":case"ctrTitle":return!0;default:return!1}},t.getRelationshipPlaceHolder=function(e,r,n){var c,u=function(e){var t=!1,r=e.childElementOptional("p:nvSpPr");return r&&r.childElement("p:cNvSpPr").attr.getBooleanOptional("txBox")&&(t=!0),t}(e),l=!0;if("master"===n)return(c=i(e))?{placeHolderType:d=c.type||t.BODY_TEXT_STYLE,masterShape:e,masterStyleXML:o(d,r,u),allShape:[e],isTextBox:u,hasPlaceHolder:l}:(l=!1,{allShape:[e],masterStyleXML:a(r),isTextBox:u,hasPlaceHolder:l});if("layout"===n){if(!(y=i(e)))return l=!1,{allShape:[e],masterStyleXML:a(r),isTextBox:u,hasPlaceHolder:l};var p=s(d=y.type||t.BODY_TEXT_STYLE),h=[e];return(A=r.masterIndex.typeIndex[p])&&h.push(A),{allShape:h,placeHolderType:p,layoutShape:e,masterShape:A,masterStyleXML:o(p,r,u),isTextBox:u,hasPlaceHolder:l}}if(!(c=i(e)))return l=!1,{allShape:[e],masterStyleXML:a(r),isTextBox:u,hasPlaceHolder:l};(function(e){return void 0!==e&&void 0!==e.idx&&"4294967295"===e.idx})(c)&&(c.idx="1");var d,f=void 0;if(c.idx?(f=r.layoutIndex.idxIndex[c.idx],c.type&&void 0===f&&(f=r.layoutIndex.typeIndex[c.type])):c.type&&(f=r.layoutIndex.typeIndex[c.type]),f){var y;if(y=i(f)){p=s(d=y.type||t.BODY_TEXT_STYLE);var A=r.masterIndex.typeIndex[p];return h=[e],f&&h.push(f),A&&h.push(A),{allShape:h,placeHolderType:p,layoutShape:f,masterShape:A,masterStyleXML:o(p,r,u),isTextBox:u,hasPlaceHolder:l}}throw new Error("layout ph not existed.")}return p=s(d=c.type||t.BODY_TEXT_STYLE),h=[e],(A=r.masterIndex.typeIndex[p])&&h.push(A),{allShape:h,placeHolderType:p,layoutShape:e,masterShape:A,masterStyleXML:o(p,r,u),isTextBox:u,hasPlaceHolder:l}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetID=function(e,t,r){return r+"_"+t+"_"+e}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=r(2),a=r(5),s=r(3),c=function(){function e(e){var t=e.context,r=e.animBox;this.context=t,this.animBox=r}return e.prototype.parse=function(e,t){var r,c=null===(r=e)||void 0===r?void 0:r.childElementOptional(new s.TagOrExpr("p:strVal","p:fltVal","p:clrVal","p:intVal"));if(c)switch(c.name){case"p:fltVal":case"p:intVal":var u=parseFloat(c.attr.getString("val"));return i.isNumeric(u)?u:void 0;case"p:clrVal":var l=o.getColor(c.childElement(new(s.TagOrExpr.bind.apply(s.TagOrExpr,n([void 0],a.ALL_COLOR_TYPE)))),this.context.slideContext);if(l){var p=l.rgb().object(),h=p.r,d=p.g,f=p.b;return new i.Color({r:h,g:d,b:f,a:1})}return;default:return i.isNumeric(this.animBox.initState[t])?new i.Formula(c.attr.getString("val"),this.formulaScope):"visible"===t?"hidden"!==c.attr.getString("val"):c.attr.getString("val")}},Object.defineProperty(e.prototype,"formulaScope",{get:function(){return this._formulaScope?this._formulaScope:this._formulaScope=new i.FormulaScope(this.animBox)},enumerable:!0,configurable:!0}),e}();t.AnimVariant=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){if(this.linkedMap={},this.length=0,this.head=void 0,this.tail=void 0,this.pointer=void 0,void 0!==e){this.length=e.length;for(var t=0;t<e.length;t++){var r={key:e[t].key,value:e[t].value,prevKey:0===t?void 0:e[t-1].key,nextKey:t===e.length-1?void 0:e[t+1].key};0===t&&(this.head=r),t===e.length-1&&(this.tail=r),this.linkedMap[e[t].key]=r}this.pointer=e[0].key}}return e.prototype.getPointer=function(){return this.pointer},e.prototype.setPointer=function(e){void 0!==this.linkedMap[e]&&(this.pointer=e)},e.prototype.get=function(e){return void 0===this.linkedMap[e]?void 0:this.linkedMap[e].value},e.prototype.getPointerNode=function(){if(void 0!==this.pointer)return this.linkedMap[this.pointer]},e.prototype.getByPointer=function(){if(void 0!==this.pointer){var e=this.linkedMap[this.pointer];return this.pointer=e.nextKey,e.value}},e.prototype.resetPointer=function(){this.pointer=this.head?this.head.key:void 0},e.prototype.put=function(e,t,r){this.remove(e);var n={key:e,value:t,prevKey:void 0===this.tail?void 0:this.tail.key,nextKey:void 0};void 0===this.head&&(this.head=n),void 0!==this.tail&&(this.tail.nextKey=n.key),this.tail=n,this.linkedMap[e]=n,this.length=this.length+1,1===this.length?this.pointer=n.key:void 0!==r?this.pointer=r:void 0===this.pointer&&(this.pointer=n.key)},e.prototype.insertToHeader=function(e,t,r){this.remove(e);var n=!1;this.length>0&&this.head.key===this.pointer&&(n=!0);var i={key:e,value:t,prevKey:void 0,nextKey:void 0===this.head?void 0:this.head.key};void 0===this.tail&&(this.tail=i),void 0!==this.head&&(this.head.prevKey=i.key),this.head=i,this.linkedMap[e]=i,this.length=this.length+1,1===this.length?this.pointer=i.key:void 0!==r?this.pointer=r:n&&(this.pointer=i.key)},e.prototype.moveToTail=function(e){if(!(this.length<=1)&&this.tail.key!==e){var t=this.linkedMap[e],r=t.prevKey?this.linkedMap[t.prevKey]:void 0,n=this.linkedMap[t.nextKey];this.pointer&&this.pointer===e&&(this.pointer=n.key),r?(r.nextKey=n.key,n.prevKey=r.key):(this.head=n,n.prevKey=void 0),this.linkedMap[this.tail.key].nextKey=t.key,t.nextKey=void 0,this.tail=t}},e.prototype.remove=function(e){var t=this.linkedMap[e];void 0!==t&&(1===this.length?(this.head=void 0,this.tail=void 0,this.length=0,this.pointer=void 0,delete this.linkedMap[e]):(void 0===t.prevKey?this.head=this.linkedMap[t.nextKey]:this.linkedMap[t.prevKey].nextKey=t.nextKey,void 0===t.nextKey?this.tail=this.linkedMap[t.prevKey]:this.linkedMap[t.nextKey].prevKey=t.prevKey,this.pointer===e&&(this.pointer=t.nextKey),this.length=this.length-1,delete this.linkedMap[e]))},e.prototype.forEach=function(e){if(this.length>0)for(var t=this.head.key,r=0;void 0!==t;)e(this.linkedMap[t],r),r++,t=this.linkedMap[t].nextKey},e.prototype.haxNext=function(){return void 0!==this.pointer&&void 0!==this.linkedMap[this.pointer].nextKey},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPointToEnd=function(){return void 0===this.pointer&&0!==this.length},e}();t.LinkedMap=n},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Ready=0]="Ready",e[e.Playing=1]="Playing",e[e.Stop=2]="Stop"}(n=t.SoundEffectPlayState||(t.SoundEffectPlayState={})),function(e){e[e.Ready=0]="Ready",e[e.Playing=1]="Playing",e[e.Stop=2]="Stop"}(i=t.AnimePlayState||(t.AnimePlayState={}));var o=function(){function e(){this.readyToPlaySoundEffect=n.Stop,this.animePlayState=i.Stop,this.cacheProgressTime=void 0,this.stateCache=void 0}return e.prototype.isStateEquals=function(e,t){return e===t},e.prototype.prepareToPlay=function(){this.readyToPlaySoundEffect=n.Ready,this.animePlayState=i.Ready},e.prototype.state=function(e,t,r){return this.stateCache=this.createState(e,t,r),this.cacheProgressTime=e,this.stateCache},e.prototype.resetCache=function(){this.ended=!1,this.stateCache=void 0,this.loopStartTime=void 0,this.cacheProgressTime=void 0,this.readyToPlaySoundEffect=n.Stop,this.animePlayState=i.Stop},e}();t.CacheTimingAnime=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.toPt=n.toPt,t.EmuToPt=n.EmuToPt,t.EmuToPx=n.EmuToPx,t.toNumber=n.toNumber;var i=r(26);t.Slide=i.Slide,t.sequenceIndexesKey=i.sequenceIndexesKey,t.disabelAutoPlayKey=i.disabelAutoPlayKey,t.playLastStepKey=i.playLastStepKey,t.RenderMode=i.RenderMode;var o=r(44);t.loadPPT=o.loadPPT;var a=r(16);t.mainSequenceEventSourceId=a.mainSequenceEventSourceId;var s=r(133);t.previewPPT=s.previewPPT},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27);t.Slide=n.Slide,t.sequenceIndexesKey=n.sequenceIndexesKey,t.disabelAutoPlayKey=n.disabelAutoPlayKey,t.playLastStepKey=n.playLastStepKey,t.RenderMode=n.RenderMode;var i=r(12);t.FormulaEval=i.FormulaEval,t.FormulaRegistry=i.FormulaRegistry,t.getPresetShapeDefinition=i.getPresetShapeDefinition,t.LumiaContext=i.LumiaContext,t.LumiaFactory=i.LumiaFactory;var o=r(40);t.parsingShapeXML=o.parsingShapeXML;var a=r(28);t.parsingShapeGroupXML=a.parsingShapeGroupXML},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(1),c=r(45),u=r(46),l=r(28),p=r(16),h=r(18);t.sequenceIndexesKey="sequenceIndexes",t.disabelAutoPlayKey="disableAutoPlay",t.playLastStepKey="playLastStep",function(e){e[e.Normal=0]="Normal",e[e.Preview=1]="Preview"}(a=t.RenderMode||(t.RenderMode={}));var d=function(e){function t(t){var r=e.call(this,t)||this;return r.shapeGroupRef=s.createRef(),r.eventHub=new c,r.isImageLoadFinished=!1,r.animationManager=r.props.data.animations.animationManager,r.interactiveSeqsKeys=Array.from(r.animationManager.interactiveSeqs.keys()),r.slide=s.createRef(),r.currentSlideKey=r.props.data.uuid+"-"+r.props.data.index,r.isRenderMaster=t.data.layoutXML.childElement("p:sldLayout").attr.getBoolean("showMasterSp",!0),r.initSlideStates(),r.changeStep.bind(r),h.imageLoader.reset(r.eventHub),r}return i(t,e),t.prototype.componentDidMount=function(){this.isImageLoadFinished=h.imageLoader.endLoadTask("slideDidUpdate"),this.animationManager.animBoxes.forEach((function(e){return e.applyPreAnimation()})),"clickEffect"!==this.animationManager.mainSeq.effectType&&1===this.state[this.currentSlideKey].sequenceSteps[p.mainSequenceEventSourceId]&&(this.animationManager.mainSeq.seekIndex(0),this.animationManager.mainSeq.play())},t.prototype.componentWillUnmount=function(){this.animationManager.triggerEvent.emit("onUnmount",{target:"slide"})},t.prototype.componentDidCatch=function(e,t){console.error("catched error: ",e),this.props.data.logger&&this.props.data.logger.error("catched ppt: "+this.props.data.uuid+", index: "+this.props.data.index+", user: "+this.props.userId+" render error : ",e)},t.prototype.initSlideStates=function(){var e=this,t={};0!==this.animationManager.mainSeq.length&&("clickEffect"!==this.animationManager.mainSeq.effectType?t[p.mainSequenceEventSourceId]=1:t[p.mainSequenceEventSourceId]=0),this.animationManager.interactiveSeqs.forEach((function(e,r){t[r]=0}));var r={};void 0!==this.props.pptState&&(r=this.props.pptState);var n=r[this.currentSlideKey];if(n&&void 0!==n.sequenceSteps){t=o(o({},t),n.sequenceSteps);var i=n.sequenceSteps[p.mainSequenceEventSourceId];void 0!==i&&i<0?(i=void 0===this.animationManager.mainSeq.length?void 0:this.animationManager.mainSeq.length,t[p.mainSequenceEventSourceId]=i):t[p.mainSequenceEventSourceId]=i}this.state=this.composeSlideStateIntoPPTState(t),t[p.mainSequenceEventSourceId]&&(1===t[p.mainSequenceEventSourceId]&&"clickEffect"!==this.animationManager.mainSeq.effectType?this.animationManager.mainSeq.seekIndex(0):this.animationManager.mainSeq.seekIndex(t[p.mainSequenceEventSourceId])),this.animationManager.interactiveSeqs.forEach((function(r,n){t[n]&&e.animationManager.mainSeq.seekIndex(t[n])}))},t.prototype.composeSlideStateIntoPPTState=function(e,t){var r,n;return o(o({},this.props.pptState),void 0!==t?((r={})[this.currentSlideKey]={sequenceSteps:e},r.uuid=this.props.data.uuid,r.pageIndex=this.props.data.index,r.disableAutoPlay=t,r):((n={})[this.currentSlideKey]={sequenceSteps:e},n.uuid=this.props.data.uuid,n.pageIndex=this.props.data.index,n))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;void 0!==e.pptState&&(this.setState(e.pptState),this.playAnime(this.props.pptState,e.pptState,this.animationManager.mainSeq,p.mainSequenceEventSourceId),this.animationManager.interactiveSeqs.forEach((function(r,n){t.playAnime(t.props.pptState,e.pptState,r,n)})))},t.prototype.playAnime=function(e,t,r,n){var i,o,a,s,c,u,l=(null===(a=null===(o=null===(i=e)||void 0===i?void 0:i[this.currentSlideKey])||void 0===o?void 0:o.sequenceSteps)||void 0===a?void 0:a[n])||0,p=null===(c=null===(s=t)||void 0===s?void 0:s[this.currentSlideKey])||void 0===c?void 0:c.sequenceSteps[n];if(void 0!==p&&p!==l)if(-1===l)r.seekIndex((null===(u=this.animationManager.mainSeq)||void 0===u?void 0:u.length)||0);else if(p<=r.length&&p>=0){var h=p-l;h>0?((r.index===p-2&&r.isPlaying||h>1)&&r.seekIndex(p-1),r.play()):h<0&&(r.pause(),r.seekIndex(p))}else p>r.length&&(r.pause(),r.seekIndex(r.length))},t.prototype.resetCurrentSlideAnimation=function(){var e=this;if(this.state[this.currentSlideKey]){var t=this.state[this.currentSlideKey].sequenceSteps;Object.keys(t).forEach((function(r){r===p.mainSequenceEventSourceId&&"clickEffect"!==e.animationManager.mainSeq.effectType?t[r]=1:t[r]=0})),this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,this.composeSlideStateIntoPPTState(o({},t),!0))}},t.prototype.resetCurrentPPTAnimation=function(){var e=this,t={disableAutoPlay:this.state.disableAutoPlay,pageIndex:this.state.pageIndex,playLastStep:this.state.playLastStep,progressIndex:this.state.progressIndex,uuid:this.state.uuid},r=Object.keys(this.state).filter((function(t){return t.includes(e.props.data.uuid)})).map((function(t){return{key:t,sequenceSteps:e.state[t].sequenceSteps}})),n={};r.forEach((function(t){var r=t.key,i=t.sequenceSteps;r===e.currentSlideKey&&(Object.keys(i).forEach((function(t){t===p.mainSequenceEventSourceId&&"clickEffect"!==e.animationManager.mainSeq.effectType?i[t]=1:i[t]=0})),n[r]={sequenceSteps:i})})),t=o(o({},t),n),this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,t)},t.prototype.toNextPage=function(){this.props.stateAdapter.onPageToNext&&this.props.stateAdapter.onPageToNext()},t.prototype.toPrevPage=function(){this.props.stateAdapter.onPageToPrev&&this.props.stateAdapter.onPageToPrev()},t.prototype.onPageToNext=function(){return this.setDisableAutoPlay(!1),this.animationManager.mainSeq.seekIndex(this.animationManager.mainSeq.length),this.animationManager.mainSeq.pause(),this.animationManager.interactiveSeqs.forEach((function(e){return e.pause()})),this.props.stateAdapter.onPageToNext?this.props.stateAdapter.onPageToNext():void 0},t.prototype.onPageToPrev=function(){return this.setPrevPageToLastStep(),this.animationManager.mainSeq.pause(),this.animationManager.interactiveSeqs.forEach((function(e){return e.pause()})),this.props.stateAdapter.onPageToPrev?this.props.stateAdapter.onPageToPrev():void 0},t.prototype.changeStep=function(e){var t,r,n=this.state[this.currentSlideKey].sequenceSteps,i=n[p.mainSequenceEventSourceId];if(void 0===i||0===this.animationManager.mainSeq.length)return e>0?this.onPageToNext():e<0?this.onPageToPrev():void 0;i<0&&(this.animationManager.triggerEvent.emit("onEnd",{target:"slide"}),i=this.animationManager.mainSeq.length);var a=i+e;return a<0?this.onPageToPrev():a>this.animationManager.mainSeq.length?this.onPageToNext():void(1===i&&0===a?this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,this.composeSlideStateIntoPPTState(o(o({},n),((t={})[p.mainSequenceEventSourceId]=a,t)),!0)):this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,this.composeSlideStateIntoPPTState(o(o({},n),((r={})[p.mainSequenceEventSourceId]=a,r)),!1)))},t.prototype.setPrevPageToLastStep=function(){var e,t,r,n;if(0!==this.props.data.index){var i,a=this.props.data.uuid+"-"+(this.props.data.index-1),s=this.props.pptState[a];i=o(o({},this.props.pptState),void 0!==s?((e={})[a]=o(o({},s),{sequenceSteps:o(o({},s.sequenceSteps),(t={},t[p.mainSequenceEventSourceId]=-1,t))}),e.uuid=this.props.data.uuid,e.pageIndex=this.props.data.index-1,e.disableAutoPlay=!1,e):((r={})[a]={sequenceSteps:(n={},n[p.mainSequenceEventSourceId]=-1,n)},r.uuid=this.props.data.uuid,r.pageIndex=this.props.data.index-1,r.disableAutoPlay=!1,r)),this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index-1,i)}},t.prototype.setDisableAutoPlay=function(e){this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,this.composeSlideStateIntoPPTState(this.state[this.currentSlideKey].sequenceSteps,e))},t.prototype.onHyperLinkClick=function(e){var t=this.props.data.slideRefIndex[e];if(t&&t.endsWith(".xml")){var r=t.match(/slide(\S*).xml/);null!==r&&this.props.stateAdapter.onPageJumpTo&&this.props.stateAdapter.onPageJumpTo(this.props.data.uuid,parseInt(r[1]))}},t.prototype.onEventSourceClick=function(e){var t,r,n=this.animationManager.interactiveSeqs.get(e),i=this.state[this.currentSlideKey],a=i.sequenceSteps[e];if(void 0!==a){r=void 0!==n&&e!==p.mainSequenceEventSourceId?a>n.length?0:a!==n.length||n.isPlaying?a+1:0:a+1;var s=i.sequenceSteps;this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,this.composeSlideStateIntoPPTState(o(o({},s),((t={})[e]=r,t))))}},t.prototype.setMediaState=function(e,t){var r,n,i,a,s,c,u,l,p,h,d,f,y,A;if(void 0===this.props.pptState||void 0===this.props.pptState.mediaStates)(r={})[this.currentSlideKey]=((n={})[t]=e,n),y=r,void 0!==this.props.userId&&((i={})[this.currentSlideKey]=((a={})[t]=this.props.userId,a),A=i);else{var m=this.props.pptState.mediaStates[this.currentSlideKey];void 0===m?((s={})[t]=e,m=s):m[t]=e,void 0!==this.props.userId&&(void 0!==this.state.mediaActionUserIds?A=void 0!==this.state.mediaActionUserIds[this.currentSlideKey]?o(o({},this.state.mediaActionUserIds),((c={})[this.currentSlideKey]=o(o({},this.state.mediaActionUserIds[this.currentSlideKey]),((u={})[t]=this.props.userId,u)),c)):o(o({},this.state.mediaActionUserIds),((l={})[this.currentSlideKey]=((p={})[t]=this.props.userId,p),l)):((h={})[this.currentSlideKey]=((d={})[t]=this.props.userId,d),A=h)),y=o(o({},this.props.pptState.mediaStates),((f={})[this.currentSlideKey]=m,f))}this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,o(o({},this.props.pptState),{mediaStates:y,mediaActionUserIds:A}))},t.prototype.componentDidUpdate=function(e,t){var r=this;e.data.index!==this.props.data.index&&h.imageLoader.endLoadTask("slideDidUpdate");var n=t[this.currentSlideKey].sequenceSteps,i=this.state[this.currentSlideKey].sequenceSteps,a=function(e){if(e!==p.mainSequenceEventSourceId&&void 0!==n[e]&&0!==n[e]&&0===i[e])return setTimeout((function(){var t;r.props.stateAdapter.setState(r.props.data.uuid,r.props.data.index,r.composeSlideStateIntoPPTState(o(o({},n),((t={})[e]=i[e]+1,t))))}),80),{value:void 0}};for(var s in n){var c=a(s);if("object"==A(c))return c.value}},t.prototype.onMediaPlay=function(e,t,r){void 0!==window&&window.postMessage({shapeId:e,mediaType:t,action:"play"},"*"),this.props.callbacks&&this.props.callbacks.onMediaPlay&&this.props.callbacks.onMediaPlay(e,t)},t.prototype.onMediaPause=function(e,t,r){void 0!==this.props.userId&&void 0!==this.state.mediaActionUserIds&&void 0!==this.state.mediaActionUserIds[this.currentSlideKey]&&this.state.mediaActionUserIds[this.currentSlideKey][e]===this.props.userId&&this.setMediaState({playing:!1,currentTime:r},e),void 0!==window&&window.postMessage({shapeId:e,mediaType:t,action:"pause"},"*"),this.props.callbacks&&this.props.callbacks.onMediaPause&&this.props.callbacks.onMediaPause(e,t)},t.prototype.renderMediaControllerPortal=function(e){return this.props.renderMode===a.Normal?s.createElement("div",{id:"netless-media-controller-portal-"+e.uuid,style:{position:"absolute",zIndex:1e3}}):null},t.prototype.render=function(){var e,t,r,n,i,o,c,p=this.props.data,h=p.slideXML.childElement("p:sld","p:cSld","p:spTree"),d=p.masterXML.childElement("p:sldMaster","p:cSld","p:spTree"),f=p.layoutXML.childElement("p:sldLayout","p:cSld","p:spTree"),y=p.slideXML.childElement("p:sld","p:cSld"),A={uuid:p.uuid,resourceLoader:p.resourceLoader,slideWidth:p.width,slideHeight:p.height,slideIndex:p.index+1,preload:p.preload},m=this.props.disableAnimation;void 0!==this.props.renderMode&&this.props.renderMode===a.Preview&&(m=!0);var g=null===(t=null===(e=this.props.pptState)||void 0===e?void 0:e.mediaStates)||void 0===t?void 0:t[this.currentSlideKey];return s.createElement(u.Background,{className:this.props.className,slideContext:A,slideRef:this.slide,cSld:y,resourceLoader:p.resourceLoader},this.renderMediaControllerPortal(p),this.isRenderMaster&&s.createElement(l.ShapeGroup,{uuid:this.props.data.uuid,logger:p.logger,slideRef:this.slide,slideContext:A,shapeGroupXML:d,resourceType:"master",disableAnimation:m,zIndex:0,wrapResource:null===(r=p.WrapResource)||void 0===r?void 0:r.master}),s.createElement(l.ShapeGroup,{uuid:this.props.data.uuid,logger:p.logger,slideRef:this.slide,slideContext:A,shapeGroupXML:f,resourceType:"layout",disableAnimation:m,zIndex:1,wrapResource:null===(n=p.WrapResource)||void 0===n?void 0:n.layout}),s.createElement(l.ShapeGroup,{uuid:this.props.data.uuid,ref:this.shapeGroupRef,shapeGroupXML:h,pausing:this.props.pausing,userId:this.props.userId,logger:p.logger,slideRef:this.slide,slideContext:A,resourceType:"slide",interactiveSeqsKeys:this.interactiveSeqsKeys||[],zIndex:2,onEventSourceClick:this.onEventSourceClick.bind(this),onHyperLinkClick:this.onHyperLinkClick.bind(this),meidaStates:g,mediaSlideActionUserIds:null===(o=null===(i=this.props.pptState)||void 0===i?void 0:i.mediaActionUserIds)||void 0===o?void 0:o[this.currentSlideKey],disableAnimation:m,onMediaChange:this.setMediaState.bind(this),onMediaPlay:this.onMediaPlay.bind(this),onMediaPlayError:this.props.callbacks?this.props.callbacks.onMediaPlayError:void 0,onMediaPause:this.onMediaPause.bind(this),rtcClient:this.props.data.rtcClient,wrapResource:null===(c=p.WrapResource)||void 0===c?void 0:c.slide}),";")},t}(s.Component);t.Slide=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(2),c=r(0),u=r(29),l=r(30),p=r(50),h=r(68),d=r(69),f=r(71),y=r(72),A=r(73),m=r(40),g=r(3),v=r(11),b=r(21);function P(e,t,r,n){var i=e.childElementOptional("p:grpSpPr","a:xfrm"),o=0,a=0,u=0,l=0,p=1,h=1,d=void 0;e.extraAttr.getOptional("fillColor")&&(d=e.extraAttr.getColor("fillColor"))instanceof s.GroupFill&&d.setFillColor(n.fillColor);var f=!1,y=!1,A=0,m={x:0,y:0,width:t?t.slideWidth:0,height:t?t.slideHeight:0},g=0;if(i){var v=e.childElementOptional("p:grpSpPr","a:xfrm","a:chExt"),b=e.childElementOptional("p:grpSpPr","a:xfrm","a:ext"),P=e.childElementOptional("p:grpSpPr","a:xfrm","a:chOff");u=v?v.attr.getNumber("cx"):0,l=v?v.attr.getNumber("cy"):0,p=0!==u&&b?b.attr.getNumber("cx")/u:1,h=0!==u&&b?b.attr.getNumber("cy")/l:1,o=P?-P.attr.getNumber("x"):0,a=P?-P.attr.getNumber("y"):0,A=(g=i.attr.getNumber("rot",0))/c.Degree,f=i.attr.getBoolean("flipV",!1),y=i.attr.getBoolean("flipH",!1);var S=e.childElementOptional("p:grpSpPr","a:xfrm","a:off");m={x:S?S.attr.getNumber("x"):0,y:S?S.attr.getNumber("y"):0,width:b?b.attr.getNumber("cx"):0,height:b?b.attr.getNumber("cy"):0}}return{rectangle:m,borderStyle:{},opacity:1,tailor:void 0,flipV:f,flipH:y,transform:{translateX:o,translateY:a,scaleX:p,scaleY:h,rotate:A,fillColor:d},parentGroupShapeId:r,fillColor:d,rotate:g,hidden:e.extraAttr.getBooleanOptional("hidden")}}t.parsingShapeGroupXML=P;var S=function(e){function t(r){var n=e.call(this,r)||this;n.animeTarget=a.createRef(),n.eventSourceId=void 0,n.shapeWrappers=[],n.shapeMap=new u.MapNode(P),n.renderShape=function(e,t,r,i,o,s){var c=t.extraAttr.getString("spId");return a.createElement(m.ShapeWrapper,{key:""+r,ref:function(e){return n.shapeWrappers.push(e)},shapeXML:t,slideContext:n.props.slideContext,shapeGroupTransform:i,interactiveSeqsKeys:n.props.interactiveSeqsKeys,eventSourceId:n.eventSourceId,onEventSourceClick:n.props.onEventSourceClick,onHyperLinkClick:n.props.onHyperLinkClick,zIndex:n.zIndex(e,t),resourceType:n.props.resourceType,flipH:s},(function(e){var r;return a.createElement(A.Shape,{uuid:n.props.uuid,width:e.width,fillColor:e.fillColor,slideContext:n.props.slideContext,height:e.height,slideIndex:n.props.slideContext.slideIndex,groupFillColor:o.fillColor,borderStyle:e.borderStyle,shapeGroupTransform:e.shapeGroupTransform,shapeXML:t,resourceLoader:n.props.slideContext.resourceLoader,resourceType:n.props.resourceType,shapeWrapResource:null===(r=n.props.wrapResource)||void 0===r?void 0:r.shapes[c],flipH:e.flipH})}))},n.renderPicture=function(e,t,r,i,o){return a.createElement(m.ShapeWrapper,{key:""+r,shapeXML:t,ref:function(e){return n.shapeWrappers.push(e)},slideContext:n.props.slideContext,interactiveSeqsKeys:n.props.interactiveSeqsKeys,shapeGroupTransform:i,eventSourceId:n.eventSourceId,onEventSourceClick:n.props.onEventSourceClick,onHyperLinkClick:n.props.onHyperLinkClick,zIndex:n.zIndex(e,t),resourceType:n.props.resourceType},(function(e){return n.renderPictureContent(t,e,n.props.slideContext.resourceLoader,i)}))},n.renderGraph=function(e,t,r,i){var o=t.extraAttr.getString("spId");return a.createElement(m.ShapeWrapper,{key:""+r,shapeXML:t,ref:function(e){return n.shapeWrappers.push(e)},slideContext:n.props.slideContext,interactiveSeqsKeys:n.props.interactiveSeqsKeys,eventSourceId:n.eventSourceId,onEventSourceClick:n.props.onEventSourceClick,onHyperLinkClick:n.props.onHyperLinkClick,zIndex:n.zIndex(e,t),resourceType:n.props.resourceType,shapeGroupTransform:i},(function(e){var i;return a.createElement(p.Graph,{uuid:n.props.uuid,slideContext:n.props.slideContext,width:e.width,height:e.height,rotate:e.rotate,borderStyle:e.borderStyle,fillColor:e.fillColor,key:""+r,graphXML:t,shapeWrapResource:null===(i=n.props.wrapResource)||void 0===i?void 0:i.shapes[o],resourceType:e.resoureType})}))},n.renderShapeGroup=function(e,r,i,o,s){var c=n.zIndex(e,r);return a.createElement(t,{key:""+i,uuid:n.props.uuid,slideRef:n.props.slideRef,slideContext:n.props.slideContext,zIndex:c,shapeGroupXML:r,interactiveSeqsKeys:n.props.interactiveSeqsKeys,eventSourceId:n.eventSourceId,resourceType:n.props.resourceType,onEventSourceClick:n.props.onEventSourceClick,onHyperLinkClick:n.props.onHyperLinkClick,shapeGroupTransform:o,flipH:s,meidaStates:n.props.meidaStates,disableAnimation:n.props.disableAnimation,onMediaChange:n.props.onMediaChange,onMediaPlay:n.props.onMediaPlay,onMediaPause:n.props.onMediaPause,onMediaPlayError:n.props.onMediaPlayError,userId:n.props.userId,mediaSlideActionUserIds:n.props.mediaSlideActionUserIds,wrapResource:n.props.wrapResource,rtcClient:n.props.rtcClient})},n.state={soundEffectUrl:null};var i=n.props.shapeGroupXML.extraAttr.getString("spId");n.shapeId=i;var o=b.getTargetID(r.slideContext.uuid,r.slideContext.slideIndex,i);return r.interactiveSeqsKeys&&-1!==r.interactiveSeqsKeys.indexOf(o)&&void 0!==n.props.onEventSourceClick&&(n.eventSourceId=o),n.player=a.createRef(),n}return i(t,e),t.prototype.transformWithAnimation=function(e,t){return t?{translateX:l.get(t,"translateX",0),translateY:l.get(t,"translateY",0),scaleX:l.get(t,"scaleX",1),scaleY:l.get(t,"scaleY",1),rotate:l.get(t,"rotate",0)}:{translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0}},t.prototype.transformWithShapeParams=function(e,t){var r=t.translateX,n=t.translateY,i=e.flipH?-t.scaleX:t.scaleX,o=e.flipV?-t.scaleY:t.scaleY,a=0;return t.rotate&&"number"==typeof t.rotate&&(a=t.rotate),{translateX:r,translateY:n,scaleX:i,scaleY:o,rotate:a}},t.prototype.transform=function(e,t){var r=this.transformWithAnimation(e.transform,t);this.props.shapeGroupTransform&&(r.rotate=this.props.shapeGroupTransform.rotate+r.rotate);var n=this.transformWithShapeParams(e,r),i=n.translateX,o=n.translateY,a=n.scaleX,s=n.scaleY,u=n.rotate;return"translate("+c.toPt(i)+", "+c.toPt(o)+") scale("+a+","+s+") rotate("+(c.toDeg(u)+e.transform.rotate)+"deg)"},t.prototype.opacity=function(e,t){return void 0===t&&(t=1),l.get(e,"opacity",t)},t.prototype.visible=function(e){return l.get(e,"visible",!0)},t.prototype.componentDidCatch=function(e,t){this.props.logger&&this.props.logger.error("catch render error: ",e," stack: ",t.componentStack),this.setState({error:!0})},t.prototype.componentDidMount=function(){var e,t=this;null===(e=window)||void 0===e||e.addEventListener("message",(function(e){"_playSoundEffect"===e.data.type&&e.data.targetID===b.getTargetID(t.props.slideContext.uuid,t.props.slideContext.slideIndex,t.shapeId)&&t.playEffectSound(e.data.targetID,e.data.soundEffectId)}))},t.prototype.updateAnimation=function(e){var t;(null===(t=this.player)||void 0===t?void 0:t.current)&&(1===e.play&&0===e.stop?this.player.current.play():0===e.play&&1===e.stop&&this.player.current.pause())},t.prototype.render=function(){this.shapeWrappers=[];var e=this.state,t=e.error,r=e.soundEffectUrl;if(t)return a.createElement("div",{"data-reason":"render error"});var n,i,o,s,u=this.props.shapeGroupXML,l=this.shapeMap.map(u,this.props.slideContext,this.props.shapeGroupTransform),p=this.props.shapeGroupXML.extraAttr.getString("spId");return this.props.shapeGroupTransform?(n=c.toPt((l.rectangle.x+this.props.shapeGroupTransform.translateX)*this.props.shapeGroupTransform.scaleX),i=c.toPt((l.rectangle.y+this.props.shapeGroupTransform.translateY)*this.props.shapeGroupTransform.scaleY),o=c.toPt(l.rectangle.width*this.props.shapeGroupTransform.scaleX),s=c.toPt(l.rectangle.height*this.props.shapeGroupTransform.scaleY)):(n=c.toPt(l.rectangle.x),i=c.toPt(l.rectangle.y),o=c.toPt(l.rectangle.width),s=c.toPt(l.rectangle.height)),a.createElement("div",{ref:this.animeTarget,className:"spGoupId-"+p,id:b.getTargetID(this.props.slideContext.uuid,this.props.slideContext.slideIndex,p),style:{position:"absolute",left:n,top:i,transform:this.transform(l),width:o,height:s,zIndex:this.props.zIndex,opacity:this.opacity(void 0,l.opacity),display:this.visible(void 0)?void 0:"none"}},r&&a.createElement("audio",{src:r,ref:this.player,controls:!1}),this.renderShapeGroupContent(l))},t.prototype.renderShapeGroupContent=function(e){var t=this,r=this.props.shapeGroupXML,n=r.elementsWithName("p:sp"),i=r.elementsWithName("p:cxnSp"),s=r.elementsWithName("p:pic"),c=r.elementsWithName("p:graphicFrame"),u=r.elementsWithName("p:grpSp");r.elementsWithName("mc:AlternateContent").forEach((function(e){var t=e.childElementOptional("mc:Choice","p:graphicFrame");if(t)c.push(t);else{var r=e.childElementOptional("mc:Fallback","p:pic");r&&s.push(r)}}));var l=o({},e.transform),p=this.props.shapeGroupTransform;p&&(l.rotate+=p.rotate,l.scaleX*=p.scaleX,l.scaleY*=p.scaleY);var h=!!this.props.flipH!==e.flipH;return a.createElement(a.Fragment,null,n.map((function(n,i){return t.renderShape(r,n,i,l,e,h)})),i.map((function(n,i){return t.renderShape(r,n,i,l,e,h)})),s.map((function(n,i){return t.renderPicture(r,n,i,l,e)})),c.map((function(e,n){return t.renderGraph(r,e,n,l)})),u.map((function(e,n){return t.renderShapeGroup(r,e,n,l,h)})))},t.prototype.parseMediaRef=function(e,t){if(t){var r=t.childElementOptional(new g.TagOrExpr("a:videoFile","a:audioFile"));if(r){var n="a:videoFile"===r.name?"video":"audio",i=r.attr.getString("r:link"),o=e.loadURL(this.props.resourceType,i);if(o)return{resURL:o,mediaType:n};var a=t.childElementOptional("p:extLst","p:ext");if(a&&"{DAA4B4D4-6D71-4841-9C94-3DE7FCFB9230}"===a.attr.getString("uri")){var s=a.childElement("p14:media"),c=s.attr.getStringOptional("r:link"),u=s.attr.getStringOptional("r:embed"),l=c||u||"unknow";if(s.hasChildElementWithName("p14:trim")){var p=s.childElement("p14:trim"),h=p.attr.getNumberOptional("st"),d=p.attr.getNumberOptional("end");return h&&(h/=1e3),d&&(d/=1e3),{resURL:e.loadURL(this.props.resourceType,l),mediaType:n,startTime:h,endTime:d}}return{resURL:e.loadURL(this.props.resourceType,l),mediaType:n}}}}},t.prototype.renderPictureContent=function(e,t,r,n){var i,s,u,l=t.width,p=t.height,y=t.fillColor,A=t.borderStyle,m=t.margin,g=(t.play,t.stop,e.childElementOptional("p:nvPicPr","p:nvPr")),P=e.childElement("p:nvPicPr","p:cNvPr").attr.getString("id"),S=this.parseMediaRef(r,g),w=e.childElementOptional("p:blipFill","a:blip"),x=0,O=null===(i=e)||void 0===i?void 0:i.childElementOptional("p:spPr","a:xfrm");if(O){var k=O.attr.getNumber("rot",0);x=Number(k)/c.Degree}var M=o({},m);if(n){var C=v.getShapeScale(x,n),T=C.scaleX,_=C.scaleY;s=l*T,u=p*_,M.left*=T,M.right*=T,M.top*=_,M.bottom*=_}else s=l,u=p;var I=this.props.meidaStates?this.props.meidaStates[P]:void 0;if(S&&"video"===S.mediaType)return a.createElement(f.Video,{width:s,uuid:this.props.uuid,controllerProtalId:"netless-media-controller-portal-"+this.props.slideContext.uuid,logger:this.props.logger,slideRef:this.props.slideRef,startTimePerfix:S.startTime?S.startTime:0,outsidePausing:this.props.pausing,height:u,fillColor:y,borderStyle:A,videoURL:S.resURL,shapeId:P,targetID:b.getTargetID(this.props.slideContext.uuid,this.props.slideContext.slideIndex,P),mediaState:I,resourceLoader:r,disableAnimation:this.props.disableAnimation,onMediaChange:this.props.onMediaChange,onMediaPlay:this.props.onMediaPlay,onMediaPause:this.props.onMediaPause,onMediaPlayError:this.props.onMediaPlayError,userId:this.props.userId,mediaSlideActionUserIds:this.props.mediaSlideActionUserIds,rtcClient:this.props.rtcClient,mediaRef:S});if(S&&"audio"===S.mediaType)return a.createElement(h.Audio,{width:s,controllerProtalId:"netless-media-controller-portal-"+this.props.slideContext.uuid,logger:this.props.logger,slideRef:this.props.slideRef,startTimePerfix:S.startTime?S.startTime:0,outsidePausing:this.props.pausing,height:u,borderStyle:A,uuid:this.props.uuid,audioURL:S.resURL,shapeId:P,targetID:b.getTargetID(this.props.slideContext.uuid,this.props.slideContext.slideIndex,P),mediaState:I,resourceLoader:r,disableAnimation:this.props.disableAnimation,onMediaChange:this.props.onMediaChange,onMediaPlay:this.props.onMediaPlay,onMediaPause:this.props.onMediaPause,onMediaPlayError:this.props.onMediaPlayError,userId:this.props.userId,mediaSlideActionUserIds:this.props.mediaSlideActionUserIds,rtcClient:this.props.rtcClient,mediaRef:S});if(w){var E=w.attr.getStringOptional("r:embed");if(void 0===E)return null;var j=r.loadURL(this.props.resourceType,E),R=void 0;return P&&(R=r.loadURL(this.props.resourceType,"spId"+P)),a.createElement(d.Image,{width:s,uuid:this.props.slideContext.uuid,logger:this.props.logger,resourceType:this.props.resourceType,resId:E,height:u,slideIndex:this.props.slideContext.slideIndex,fillColor:y,borderStyle:A,imageURL:j,margin:M,imageXML:e,preload:this.props.slideContext.preload,spURL:R})}return null},t.prototype.zIndex=function(e,t){var r=t.extraAttr.getStringOptional("spId");if("string"==typeof r){var n=new y.ZOrderIndexer(e).indexBySpId();if(r in n)return n[r]}return 999},t.prototype.playEffectSound=function(e,t){if(void 0!==t&&"slide"===this.props.resourceType){var r=this.props.slideContext.resourceLoader.loadURL(this.props.resourceType,t);if(r){var n=document.getElementById(""+e);if(n){var i=document.createElement("audio");return i.id=e+"-"+t,i.onpause=function(){i.remove()},i.src=r,i.controls=!1,n.appendChild(i),i.play(),!0}}}return!1},t}(a.Component);t.ShapeGroup=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.mapper=e}return e.prototype.map=function(e,t,r){return this.buffer&&this.buffer.source===e||(this.buffer={source:e,target:this.mapper(e,t,void 0,r)}),this.buffer.target},e}();t.MapNode=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,r){var n;if(e&&(n=e[t]),void 0===n&&(n=r),void 0===n)throw new Error("can't get "+JSON.stringify(t)+" from object");return n}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(11),c=r(0),u=r(52),l=r(59),p=r(19),h=function(){function e(){this.indexByLevel=new Map,this.startAtByLevel=new Map}return e.prototype.get=function(e,t,r){var n=e.extraAttr.getNumber("level");if(this.indexByLevel.has(n)||(this.indexByLevel.set(n,0),this.startAtByLevel.set(n,-1)),t!==this.startAtByLevel.get(n))this.indexByLevel.set(n,0),this.startAtByLevel.set(n,t);else{var i=this.indexByLevel.get(n);r&&(i++,this.indexByLevel.set(n,i))}return this.indexByLevel.get(n)},e.prototype.reset=function(){this.indexByLevel=new Map,this.startAtByLevel=new Map},e}();t.BuIndexCounter=h;var d=function(e){function t(t){var r,n=e.call(this,t)||this;n.buIndexCounter=new h,n.paragraphBulletInfo=[],n.bodyPrXML=n.props.txBodyXML.childElement("a:bodyPr"),n.paragraphXMLs=n.props.txBodyXML.elementsWithName("a:p");var i=n.bodyPrXML.childElementOptional("a:prstTxWarp");i&&(n.presetType=i.attr.getString("prst","textNoShape"));var a=n.bodyPrXML.extraAttr.getString("anchor","t"),u=n.bodyPrXML.extraAttr.getString("wrap","square");n.isTextWrap="square"===u,n.spcFirstLastPara=n.bodyPrXML.extraAttr.getBoolean("spcFirstLastPara",!1),n.anchorCtr=n.bodyPrXML.extraAttr.getBoolean("anchorCtr",!1);var l=n.bodyPrXML.extraAttr.getNumber("numCol",1);n.paddingLeft=n.bodyPrXML.extraAttr.getNumber("lIns",c.DefaultLeftPadding);var d=n.bodyPrXML.extraAttr.getNumber("tIns",c.DefaultTopPadding);n.paddingRight=n.bodyPrXML.extraAttr.getNumber("rIns",c.DefaultLeftPadding);var f=n.bodyPrXML.extraAttr.getNumber("bIns",c.DefaultTopPadding),y=null===(r=n.props.textBodyWrapResource)||void 0===r?void 0:r.prop.vert;y||(y=p.getVerticalType(n.props.txBodyXML)),n.vert=y;var A=void 0;return n.props.flipH&&(A="scale(-1, 1)"),n.rectStyle=n.props.insideTable?{position:"relative",left:0,top:0,paddingTop:"0.75pt",paddingBottom:"0.75pt",paddingLeft:0,width:c.toPt(n.props.width),minHeight:c.toPt(n.props.height),transform:A}:{position:"absolute",left:c.toPt(void 0===n.props.left?0:n.props.left),top:c.toPt(void 0===n.props.right?0:n.props.right),width:c.toPt(n.props.width),height:c.toPt(n.props.height),transform:A},n.rectStyle=o({display:"inline-flex",flexDirection:"column",alignItems:n.anchorCtr?"center":"flex-start",justifyContent:s.toFlexAlign(a),zIndex:9999,paddingLeft:c.toPt(n.paddingLeft),paddingTop:c.toPt(d),paddingRight:c.toPt(n.paddingRight),paddingBottom:c.toPt(f),boxSizing:"border-box",whiteSpace:n.isTextWrap?"normal":"nowrap",columnCount:l},n.rectStyle),n.updateRectStyleByWrapResource(),n.generateParagraphBulletInfo(),n}return i(t,e),t.prototype.updateRectStyleByWrapResource=function(){var e=this.props.textBodyWrapResource;if(void 0!==e){var t=e.prop.anchor;this.rectStyle=o(o({},this.rectStyle),{justifyContent:s.toFlexAlign(t)}),this.rectStyle=p.getTxBodyStyles(this.vert,this.rectStyle,this.props)}},t.prototype.generateParagraphBulletInfo=function(){if(void 0!==this.props.textBodyWrapResource){var e=this.props.textBodyWrapResource.paragraphs.map((function(e){var t,r;return{autoNumber:null===(t=e.prop.bulletChar)||void 0===t?void 0:t.autoNumber,autoNumberType:null===(r=e.prop.bulletChar)||void 0===r?void 0:r.autoNumberType,level:e.prop.level,empty:0===e.lines.length}})),t=[0,0,0,0,0,0,0,0,0];this.paragraphBulletInfo=e.map((function(r,n){var i=r.level,o=r.autoNumberType;if(t=t.map((function(e,t){return t>i?0:t===i?o?e:0:e})),o){var a=r.autoNumber;if(n>0&&e[n-1].autoNumber!==a&&(t[i]=0),r.empty)return{order:n,count:e.length};var s=t[i];return t[i]=s+1,{number:s+(a||1),order:n,count:e.length}}return{order:n,count:e.length}}))}},t.prototype.render=function(){var e,t,r=this;if(this.presetType&&this.presetType!==l.PresetType.textNoShape&&l.supportedPresetType.includes(this.presetType)&&this.props.textBodyWrapResource){var n=(null===(t=null===(e=this.bodyPrXML.childElementOptional("a:prstTxWarp"))||void 0===e?void 0:e.childElementOptional("a:avLst"))||void 0===t?void 0:t.elementsWithName("a:gd"))||[];return a.createElement("div",{style:o(o({},this.rectStyle),{display:"flex",justifyContent:"center",alignItems:"center",padding:0}),className:"txBody"},a.createElement(l.default,{presetType:this.presetType,shapeGuideList:n,textBodyWrapResource:this.props.textBodyWrapResource}))}var i,s=p.getTXBodyOlStyle(this.vert);return i=this.props.textBodyWrapResource?this.paragraphXMLs.map((function(e,t){return r.renderParagraph(e,r.bodyPrXML,t,r.spcFirstLastPara,0===t,t===r.paragraphXMLs.length-1,r.isTextWrap,r.props.textBodyWrapResource.paragraphs[t])})):this.paragraphXMLs.map((function(e,t){return r.renderParagraph(e,r.bodyPrXML,t,r.spcFirstLastPara,0===t,t===r.paragraphXMLs.length-1,r.isTextWrap)})),this.buIndexCounter.reset(),a.createElement("div",{className:"txBoby",style:this.rectStyle},a.createElement("ol",{style:o({width:c.toPt(this.props.width-this.paddingLeft-this.paddingRight),marginBlockEnd:0,marginBlockStart:0,paddingBlockStart:0,paddingBlockEnd:0,marginInlineEnd:0,marginInlineStart:0,paddingInlineStart:0,paddingInlineEnd:0,margin:0,padding:0,whiteSpace:this.isTextWrap?"normal":"nowrap",columnCount:this.rectStyle.columnCount},s)},i))},t.prototype.renderParagraph=function(e,t,r,n,i,o,s,c){var l=e.elements.find((function(e){return"a:r"===e.name}));return a.createElement(u.Paragraph,{key:""+r,slideContext:this.props.slideContext,isTextWrap:s,width:this.props.width,height:this.props.height,paragraphIndex:r,firstRangeXML:l,buIndexCounter:this.buIndexCounter,paragraphXML:e,bodyPrXML:t,uuid:this.props.uuid,round:0,spcFirstLastPara:n,isFirst:i,isLast:o,vert:this.vert,resourceType:this.props.resourceType,paragraphWrapResource:c,bulletInfo:this.paragraphBulletInfo[r]})},t}(a.Component);t.TxBody=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function i(e){return e/n.Degree*(Math.PI/180)}t.FormulaRegistry={"*/":function(e,t,r){return e*t/r},"+-":function(e,t,r){return e+t-r},"+/":function(e,t,r){return(e+t)/r},"?:":function(e,t,r){return e>0?t:r},abs:function(e){return Math.abs(e)},at2:function(e,t){return Math.atan2(t,e)*(180/Math.PI)*n.Degree},cat2:function(e,t,r){return e*Math.cos(Math.atan2(r,t))},cos:function(e,t){return e*Math.cos(i(t))},max:function(e,t){return e>t?e:t},min:function(e,t){return e<t?e:t},mod:function(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))},pin:function(e,t,r){return t<e?e:t>r?r:t},sat2:function(e,t,r){return e*Math.sin(Math.atan2(r,t))},sin:function(e,t){return e*Math.sin(i(t))},sqrt:function(e){return Math.sqrt(e)},tan:function(e,t){return e*Math.tan(i(t))},val:function(e){return e}};var o=function(){function e(e){this.expr=e}return e.prototype.standardizationTokenSplit=function(e){return e.replace(/\s+/g," ")},e.prototype.eval=function(e){var r=this.standardizationTokenSplit(this.expr).split(" "),n=r.slice(1,r.length).map((function(t){return isNaN(Number(t))?e.getRequiredVariable(t):parseInt(t)}));if(void 0===t.FormulaRegistry[r[0]])throw new Error("Formula "+r[0]+" not supported");return t.FormulaRegistry[r[0]].apply(t.FormulaRegistry,n)},e.deconstructShapeGuide=function(e){var r=e.split(" "),n=r[0],i=r.slice(1).map((function(e){return parseInt(e)}));return t.FormulaRegistry[n].apply(t.FormulaRegistry,i)},e}();t.FormulaEval=o},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),a=r(61),s=r(34),c=function(){function e(e){this.resourceScheme=e}return e.prototype.loadLumiaPSD=function(t,r){return n(this,void 0,void 0,(function(){var n,c;return i(this,(function(i){switch(i.label){case 0:return c="https://convertcdn.netless.link/publicFiles/xml/PresetShapeDefinitions.xml",this.resourceScheme&&(c=c.replace(/^[a-zA-z]+[^\:\/\/]/,this.resourceScheme)),!1!==t?[3,2]:[4,o.fetchText(c,r)];case 1:return n=i.sent(),[3,6];case 2:return[4,a.get("PresetShapeDefinitions")];case 3:return void 0!==(n=i.sent())?[3,6]:[4,o.fetchText(c,r)];case 4:return n=i.sent(),[4,a.set("PresetShapeDefinitions",n)];case 5:i.sent(),i.label=6;case 6:return e.presetShapeDefinitons=new s.XMLNodeRuntime("slide").parse(n).childElement("presetShapeDefinitons"),[2]}}))}))},e.prototype.preLoad=function(e,t,r,o){return n(this,void 0,void 0,(function(){var e,n,a,s;return i(this,(function(i){switch(i.label){case 0:return[4,this.fetchAllResourceUrl(t,r,o.logger)];case 1:e=i.sent(),n=0,i.label=2;case 2:return n<e.length?(a=n+1,s=e[n],[4,this.prefetchPageResource(s)]):[3,5];case 3:i.sent(),o.preloadProgress&&o.preloadProgress((a/e.length).toFixed(2)),i.label=4;case 4:return n++,[3,2];case 5:return[2]}}))}))},e.prototype.prefetchPageResource=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o;return i(this,(function(i){switch(i.label){case 0:for(t=[],r=0,n=Object.keys(e);r<n.length;r++)o=n[r],t.push(this.prefetchResource(e[o]));return[4,Promise.all(t)];case 1:return i.sent(),[2]}}))}))},e.prototype.prefetchResource=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,a,s,c;return i(this,(function(i){switch(i.label){case 0:if(!(Object.keys(e).length>0))return[3,2];for(t=Object.keys(e),r=[],n=0,o=t;n<o.length;n++)a=o[n],(s=e[a]).endsWith(".mp4")||(c=s,this.resourceScheme&&(c=s.replace(/^[a-zA-z]+[^\:\/\/]/,this.resourceScheme)),r.push(this.fetch(c)));return[4,Promise.all(r)];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.fetch=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch(e)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),console.debug("cache fail",t),[3,3];case 3:return[2]}}))}))},e.prototype.fetchAllResourceUrl=function(e,t,r){return n(this,void 0,void 0,(function(){var n,a;return i(this,(function(i){switch(i.label){case 0:for(n=[],a=1;a<=t;a++)n.push(o.fetchJSON(e+"/resources/resource"+a+".json",r));return[4,Promise.all(n)];case 1:return[2,i.sent()]}}))}))},e.prototype.fetchPageResource=function(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,o.fetchJSON(e+"/resources/resource"+t+".json",r)];case 1:return[2,n.sent()]}}))}))},e}();t.ResourcePreLoader=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.XMLNodeRuntime=n.XMLNodeRuntime;var i=r(35);t.Pickers=i.Pickers},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.attributePickers={},this.childPickers={}}return e.prototype.createPickers=function(){return new o(this.attributePickers,this.childPickers)},e.prototype.bindAttributePicker=function(e,t,r){this.bindPicker(e,t,r,this.attributePickers)},e.prototype.bindChildPicker=function(e,t,r){this.bindPicker(e,t,r,this.childPickers)},e.prototype.bindPicker=function(e,t,r,n){"string"==typeof e&&(e=[e]),"string"==typeof t&&(t=[t]);for(var i=0,o=e;i<o.length;i++){var a=o[i];this.bindPickerWithAttributeNames(a,t,r,n)}},e.prototype.bindPickerWithAttributeNames=function(e,t,r,n){var i=n[e];if(i||(i=n[e]={}),"object"==A(i))for(var o=0,a=t;o<a.length;o++)i[a[o]]=r},e}();t.PickersModule=n;var i=function(){function e(e){this.pickers=e}return e.prototype.forEach=function(e,t){var r=this.pickers[e];if(r)for(var n in r)"*"!==n&&t(n)},e.prototype.has=function(e,t){var r=this.pickers[e];return!!r&&(t in r||"*"in r)},e.prototype.get=function(e,t,r,n,i,o){var a=this.pickers[t];if(a){var s=a[r];if(s||(s=a["*"]),s)return s(n,e,r,i,o)}},e}(),o=function(){function e(e,t){this.attributePickers=new i(e),this.childPickers=new i(t)}return e.prototype.forEachAttributes=function(e,t){this.attributePickers.forEach(e,t)},e.prototype.hasAttribute=function(e,t){return this.attributePickers.has(e,t)},e.prototype.getAttribute=function(e,t,r,n,i){if(this.context)return this.attributePickers.get(this.context,e,t,r,n,i)},e.prototype.getChild=function(e,t,r,n,i){if(this.context)return this.childPickers.get(this.context,e,t,r,n,i)},e}();t.Pickers=o},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(20),a=r(5),s=r(0),c=r(3);function u(e){var t="";return"master"===e?t="m":"layout"===e&&(t="l"),t}function l(e,t,r,n){var i=r.lnStyleXMLDescription;return i||(i=r.lnStyleXMLDescription=Object.freeze(function(e,t,r){for(var n,i=[],s=o.getRelationshipPlaceHolder(e,t,r),u=s.allShape,l=s.placeHolderType,p=(s.masterStyleXML,0),h=u;p<h.length;p++){var d=h[p],f=d.childElementOptional(new c.TagOrExpr("p:spPr","p:grpSpPr"));if(f){var y=f.childElementOptional("a:ln");y&&i.push(y)}var A=d.childElementOptional("p:style");if(A){var m=a.mergeShapeStyle(A,t);m.ln.xml&&i.push(m.ln.xml),n=m.ln.phClr}}return{shapeStyleXMLList:i,placeHolderType:l,placeHolderColor:n}}(e,t,n))),i}function p(e,t,r,i){var s=r.fillStyleXMLDescription;return s||(s=r.fillStyleXMLDescription=Object.freeze(function(e,t,r){for(var i,s=[],u=o.getRelationshipPlaceHolder(e,t,r),l=u.allShape,p=u.placeHolderType,h=(u.masterStyleXML,0),d=l;h<d.length;h++){var f=d[h],y=f.childElementOptional(new c.TagOrExpr("p:spPr","p:grpSpPr"),new(c.TagOrExpr.bind.apply(c.TagOrExpr,n([void 0],a.ALL_FILL_TYPE))));y&&s.push(y);var A=f.childElementOptional("p:style");if(A){var m=a.mergeShapeStyle(A,t);m.fill.xml&&s.push(m.fill.xml),i=m.fill.phClr}}return{shapeStyleXMLList:s,placeHolderType:p,placeHolderColor:i}}(e,t,i))),s}t.DEFAULT_HALF_BORBER_WIDTH=6350,t.bindShapeCommonPickers=function(e){e.bindChildPicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"a:prstGeom",h),e.bindChildPicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"a:custGeom",h),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"fillColor",d),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderWidth",y),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderType",A),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderColor",f),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderStrokeDashArray",m),e.bindAttributePicker("p:sp","spId",(function(e,t,r,n,i){return u(i)+e.childElement("p:nvSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:cxnSp","spId",(function(e,t,r,n,i){return u(i)+e.childElement("p:nvCxnSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:pic","spId",(function(e,t,r,n,i){return u(i)+e.childElement("p:nvPicPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:grpSp","spId",(function(e,t,r,n,i){return u(i)+e.childElement("p:nvGrpSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:spTree","spId",(function(e,t,r,n,i){return u(i)+e.childElement("p:nvGrpSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:graphicFrame","spId",(function(e,t,r,n,i){return u(i)+e.childElement("p:nvGraphicFramePr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:graphicFrame","borderWidth",(function(e){return 0})),e.bindAttributePicker("p:graphicFrame","borderType",(function(e){return"none"})),e.bindAttributePicker("p:graphicFrame","borderColor",(function(e){return"black"})),e.bindAttributePicker("p:graphicFrame","borderStrokeDashArray",(function(e){return"0"}))};var h=function(e,t,r,n,i){for(var a=o.getRelationshipPlaceHolder(e,t,i),s=a.allShape,c=(a.placeHolderType,a.masterStyleXML,0),u=s;c<u.length;c++){var l=u[c].childElementOptional("p:spPr",r);if(l)return l}},d=function(e,t,r,n,o){for(var a=p(e,t,n,o),s=0,c=a.shapeStyleXMLList;s<c.length;s++){var u=c[s];return new i.FillOrLineFillReader(a.placeHolderColor).read(u,t)||void 0}},f=function(e,t,r,o,s){for(var u=l(e,t,o,s),p=0,h=u.shapeStyleXMLList;p<h.length;p++){var d=h[p].childElementOptional(new(c.TagOrExpr.bind.apply(c.TagOrExpr,n([void 0],a.ALL_FILL_TYPE))));if(d){var f=new i.FillOrLineFillReader(u.placeHolderColor).read(d,t);if(f)return f}}return i.UNDEFINED},y=function(e,r,n,i,o){for(var a=0,s=l(e,r,i,o).shapeStyleXMLList;a<s.length;a++){var c=s[a];if(c&&c.attr.has("w")){var u=c.attr.getNumber("w");return u>t.DEFAULT_HALF_BORBER_WIDTH?u:t.DEFAULT_HALF_BORBER_WIDTH}}return t.DEFAULT_HALF_BORBER_WIDTH},A=function(e,t,r,n,i){for(var o=0,a=l(e,t,n,i).shapeStyleXMLList;o<a.length;o++){var s=a[o].childElementOptional("a:prstDash");if(s&&s.attr.has("val"))return s.attr.getString("val")}return"solid"},m=function(e,t,r,n,i){var o=y(e,t,r,n,i)/s.EmuToPt;switch(A(e,t,r,n,i)){case"solid":return"0";case"dash":return""+5*o;case"dashDot":return" "+5*o+", "+5*o+", "+o+", "+5*o;case"dot":return o+",  "+5*o;case"lgDash":return 2*o+", "+o;case"lgDashDot":return 10*o+", "+5*o+", "+o+", "+5*o+", "+o+", "+5*o;case"sysDash":return 5*o+", "+2*o;case"sysDashDot":return 5*o+", "+2*o+", "+o+", "+5*o;case"sysDashDotDot":return 5*o+", "+2*o+", "+o+", "+5*o+", "+o+", "+5*o;case"sysDot":return 2*o+", "+5*o;default:return"0"}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(18),c=function(e){function t(t){var r=e.call(this,t)||this;r.isRender=!1,r.state={dataUrl:""};var n=t.xlinkHref||t.href;return n&&s.imageLoader.addLoadTask(n),r}return i(t,e),t.prototype.getSnapshotBeforeUpdate=function(e,t){var r=e.xlinkHref||e.href,n=this.props.xlinkHref||this.props.href;return!(r===n||!n||(s.imageLoader.addLoadTask(n),0))},t.prototype.componentDidUpdate=function(e,t,r){r&&this.loadImage()},t.prototype.componentDidMount=function(){this.isRender=!0,this.loadImage()},t.prototype.componentWillUnmount=function(){this.isRender=!1},t.prototype.updateImageState=function(e,t){this.isRender&&this.setState({dataUrl:e},t)},t.prototype.loadImage=function(){var e=this,t=this.props.xlinkHref||this.props.href;t&&s.imageLoader.loadImage(t).then((function(r){e.updateImageState(r,(function(){s.imageLoader.endLoadTask(t)}))}))},t.prototype.render=function(){if(this.state.dataUrl){var e=o(o({},this.props),{innerref:void 0,xlinkHref:this.state.dataUrl,href:this.state.dataUrl});return a.createElement("image",o({},e,{ref:this.props.innerref}))}return null},t}(a.Component);t.SvgImage=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(39),c=function(e){var t=e.startTime,r=e.endTime,n=e.duration;return t&&(n-=t),r&&(n-=r),n},u=function(e){function t(t){var r=e.call(this,t)||this;return r.state={total:c(t)},r}return i(t,e),t.getDerivedStateFromProps=function(e){return{total:c(e)}},t.prototype.onPlayClick=function(e){e.stopPropagation(),this.props.onPlayClick()},t.prototype.onPauseClick=function(e){e.stopPropagation(),this.props.onPauseClick()},t.prototype.formatTime=function(e){var t="00:00";if(e){var r=Math.floor(e/60),n=String(r<0?0:r).padStart(2,"0"),i=Math.floor(e%60);t=n+":"+String(i<0?0:i).padStart(2,"0")}return t},t.prototype.computedCurrent=function(){var e=this.props.startTime,t=this.props.currentTime;return e&&(t>e?t-=e:t=0),t>this.state.total&&(t=this.state.total),t},t.prototype.onBarClick=function(e){if(e.stopPropagation(),this.props.duration){var t=this.props,r=t.startTime,n=t.endTime,i=this.props.duration;r&&(i-=r),n&&(i-=n);var o=e.nativeEvent.offsetX/e.currentTarget.clientWidth*i;r&&(o+=r),this.props.onSeekClick(Math.floor(o))}},t.prototype.componentDidMount=function(){this.controllerPortal=document.getElementById(this.props.protalId)},t.prototype.renderController=function(e){return a.createElement("div",{className:"ppt-event-source",style:o({background:"#FFFFFF",borderRadius:50,height:50,width:300,display:this.props.display?"flex":"none",flexDirection:"row",alignItems:"center"},this.props.style),ref:this.props.controllerRef},a.createElement("div",{className:"ppt-event-source",style:{marginLeft:15,marginRight:10,fontSize:0,height:20,display:this.props.playing?"none":"block"},onClick:this.onPlayClick.bind(this)},a.createElement("img",{style:{height:20},src:this.props.resourceLoader.replaceProtocolByresourceScheme("https://convertcdn.netless.link/publicFiles/icon/play.png")})),a.createElement("div",{className:"ppt-event-source",style:{marginLeft:15,marginRight:10,fontSize:0,height:20,display:this.props.playing?"block":"none"},onClick:this.onPauseClick.bind(this)},a.createElement("img",{style:{height:20},src:this.props.resourceLoader.replaceProtocolByresourceScheme("https://convertcdn.netless.link/publicFiles/icon/pause.png")})),a.createElement("div",{style:{width:100},className:"timer"},a.createElement("span",{className:"current"},this.formatTime(this.computedCurrent())),a.createElement("span",null,"/"),a.createElement("span",{className:"total"},this.formatTime(this.state.total))),a.createElement("div",{className:"ppt-event-source",style:{flex:1,position:"relative",marginRight:10},onMouseDown:this.onBarClick.bind(this)},a.createElement("div",{style:{background:"#D9D9D9",position:"relative",height:10,display:"flex"},className:"total"},a.createElement("div",{style:{background:"#4F4F4F",top:0,left:0,height:10,flex:e},className:"played"}))))},t.prototype.render=function(){var e=this.props,t=e.duration,r=e.endTime,n=e.currentTime,i=e.playing;r&&t>0&&n+r>=t&&i&&this.props.onMediaEnd();var o=0;return this.props.duration&&(o=this.computedCurrent()/this.state.total),this.controllerPortal?s.createPortal(this.renderController(o),this.controllerPortal):this.renderController(o)},t}(a.Component);t.MediaController=u},function(e,t){e.exports=r(18)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(21),c=r(0),u=r(29),l=r(30),p=r(2),h=r(14),d=r(0);function f(e,t,r,n){var i={x:e.extraAttr.getNumber("x"),y:e.extraAttr.getNumber("y"),width:e.extraAttr.getNumber("width"),height:e.extraAttr.getNumber("height")},o=e.extraAttr.getBoolean("hidden"),a=e.extraAttr.getBoolean("flipV"),s=e.extraAttr.getBoolean("flipH"),u=e.extraAttr.getNumberOptional("rot"),l={color:e.extraAttr.getColor("borderColor"),width:e.extraAttr.getNumber("borderWidth"),type:e.extraAttr.getString("borderType"),strokeDashArray:e.extraAttr.getString("borderStrokeDashArray")},h=void 0;e.extraAttr.getOptional("fillColor")&&(h=e.extraAttr.getColor("fillColor"))instanceof p.GroupFill&&h.setFillColor(n.fillColor);var d=e.childElementOptional("p:blipFill","a:srcRect"),f=void 0;if(d){var y=c.parseSTPercentage(d.attr.getNumber("l",0)),A=c.parseSTPercentage(d.attr.getNumber("r",0)),m=c.parseSTPercentage(d.attr.getNumber("t",0)),g=c.parseSTPercentage(d.attr.getNumber("b",0)),v=i.width/(1-y-A),b=i.height/(1-m-g);f={width:v,height:b,margin:{left:v*y,top:b*m,right:v*A,bottom:b*g}}}var P=e.childElementOptional("p:nvSpPr","p:cNvPr","a:hlinkClick"),S=e.childElementOptional("p:nvPicPr","p:cNvPr","a:hlinkClick"),w=void 0;return P&&"ppaction://hlinksldjump"===P.attr.getStringOptional("action")?w=P.attr.getStringOptional("r:id"):S&&"ppaction://hlinksldjump"===S.attr.getStringOptional("action")&&(w=S.attr.getStringOptional("r:id")),{rectangle:i,borderStyle:l,fillColor:h,tailor:f,flipV:a,flipH:s,rotate:u,parentGroupShapeId:r,hidden:o,hyperLinkDestination:w}}t.parsingShapeXML=f;var y=function(e){function t(t){var r=e.call(this,t)||this;if(r.animeTarget=a.createRef(),r.shapeMap=new u.MapNode(f),r.childrenRef=a.createRef(),r.eventSourceId=void 0,r.emptyClick=function(){},r.onClick=function(){return r.shapeWrapperParams.hyperLinkDestination?r.props.onHyperLinkClick?r.props.onHyperLinkClick(r.shapeWrapperParams.hyperLinkDestination):void 0:void 0!==r.eventSourceId&&r.props.onEventSourceClick?r.props.onEventSourceClick(r.eventSourceId):void 0},r.state={soundEffectUrl:null},r.spId=r.props.shapeXML.extraAttr.getString("spId"),r.resourceType=r.props.resourceType,r.player=a.createRef(),r.shapeWrapperParams=r.shapeMap.map(r.props.shapeXML,void 0,r.props.shapeGroupTransform),void 0!==t.eventSourceId)r.eventSourceId=t.eventSourceId;else{var n=s.getTargetID(t.slideContext.uuid,t.slideContext.slideIndex,r.spId);t.interactiveSeqsKeys&&-1!==t.interactiveSeqsKeys.indexOf(n)&&void 0!==r.props.onEventSourceClick&&(r.eventSourceId=n)}return r}return i(t,e),t.prototype.componentDidMount=function(){var e,t=this;null===(e=window)||void 0===e||e.addEventListener("message",(function(e){"_playSoundEffect"===e.data.type&&e.data.targetID===s.getTargetID(t.props.slideContext.uuid,t.props.slideContext.slideIndex,t.spId)&&t.playEffectSound(e.data.targetID,e.data.soundEffectId)}))},t.prototype.transform=function(e,t){var r=this.transformWithAnimation(t),n=this.transformWithShapeParams(e,r),i=n.translateX,o=n.translateY,a=n.scaleX,s=n.scaleY,u=n.rotate,l=(e.rotate||0)+u;return a<0&&(l=-l),s<0&&(l=-l),"translate("+c.toPt(i)+", "+c.toPt(o)+") scale("+a+","+s+") rotate("+d.toDeg(l)+"deg)"},t.prototype.opacity=function(e){return l.get(e,"opacity",1)},t.prototype.transformWithShapeParams=function(e,t){var r=t.translateX,n=t.translateY,i=e.flipH?-t.scaleX:t.scaleX,o=e.flipV?-t.scaleY:t.scaleY,a=0;return t.rotate&&"number"==typeof t.rotate&&(a=t.rotate),{translateX:r,translateY:n,scaleX:i,scaleY:o,rotate:a}},t.prototype.transformWithAnimation=function(e){return e?{translateX:l.get(e,"translateX",0),translateY:l.get(e,"translateY",0),scaleX:l.get(e,"scaleX",1),scaleY:l.get(e,"scaleY",1),rotate:l.get(e,"rotate",0)}:{translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0}},t.prototype.getPositionAndSize=function(){var e,t,r,n,i=0;if("p:sp"===this.props.shapeXML.name||"p:pic"===this.props.shapeXML.name){var o=this.props.shapeXML.childElementOptional("p:spPr","a:xfrm");if(o){var a=o.attr.getNumber("rot",0);i=Number(a)/c.Degree}}if(this.props.shapeGroupTransform){var s=this.shapeWrapperParams.rectangle,u=s.x,l=s.y,p=s.width,h=s.height,d=this.props.shapeGroupTransform,f=d.scaleX,y=d.scaleY,A=d.translateX,m=d.translateY;Math.abs(Math.cos(i/180*Math.PI))>=Math.abs(Math.sin(i/180*Math.PI))?(e=c.toPt((u+A)*f),t=c.toPt((l+m)*y),r=c.toPt(p*f),n=c.toPt(h*y)):(e=c.toPt((u+A+p/2)*f-p*y/2),t=c.toPt((l+m+h/2)*y-h*f/2),r=c.toPt(p*y),n=c.toPt(h*f))}else e=c.toPt(this.shapeWrapperParams.rectangle.x),t=c.toPt(this.shapeWrapperParams.rectangle.y),r=c.toPt(this.shapeWrapperParams.rectangle.width),n=c.toPt(this.shapeWrapperParams.rectangle.height);return{left:e,top:t,width:r,height:n}},t.prototype.render=function(){var e,t=this.state.soundEffectUrl,r=this.getPositionAndSize(),n=r.left,i=r.top,o=r.height,c=r.width;!0===this.shapeWrapperParams.hidden&&(e="none");var u=this.shapeWrapperParams.hyperLinkDestination||void 0!==this.eventSourceId,l="none"!==p.ensureColor(this.shapeWrapperParams.fillColor)?h(p.ensureColor(this.shapeWrapperParams.fillColor)):h("#FFFFFF00"),d=l.hsl().array();return a.createElement("div",{className:"spId-"+this.spId+(u?" ppt-event-source":""),id:s.getTargetID(this.props.slideContext.uuid,this.props.slideContext.slideIndex,this.spId),ref:this.animeTarget,style:{position:"absolute",display:e,zIndex:this.props.zIndex,left:n,top:i,width:c,height:o,transform:this.transform(this.shapeWrapperParams),opacity:this.opacity(),backfaceVisibility:"hidden","--sp-fill-h":l&&d[0],"--sp-fill-s":l&&d[1]+"%","--sp-fill-l":l&&d[2]+"%","--sp-fill-a":l?l.alpha():0},onClick:u?this.onClick:this.emptyClick},t&&a.createElement("audio",{src:t,ref:this.player,controls:!1}),this.renderShape(this.shapeWrapperParams))},t.prototype.playEffectSound=function(e,t){if(void 0!==t&&"slide"===this.props.resourceType){var r=this.props.slideContext.resourceLoader.loadURL(this.props.resourceType,t);if(r){var n=document.getElementById(""+e);if(n){var i=document.createElement("audio");return i.id=e+"-"+t,i.onpause=function(){i.remove()},i.src=r,i.controls=!1,n.appendChild(i),i.play(),!0}}}return!1},t.prototype.renderShape=function(e){var t=e.tailor,r={left:0,right:0,top:0,bottom:0},n=e.rectangle;t&&(n=o(o({},e.rectangle),{width:t.width,height:t.height}),r=t.margin);var i=!!this.props.flipH!==e.flipH;return this.renderChildren({play:e.play,stop:e.stop,width:n.width,height:n.height,borderStyle:e.borderStyle,fillColor:e.fillColor,rotate:e.rotate,margin:r,shapeGroupTransform:this.props.shapeGroupTransform,flipH:i,resoureType:this.props.resourceType})},t.prototype.renderChildren=function(e){if("function"==typeof this.props.children){var t=this.props.children(e);return t?a.cloneElement(t,{ref:this.childrenRef}):t}return a.cloneElement(this.props.children,{ref:this.childrenRef})},t}(a.Component);t.ShapeWrapper=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79);t.createCurve=n.createCurve},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97),i=r(23);t.mainSequenceEventSourceId="-1";var o=function(){function e(e){this.animations=e,this.sequenceAnimations=new i.LinkedMap}return e.prototype.parse=function(){if(0===this.animations.length)return new i.LinkedMap;this.splitIntoSequenceAnimations();var e=this.countSequencesDurationList(),t=this.checkSequenceAutoPlayFirstSequence(),r=new i.LinkedMap;return this.sequenceAnimations.forEach((function(i){var o=i.key,a=new n.Sequence({durationList:e[o],autoPlayFirstSequence:t[o]});r.put(i.key,a)})),r},e.prototype.splitIntoSequenceAnimations=function(){for(var e=0,r=this.animations;e<r.length;e++){var n=r[e],i=void 0;"mainSeq"===n.sequenceType?(i=t.mainSequenceEventSourceId,void 0===this.sequenceAnimations.get(i)&&this.sequenceAnimations.insertToHeader(i,[])):(i=n.eventSourceShapeId,void 0===this.sequenceAnimations.get(i)&&this.sequenceAnimations.put(i,[]));var o=this.sequenceAnimations.get(i)[n.sequenceIndex];void 0===o&&(o=this.sequenceAnimations.get(i)[n.sequenceIndex]=[]),o.push(n)}},e.prototype.countSequencesDurationList=function(){var e=this,t={};return this.sequenceAnimations.forEach((function(r){t[r.key]=e.countDurationList(r.value)})),t},e.prototype.countDurationList=function(e){for(var t=[],r=0,n=e;r<n.length;r++){for(var i=0,o=0,a=n[r];o<a.length;o++){var s=a[o],c=void 0;c="indefinite"===s.repeatCount||"none"===s.repeatCount?s.duration:s.duration*s.repeatCount,!0===s.autoRev&&(c*=2);var u=s.delay+c;i<u&&(i=u)}t.push(i)}return t},e.prototype.checkSequenceAutoPlayFirstSequence=function(){var e=this,r={};return this.sequenceAnimations.forEach((function(n){n.key===t.mainSequenceEventSourceId?r[n.key]=e.checkAutoPlayFirstSequence(n.value):r[n.key]=!1})),r},e.prototype.checkAutoPlayFirstSequence=function(e){var t=e[0];return!(!t||"clickEffect"===t[0].nodeType)},e}();t.SequenceParser=o},function(e,t){e.exports=r(27)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(122))},function(e,t){e.exports=r(65)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(2),c=r(18),u=function(e){function t(t){var r=e.call(this,t)||this;return r.imageUrl="",r.state={imageBase64Url:""},r.updateImageUrl(r.props),r}return i(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e,t){this.updateImageUrl(e)},t.prototype.updateImageUrl=function(e){var t=this,r=e.cSld.extraAttr.getStringOptional("backgroundResId"),n=e.cSld.extraAttr.getStringOptional("backgroundImageResourceType");if(r&&n){var i=e.resourceLoader.loadURL(n,r);this.imageUrl!==i&&(this.imageUrl=i,c.imageLoader.addLoadTask(i),c.imageLoader.loadImage(i).then((function(e){t.setState({imageBase64Url:e},(function(){c.imageLoader.endLoadTask(i)}))})))}},t.prototype.render=function(){var e={position:"relative",width:a.toPt(this.props.slideContext.slideWidth),height:a.toPt(this.props.slideContext.slideHeight),overflow:"hidden"};return o.createElement("div",{id:"ppt-animation-hub",ref:this.props.slideRef,className:this.props.className,style:e},this.renderImage(this.props.slideContext.slideWidth,this.props.slideContext.slideHeight),this.props.children)},t.prototype.renderImage=function(e,t){var r=this.props.cSld.extraAttr.getStringOptional("backgroundResId"),n=this.props.cSld.extraAttr.getStringOptional("backgroundImageResourceType");if(r&&n){var i=this.props.cSld.extraElementWithName("getBackgroundImageFill");if(void 0===i||void 0===i.childElementOptional("a:blip"))return null;var c=i.childElement("a:blip").childElementOptional("a:alphaModFix"),u=!!i.childElementOptional("a:tile"),l=1;if(c){var p=c.attr.getNumberOptional("amt");p&&(l=a.parseSTPercentage(p))}var h={position:"absolute",left:0,top:0,width:a.toPt(e),height:a.toPt(t),opacity:l,backgroundImage:"url("+this.state.imageBase64Url+")",backgroundSize:u?"auto":a.toPt(e)+" "+a.toPt(t)};return o.createElement("div",{style:h})}var d=this.props.cSld.extraAttr.getColorOptional("backgroundColor");return d?o.createElement("div",{style:{position:"absolute",left:0,top:0,width:a.toPt(e),height:a.toPt(t),backgroundColor:s.ensureColor(d)}}):null},t}(o.Component);t.Background=u},function(e,t){e.exports=r(66)},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var r=[];e.attr.forEach((function(t){var n=e.attr.getOptional(t);"string"==typeof n?r.push(t+"="+JSON.stringify(n)):r.push(t+"="+n)}));var n="";return t&&(n+="["+e.index+"] "),n+="<"+e.name,r.length>0&&(n+=" "+r.join(" ")),n+">"}Object.defineProperty(t,"__esModule",{value:!0}),t.createXMLNodeDisplayer=function(e,t){var r;return void 0===t&&(t=!1),(r={})[i(e,t)]=function e(t,r){var o=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r].name||"";if(i in t)return!0;t[i]=!0}return!1}(t.elements)||r;if(t.elements.length>0){for(var a={},s=o&&t.elements.length>1,c=0,u=t.elements;c<u.length;c++){var l=u[c],p=i(l,s),h=e(l,r);void 0===l.text?a[p]=h:a[p]=n(n({},h),{body:l.text})}return a}return null}(e,t),r}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.tagName=e}return e.prototype.get=function(e,t){return this.assignDefaultValue(e,this.getOptional(e),t)},e.prototype.getString=function(e,t){return this.assignDefaultValue(e,this.getStringOptional(e),t)},e.prototype.getNumber=function(e,t){return this.assignDefaultValue(e,this.getNumberOptional(e),t)},e.prototype.getBoolean=function(e,t){return this.assignDefaultValue(e,this.getBooleanOptional(e),t)},e.prototype.getColor=function(e,t){return this.assignDefaultValue(e,this.getColorOptional(e),t)},e.prototype.getColorOptional=function(e){return this.getOptional(e)},e.prototype.getStringOptional=function(e){var t=this.getOptional(e);return"number"==typeof t&&(t=""+t),t},e.prototype.getNumberOptional=function(e){var t=this.getOptional(e);if("string"!=typeof t||(t=parseInt(t),!Number.isNaN(t)))return t},e.prototype.getBooleanOptional=function(e){var t=this.getOptional(e);return"true"===t||"1"===t||"on"===t?t=!0:"false"===t||"0"===t||"off"===t?t=!1:void 0!==t&&(t=!!t),t},e.prototype.assignDefaultValue=function(e,t,r){if(void 0===t&&(t=r),void 0===t)throw new Error("can't find attribute "+JSON.stringify(e)+" from "+this.tagName);return t},e}(),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.length=function(){return 0},t.prototype.forEach=function(e){},t.prototype.getOptional=function(e){},t.prototype.has=function(e){return!1},t}(o);t.EmptyAttributes=a;var s=function(e){function t(t,r){var n=e.call(this,t)||this;return n.attributes=r,n}return i(t,e),t.prototype.length=function(){return Object.keys(this.attributes).length},t.prototype.forEach=function(e){for(var t in this.attributes)e(t)},t.prototype.has=function(e){return e in this.attributes},t.prototype.getOptional=function(e){return this.attributes[e]},t}(o);t.LocalAttributes=s;var c=function(e){function t(t,r,n){var i=e.call(this,t.name)||this;return i.xml=t,i.picker=r,i.resourceType=n,i}return i(t,e),t.prototype.length=function(){return-1},t.prototype.forEach=function(e){void 0!==this.tagName&&this.picker.forEachAttributes(this.tagName,e)},t.prototype.has=function(e){return void 0!==this.getOptional(e)},t.prototype.getOptional=function(e){var t;return this.cachedValues&&e in this.cachedValues?t=this.cachedValues[e]:void 0!==this.tagName&&(this.cachedXMLMap||(this.cachedXMLMap={}),t=this.picker.getAttribute(this.tagName,e,this.xml,this.cachedXMLMap,this.resourceType),this.cachedValues||(this.cachedValues={}),this.cachedValues[e]=t),t},t}(o);t.ExtraAttributes=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(51),c=r(64),u=r(65),l=r(66),p=r(67),h=function(e){function t(t){var r=e.call(this,t)||this;return r.uri=r.props.graphXML.childElement("a:graphic","a:graphicData").attr.getStringOptional("uri"),r}return i(t,e),t.prototype.render=function(){var e=t.subGraphClassWithURI(this.uri);return a.createElement(e,o({},this.props))},t.subGraphClassWithURI=function(e){switch(e){case"http://schemas.openxmlformats.org/drawingml/2006/table":return s.TableGraph;case"http://schemas.microsoft.com/office/drawing/2014/chartex":case"http://schemas.openxmlformats.org/drawingml/2006/chart":return c.ChartGraph;case"http://schemas.openxmlformats.org/drawingml/2006/diagram":return u.DiagramGraph;case"http://schemas.openxmlformats.org/presentationml/2006/ole":return p.OleGraph;default:return console.debug("Unsupported graph",e),l.Unsupported}},t}(a.Component);t.Graph=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(2),s=r(0),c=r(31),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this,t=this.props.graphXML.childElementOptional("a:graphic","a:graphicData","a:tbl"),r=t&&t.childElement("a:tblGrid"),n=r?r.elementsWithName("a:gridCol"):[],i=t?t.elementsWithName("a:tr"):[],a=i.length,s=0;if(a>0){var c=0;i.forEach((function(e,t){if(0===t){var r=0;e.elementsWithName("a:tc").forEach((function(e,n){var i=e.childElement("a:tcPr").extraAttr.getNumber(t+"-"+n+"-topBorderWidth",0);r=Math.max(i,r)})),c+=r}var n=0;e.elementsWithName("a:tc").forEach((function(e,r){var i=e.childElement("a:tcPr").extraAttr.getNumber(t+"-"+r+"-bottomBorderWidth",0);n=Math.max(i,n)})),c+=n})),s=c/a}var u=i.map((function(t,r){var i=t.attr.getNumber("h"),a=t.elementsWithName("a:tc").map((function(e,t){return n[t].attr.getNumber("w")})),c=t.elementsWithName("a:tc").map((function(t,o){var c=n[o].attr.getNumber("w");return e.renderCol(t,r,o,c,i,a,s)}));return o.createElement("tr",{key:"tr-"+r},c)}));return o.createElement("table",{style:{borderCollapse:"collapse"},cellSpacing:"0",cellPadding:"0"},o.createElement("tbody",null,u))},t.prototype.renderCol=function(e,t,r,n,i,u,l){var p;void 0===l&&(l=0);var h=e.childElementOptional("a:tcPr");if(!h)return null;var d=h.extraAttr.getColor(t+"-"+r+"-fillColor",a.UNDEFINED),f=(h.extraAttr.getColorOptional(t+"-"+r+"-fontColor"),h.extraAttr.getStringOptional(t+"-"+r+"-fontFamily")),y=h.extraAttr.getBoolean(t+"-"+r+"-isBold",!1),A=h.extraAttr.getBoolean(t+"-"+r+"-isItalic",!1),m=h.extraAttr.getString(t+"-"+r+"-bottomBorderStyle","none"),g=h.extraAttr.getNumber(t+"-"+r+"-bottomBorderWidth",0),v=h.extraAttr.getColorOptional(t+"-"+r+"-bottomBorderColor",a.UNDEFINED),b=h.extraAttr.getString(t+"-"+r+"-topBorderStyle","none"),P=h.extraAttr.getNumber(t+"-"+r+"-topBorderWidth",0),S=h.extraAttr.getColorOptional(t+"-"+r+"-topBorderColor",a.UNDEFINED),w=h.extraAttr.getString(t+"-"+r+"-leftBorderStyle","none"),x=h.extraAttr.getNumber(t+"-"+r+"-leftBorderWidth",0),O=h.extraAttr.getColorOptional(t+"-"+r+"-leftBorderColor",a.UNDEFINED),k=h.extraAttr.getString(t+"-"+r+"-rightBorderStyle","none"),M=h.extraAttr.getNumber(t+"-"+r+"-rightBorderWidth",0),C=h.extraAttr.getColorOptional(t+"-"+r+"-rightBorderColor",a.UNDEFINED),T=e.childElementOptional("a:txBody");if(void 0===T)return null;var _=e.attr.getNumber("gridSpan",1),I=e.attr.getNumber("rowSpan",1),E=e.attr.getBoolean("hMerge",!1),j=e.attr.getBoolean("vMerge",!1),R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[].concat.apply([],e).reduce((function(e,t){return e+t}),0)}(u.slice(r,r+_)),N=t+"-"+r;return E||j?null:o.createElement("td",{colSpan:_,rowSpan:I,style:{position:"relative",fontFamily:f&&f,fontWeight:y?500:400,fontStyle:A?"italic":"normal",borderBottomStyle:m,borderTopStyle:b,borderLeftStyle:w,borderRightStyle:k,borderBottomWidth:s.toPt(g),borderTopWidth:s.toPt(P),borderLeftWidth:s.toPt(x),borderRightWidth:s.toPt(M),borderBottomColor:a.ensureColor(v),borderTopColor:a.ensureColor(S),borderLeftColor:a.ensureColor(O),borderRightColor:a.ensureColor(C),maxWidth:s.toPt(R),height:s.toPt(i-l),backgroundColor:a.ensureColor(d),boxSizing:"border-box"},key:"tc-"+t+"-"+r,className:"tc-"+t+"-"+r},o.createElement(c.TxBody,{slideContext:this.props.slideContext,insideTable:!0,width:R,height:i-l,uuid:this.props.uuid,txBodyXML:T,resourceType:"slide",textBodyWrapResource:null===(p=this.props.shapeWrapResource)||void 0===p?void 0:p.textBodyMap[N]}))},t}(o.Component);t.TableGraph=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),c=r(2),u=r(11),l=r(0),p=r(53),h=r(54),d=r(55),f=r(57),y=r(19),A=function(e){function t(t){var r=e.call(this,t)||this;r.runElements=t.paragraphXML.elements.filter((function(e){return["a:fld","a:r","a:br","a:endParaRPr"].includes(e.name)})),r.biggestFontSize=a(r.runElements).filter((function(e){return"a:r"===e.name})).map((function(e){return e.extraAttr.getNumber("sz",0)})).sort((function(e,t){return e-t}))[0],r.fontScale=.01;var n=r.props.bodyPrXML.childElementOptional("a:normAutofit");if(n&&(r.fontScale=l.parseSTPercentage(n.attr.getNumber("fontScale",l.STPercentage100))/100),r.buChar=r.props.paragraphXML.extraElementWithName("bu"),r.indent=r.props.paragraphXML.extraAttr.getNumber("indent",0),r.marL=r.props.paragraphXML.extraAttr.getNumber("marL",0),r.lineHeightInXml=r.props.paragraphXML.extraAttr.get("lineHeight"),"number"!=typeof r.lineHeightInXml)r.lineHeight=parseFloat(r.lineHeightInXml)*r.fontScale*100+"pt";else{var i=r.getBigestLineHeight(a(r.runElements),r.lineHeightInXml,r.fontScale);r.lineHeight=void 0===i?void 0:i+"pt"}return r.buClr=r.props.paragraphXML.extraAttr.getColorOptional("buClr"),r.noneBuChar=void 0===r.buChar||"a:buNone"===r.buChar.name,r.paddingBottom=r.getPaddingBottom(r.props.paragraphXML.extraAttr.getStringOptional("a:spcAft"),r.biggestFontSize),r.paddingBottom=r.getPaddingTop(r.props.paragraphXML.extraAttr.getStringOptional("a:spcBef"),r.biggestFontSize),r.align=r.props.paragraphXML.extraAttr.getStringOptional("algn"),r}return i(t,e),t.prototype.render=function(){var e,t=this,r=this.props.paragraphXML.extraAttr.getBoolean("placeHolderType");if("slide"!==this.props.resourceType&&r)return s.createElement("div",{key:""+this.props.paragraphIndex});if(this.props.paragraphWrapResource)return this.renderWrapParagraph(this.props.paragraphWrapResource.lines);var n=u.toTextAlign(this.align),i=this.runElements.map((function(r,i){var o="left"===n&&i===t.runElements.length-1,a=t.renderRunOrBrOrEnd(r,t.props.paragraphIndex,i,t.fontScale,t.lineHeightInXml,t.indent,o,t.props.firstRangeXML,e);return e=r,a})),o=0;if(this.props.firstRangeXML){if(this.buChar&&"a:buNone"!==this.buChar.name){var a=this.props.firstRangeXML.extraAttr.getNumber("sz",0),h=this.props.firstRangeXML.extraAttr.getString("fontType","");i.unshift(s.createElement("span",{key:"bu-"+ ++o,style:{display:"inline-block",position:"absolute",color:void 0!==this.buClr?c.ensureColor(this.buClr):c.ensureColor(this.props.firstRangeXML.extraAttr.getColorOptional("color")),fontSize:a*this.fontScale+"pt",lineHeight:this.lineHeight,fontFamily:h,textIndent:l.toPt(this.indent)}},s.createElement(p.Bullet,{paragraphXML:this.props.paragraphXML,firstRangeXML:this.props.firstRangeXML,buXML:this.buChar,buIndexCounter:this.props.buIndexCounter})))}}else{a=0;var d=this.props.paragraphXML.childElementOptional("a:endParaRPr");if(d){var f=d.extraAttr.getNumberOptional("sz");a=void 0===f?0:f}else a=this.props.paragraphXML.extraAttr.getNumber("sz",0);i.push(s.createElement("span",{key:"end-"+ ++o,style:{display:"block",lineHeight:this.lineHeight,fontSize:a*this.fontScale+"pt"}},s.createElement("br",null)))}return this.buChar&&"a:buNone"===this.buChar.name&&this.props.buIndexCounter.reset(),s.createElement("li",{key:""+this.props.paragraphIndex,className:"Paragraph-"+this.props.paragraphIndex,style:{whiteSpace:this.props.isTextWrap?"normal":"nowrap",paddingTop:this.paddingTop,paddingBottom:this.paddingBottom,marginLeft:l.toPt(this.props.paragraphXML.extraAttr.getNumber("marL",0)),marginRight:l.toPt(this.props.paragraphXML.extraAttr.getNumber("marR",0)),lineHeight:"1pt",listStyleType:"none",textAlign:n}},i)},t.prototype.getPaddingBottom=function(e,t){return this.props.isLast&&!this.props.spcFirstLastPara?"0pt":this.getPadding(e,t)},t.prototype.getPaddingTop=function(e,t){return this.props.isFirst&&!this.props.spcFirstLastPara?"0pt":this.getPadding(e,t)},t.prototype.getPadding=function(e,t){if(e){if(-1!==e.indexOf("pt"))return e;if(t)return t*parseFloat(e)/100+"pt"}return"0pt"},t.prototype.renderWrapParagraph=function(e){var t=this.props.paragraphWrapResource,r=t.prop,n=r.spaceBefore,i=r.spaceAfter,a=t.prop,c=a.align,l=a.bulletChar,p=a.indent,h=a.marginLeft,d=a.marginRight;if(0===e.length&&t.endParagraphRunProp){var f=t.endParagraphRunProp;n=f.spaceBefore,i=f.spaceAfter}var A=this.props.bulletInfo;0===A.order&&(n=0),A.order+1===A.count&&(i=0);var m=y.getParagraphMargin(this.props.vert,{marginLeft:h,marginRight:d,marginTop:n,marginBottom:i}),g=o(o({textAlign:u.toTextAlign(c),position:"relative"},m),{whiteSpace:"pre"}),v=Math.max(p,-h);return l&&(v=p>=0?p:Math.max(0,-(h+p))),s.createElement("div",{style:g},l&&this.renderBulletCharNode(e),this.renderLines(e,v,c))},t.prototype.isFlexSpaceBetween=function(e,t,r){return e===f.TextAlign.dist||e===f.TextAlign.just&&t!==r-1},t.prototype.renderBulletCharNode=function(e){var t,r=this.props.paragraphWrapResource.prop,n=r.bulletChar,i=r.indent;if(n){var o=0===e.length,a=this.props.bulletInfo.number,c=e.slice(0,1),u=c[0]&&c[0][0],l=n.colorFollowText&&u?null===(t=u.prop.fillType)||void 0===t?void 0:t.color:n.color,h=n.fontFollowText&&u?u.prop.font:n.font,d=n.sizeFollowText&&u?u.prop.size:n.size,f=u?u.prop.lineSpacing+"px":void 0,A=void 0!==n.autoNumber&&void 0!==n.autoNumberType,m=i>=0?0:i,g="";o||(A&&a&&(g=p.autoNumberBulletChar(a,n.autoNumberType)),A||(g+=p.getBulletChar(n.character||"l")));var v={position:"absolute",fontFamily:h,fontSize:d,textIndent:m,color:l,lineHeight:f};return this.props.vert===y.TextVerticalType.EaVert&&(v.textOrientation="sideways"),s.createElement("div",{style:v},g)}},t.prototype.renderLines=function(e,t,r){var n=this;if(0===e.length){var i=this.props.paragraphWrapResource.endParagraphRunProp?this.props.paragraphWrapResource.endParagraphRunProp.lineSpacing+"px":void 0,o=this.props.paragraphWrapResource.endParagraphRunProp?this.props.paragraphWrapResource.endParagraphRunProp.size+"px":void 0;return s.createElement("span",{style:{lineHeight:i,fontSize:o}},s.createElement("br",null))}return e.map((function(i,o){return s.createElement(d.Line,{key:o,uuid:n.props.uuid,vert:n.props.vert,style:0===o?{textIndent:t}:void 0,line:i,justify:n.isFlexSpaceBetween(r,o,e.length)})}))},t.prototype.renderRunOrBrOrEnd=function(e,t,r,n,i,o,a,c,u){return s.createElement(h.Run,{key:t+"-"+r,isTextWrap:this.props.isTextWrap,paragraphHasRange:void 0!==c,rNodeOrBrNode:e,fontScale:n,runIndex:r,indent:0===r&&this.noneBuChar&&0!==this.marL?o:void 0,slideIndex:this.props.slideContext.slideIndex,prevElement:u,lineHeight:i,align:this.align?this.align:"l",lastRunInParagraph:a})},t.prototype.getBigestLineHeight=function(e,t,r){var n=void 0;return e.forEach((function(e){switch(e.name){case"a:fld":case"a:r":case"a:br":case"a:endParaRPr":var i=1.2*e.extraAttr.getNumber("sz",0)*t*r;(void 0===n||n<i)&&(n=i)}})),n},t}(s.Component);t.Paragraph=A},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){switch(this.props.buXML.name){case"a:buChar":return this.props.buIndexCounter.reset(),this.renderBuChar(this.props.buXML.attr.getString("char"));case"a:buAutoNum":return this.renderAutoNum(this.props.buXML);case"a:buNone":case"a:buBlip":return this.props.buIndexCounter.reset(),""}},t.prototype.renderAutoNum=function(e){var t=e.attr.getString("type"),r=e.attr.getNumber("startAt",1);return u(this.props.buIndexCounter.get(this.props.paragraphXML,r,this.props.firstRangeXML)+r,t)},t.prototype.renderBuChar=function(e){return a(e)},t}(r(1).Component);function a(e){switch(e){case String.fromCodePoint(159):case" ":case"l":return"●";case"ü":return"✓";case"•":return"•";case"n":return"◾";case"–":return"–";case"v":return"❖";case"u":return"◆";case"&":return"🕮";case"Ø":return"➣";case"p":return"□";default:return e}}function s(e){var t=e%26;t=0===t?26:t;var r=Math.ceil(e/26);return String.fromCodePoint(t+64).repeat(r)}function c(e){var t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},r="";for(var n in t)for(;e>=t[n];)r+=n,e-=t[n];return r}function u(e,t){switch(t){case"alphaLcParenBoth":return"("+s(e)+")";case"alphaLcParenR":return s(e).toLowerCase()+")";case"alphaLcPeriod":return s(e).toLowerCase()+".";case"alphaUcParenBoth":return"("+s(e)+")";case"alphaUcParenR":return s(e)+")";case"alphaUcPeriod":return s(e)+".";case"arabicParenBoth":return"("+e+")";case"arabicParenR":return e+")";case"arabicPeriod":return e+".";case"arabicPlain":return""+e;case"ea1JpnChsDbParenBoth":return"("+e.toLocaleString("zh-Hans-CN-u-nu-hanidec")+")";case"ea1JpnChsDbParenR":return e.toLocaleString("zh-Hans-CN-u-nu-hanidec")+")";case"ea1JpnChsDbPeriod":return e.toLocaleString("zh-Hans-CN-u-nu-hanidec")+".";case"ea1JpnChsDbPlain":return""+e.toLocaleString("zh-Hans-CN-u-nu-hanidec");case"circleNumDbPlain":return(r=e)<=20?String.fromCodePoint(r+9311):r<=35?String.fromCodePoint(r+12860):r<=50?String.fromCodePoint(r+12941):""+r;case"romanLcParenBoth":return"("+c(e).toLowerCase()+")";case"romanLcParenR":return c(e).toLowerCase()+")";case"romanLcPeriod":return c(e).toLowerCase()+".";case"romanUcParenBoth":return"("+c(e)+")";case"romanUcParenR":return c(e)+")";case"romanUcPeriod":return c(e)+".";default:return e+"."}var r}t.Bullet=o,t.getBulletChar=a,t.autoNumberBulletChar=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(2),s=r(0),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.hasUnderLine=function(e){switch(e){case"none":return"none";default:return"underline"}},t.prototype.render=function(){var e=this;return this.props.text?o.createElement("span",{style:{display:"inline-flex",justifyContent:"space-between",backgroundColor:a.ensureColor(this.props.highlightColor),textDecoration:this.hasUnderLine(this.props.underLineStyle),width:"100%"}},Array.from(this.props.text).map((function(t,r){return 0===r&&e.props.indent?o.createElement("span",{key:"run-text-"+r,style:{display:e.props.indent?"inline-block":"inline",lineHeight:e.props.lineHeight,whiteSpace:e.props.isTextWrap?"pre-wrap":"pre",fontSize:e.props.fontSize+"pt",fontFamily:e.props.fontFamily,fontWeight:e.props.isBold?500:400,color:a.ensureColor(e.props.color),fontStyle:e.props.isItalic?"italic":"normal",letterSpacing:e.props.letterSpacing/100+"pt",textIndent:e.props.indent?s.toPt(e.props.indent):0}},t):o.createElement("span",{key:"run-text-"+r,style:{display:"inline",lineHeight:e.props.lineHeight,whiteSpace:e.props.isTextWrap?"pre-wrap":"pre",fontSize:e.props.fontSize+"pt",fontFamily:e.props.fontFamily,fontWeight:e.props.isBold?500:400,color:a.ensureColor(e.props.color),fontStyle:e.props.isItalic?"italic":"normal",letterSpacing:e.props.letterSpacing/100+"pt"}},t)}))):null},t}(o.Component),u=function(e){function t(t){var r=e.call(this,t)||this;r.defaultPtSize=18;var n,i=r.props.rNodeOrBrNode.extraAttr.getNumberOptional("sz");return n=void 0===i?r.defaultPtSize:i,"string"==typeof r.props.lineHeight?r.lineHeight=r.props.lineHeight:r.lineHeight=n*r.props.fontScale*1.2*r.props.lineHeight+"pt",r.fontSize=n*r.props.fontScale+"pt",r}return i(t,e),t.prototype.render=function(){switch(this.props.rNodeOrBrNode.name){case"a:fld":case"a:r":return this.renderText();case"a:br":return o.createElement("span",{key:"br-"+this.props.runIndex,style:{lineHeight:this.lineHeight,fontSize:this.fontSize}},o.createElement("br",null));case"a:endParaRPr":if(this.props.prevElement&&"a:br"===this.props.prevElement.name)return o.createElement("span",{key:"endParaRPr-"+this.props.runIndex,style:{lineHeight:this.lineHeight,display:"inline",fontSize:this.fontSize}},o.createElement("br",null));default:return null}},t.prototype.hasUnderLine=function(e){switch(e){case"none":return"none";default:return"underline"}},t.prototype.renderText=function(){var e=void 0,t=this.props.rNodeOrBrNode,r=t.attr.getStringOptional("type");if(r)switch(r){case"slidenum":e=this.props.slideIndex;break;default:e=new Date(Date.now()).toLocaleDateString()}var n=t.childElementOptional("a:t");if(void 0===n)return o.createElement("span",null);var i,u,l,p=t.extraAttr.getBoolean("b",!1),h=t.extraAttr.getString("u","none"),d=t.extraAttr.getNumber("spc",0),f=t.extraAttr.getBoolean("i",!1),y=t.extraAttr.getColorOptional("color"),A=t.extraAttr.getNumber("sz",0)*this.props.fontScale,m=t.extraAttr.getString("fontType",""),g=t.extraAttr.getColorOptional("highlight",void 0),v=t.childElementOptional("a:rPr");if(void 0!==v&&(i=v.attr.getNumberOptional("baseline")),void 0===i)u=e||n.text;else{var b=void 0;i>0?(b=40,u=o.createElement("sup",{style:{fontSize:"small",verticalAlign:b+i/s.STPercentage100*100+"%"}},e||n.text)):i<0?(b=0,u=o.createElement("sub",{style:{fontSize:"small",verticalAlign:b+i/s.STPercentage100*100+"%"}},e||n.text)):u=e||n.text}if(l="string"==typeof this.props.lineHeight?this.props.lineHeight:1.2*A*this.props.lineHeight+"pt","dist"===this.props.align)return o.createElement(c,{fontSize:A,text:""+u,lineHeight:l,indent:this.props.indent,isTextWrap:this.props.isTextWrap,isBold:p,isItalic:f,underLineStyle:h,fontFamily:m,letterSpacing:d,color:y,highlightColor:g});var P={display:this.props.indent?"inline-block":"inline",lineHeight:l,whiteSpace:this.props.isTextWrap?"pre-wrap":"pre",backgroundColor:a.ensureColor(g),fontSize:A+"pt",textDecoration:this.hasUnderLine(h),fontFamily:m,fontWeight:p?500:400,color:a.ensureColor(y),fontStyle:f?"italic":"normal",letterSpacing:d/100+"pt",overflowWrap:"break-word",textIndent:this.props.indent?s.toPt(this.props.indent):0};if(!this.props.lastRunInParagraph||"string"!=typeof u&&"number"!=typeof u)return o.createElement("span",{key:"run-"+this.props.runIndex,style:P},u);var S="",w=u;if("string"==typeof u)u.length>0&&(w=u.substring(0,u.length-1),S=u.substring(u.length-1));else if("number"==typeof u){var x=u+"";w=x.substring(0,x.length-1),S=x.substring(x.length-1)}return P["--data-last-word-indent"]=this.props.indent?""+s.toPt(-this.props.indent):"0pt",o.createElement("span",{className:"netless-ppt-last-run","data-last-word":S,key:"run-"+this.props.runIndex,style:P},w)},t}(o.Component);t.Run=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(19),c=r(56),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.splitRuns=function(e){function t(e){var t=e.codePointAt(0)||0;return t>=65&&t<=122}return(e.text||"").split("").reduce((function(r,n){var i=r[r.length-1];if(void 0===i)return r.push(o(o({},e),{text:n})),r;var a=i.text||"",s=t(a[a.length-1]),c=t(n);return s&&c?i.text=""+a+n:r.push(o(o({},e),{text:n})),r}),[])},t.prototype.render=function(){var e=this,t=this.props.line,r=this.props.uuid,n={};this.props.justify&&(t=this.props.line.reduce((function(t,r){var n=e.splitRuns(r);return t.concat(n)}),[]),n={display:"flex",justifyContent:"space-between",width:"100%"});var i={};this.props.vert===s.TextVerticalType.Horz?i.height=t.reduce((function(e,t){return t.prop.lineSpacing>e.prop.lineSpacing?t:e})).prop.lineSpacing+"px":this.props.vert===s.TextVerticalType.WordArtVert||this.props.vert===s.TextVerticalType.WordArtVertRtl?i.margin="0 0.6em":i.whiteSpace="nowrap";var c=o(o(o({},this.props.style),n),i);return this.props.vert!==s.TextVerticalType.Horz?a.createElement("div",{style:c},t.map((function(t,n){return a.createElement(p,{vert:e.props.vert,uuid:r,key:n,run:t,firstRun:0===n})}))):a.createElement("div",{style:c},t.map((function(e,t){return a.createElement(l,{uuid:r,key:t,run:e,firstRun:0===t})})))},t}(a.Component);t.Line=u;var l=function(e){function t(t){var r=e.call(this,t)||this;return r.styles=c.transformCSS(t),r}return i(t,e),t.prototype.render=function(){var e="tab"===this.props.run.runType?" ":this.props.run.text||" ";return a.createElement("span",{style:this.styles},e)},t}(a.Component),p=function(e){function t(t){var r=e.call(this,t)||this;r.horizontalText="",r.needSideWayCharacterList=s.getNeedSideWayCharacterList(t.vert),r.needUpRightCharacterList=s.getNeedUpRightCharacterList(t.vert);var n=c.transformCSS(t);return r.fontSpanStyle=o(o(o({},n),{maxHeight:n.fontSize}),s.getFontStyle(t.vert)),r}return i(t,e),t.prototype.renderHorizontalNumber=function(e,t){if(!this.horizontalText)return null;var r=this.horizontalText;return this.horizontalText="",this.props.run.prop.kumimoji&&this.props.vert===s.TextVerticalType.EaVert?a.createElement("span",{key:t+r,style:o(o({},e),{writingMode:"horizontal-tb"})},r):a.createElement("span",{key:t+r,style:e},r)},t.prototype.render=function(){var e=this,t="tab"===this.props.run.runType?" ":this.props.run.text||" ",r=c.transformCSS(this.props);return a.createElement("span",{style:o({},r)},t&&t.split("").map((function(r,n){return e.props.vert!==s.TextVerticalType.EaVert||isNaN(parseInt(r))?e.needSideWayCharacterList.includes(r)?a.createElement("span",{className:"vert",key:n,style:o(o({},e.fontSpanStyle),{transform:"rotate(90deg)"})},r):e.needUpRightCharacterList.includes(r)?a.createElement("span",{className:"vert",key:n,style:o(o({},e.fontSpanStyle),{transform:"rotate(-90deg)"})},r):a.createElement("span",{className:"vert",key:n,style:e.fontSpanStyle},r):(e.horizontalText+=r,2===e.horizontalText.length||isNaN(parseInt(t[n+1]))?e.renderHorizontalNumber(e.fontSpanStyle,n):null)})))},t}(a.Component)},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e){if(void 0===e)return e;if(/^#([A-Fa-f0-9]{8})$/.test(e)){var t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16),i=parseInt(e.slice(7,9),16);return 255===i?"rgb("+t+","+r+","+n+")":"rgba("+t+","+r+","+n+","+i/256+")"}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.hexToRgbStyle=i,t.transformCSS=function(e){var t,r,o=e.run.prop,a=void 0;o.underLine&&(a="underline"),o.strikeThrough&&(a=a?a+" line-through":"line-through"),"tab"===e.run.runType&&(r={display:"inline-block",width:e.run.prop.width});var s=(1-Math.abs(o.baseline))*o.size,c="'"+o.font+"-"+e.uuid+"','"+o.font+"'";return n({color:i(null===(t=o.fillType)||void 0===t?void 0:t.color),fontFamily:c,fontSize:s+"px",fontStyle:o.italic?"italic":"normal",fontWeight:o.bold?"bold":"normal",letterSpacing:(o.kerning||0)+"px",lineHeight:o.lineSpacing+"px",backgroundColor:o.highlightColor,verticalAlign:o.baseline?100*o.baseline+"%":void 0,textDecoration:a,textIndent:e.firstRun?void 0:0},r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(58))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.r="r",e.l="l",e.crl="ctr",e.dist="dist",e.just="just"}(t.TextAlign||(t.TextAlign={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(12),c=r(0);t.supportedPresetType=["textPlain"],function(e){e.textNoShape="textNoShape",e.textPlain="textPlain",e.textRingInside="textRingInside",e.textRingOutside="textRingOutside"}(t.PresetType||(t.PresetType={}));var u=function(e){function t(t){var r,n=e.call(this,t)||this;n.contentWidth=0,n.fontRowCount=0,n.gbDataList=t.shapeGuideList.map((function(e){var t,r=e.attr.getString("name"),n=e.attr.getString("fmla");return(t={})[r]=n,t})),n.textContent=null===(r=t.textBodyWrapResource.paragraphs[0].runs)||void 0===r?void 0:r.map((function(e){return e.text})).join(""),n.height=c.pxToPt(n.props.textBodyWrapResource.prop.height),n.width=c.pxToPt(n.props.textBodyWrapResource.prop.width);var i=0;return n.props.textBodyWrapResource.paragraphs.forEach((function(e){n.fontRowCount+=e.lines.length,e.lines.forEach((function(e){var t=0;e.forEach((function(e){t+=parseInt(e.prop.width),i||(i=e.prop.lineSpacing),n.fontSize||(n.fontSize=c.pxToPt(e.prop.size))})),n.contentWidth=Math.max(n.contentWidth,t)}))})),n.contentHeight=c.ptToPx((n.fontRowCount-1)*i+n.fontSize||n.fontSize),n}return i(t,e),t.prototype.render=function(){return this[this.props.presetType]?this[this.props.presetType]():this.textNoShape()},t.prototype.textNoShape=function(){var e=this,t={display:"flex",fontSize:this.fontSize+"pt",transformOrigin:"50%, 0",height:this.height+"pt",width:this.width+"pt",justifyContent:"center",alignItems:"center"},r=this.height,n=this.width,i=this.contentWidth,o=this.contentHeight,s=isNaN(n/i)?1:c.ptToPx(n/i),u=isNaN(r/o)?1:c.ptToPx(r/o),l={margin:0,padding:0,fontSize:this.fontSize+"pt",lineHeight:this.fontSize+"pt",height:this.fontSize+"pt",width:this.fontSize+"pt",display:"inline-block"};return a.createElement("div",{style:t},a.createElement("div",{ref:function(t){return e.spanRef=t},style:{whiteSpace:"initial",transform:"scaleX("+s+") scaleY("+u+")"}},this.props.textBodyWrapResource.paragraphs.map((function(e,t){var r;return a.createElement("span",{key:t,style:{whiteSpace:"initial"}},null===(r=e.lines)||void 0===r?void 0:r.map((function(e,t){return a.createElement(a.Fragment,null,e.map((function(e){var r;return null===(r=e.text)||void 0===r?void 0:r.split("").map((function(e,r){return a.createElement("pre",{style:l,key:t+"-"+r},e)}))})),a.createElement("br",null))})))}))))},t.prototype.textRing=function(e){var t,r,n,i=this,o=Math.atan(this.height/this.width),u=180*o/Math.PI,l=6e4;(null===(t=this.gbDataList[0])||void 0===t?void 0:t.adj)&&(l=s.FormulaEval.deconstructShapeGuide(this.gbDataList[0].adj));var p=100*(1-c.parseSTPercentage(l))/this.fontSize;if(!(null===(r=this.textContent)||void 0===r?void 0:r.length))return this.textNoShape();var h=this.textContent.length;return a.createElement("div",{style:{display:"inline-block",position:"relative",fontSize:this.fontSize+"pt",transformOrigin:"50%, 0",height:"100pt",width:"200pt",transform:"scale("+this.width/200+", "+this.height/100/Math.cos(o/180*Math.PI)+")"}},a.createElement("div",{style:{transformStyle:"preserve-3d",height:"100pt",width:"200pt",transform:"\n                        rotateX("+-u+"deg)\n                    "}},null===(n=this.textContent)||void 0===n?void 0:n.split("").map((function(t,r){return a.createElement("span",{style:{position:"absolute",lineHeight:i.fontSize+"pt",left:100-i.fontSize/2+"pt",top:(100-i.fontSize)/2+"pt",transform:e(r,h,p)},key:r},t)}))))},t.prototype.textRingInside=function(){return this.textRing((function(e,t,r){return"rotateY("+(70-340/t*e)+"deg) translateZ(-100pt) scaleY("+r+")"}))},t.prototype.textRingOutside=function(){return this.textRing((function(e,t,r){return"rotateY("+(320*e/(t-1)-60)+"deg) translateZ(100pt) scaleY("+r+")"}))},t.prototype.textPlain=function(){var e=this,t=this.gbDataList[0]?s.FormulaEval.deconstructShapeGuide(this.gbDataList[0].adj):5e4,r=this.width,n=this.height,i=c.parseSTPercentage(t),u=i>.5?(2*i-1)*r:(1-2*i)*r,l=Math.atan(u/n),p=180*l/Math.PI;i<.5&&(p=-p);var h={display:"flex",fontSize:this.fontSize+"pt",transformOrigin:"0, 0",height:n+"pt",width:r+"pt",justifyContent:"center",alignItems:"center"},d={display:"block",lineHeight:this.fontSize+"pt",textAlign:"center"},f={display:"inline-block",fontSize:this.fontSize+"pt",lineHeight:this.fontSize+"pt",height:this.fontSize+"pt",transformOrigin:"50% 0",margin:0,padding:"0"},y=this.contentWidth,A=this.contentHeight,m=isNaN(r/y)?1:c.ptToPx(r)/(y+Math.tan(l)*c.ptToPx(n)),g=isNaN(n/A)?1:c.ptToPx(n/A),v=0;return a.createElement("div",{style:o({},h)},a.createElement("div",{ref:function(t){return e.spanRef=t},style:o(o({},d),{whiteSpace:"initial",transform:"skew("+p+"deg) scaleY("+g+") scaleX("+m+")"})},this.props.textBodyWrapResource.paragraphs.map((function(t,r){var n;return a.createElement("div",{key:"wordart-"+r,style:o(o({},d),{whiteSpace:"initial"})},null===(n=t.lines)||void 0===n?void 0:n.map((function(r,n){var i=1===e.fontRowCount?e.fontSize:r[0].prop.lineSpacing,s={};return 0!==v&&v!==e.fontRowCount-1||(i=(i+e.fontSize)/2,s.display="flex",v===e.fontRowCount-1&&(s.alignItems="flex-end")),"l"===t.prop.align||"just"===t.prop.align?s.justifyContent="flex-start":"r"===t.prop.align?s.justifyContent="flex-end":"dist"===t.prop.align?s.justifyContent="space-between":"ctr"===t.prop.align&&(s.justifyContent="center"),v++,a.createElement("div",{key:r[0].text+n.toString(),style:o({whiteSpace:"nowrap",lineHeight:i+"pt"},s)},r.map((function(e){var t;return null===(t=e.text)||void 0===t?void 0:t.split("").map((function(t,r){return a.createElement("pre",{style:o(o({},f),{fontFamily:e.prop.font}),key:r},t)}))})),a.createElement("br",null))})))}))))},t}(a.Component);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32),i=r(0),o=r(33),a=function(){function e(e){this.foundStartPostion=!1,this.variablesMap=e,this.injectConstant()}return e.prototype.injectConstant=function(){this.setVariable("3cd4",162e5),this.setVariable("3cd8",81e5),this.setVariable("5cd8",135e5),this.setVariable("7cd8",189e5),this.setVariable("b",new n.FormulaEval("val h").eval(this)),this.setVariable("cd2",108e5),this.setVariable("cd4",54e5),this.setVariable("cd8",27e5),this.setVariable("hc",new n.FormulaEval("*/ w 1.0 2.0").eval(this)),this.setVariable("hd2",new n.FormulaEval("*/ h 1.0 2.0").eval(this)),this.setVariable("hd3",new n.FormulaEval("*/ h 1.0 3.0").eval(this)),this.setVariable("hd4",new n.FormulaEval("*/ h 1.0 4.0").eval(this)),this.setVariable("hd5",new n.FormulaEval("*/ h 1.0 5.0").eval(this)),this.setVariable("hd6",new n.FormulaEval("*/ h 1.0 6.0").eval(this)),this.setVariable("hd8",new n.FormulaEval("*/ h 1.0 8.0").eval(this)),this.setVariable("l",0),this.setVariable("ls",new n.FormulaEval("max w h").eval(this)),this.setVariable("r",new n.FormulaEval("val w").eval(this)),this.setVariable("ss",new n.FormulaEval("min w h").eval(this)),this.setVariable("ssd2",new n.FormulaEval("*/ ss 1.0 2.0").eval(this)),this.setVariable("ssd4",new n.FormulaEval("*/ ss 1.0 4.0").eval(this)),this.setVariable("ssd6",new n.FormulaEval("*/ ss 1.0 6.0").eval(this)),this.setVariable("ssd8",new n.FormulaEval("*/ ss 1.0 8.0").eval(this)),this.setVariable("ssd16",new n.FormulaEval("*/ ss 1.0 16.0").eval(this)),this.setVariable("ssd32",new n.FormulaEval("*/ ss 1.0 32.0").eval(this)),this.setVariable("t",0),this.setVariable("vc",new n.FormulaEval("*/ h 1.0 2.0").eval(this)),this.setVariable("wd2",new n.FormulaEval("*/ w 1.0 2.0").eval(this)),this.setVariable("wd3",new n.FormulaEval("*/ w 1.0 3.0").eval(this)),this.setVariable("wd4",new n.FormulaEval("*/ w 1.0 4.0").eval(this)),this.setVariable("wd5",new n.FormulaEval("*/ w 1.0 5.0").eval(this)),this.setVariable("wd6",new n.FormulaEval("*/ w 1.0 6.0").eval(this)),this.setVariable("wd8",new n.FormulaEval("*/ w 1.0 8.0").eval(this)),this.setVariable("wd10",new n.FormulaEval("*/ w 1.0 10.0").eval(this)),this.setVariable("wd12",new n.FormulaEval("*/ w 1.0 12.0").eval(this)),this.setVariable("wd32",new n.FormulaEval("*/ w 1.0 32.0").eval(this))},e.prototype.getVariable=function(e,t){return void 0!==this.variablesMap[e]?this.variablesMap[e]:t},e.prototype.getRequiredVariable=function(e){if(void 0!==this.variablesMap[e])return this.variablesMap[e];throw new Error(e+" is required")},e.prototype.setVariable=function(e,t){this.variablesMap[e]=t},e.prototype.setVariableIfNotExist=function(e,t){void 0===this.variablesMap[e]&&(this.variablesMap[e]=t)},e.prototype.isNumeric=function(e){return/^-{0,1}\d+$/.test(e)},e.prototype.accessValue=function(e){return this.isNumeric(e)?parseInt(e):this.getRequiredVariable(e)},e.prototype.setLatestPostion=function(e,t){this.latestPostionX=e,this.latestPostionY=t,this.foundStartPostion||(this.startPostionX=e,this.startPostionY=t,this.foundStartPostion=!0)},e.prototype.getLatestPostion=function(){return{x:this.latestPostionX,y:this.latestPostionY}},e.prototype.getStartPostion=function(){return{x:this.startPostionX,y:this.startPostionY}},e.prototype.inspect=function(){console.debug(JSON.stringify(this.variablesMap))},e}();t.LumiaContext=a;var s=function(){function e(){}return e.prototype.renderLumiaPath=function(e,t,r){var i=this;void 0===r&&(r="");var o=e.childElementOptional(r+"avLst");o&&o.elementsWithName(r+"gd").forEach((function(e){var r=e.attr.getString("fmla"),i=new n.FormulaEval(r).eval(t),o=e.attr.getString("name");t.setVariableIfNotExist(o,i)}));var a=e.childElementOptional(r+"gdLst");a&&a.elementsWithName(r+"gd").forEach((function(e){var r=e.attr.getString("fmla"),i=new n.FormulaEval(r).eval(t),o=e.attr.getString("name");t.setVariable(o,i)}));var s=e.childElementOptional(r+"rect");s?(t.setVariable("rectLeft",t.accessValue(s.attr.getString("l"))),t.setVariable("rectTop",t.accessValue(s.attr.getString("t"))),t.setVariable("rectRight",t.accessValue(s.attr.getString("r"))),t.setVariable("rectBottom",t.accessValue(s.attr.getString("b")))):(t.setVariable("rectLeft",t.accessValue("l")),t.setVariable("rectTop",t.accessValue("t")),t.setVariable("rectRight",t.accessValue("r")),t.setVariable("rectBottom",t.accessValue("b")));var u=e.childElement(r+"pathLst").elementsWithName(r+"path"),l=[];return u.forEach((function(e){var n,o={fill:void 0,pathD:"",isBorder:(n=e.attr.getBooleanOptional("stroke"),null==n||n)};o.fill=e.attr.getStringOptional("fill")||void 0;var a=i.calcPathScale(e,t),s=a.pathWidthScale,u=a.pathHeightScale,p=e.elements.map((function(e){return new c(e,r,s,u).generate(t)}));o.pathD=p.join(" "),l.push(o)})),l},e.prototype.calcPathScale=function(e,t){var r=e.attr.getNumberOptional("w"),n=e.attr.getNumberOptional("h"),i=1,o=1;return r&&(i=t.accessValue("w")/r),n&&(o=t.accessValue("h")/n),{pathWidthScale:i,pathHeightScale:o}},e}();t.LumiaFactory=s;var c=function(){function e(e,t,r,n){this.actionXML=e,this.namespace=t,this.pathWidthScale=r,this.pathHeightScale=n}return e.prototype.xUnitTransformAndPathScale=function(e){return e*this.pathWidthScale/i.EmuToPx},e.prototype.yUnitTransformAndPathScale=function(e){return e*this.pathHeightScale/i.EmuToPx},e.prototype.generate=function(e){var t=this,r=this.actionXML.elementsWithName(this.namespace+"pt").map((function(e){return{x:e.attr.getString("x"),y:e.attr.getString("y")}})).map((function(r){return{x:t.getPtValue(r,e,"x"),y:t.getPtValue(r,e,"y")}})),n=r.length>0?r[0].x:0,o=r.length>0?r[0].y:0,a=r.length>1?r[1].x:0,s=r.length>1?r[1].y:0,c=r.length>2?r[2].x:0,u=r.length>2?r[2].y:0;switch(this.actionXML.name){case this.namespace+"moveTo":return e.setLatestPostion(n,o),["M",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o)].join(" ");case this.namespace+"lnTo":return e.setLatestPostion(n,o),["L",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o)].join(" ");case this.namespace+"arcTo":var l=e.accessValue(this.actionXML.attr.getString("wR")),p=e.accessValue(this.actionXML.attr.getString("hR")),h=e.accessValue(this.actionXML.attr.getString("stAng"))/i.Degree,d=e.accessValue(this.actionXML.attr.getString("swAng"))/i.Degree,f=e.getLatestPostion(),y=f.x,A=f.y,m=this.getSvgArc(l,p,h,d,y,A);return d>=360?(e.setLatestPostion(m.endX,m.endY),["A",this.xUnitTransformAndPathScale(m.radiusX),this.yUnitTransformAndPathScale(m.radiusY),m.xAxisRotation,m.largeArcFlag,m.sweepFlag,this.xUnitTransformAndPathScale(m.middleX),this.yUnitTransformAndPathScale(m.middleY),"A",this.xUnitTransformAndPathScale(m.radiusX),this.yUnitTransformAndPathScale(m.radiusY),m.xAxisRotation,m.largeArcFlag,m.sweepFlag,this.xUnitTransformAndPathScale(m.endX),this.yUnitTransformAndPathScale(m.endY)].join(" ")):(e.setLatestPostion(m.endX,m.endY),["A",this.xUnitTransformAndPathScale(m.radiusX),this.yUnitTransformAndPathScale(m.radiusY),m.xAxisRotation,m.largeArcFlag,m.sweepFlag,this.xUnitTransformAndPathScale(m.endX),this.yUnitTransformAndPathScale(m.endY)].join(" "));case this.namespace+"cubicBezTo":return e.setLatestPostion(c,u),["C",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o),this.xUnitTransformAndPathScale(a),this.yUnitTransformAndPathScale(s),this.xUnitTransformAndPathScale(c),this.yUnitTransformAndPathScale(u)].join(" ");case this.namespace+"quadBezTo":return e.setLatestPostion(r[1].x,r[1].y),["Q",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o),this.xUnitTransformAndPathScale(a),this.yUnitTransformAndPathScale(s)].join(" ");case this.namespace+"close":return e.setLatestPostion(e.getStartPostion().x,e.getStartPostion().y),"Z";default:throw new Error("unknow "+this.actionXML.name)}},e.prototype.getPtValue=function(e,t,r){return t.accessValue(e[r])},e.prototype.getSvgArc=function(e,t,r,n,i,o){var a,s,c,u,l,p=e,h=t;if(0===n)a=i,s=o,l=0;else if(n>=360)a=i,s=o,c=i+2*e*Math.abs(Math.cos(-r/180*Math.PI)),u=o+2*t*Math.sin(-r/180*Math.PI),l=1;else{var d=-r,f=-(r+n),y=this.getCoordinateOnEllipse(d,p,h),A=i-y.x,m=o+y.y,g=this.getCoordinateOnEllipse(f,p,h);a=g.x+A,s=m-g.y,l=n>=-360&&n<-180?1:n>=-180&&n<0||n>0&&n<180?0:1}return{radiusX:p,radiusY:h,xAxisRotation:0,largeArcFlag:l,sweepFlag:n>0?1:0,endX:a,endY:s,middleX:c,middleY:u}},e.prototype.getCoordinateOnEllipse=function(e,t,r){var n,i,o=e%360;if(o%180==0)n=Math.cos(o*(Math.PI/180))*t,i=0;else if(o%90==0)n=0,i=Math.sin(o*(Math.PI/180))*r;else{var a=this.getTanDeg(o);n=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t*a,2)),(o>90&&o<270||o<-90&&o>-270)&&(n=-n),i=a*n}return{x:n,y:i}},e.prototype.getTanDeg=function(e){var t=e*Math.PI/180;return Math.tan(t)},e}();t.getPresetShapeDefinition=function(e){return o.ResourcePreLoader.presetShapeDefinitons.childElementOptional(e)||(console.warn(e+" not include preset shape."),o.ResourcePreLoader.presetShapeDefinitons.childElement("rect"))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){void 0===e&&(e="keyval-store"),void 0===t&&(t="keyval"),this.storeName=t,this._dbp=new Promise((function(r,n){var i=indexedDB.open(e,1);i.onerror=function(){return n(i.error)},i.onsuccess=function(){return r(i.result)},i.onupgradeneeded=function(){i.result.createObjectStore(t)}}))}return e.prototype._withIDBStore=function(e,t){var r=this;return this._dbp.then((function(n){return new Promise((function(i,o){var a=n.transaction(r.storeName,e);a.oncomplete=function(){return i()},a.onabort=a.onerror=function(){return o(a.error)},t(a.objectStore(r.storeName))}))}))},e}();function o(){return n||(n=new i),n}t.Store=i,t.get=function(e,t){var r;return void 0===t&&(t=o()),t._withIDBStore("readonly",(function(t){r=t.get(e)})).then((function(){return r.result}))},t.set=function(e,t,r){return void 0===r&&(r=o()),r._withIDBStore("readwrite",(function(r){r.put(t,e)}))},t.del=function(e,t){return void 0===t&&(t=o()),t._withIDBStore("readwrite",(function(t){t.delete(e)}))},t.clear=function(e){return void 0===e&&(e=o()),e._withIDBStore("readwrite",(function(e){e.clear()}))},t.keys=function(e){void 0===e&&(e=o());var t=[];return e._withIDBStore("readonly",(function(e){(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}})).then((function(){return t}))}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(12),s=r(25),c=r(63),u=r(2),l=r(10),p=r(36),h=r(37),d=r(0),f=function(e){function t(t){var r=e.call(this,t)||this;if(r.pathElements={},r.imageElement=o.createRef(),r.spId=t.spId,r.graphType="p:sp"===t.shapeXML.name?"shape":"connection",r.prestGeomXML=r.props.shapeXML.extraElementWithName("a:prstGeom"),r.custGeomXML=r.props.shapeXML.extraElementWithName("a:custGeom"),r.svgLoadingMonitor=new l.ImageLoadingMonitor(t.logger).createMonitor(),r.useBgFill=r.props.shapeXML.attr.getBoolean("useBgFill",!1),r.useBgFill){var n=r.props.shapeXML.parentElement("p:cSld");if(n){var i=n.extraAttr.getColorOptional("backgroundColor");i&&(r.fillColor=i)}}return r}return i(t,e),t.prototype.identification=function(){return this.props.slideIndex+"-"+this.props.spId+"-"},t.prototype.updateFillColor=function(e,t){var r=this;void 0===t&&(t=!0);var n=void 0,i=[],o=0,a=void 0,s=void 0;if(e instanceof u.GradientColor?(i=e.getColors(),o=e.getRotation(),a=e.getGradientPath(),n="url(#"+this.identification()+"-gradient-fill)"):e instanceof u.ImageFill?s=e.getResId():n=e instanceof u.GroupFill?u.ensureColor(this.props.groupFillColor):u.ensureColor(e),t&&(Object.keys(this.pathElements).forEach((function(e){var t=r.pathElements[e];t&&n&&(void 0!==s?t.setAttribute("fill","none"):t.setAttribute("fill",n))})),this.imageElement.current&&e)){var c=e.getAlphaModFix();this.imageElement.current.setAttribute("opacity",c.toString())}return{path:a,imageResId:s,colorStops:i,rotation:o,fillColor:n}},t.prototype.getCssVaribleColor=function(e){switch(e){case u.PathFillMode.Darken:return"hsla(var(--sp-fill-h),var(--sp-fill-s),calc(var(--sp-fill-l)*0.6),var(--sp-fill-a))";case u.PathFillMode.DarkenLess:return"hsla(var(--sp-fill-h),var(--sp-fill-s),calc(var(--sp-fill-l)*0.8),var(--sp-fill-a))";case u.PathFillMode.Lighten:return"hsla(var(--sp-fill-h),var(--sp-fill-s),calc(var(--sp-fill-l)*1.4),var(--sp-fill-a))";case u.PathFillMode.LightenLess:return"hsla(var(--sp-fill-h),var(--sp-fill-s),calc(var(--sp-fill-l)*1.2),var(--sp-fill-a))";default:return"hsla(var(--sp-fill-h),var(--sp-fill-s),var(--sp-fill-l),var(--sp-fill-a))"}},t.prototype.render=function(){var e,t,r,n,i,l=this;this.pathElements={};var h=new a.LumiaContext({w:this.props.width,h:this.props.height}),d="";if(this.prestGeomXML){var f=this.prestGeomXML.attr.getString("prst");this.injectAdjustValue(this.prestGeomXML,h),i=a.getPresetShapeDefinition(f)}else this.custGeomXML?(i=this.custGeomXML,d="a:"):i=a.getPresetShapeDefinition("rect");var y=c.ArrowStyle.none,A=c.ArrowStyle.none,m=this.props.shapeXML.childElementOptional("p:spPr","a:ln","a:headEnd"),g=this.props.shapeXML.childElementOptional("p:spPr","a:ln","a:tailEnd"),v=(null===(t=null===(e=m)||void 0===e?void 0:e.parent)||void 0===t?void 0:t.attr.getNumber("w",p.DEFAULT_HALF_BORBER_WIDTH))||(null===(n=null===(r=g)||void 0===r?void 0:r.parent)||void 0===n?void 0:n.attr.getNumber("w",p.DEFAULT_HALF_BORBER_WIDTH))||p.DEFAULT_HALF_BORBER_WIDTH,b=Math.max(v/s.EmuToPx*3,10);if(m){var P=m.attr.getString("type","none");y=c.fromString(P)}g&&(P=g.attr.getString("type","none"),A=c.fromString(P));var S=this.useBgFill?this.fillColor:this.props.fillColor,w=this.updateFillColor(S,!1),x=w.fillColor,O=w.colorStops,k=w.imageResId,M=w.path,C=w.rotation,T=null;O.length>0&&(T=M?o.createElement("radialGradient",{id:this.identification()+"-gradient-fill",gradientTransform:"rotate("+C+")"},O.map((function(e,t){return o.createElement("stop",{key:"index-"+t,offset:e.stop,stopColor:u.ensureColor(e.color)})}))):o.createElement("linearGradient",{id:this.identification()+"-gradient-fill",gradientTransform:"rotate("+C+")"},O.map((function(e,t){return o.createElement("stop",{key:"index-"+t,offset:e.stop,stopColor:u.ensureColor(e.color)})}))));var _=(new a.LumiaFactory).renderLumiaPath(i,h,d).map((function(e,t){var r="none"!==e.fill?x:"none",n=e.isBorder?u.ensureColor(l.props.borderStyle.color):"none";0===O.length&&(x&&e.fill&&(r=u.getPathFillColor(x,e.fill)),l.props.shapeXML.childElementOptional("p:spPr","a:ln","a:solidFill")||"none"===x||(n=u.getPathFillColor(n,u.PathFillMode.Darken)));var i={};return void 0!==k&&"none"!==e.fill&&0===O.length&&(i.fill=l.getCssVaribleColor(e.fill)),o.createElement("path",{ref:function(e){return l.pathElements[t.toString()]=e},key:"path"+t,d:e.pathD,style:i,fill:k?"none":r,height:s.toPt(l.props.height),width:s.toPt(l.props.width),stroke:n,strokeWidth:s.toPt(l.props.borderStyle.width),strokeDasharray:l.props.borderStyle.strokeDashArray,markerStart:"url(#"+l.identification()+"-"+c.ArrowStyle[y]+"-start)",markerEnd:"url(#"+l.identification()+"-"+c.ArrowStyle[A]+"-end)"})})),I=h.accessValue("rectLeft"),E=h.accessValue("rectTop"),j=h.accessValue("rectRight")-h.accessValue("rectLeft"),R=h.accessValue("rectBottom")-h.accessValue("rectTop"),N=o.Children.map(this.props.children,(function(e){return o.cloneElement(e,{left:I,right:E,width:j,height:R})}));return o.createElement(o.Fragment,null,N,this.renderSVG(_,T,b,k))},t.prototype.renderSVG=function(e,t,r,n){var i=null,a=null,c=this.props.shapeXML.childElementOptional("p:spPr","a:blipFill","a:stretch","a:fillRect"),l=(c?c.attr.getNumber("l",0)/d.STPercentage100:0)*this.props.width,p=(c?c.attr.getNumber("b",0)/d.STPercentage100:0)*this.props.height,f=(c?c.attr.getNumber("r",0)/d.STPercentage100:0)*this.props.width,y=(c?c.attr.getNumber("t",0)/d.STPercentage100:0)*this.props.height;if(n){var A=this.props.fillColor.getAlphaModFix();i=o.createElement("clipPath",{id:"clippath-"+this.identification()},e);var m=this.props.resourceLoader.loadURL(this.props.resourceType,n);a=o.createElement(h.SvgImage,{innerref:this.imageElement,xlinkHref:m,href:m,width:s.toPt(this.props.width-f-l),height:s.toPt(this.props.height-p-y),x:s.toPt(l),y:s.toPt(y),opacity:A,clipPath:"url(#clippath-"+this.identification()+")",preserveAspectRatio:"none"})}var g,v,b="connection"===this.graphType&&this.props.borderStyle.color||"shape"===this.graphType;return g=s.toNumber(this.props.height)/s.EmuToPx<1?"1px":s.toPt(this.props.height),v=s.toNumber(this.props.width)/s.EmuToPx<1?"1px":s.toPt(this.props.width),b?o.createElement("svg",{style:{position:"absolute",width:v,height:g,overflow:"visible"}},o.createElement("defs",null,i,t,o.createElement("marker",{id:this.identification()+"-arrow-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,stroke:u.ensureColor(this.props.borderStyle.color),orient:"auto"},o.createElement("path",{d:"M 5 2.5 L 10 5 L 5 7.5 ",fill:"none"})),o.createElement("marker",{id:this.identification()+"-arrow-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,stroke:u.ensureColor(this.props.borderStyle.color),orient:"auto"},o.createElement("path",{d:"M 5 2.5 L 0 5 L 5 7.5 ",fill:"none"})),o.createElement("marker",{id:this.identification()+"-triangle-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-triangle-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("path",{d:"M 10 0 L 0 5 L 10 10 z",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-stealth-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-stealth-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("path",{d:"M 10 0 L 0 5 L 10 10 z",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-diamond-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("path",{d:"M 5 0 L 10 5 L 5 10 L 0 5 z",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-diamond-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("path",{d:"M 5 0 L 10 5 L 5 10 L 0 5 z",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-oval-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("ellipse",{cx:"5",cy:"5",rx:"5",ry:"5",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-oval-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:r,markerHeight:r,orient:"auto"},o.createElement("ellipse",{cx:"5",cy:"5",rx:"5",ry:"5",fill:u.ensureColor(this.props.borderStyle.color)})),o.createElement("marker",{id:this.identification()+"-none"})),a,e):null},t.prototype.injectAdjustValue=function(e,t){var r=e.childElementOptional("a:avLst");r&&r.elementsWithName("a:gd").forEach((function(e){var r=e.attr.getString("fmla"),n=new a.FormulaEval(r).eval(t),i=e.attr.getString("name");t.setVariable(i,n)}))},t}(o.Component);t.Lumia=f},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.none=0]="none",e[e.triangle=1]="triangle",e[e.stealth=2]="stealth",e[e.diamond=3]="diamond",e[e.oval=4]="oval",e[e.arrow=5]="arrow"}(n=t.ArrowStyle||(t.ArrowStyle={})),t.fromString=function(e){switch(e){case"none":return n.none;case"triangle":return n.triangle;case"stealth":return n.stealth;case"diamond":return n.diamond;case"oval":return n.oval;case"arrow":return n.arrow;default:return n.none}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(10),c=function(e){function t(t){var r=e.call(this,t)||this;return r.url=r.getUrl(),r.imageLoadingMonitor=new s.ImageLoadingMonitor(t.logger).createMonitor(),r}return i(t,e),t.prototype.getId=function(){var e=this.props.graphXML,t=e.childElement("p:nvGraphicFramePr","p:cNvPr").attr.getStringOptional("id");return t?"spId"+t:e.parent&&"mc:Choice"===e.parent.name?this.getResId():void 0},t.prototype.getResId=function(){var e,t=null===(e=this.props.graphXML.parent)||void 0===e?void 0:e.parent;if(t){var r=t.childElementOptional("mc:Fallback","p:pic","p:blipFill","a:blip");if(r)return r.attr.getStringOptional("r:embed")}},t.prototype.getUrl=function(){var e=this.getId();if(e)return this.props.slideContext.resourceLoader.loadURL(this.props.resourceType,e)},t.prototype.render=function(){return this.url?o.createElement("img",{src:this.url,style:{width:a.toPt(this.props.width),height:a.toPt(this.props.height)},ref:this.imageLoadingMonitor}):null},t}(o.Component);t.ChartGraph=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(10),c=function(e){function t(t){var r=e.call(this,t)||this;return r.url=r.getUrl(),r.imageLoadingMonitor=new s.ImageLoadingMonitor(t.logger).createMonitor(),r}return i(t,e),t.prototype.getId=function(){return this.props.graphXML.childElement("p:nvGraphicFramePr","p:cNvPr").attr.getString("id")},t.prototype.getUrl=function(){var e=this.getId();return this.props.slideContext.resourceLoader.loadURL(this.props.resourceType,"spId"+e)},t.prototype.render=function(){return o.createElement("img",{src:this.url,style:{width:a.toPt(this.props.width),height:a.toPt(this.props.height)},ref:this.imageLoadingMonitor})},t}(o.Component);t.DiagramGraph=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("div",null)},t}(o.Component);t.Unsupported=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(10),c=function(e){function t(t){var r=e.call(this,t)||this;return r.url=r.getUrl(),r.imageLoadingMonitor=new s.ImageLoadingMonitor(t.logger).createMonitor(),r}return i(t,e),t.prototype.getId=function(){return this.props.graphXML.childElement("p:nvGraphicFramePr","p:cNvPr").attr.getString("id")},t.prototype.getUrl=function(){var e=this.getId();return this.props.slideContext.resourceLoader.loadURL(this.props.resourceType,"spId"+e)},t.prototype.render=function(){return this.url?o.createElement("img",{src:this.url,style:{width:a.toPt(this.props.width),height:a.toPt(this.props.height)},ref:this.imageLoadingMonitor}):o.createElement("div",null)},t}(o.Component);t.OleGraph=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(38),c=function(e){function t(t){var r=e.call(this,t)||this;return r.videoIntervalId=void 0,r.lastAnimeState={stop:0,play:0},r.player=o.createRef(),r.controller=o.createRef(),t.mediaState?r.state={displayController:!1,playing:t.mediaState.playing,currentTime:t.mediaState.currentTime||t.startTimePerfix,volume:1,duration:0,controllerPositionTop:0,controllerPositionLeft:0}:r.state={displayController:!1,playing:!1,currentTime:t.startTimePerfix||0,volume:1,duration:0,controllerPositionTop:0,controllerPositionLeft:0},r.state.playing&&r.hasControl(r.props.mediaSlideActionUserIds,r.props.userId)&&r.syncPlayTimeLoop(),r}return i(t,e),t.prototype.componentDidMount=function(){var e,t=this;null===(e=window)||void 0===e||e.addEventListener("message",(function(e){"_changeAudioState"===e.data.type&&e.data.targetID===t.props.targetID&&t.updateAnimation(e.data)}))},t.prototype.componentWillUnmount=function(){var e;this.pauseAudio(),this.stopSyncPlayTime(),null===(e=window)||void 0===e||e.removeEventListener("_changeAudioState",(function(e){}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t;!0===this.props.disableAnimation||!this.props.outsidePausing&&e.outsidePausing?this.player.current&&this.pauseAudio():!this.props.outsidePausing||e.outsidePausing?void 0===this.props.mediaState||this.props.mediaState.playing!==e.mediaState.playing||this.props.mediaState.currentTime!==e.mediaState.currentTime?(this.hasControl(e.mediaSlideActionUserIds,e.userId)||this.stopSyncPlayTime(),void 0===this.props.mediaState&&void 0!==e.mediaState?void 0===this.props.mediaState&&void 0!==e.mediaState&&(this.player.current&&(this.pauseAudio(),this.player.current.currentTime=e.mediaState.currentTime,!0===e.mediaState.playing?this.playAudio():this.pauseAudio()),this.setState(e.mediaState)):void 0!==this.props.mediaState&&void 0!==e.mediaState&&this.player.current&&(this.props.mediaState.playing?Math.abs(e.mediaState.currentTime-this.player.current.currentTime)>1.5&&(this.player.current.currentTime=e.mediaState.currentTime,e.mediaState.playing&&(null===(t=this.props.rtcClient)||void 0===t||t.setAudioMixingPosition(Math.floor(1e3*this.player.current.currentTime)))):this.player.current.currentTime=e.mediaState.currentTime,this.state.playing&&!e.mediaState.playing?this.pauseAudio():!this.state.playing&&e.mediaState.playing&&this.playAudio(),this.setState({playing:e.mediaState.playing,currentTime:e.mediaState.currentTime}))):this.state.playing!==this.props.mediaState.playing&&this.setState({playing:this.props.mediaState.playing}):this.player.current&&this.playAudio()},t.prototype.updateAnimation=function(e){this.player.current&&(1===e.play&&this.player.current.paused&&(this.props.startTime?this.player.current.currentTime=this.props.startTimePerfix+this.props.startTime:this.player.current.currentTime=this.props.startTimePerfix,this.playAudio(),this.setState({playing:!0,currentTime:this.player.current.currentTime})),1===e.stop&&this.player.current&&this.state.playing&&(this.pauseAudio(),this.setState({playing:!1})))},t.prototype.mixAudio=function(e,t){var r,n,i=this;this.state.playing?(null===(r=this.props.rtcClient)||void 0===r||r.setAudioMixingPosition(Math.floor(1e3*e)),t()):null===(n=this.props.rtcClient)||void 0===n||n.startAudioMixing(this.props.audioURL,!0,!1,1,(function(r,n){var o,a;714===r?(null===(o=i.props.logger)||void 0===o||o.error("rtc mixing error : "+n),console.error("rtc mixing error :",n)):(null===(a=i.props.rtcClient)||void 0===a||a.setAudioMixingPosition(Math.floor(1e3*e)),i.audioMixing=!0,t())}))},t.prototype.playAudio=function(){this.player.current&&(void 0!==this.props.rtcClient?this.mixAudio(this.player.current.currentTime,this.playLocalAudio.bind(this)):this.playLocalAudio())},t.prototype.playLocalAudio=function(){var e=this,t=this.player.current.play();void 0!==t&&t.then((function(){})).catch((function(t){e.props.logger?e.props.logger.error("play audio exception: "+t):console.error(t),e.props.onMediaPlayError&&e.props.onMediaPlayError(e.props.shapeId,"audio",t)}))},t.prototype.stopMixAudio=function(e){var t=this;this.props.rtcClient.stopAudioMixing((function(r,n){var i;714===r?(null===(i=t.props.logger)||void 0===i||i.error("rtc mixing error : "+n),console.error(" stop audio mixing error :",n)):(t.audioMixing=!1,e())}))},t.prototype.pauseAudio=function(){var e=this;this.player.current&&(void 0!==this.props.rtcClient?this.stopMixAudio((function(){return e.player.current.pause()})):this.player.current.pause())},t.prototype.syncPlayTimeLoop=function(e){var t=this;this.props.onMediaChange&&(this.syncPlayTime(e),this.videoIntervalId=window.setInterval((function(){t.syncPlayTime()}),1e3))},t.prototype.syncPlayTime=function(e){if(this.player.current){var t=this.props.mediaRef,r=t.startTime,n=t.endTime,i=e||this.state.currentTime,o=this.player.current.duration;n&&(o-=n);var a=i;this.player.current&&i>=o&&(a=r||0),r&&a<r&&(a=r),this.props.onMediaChange({playing:!0,currentTime:a},this.props.shapeId)}},t.prototype.stopSyncPlayTime=function(){this.videoIntervalId&&clearInterval(this.videoIntervalId)},t.prototype.onPlayClick=function(){this.stopSyncPlayTime(),this.syncPlayTimeLoop()},t.prototype.onPauseClick=function(){this.stopSyncPlayTime(),this.pauseAudio(),this.props.onMediaChange&&this.props.onMediaChange({playing:!1,currentTime:this.state.currentTime},this.props.shapeId)},t.prototype.onMediaEnd=function(){this.stopSyncPlayTime(),this.pauseAudio(),this.setState({playing:!1})},t.prototype.onSeekClick=function(e){this.stopSyncPlayTime(),this.syncPlayTimeLoop(e)},t.prototype.onMediaPlay=function(){this.props.onMediaPlay&&this.props.onMediaPlay(this.props.shapeId,"audio",this.state.currentTime)},t.prototype.onMediaPause=function(){this.stopSyncPlayTime(),this.props.onMediaPause&&this.props.onMediaPause(this.props.shapeId,"audio",this.state.currentTime)},t.prototype.onMouseOver=function(e){if(!0!==this.state.displayController){var t,r,n=e.target.getBoundingClientRect(),i=n.x,o=n.y,a=n.height,s=this.props.slideRef.current.getBoundingClientRect(),c=s.x,u=s.y,l=s.width,p=s.height,h=getComputedStyle(this.controller.current),d=l/parseFloat(getComputedStyle(this.props.slideRef.current).width),f=0,y=0;null!==h&&null!==h.width&&(f=parseInt(h.width)*d),null!==h&&null!==h.height&&(y=parseInt(h.height)*d),r=i<c?0:c+l<i+f?l-f:i-c,t=o+a-y<u?0:o+a>u+p?p-y:o+a-u-y,this.setState({displayController:!0,controllerPositionTop:t/d,controllerPositionLeft:r/d})}},t.prototype.onMediaCanPlay=function(){!0!==this.props.disableAnimation?this.props.mediaState&&this.props.mediaState.playing&&(this.props.rtcClient&&!this.audioMixing||!0===this.player.current.paused&&(this.player.current.currentTime=this.props.mediaState.currentTime,this.playAudio())):this.pauseAudio()},t.prototype.hasControl=function(e,t){return!(!e||void 0===t)&&e[this.props.shapeId]===t},t.prototype.render=function(){var e=this;return o.createElement("div",{style:{position:"relative"},onMouseLeave:function(){return e.setState({displayController:!1})}},o.createElement("img",{className:"ppt-event-source",src:this.props.resourceLoader.replaceProtocolByresourceScheme("https://convertcdn.netless.link/publicFiles/icon/audio.png"),style:{width:a.toPt(this.props.width),height:a.toPt(this.props.height)},onMouseOver:this.onMouseOver.bind(this),alt:""}),o.createElement("audio",{src:this.props.audioURL,ref:this.player,muted:!!this.props.rtcClient,onPlay:this.onMediaPlay.bind(this),onPause:this.onMediaPause.bind(this),onLoadedMetadata:function(){return e.setState({duration:e.player.current.duration})},onTimeUpdate:function(){return e.setState({currentTime:e.player.current.currentTime})},onLoadedMetadataCapture:function(){"ios"===window.__platform&&e.onMediaCanPlay()},onCanPlay:function(){"ios"!==window.__platform&&e.onMediaCanPlay()},onError:function(t){var r,n,i=void 0;null!==t.target.error&&(i=t.target.error),void 0!==i?null===(r=e.props.logger)||void 0===r||r.error("load media: "+e.props.audioURL+" error, code: "+i.code+", message: "+i.message):null===(n=e.props.logger)||void 0===n||n.error("load media: "+e.props.audioURL+" error without error message")}}),o.createElement(s.MediaController,{controllerRef:this.controller,protalId:this.props.controllerProtalId,style:{position:"absolute",top:this.state.controllerPositionTop,left:this.state.controllerPositionLeft,zIndex:1},resourceLoader:this.props.resourceLoader,mediaRef:this.player,display:this.state.displayController,playing:this.state.playing,duration:this.state.duration,currentTime:this.state.currentTime,onPlayClick:this.onPlayClick.bind(this),onPauseClick:this.onPauseClick.bind(this),onSeekClick:this.onSeekClick.bind(this),onMediaEnd:this.onMediaEnd.bind(this),endTime:this.props.mediaRef.endTime,startTime:this.props.mediaRef.startTime}))},t}(o.Component);t.Audio=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),c=r(0),u=r(3),l=r(70),p=r(10),h=r(2),d=r(37),f=function(e){function t(t){var r=e.call(this,t)||this;return r.spId="",r.opacity=1,r.imageLoadingMonitor=new p.ImageLoadingMonitor(t.logger).createMonitor(),r.svgLoadingMonitor=new p.ImageLoadingMonitor(t.logger).createMonitor(),r.spId=t.imageXML.extraAttr.getString("spId"),r.state={imageURL:""},r.getAlphaModFix(),r}return i(t,e),t.prototype.identification=function(){return this.props.slideIndex+"-"+this.spId+"-"},t.prototype.UNSAFE_componentWillMount=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){return this.setState({imageURL:this.props.imageURL}),[2]}))}))},t.prototype.getAlphaModFix=function(){var e=this.props.imageXML.childElement("p:blipFill"),t=new h.ImageFill(e).getAlphaModFix();t&&(this.opacity=t)},Object.defineProperty(t.prototype,"hasSoftEdge",{get:function(){var e=this.props.imageXML.childElementOptional("p:spPr","a:effectLst","a:softEdge");return Boolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasBlipChild",{get:function(){var e,t=this.props.imageXML.childElementOptional("p:blipFill","a:blip");return Boolean(null===(e=t)||void 0===e?void 0:e.elements.length)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needSpUrl",{get:function(){return this.hasSoftEdge||this.hasBlipChild},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.imageXML.childElementOptional("p:blipFill","a:stretch","a:fillRect"),t=(e?e.attr.getNumber("l",0)/c.STPercentage100:0)*this.props.width,r=(e?e.attr.getNumber("b",0)/c.STPercentage100:0)*this.props.height,n=(e?e.attr.getNumber("r",0)/c.STPercentage100:0)*this.props.width,i=(e?e.attr.getNumber("t",0)/c.STPercentage100:0)*this.props.height;if(void 0===this.props.imageXML.childElementOptional("p:spPr",new u.TagOrExpr("a:prstGeom","a:custGeom"))){var o=this.props.imageXML.childElementOptional("p:blipFill","a:srcRect"),a={top:0,left:0,right:0,bottom:0};return o&&(a.top=c.parseSTPercentage(o.attr.getNumber("t",0)),a.left=c.parseSTPercentage(o.attr.getNumber("l",0)),a.right=c.parseSTPercentage(o.attr.getNumber("r",0)),a.bottom=c.parseSTPercentage(o.attr.getNumber("b",0))),s.createElement("div",{style:{overflow:"hidden",height:"100%"}},s.createElement("img",{src:this.state.imageURL,style:{width:c.toPt(this.props.width),height:c.toPt(this.props.height),position:"relative",top:""+c.toPt(this.props.height*-a.top),left:""+c.toPt(this.props.width*-a.left)},alt:"",ref:this.imageLoadingMonitor}))}var p=this.needSpUrl?this.props.spURL:this.props.imageURL,h=this.needSpUrl?1:this.opacity,f=void 0,y=void 0,A=void 0,m=void 0;return this.needSpUrl&&this.props.spURL?(f=this.props.width-this.props.margin.left-this.props.margin.right,y=this.props.height-this.props.margin.top-this.props.margin.bottom,A=void 0,m=void 0):(f=this.props.width-t-n,y=this.props.height-i-r,A=c.toPt(-this.props.margin.left+t),m=c.toPt(-this.props.margin.top+i)),s.createElement(l.LumiaClipping,{uuid:this.props.uuid,slideIndex:this.props.slideIndex,borderStyle:this.props.borderStyle,width:this.props.width-this.props.margin.left-this.props.margin.right,height:this.props.height-this.props.margin.top-this.props.margin.bottom,shapeXML:this.props.imageXML,spId:this.spId},s.createElement(d.SvgImage,{innerref:this.svgLoadingMonitor,preserveAspectRatio:"none",xlinkHref:p||this.props.imageURL,href:p||this.props.imageURL,x:A,y:m,width:c.toPt(f),height:c.toPt(y),clipPath:"url(#clippath-"+this.identification()+")",opacity:h}))},t}(s.Component);t.Image=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(12),s=r(0),c=r(2),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.identification=function(){return this.props.slideIndex+"-"+this.props.spId+"-"},t.prototype.render=function(){var e,t=this,r=this.props.shapeXML.childElementOptional("p:spPr","a:prstGeom"),n=this.props.shapeXML.childElementOptional("p:spPr","a:custGeom"),i=new a.LumiaContext({w:this.props.width,h:this.props.height}),u="";if(r){var l=r.attr.getString("prst");this.injectAdjustValue(r,i),e=a.getPresetShapeDefinition(l)}else n?(e=n,u="a:"):e=a.getPresetShapeDefinition("rect");var p=(new a.LumiaFactory).renderLumiaPath(e,i,u).map((function(e,r){return o.createElement("path",{key:"path"+r,d:e.pathD,fill:c.ensureColor(t.props.fillColor),height:s.toPt(t.props.height),width:s.toPt(t.props.width),stroke:c.ensureColor(t.props.borderStyle.color),strokeWidth:s.toPt(t.props.borderStyle.width),strokeDasharray:t.props.borderStyle.strokeDashArray})}));return o.createElement("svg",{style:{position:"absolute",width:s.toPt(this.props.width),height:s.toPt(this.props.height),overflow:"visible"}},o.createElement("defs",null,o.createElement("clipPath",{id:"clippath-"+this.identification()},p)),this.props.children,p)},t.prototype.injectAdjustValue=function(e,t){var r=e.childElementOptional("a:avLst");r&&r.elementsWithName("a:gd").forEach((function(e){var r=e.attr.getString("fmla"),n=new a.FormulaEval(r).eval(t),i=e.attr.getString("name");t.setVariable(i,n)}))},t}(o.Component);t.LumiaClipping=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(38),c=r(10),u=function(e){function t(t){var r=e.call(this,t)||this;return r.videoIntervalId=void 0,r.lastAnimeState={stop:0,play:0},r.player=o.createRef(),r.controller=o.createRef(),r.imageLoadingMonitor=new c.ImageLoadingMonitor(t.logger).createMonitor(),t.mediaState?r.state={displayController:!1,playing:t.mediaState.playing,currentTime:t.mediaState.currentTime||t.startTimePerfix,volume:1,duration:0,controllerPositionTop:0,controllerPositionLeft:0}:r.state={displayController:!1,playing:!1,currentTime:t.startTimePerfix||0,volume:1,duration:0,controllerPositionTop:0,controllerPositionLeft:0},r.props.mediaState&&r.props.mediaState.playing&&r.hasControl(r.props.mediaSlideActionUserIds,r.props.userId)&&r.syncPlayTimeLoop(),r}return i(t,e),t.prototype.componentDidMount=function(){var e,t=this;null===(e=window)||void 0===e||e.addEventListener("message",(function(e){"_changeAudioState"===e.data.type&&e.data.targetID===t.props.targetID&&t.updateAnimation(e.data)}))},t.prototype.componentWillUnmount=function(){var e;this.pauseVideo(),this.stopSyncPlayTime(),null===(e=window)||void 0===e||e.removeEventListener("_changeAudioState",(function(e){}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t;!0===this.props.disableAnimation||!this.props.outsidePausing&&e.outsidePausing?this.player.current&&this.pauseVideo():!this.props.outsidePausing||e.outsidePausing?void 0===this.props.mediaState||this.props.mediaState.playing!==e.mediaState.playing||this.props.mediaState.currentTime!==e.mediaState.currentTime?void 0===this.props.mediaState&&void 0!==e.mediaState?(this.hasControl(e.mediaSlideActionUserIds,e.userId)||this.stopSyncPlayTime(),void 0===this.props.mediaState&&void 0!==e.mediaState&&(this.player.current&&(this.pauseVideo(),this.player.current.currentTime=e.mediaState.currentTime,!0===e.mediaState.playing?this.playVideo():this.pauseVideo()),this.setState(e.mediaState))):void 0!==this.props.mediaState&&void 0!==e.mediaState&&(this.hasControl(e.mediaSlideActionUserIds,e.userId)||this.stopSyncPlayTime(),this.player.current&&(this.props.mediaState.playing?Math.abs(e.mediaState.currentTime-this.player.current.currentTime)>1.5&&(this.player.current.currentTime=e.mediaState.currentTime,e.mediaState.playing&&(null===(t=this.props.rtcClient)||void 0===t||t.setAudioMixingPosition(Math.floor(1e3*this.player.current.currentTime)))):this.player.current.currentTime=e.mediaState.currentTime,this.state.playing&&!e.mediaState.playing?this.pauseVideo():!this.state.playing&&e.mediaState.playing&&this.playVideo(),this.setState({playing:e.mediaState.playing,currentTime:e.mediaState.currentTime}))):this.state.playing!==this.props.mediaState.playing&&this.setState({playing:this.props.mediaState.playing}):this.player.current&&this.playVideo()},t.prototype.updateAnimation=function(e){this.player.current&&this.lastAnimeState&&(0===this.lastAnimeState.play&&1===e.play&&this.player.current&&(1===e.stop?this.state.playing&&(this.pauseVideo(),this.setState({playing:!1})):this.state.playing||(this.props.startTime?this.player.current.currentTime=this.props.startTimePerfix+this.props.startTime:this.player.current.currentTime=this.props.startTimePerfix,this.playVideo(),this.setState({playing:!0}))),0===this.lastAnimeState.stop&&1===e.stop&&this.player.current&&this.state.playing&&(this.pauseVideo(),this.setState({playing:!1}))),this.lastAnimeState=e},t.prototype.mixAudio=function(e,t){var r,n,i=this;this.state.playing?(null===(r=this.props.rtcClient)||void 0===r||r.setAudioMixingPosition(Math.floor(1e3*e)),t()):null===(n=this.props.rtcClient)||void 0===n||n.startAudioMixing(this.props.videoURL,!0,!1,1,(function(r,n){var o,a;714===r?(null===(o=i.props.logger)||void 0===o||o.error("rtc mixing error : "+n),console.error("rtc mixing error :",n)):(null===(a=i.props.rtcClient)||void 0===a||a.setAudioMixingPosition(Math.floor(1e3*e)),i.audioMixing=!0,t())}))},t.prototype.playVideo=function(){this.player.current&&(void 0!==this.props.rtcClient?this.mixAudio(this.player.current.currentTime,this.playLocalVideo.bind(this)):this.playLocalVideo())},t.prototype.playLocalVideo=function(){var e=this,t=this.player.current.play();void 0!==t&&t.then((function(){})).catch((function(t){e.props.logger?e.props.logger.error("play video exception: "+t):console.error(t),e.props.onMediaPlayError&&e.props.onMediaPlayError(e.props.shapeId,"video",t)}))},t.prototype.stopMixAudio=function(e){var t=this;this.props.rtcClient.stopAudioMixing((function(r,n){var i;714===r?(null===(i=t.props.logger)||void 0===i||i.error("rtc mixing error : "+n),console.error(" stop audio mixing error :",n)):(t.audioMixing=!1,e())}))},t.prototype.pauseVideo=function(){var e=this;this.player.current&&(void 0!==this.props.rtcClient?this.stopMixAudio((function(){return e.player.current.pause()})):this.player.current.pause())},t.prototype.onPlayClick=function(){this.stopSyncPlayTime(),this.syncPlayTimeLoop()},t.prototype.syncPlayTimeLoop=function(e){var t=this;this.props.onMediaChange&&(this.syncPlayTime(e),this.videoIntervalId=window.setInterval((function(){t.syncPlayTime()}),1e3))},t.prototype.syncPlayTime=function(e){if(this.player.current){var t=this.props.mediaRef,r=t.startTime,n=t.endTime,i=e||this.state.currentTime,o=this.player.current.duration;n&&(o-=n);var a=i;this.player.current&&i>=o&&(a=r||0),r&&a<=r&&(a=r),this.props.onMediaChange({playing:!0,currentTime:a},this.props.shapeId)}},t.prototype.stopSyncPlayTime=function(){this.videoIntervalId&&clearInterval(this.videoIntervalId)},t.prototype.onPauseClick=function(){this.stopSyncPlayTime(),this.props.onMediaChange&&this.props.onMediaChange({playing:!1,currentTime:this.state.currentTime},this.props.shapeId)},t.prototype.onSeekClick=function(e){this.stopSyncPlayTime(),this.syncPlayTimeLoop(e)},t.prototype.onMediaPlay=function(){this.props.onMediaPlay&&this.props.onMediaPlay(this.props.shapeId,"video",this.state.currentTime)},t.prototype.onMediaPause=function(){this.stopSyncPlayTime(),this.props.onMediaPause&&this.props.onMediaPause(this.props.shapeId,"video",this.state.currentTime)},t.prototype.onMouseOver=function(e){if(!0!==this.state.displayController){var t,r,n=e.target.getBoundingClientRect(),i=n.x,o=n.y,a=n.height,s=this.props.slideRef.current.getBoundingClientRect(),c=s.x,u=s.y,l=s.width,p=s.height,h=getComputedStyle(this.controller.current),d=l/parseFloat(getComputedStyle(this.props.slideRef.current).width),f=0,y=0;null!==h&&null!==h.width&&(f=parseInt(h.width)*d),null!==h&&null!==h.height&&(y=parseInt(h.height)*d),r=i<c?0:c+l<i+f?l-f:i-c,t=o+a-y<u?0:o+a>u+p?p-y:o+a-u-y,this.setState({displayController:!0,controllerPositionTop:t/d,controllerPositionLeft:r/d})}},t.prototype.onMediaCanPlay=function(){!0!==this.props.disableAnimation?this.props.mediaState&&this.props.mediaState.playing&&(this.props.rtcClient&&!this.audioMixing||!0===this.player.current.paused&&(this.player.current.currentTime=this.props.mediaState.currentTime,this.playVideo())):this.pauseVideo()},t.prototype.hasControl=function(e,t){return!(!e||void 0===t)&&e[this.props.shapeId]===t},t.prototype.onMediaEnd=function(){this.stopSyncPlayTime(),this.pauseVideo(),this.setState({playing:!1})},t.prototype.render=function(){var e=this,t=this.props.mediaRef.startTime?1e3*this.props.mediaRef.startTime:1e4,r=this.props.videoURL+"?x-oss-process=video/snapshot,t_"+t+",m_fast,w_800,f_png,ar_auto";return o.createElement("div",{className:"ppt-event-source",style:{position:"relative",width:a.toPt(this.props.width),height:a.toPt(this.props.height)},onMouseLeave:function(){return e.setState({displayController:!1})}},o.createElement("img",{src:r,style:{position:"absolute",zIndex:0,top:0,left:0,width:a.toPt(this.props.width),height:a.toPt(this.props.height)},ref:this.imageLoadingMonitor}),o.createElement("video",{className:"ppt-event-source","webkit-playsinline":"true",playsInline:!0,src:this.props.videoURL,ref:this.player,muted:!!this.props.rtcClient,style:{position:"absolute",zIndex:1,top:0,left:0,width:a.toPt(this.props.width),height:a.toPt(this.props.height),objectFit:"fill"},poster:r,onPlay:this.onMediaPlay.bind(this),onPause:this.onMediaPause.bind(this),onLoadedMetadata:function(){return e.setState({duration:e.player.current.duration})},onTimeUpdate:function(){return e.setState({currentTime:e.player.current.currentTime})},onLoadedMetadataCapture:function(){"ios"===window.__platform&&e.onMediaCanPlay()},onCanPlay:function(){"ios"!==window.__platform&&e.onMediaCanPlay()},onError:function(t){var r,n,i=void 0;null!==t.target.error&&(i=t.target.error),void 0!==i?null===(r=e.props.logger)||void 0===r||r.error("load media: "+e.props.videoURL+" error, code: "+i.code+", message: "+i.message):null===(n=e.props.logger)||void 0===n||n.error("load media: "+e.props.videoURL+" error without error message")},onMouseOver:this.onMouseOver.bind(this),preload:"auto"}),o.createElement(s.MediaController,{protalId:this.props.controllerProtalId,style:{position:"absolute",top:this.state.controllerPositionTop,left:this.state.controllerPositionLeft,zIndex:2,backfaceVisibility:"hidden"},resourceLoader:this.props.resourceLoader,controllerRef:this.controller,mediaRef:this.player,display:this.state.displayController,playing:this.state.playing,duration:this.state.duration,currentTime:this.state.currentTime,onPlayClick:this.onPlayClick.bind(this),onPauseClick:this.onPauseClick.bind(this),onSeekClick:this.onSeekClick.bind(this),onMediaEnd:this.onMediaEnd.bind(this),endTime:this.props.mediaRef.endTime,startTime:this.props.mediaRef.startTime}))},t}(o.Component);t.Video=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.spTreeXML=e}return e.prototype.indexBySpId=function(){for(var e={},t=0,r=0,n=this.spTreeXML.elements;r<n.length;r++){var i=n[r].extraAttr.getStringOptional("spId");"string"==typeof i&&(e[i]=t,t++)}return e},e}();t.ZOrderIndexer=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(12),s=r(31),c=r(0),u=r(11),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lumiaRef=o.createRef(),t}return i(t,e),t.prototype.render=function(){var e=this.props.shapeXML.childElementOptional("p:txBody");return this.renderShape(this.props.shapeXML,e)},t.prototype.updateAnimeState=function(e){var t;null===(t=this.lumiaRef.current)||void 0===t||t.updateFillColor(e.fillcolor)},t.prototype.renderTextBody=function(e){var t;return this.props.shapeWrapResource&&!1===this.props.shapeWrapResource.prop.specialShape&&(t=this.props.shapeWrapResource.textBodyMap[0]),o.createElement(s.TxBody,{slideContext:this.props.slideContext,txBodyXML:e,shapeGroupTransform:this.props.shapeGroupTransform,width:this.props.width,height:this.props.height,resourceType:this.props.resourceType,flipH:this.props.flipH,uuid:this.props.uuid,textBodyWrapResource:t})},t.prototype.renderShape=function(e,t){var r,n,i=0;if("p:sp"===this.props.shapeXML.name){var s=this.props.shapeXML.childElementOptional("p:spPr","a:xfrm");if(s){var l=s.attr.getNumber("rot",0);i=Number(l)/c.Degree}}if(this.props.shapeGroupTransform){var p=u.getShapeScale(i,this.props.shapeGroupTransform),h=p.scaleX,d=p.scaleY;r=this.props.width*h,n=this.props.height*d}else r=this.props.width,n=this.props.height;return o.createElement(a.Lumia,{ref:this.lumiaRef,fillColor:this.props.fillColor,groupFillColor:this.props.groupFillColor,spId:e.extraAttr.getString("spId"),borderStyle:this.props.borderStyle,width:r,height:n,slideIndex:this.props.slideIndex,uuid:this.props.uuid,resourceLoader:this.props.resourceLoader,resourceType:this.props.resourceType,logger:this.props.logger,shapeXML:e},t?this.renderTextBody(t):null)},t}(o.Component);t.Shape=l},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(){function e(e,t){this.slideXML=e,this.context=t,this.animations=[]}return e.prototype.collect=function(){var e=this.slideXML.childElementOptional("p:sld","p:timing","p:tnLst","p:par","p:cTn","p:childTnLst");if(e)for(var t=e.elementsWithName("p:seq"),r=0;r<t.length;++r){var n=t[r],i=n.childElement("p:cTn").attr.getString("nodeType","afterEffect");this.searchAndIndexParXMLs(n,i,[r],void 0)}return this.animations},e.prototype.searchAndIndexParXMLs=function(e,t,r,i){var o=e.childElementOptional("p:cTn","p:childTnLst"),a=o?o.elementsWithName("p:par"):[],s=e.childElementOptional("p:cTn","p:stCondLst","p:cond");if(s){var c=s.childElementOptional("p:tgtEl","p:spTgt");if(c&&(i=c.attr.getString("spid"),this.context.shapeParamsIndex[parseInt(i)].hidden))return}if(0===a.length)this.handleLeafParXML(e,t,r,i);else for(var u=0;u<a.length;++u)this.searchAndIndexParXMLs(a[u],t,n(r,[u]),i)},e.prototype.handleLeafParXML=function(e,t,r,n){var o=e.childElementOptional("p:cTn","p:childTnLst"),a=o&&o.element.childElementOptional("p:cBhvr","p:tgtEl","p:spTgt"),s=a?a.attr.getString("spid"):"";if(this.context.shapeParamsIndex[parseInt(s)]&&!this.context.shapeParamsIndex[parseInt(s)].hidden){var c=e.childElement("p:cTn"),u=e.childElementOptional("p:cTn","p:stCondLst","p:cond"),l=o?o.elements:[],p=Number.MIN_SAFE_INTEGER;l.forEach((function(e){var t=0,r=e.childElementOptional("p:cBhvr","p:cTn","p:stCondLst","p:cond");r&&(t=r.attr.getNumberOptional("delay")||0);var n=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("dur");void 0===n&&(n=1),n+t>p&&(p=n+t)}));var h=o?o.element.childElementOptional("p:cBhvr","p:tgtEl","p:spTgt","p:txEl",new i.TagOrExpr("p:pRg","charRg")):void 0,d=h&&("p:pRg"===h.name?"paragraph":"char"),f=h&&Number(h.attr.getStringOptional("st")),y=h&&Number(h.attr.getStringOptional("end")),A=void 0,m=c.childElementOptional("p:endCondLst");void 0!==m&&"onNext"===m.childElement("p:cond").attr.getStringOptional("evt")&&(A="onNext");var g=c.attr.get("repeatCount","none");"indefinite"!==g&&"none"!==g&&0==(g/=1e3)&&(g="none");var v=c.attr.getStringOptional("presetClass");v||(v="entr");var b=Object.freeze({eventSourceShapeId:n,spId:s,sequenceType:t,animationXML:o,sequenceIndex:r[1],parallelIndex:r[3],textTargetType:d,textTargetStart:f,textTargetEnd:y,isLoop:c.attr.has("repeatCount"),id:c.attr.getStringOptional("id")||"",presetClass:v,presetID:c.attr.getStringOptional("presetID")||"",presetSubtype:c.attr.getStringOptional("presetSubtype"),repeatCount:g,repeatEndCondition:A,nodeType:c.attr.getStringOptional("nodeType")||"afterEffect",delay:u&&u.attr.getNumberOptional("delay")||0,duration:p,autoRev:c.attr.getBoolean("autoRev",!1),soundEffectId:this.parseAnimeSoundEffect(e),dimAfter:this.parseDimAfter(e)});this.animations.push(b)}},e.prototype.parseAnimeSoundEffect=function(e){var t=e.childElementOptional("p:cTn","p:subTnLst","p:audio");return void 0===t?void 0:t.childElement("p:cMediaNode","p:tgtEl","p:sndTgt").attr.getString("r:embed")},e.prototype.parseDimAfter=function(e){var t,r,n=e.childElementOptional("p:cTn","p:subTnLst","p:set","p:cBhvr");if(n){var i=n.childElementOptional("p:attrNameLst","p:attrName");if(i&&String(i.text).includes("visibility"))return"nextClick"===(null===(r=null===(t=n.childElementOptional("p:cTn"))||void 0===t?void 0:t.attr)||void 0===r?void 0:r.getStringOptional("masterRel"))?"next":"same"}},e}();t.AnimationsCollector=o},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=r(76),a=r(94),s=r(21),c=r(0),u=r(95),l=r(96),p=function(){function e(e,t){var r,n,o=this;this.animations=e,this.context=t,this.triggerEvent=new i.TriggerEvent,this.animBoxes=new Map,this.mainPlayerSeq=[],this.interactivePlayerSeqs=new Map,this.subNextPlayerTargets=[];for(var a=0;a<this.animations.length;a++){var s=this.animations[a],c=this.getAnimationSeq(s);if(c){var u=this.getAnimBox(s.spId),l=this.getAnimationPlayer(s,u);l&&(l=this.joinSubSamePlayers(l,s,u),c.length>0&&l.effectType!==c[c.length-1].effectType&&this.squashLastSeqPlayers(c),"withEffect"!==l.effectType&&this.joinLastSubNextPlayers(),"withEffect"===l.effectType&&0!==a||this.subNextPlayerTargets.push([]),"next"===s.dimAfter&&this.subNextPlayerTargets[this.subNextPlayerTargets.length-1].push(s.spId),c.push(l))}}this.squashLastSeqPlayers(this.mainPlayerSeq),this.interactivePlayerSeqs.forEach((function(e){o.squashLastSeqPlayers(e)})),this.joinLastSubNextPlayers(),this.mainSeq=new i.SeqPlayer({playerID:"mainSeq",players:this.mainPlayerSeq,effectType:(n=null===(r=this.mainPlayerSeq[0])||void 0===r?void 0:r.effectType,null!=n?n:"clickEffect")}),this.interactiveSeqs=new Map,this.interactivePlayerSeqs.forEach((function(e,t){var r,n;o.interactiveSeqs.set(t,new i.SeqPlayer({playerID:"interactiveSeq"+t,players:e,effectType:(n=null===(r=e[0])||void 0===r?void 0:r.effectType,null!=n?n:"clickEffect")}))}))}return e.prototype.end=function(){console.log("[animation manager]: end"),this.mainSeq.seek(this.mainSeq.duration+1)},e.prototype.pause=function(){console.log("[animation manager]: pause");for(var e=0,t=this.mainSeq.players;e<t.length;e++)t[e].pause();this.interactiveSeqs.forEach((function(e){for(var t=0,r=e.players;t<r.length;t++)r[t].pause()}))},e.prototype.clearCache=function(){console.log("[animation manager]: clearCache"),this.animBoxes.forEach((function(e){return e.clearCache()}))},e.prototype.logSeq=function(){var e="";function t(r,n){void 0===n&&(n=""),r instanceof i.SeqPlayer?(e+=n+"seq "+r.effectType+"\n",r.players.forEach((function(e){return t(e,n+"  ")}))):r instanceof i.ParPlayer?(e+=n+"par "+r.effectType+"\n",r.players.forEach((function(e){return t(e,n+"  ")}))):r instanceof i.ParPlusPlayer?(e+=n+"par2 "+r.effectType+"\n",r.players.forEach((function(e){return t(e,n+"  ")}))):e+=""+n+r.playerID+" "+r.effectType+"\n"}e+="mainSeq\n",t(this.mainSeq,"  "),e+="interactiveSeqs\n",this.interactiveSeqs.forEach((function(e){return t(e,"  ")})),console.log(e)},e.prototype.getPlayer=function(e,t){t||(t=n([this.mainSeq],Array.from(this.interactiveSeqs.values())));for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.playerID===e)return o;var a=o.players;if(a){var s=this.getPlayer(e,a);if(s)return s}}},e.prototype.getAnimationSeq=function(e){switch(e.sequenceType){case"mainSeq":return this.mainPlayerSeq;case"interactiveSeq":if(void 0!==e.eventSourceShapeId)return this.getInteractiveSeq(s.getTargetID(this.context.pptUUID,this.context.slideIndex,e.eventSourceShapeId));console.error("interactiveSeq animation "+e.id+" does not have eventSourceShapeId",e);break;default:console.error('not support sequenceType: "'+e.sequenceType+'"',e)}},e.prototype.getInteractiveSeq=function(e){var t=this.interactivePlayerSeqs.get(e);return t||(t=[],this.interactivePlayerSeqs.set(e,t)),t},e.prototype.getAnimBox=function(e){var t,r=this.animBoxes.get(e);if(!r){var n=this.context.shapeParamsIndex[parseInt(e)],o=i.TRANSPARENT;if(n.fillColor){var a=n.fillColor.rgb().object(),u=a.r,l=a.g,p=a.b,h=a.alpha;o=new i.Color({r:u,g:l,b:p,a:null!=h?h:1})}r=new i.AnimBox({target:s.getTargetID(this.context.pptUUID,this.context.slideIndex,e),constants:{x:n.rectangle.x,y:n.rectangle.y,width:n.rectangle.width||1,height:n.rectangle.height||1,slideWidth:this.context.slideWidth,slideHeight:this.context.slideHeight,flipH:n.flipH,flipV:n.flipV},initState:{opacity:(t=n.opacity,null!=t?t:1),fillcolor:o,rotate:n.rotate?c.toDeg(n.rotate):0}}),this.animBoxes.set(e,r)}return r},e.prototype.squashLastSeqPlayers=function(e,t){var r,n;if(!(e.length<=1)){var o=e[e.length-1].effectType;if("withEffect"===o){for(var a=e.length-1;a>0&&e[a].effectType===o;)a-=1;var s=e.splice(a,e.length-a);e.push(new i.ParPlayer({players:s,effectType:(n=null!=t?t:null===(r=s[0])||void 0===r?void 0:r.effectType,null!=n?n:"clickEffect")}))}}},e.prototype.getAnimationPlayer=function(e,t){if(e.animationXML){for(var r=[],n=0,s=e.animationXML.elements;n<s.length;n++){var c=s[n],u=o.parseShape({node:c,animation:e,context:this.context,triggerEvent:this.triggerEvent,animBox:t});u&&(t.preAnimation()||t.preAnimation({}),r.push(u))}if(!(r.length<=0)){if(e.soundEffectId){var p=a.parseSoundEffect(e,t);p&&r.push(p)}var h=l.parseRepeatCount(e.repeatCount);return e.delay>0||h>1||e.autoRev?new i.ParPlusPlayer({playerID:"parr"+e.id,players:r,effectType:e.nodeType,delay:e.delay,repeat:h,reverse:Boolean(e.autoRev)}):r.length>1?new i.ParPlayer({playerID:"par"+e.id,players:r,effectType:e.nodeType}):r[0]}}},e.prototype.joinSubSamePlayers=function(e,t,r){return"mainSeq"!==t.sequenceType||"same"!==t.dimAfter?e:new i.ParPlayer({players:[e,u.parseDim(r,"withEffect",e.duration+32)],effectType:e.effectType})},e.prototype.joinLastSubNextPlayers=function(){var e=this.mainPlayerSeq[this.mainPlayerSeq.length-1],t=this.subNextPlayerTargets[this.subNextPlayerTargets.length-2];if(e&&t&&!(t.length<=0)){for(var r=[e],n=0,o=t;n<o.length;n++){var a=o[n];r.push(u.parseDim(this.getAnimBox(a),"withEffect",e.delay))}this.mainPlayerSeq[this.mainPlayerSeq.length-1]=new i.ParPlayer({players:r,effectType:e.effectType})}},e}();t.AnimationManager=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(77),i=r(85),o=r(86),a=r(87),s=r(88),c=r(89),u=r(90),l=r(91);t.parseShape=function(e){switch(e.node.name){case"p:animMotion":return n.parseAnimMotion(e);case"p:set":return i.parseAnimSet(e);case"p:animEffect":return o.parseAnimEffect(e);case"p:anim":return l.parseAnim(e);case"p:animClr":return a.parseAnimColor(e);case"p:animRot":return s.parseAnimRotate(e);case"p:animScale":return c.parseAnimScale(e);case"p:cmd":return u.parseAnimCmd(e);default:console.error("failed parsing "+e.node.name+" animation node")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7),o=r(41);t.parseAnimMotion=function(e){var t=e.node,r=e.animation,a=e.animBox,s=new i.AnimationBehavior(t),c=t.attr.getString("path","M 0 0"),u=o.createCurve(c),l=a.initState,p=l.ppt_x,h=l.ppt_y;return new n.AnimStatePlayer({animBox:a,effectType:r.nodeType,playerID:s.animeId(),eventSource:r.eventSourceShapeId,duration:s.duration(),ease:s.ease(),repeat:s.repeat(),delay:s.delay(),reverse:s.reverse(),rewind:s.rewind(),transform:function(e){var t=u.get(e*u.length),r=t.x,n=t.y;return{ppt_x:(r||0)+p,ppt_y:(n||0)+h}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);function i(e,t,r){var n=t.input,i=t.output;return(e-n)/(r.input-n)*(r.output-i)+i}t.parseTimeFilter=function(e){if(!e)return n.linear;var t=e.replace(/\s+/g,"").split(";").map((function(e){var t=e.split(","),r=t[0],n=t[1];return{input:parseFloat(r),output:parseFloat(n)}}));t[t.length-1].input<1&&t.push({input:1,output:1});var r=t.length-1,o=0,a=0;return function(e){if(e>=o)for(var n=a;n<r;n++){var s=t[n],c=t[n+1];if(e>=s.input&&e<=c.input)return a=n,o=e,i(e,s,c)}else for(n=a;n>=0;n--)if(s=t[n],c=t[n+1],e>=s.input&&e<=c.input)return a=n,o=e,i(e,s,c);return a=0,o=0,e}}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(80),o=r(81),a=r(82),s=r(83);function c(e){var t=e.controller,r=e.end,n=r.x-t.x,i=r.y-t.y;return{x:r.x+n,y:r.y+i}}function u(e,t,r){if(t.length!==r)throw new Error("invalid path: sign "+e+" should have "+r+" points ("+2*r+" number)")}function l(e){if(!e)throw new Error("invalid path: expect M")}t.createCurve=function(e){for(var t=[],r=void 0,p=void 0,h=void 0,d=0,f=i.parsePathToNodes(e);d<f.length;d++){var y=f[d],A=y.sign,m=y.points;switch(A){case"M":u(A,m,1),r=m[0],p=m[0],h=void 0;break;case"L":u(A,m,1),l(p),t.push(new a.Straight(p,m[0])),p=m[0],h=void 0;break;case"Z":u(A,m,0),l(p),t.push(new a.Straight(p,r)),p=r,h=void 0;break;case"C":u(A,m,3),l(p),t.push(new s.BezierCurve(p,m[0],m[1],m[2])),h={controller:m[1],end:m[2]},p=m[2];break;case"S":if(!h)throw new Error("invalid path: expect C or S before S");u(A,m,2),l(p);var g=c(h);t.push(new s.BezierCurve(p,g,m[0],m[1])),h={controller:m[0],end:m[1]},p=m[1];break;case"Q":u(A,m,2),l(p),t.push(new s.BezierCurve(p,m[0],m[1])),h={controller:m[0],end:m[1]},p=m[1];break;case"T":if(!h)throw new Error("invalid path: expect Q or T before T");u(A,m,1),l(p),h={controller:g=c(h),end:m[0]},h={controller:g,end:m[0]},p=m[0];break;case"E":break;default:throw new Error("invalid path: unrecognized sign "+JSON.stringify(A))}}return new(o.CurveGroup.bind.apply(o.CurveGroup,n([void 0],t)))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePathToNodes=function(e){for(var t=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];if(""===i);else if(1===i.length)t.push(i);else{var o=i[0];/[a-zA-Z]/.test(o)?(t.push(o),t.push(i.substring(1))):t.push(i)}}return t}(e.split(/,|\s/i)),r=[],n=void 0,i=void 0,o=void 0,a=0,s=t;a<s.length;a++){var c=s[a];if(/^[a-zA-Z]$/.test(c)){if(void 0!==o)throw new Error("invalid path: lack of number");void 0!==n&&r.push({sign:n,points:i}),n=c,i=[]}else{var u=parseFloat(c);if(Number.isNaN(u))throw new Error("invalid path: unrecognized number "+JSON.stringify(c));void 0===o?o=u:(i.push({x:o,y:u}),o=void 0)}}if(void 0!==o)throw new Error("invalid path: lack of number");return void 0!==n&&r.push({sign:n,points:i}),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)throw new Error("expect 1 curve minimum");for(var n=[],i=0,o=0,a=t;o<a.length;o++){var s=a[o];n.push(s.rectangle),i+=s.length}this.curves=Object.freeze(t),this.length=i,this.rectangle=e.unionRectangles(n)}return e.prototype.get=function(e){for(var t,r=0,n=0,i=0,o=this.curves;i<o.length;i++){var a=o[i];if(t=a,n=r,e<r+a.length)break;r+=a.length}return t.get(e-n)},e.unionRectangles=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0,a=e;o<a.length;o++){var s=a[o];s.left<t&&(t=s.left),s.right>r&&(r=s.right),s.top<n&&(n=s.top),s.bottom>i&&(i=s.bottom)}return Object.freeze({left:t,right:r,top:n,bottom:i})},e}();t.CurveGroup=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.beginX=e.x,this.beginY=e.y,this.deltaX=t.x-e.x,this.deltaY=t.y-e.y,this.length=Math.sqrt(this.deltaX*this.deltaX+this.deltaY*this.deltaY),this.rectangle=Object.freeze({left:Math.min(e.x,t.x),right:Math.max(e.x,t.x),top:Math.min(e.y,t.y),bottom:Math.max(e.y,t.y)})}return e.prototype.get=function(e){if(0===this.length)return{x:this.beginX,y:this.beginY};var t=e/this.length;return t=Math.max(0,t),t=Math.min(1,t),{x:this.beginX+t*this.deltaX,y:this.beginY+t*this.deltaY}},e}();t.Straight=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(84),i=function(){function e(e,t,r,i){this.bezier=new n([e,t,r,i]),this.length=this.bezier.length(),this.rectangle=this.createRectangle()}return e.prototype.createRectangle=function(){var e=this.bezier.bbox();return Object.freeze({left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max})},e.prototype.get=function(e){var t=e/this.length;return t=Math.max(0,t),t=Math.min(1,t),this.bezier.get(t)},e}();t.BezierCurve=i},function(e,t){e.exports=r(67)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7),o=r(22);t.parseAnimSet=function(e){for(var t=e.node,r=e.animation,a=e.context,s=e.animBox,c=new i.AnimationBehavior(t),u=c.attrNames(),l={},p=new o.AnimVariant({context:a,animBox:s}),h=0,d=u;h<d.length;h++){var f=d[h];switch(f){case"visible":var y=p.parse(t.childElementOptional("p:to"),"visible");null!=y&&(l.visible=y,s.preAnimation()||s.preAnimation({visible:!y}));break;case"opacity":case"xshear":case"yshear":var A=p.parse(t.childElementOptional("p:to"),f);null!=A&&(l[f]=A)}}return new n.AnimStatePlayer({animBox:s,effectType:r.nodeType,playerID:c.animeId(),eventSource:r.eventSourceShapeId,duration:c.duration(),delay:c.delay(),transform:n.createAnimVarTransform((function(){var e={};for(var t in l)if(n.hasOwnProperty(l,t))switch(t){case"visible":e.visible=!l.visible;break;case"opacity":case"xshear":case"yshear":e[t]=s.currentState[t]}return e}),l)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7);t.parseAnimEffect=function(e){var t=e.animBox,r=e.node,o=e.animation,a=r.attr.getStringOptional("transition");if(a){var s=new i.AnimationBehavior(r),c=0,u=1;return"out"===a&&(c=1,u=0),new n.AnimStatePlayer({animBox:t,effectType:o.nodeType,playerID:s.animeId(),eventSource:o.eventSourceShapeId,duration:s.duration(),ease:s.ease(),repeat:s.repeat(),delay:s.delay(),reverse:s.reverse(),rewind:s.rewind(),by:!0,transform:n.createAnimFromToTransform({opacity:c},{opacity:u})})}}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=r(7),a=r(3),s=r(2),c=r(5),u=r(0);function l(e,t){if(t){var r=t.childElementOptional(new a.TagOrExpr("p:rgb","p:hsl"));if(r)switch(r.name){case"p:rgb":return new i.Color({r:r.attr.getNumber("r"),g:r.attr.getNumber("g"),b:r.attr.getNumber("b"),a:1});case"p:hsl":return new i.Color({h:r.attr.getNumber("h")/u.Degree,s:r.attr.getNumber("s")/u.STPercentage100*100,l:r.attr.getNumber("l")/u.STPercentage100*100,a:1})}else{var o=t.childElement(new(a.TagOrExpr.bind.apply(a.TagOrExpr,n([void 0],c.ALL_COLOR_TYPE)))),l=s.getColor(o,e);if(l){var p=l.rgb().object(),h=p.r,d=p.g,f=p.b;return new i.Color({r:h,g:d,b:f,a:1})}}}}t.parseAnimColor=function(e){var t=e.node,r=e.animation,n=e.animBox,a=e.context,s=new o.AnimationBehavior(t);if(s.attrNames().includes("fillcolor")){var c,u=!1;if((c=l(a.slideContext,t.childElementOptional("p:to")))||(u=!0,c=l(a.slideContext,t.childElementOptional("p:by"))),c){var p,h=c,d=l(a.slideContext,t.childElementOptional("p:from"));return new i.AnimStatePlayer({animBox:n,effectType:r.nodeType,playerID:s.animeId(),eventSource:r.eventSourceShapeId,duration:s.duration(),ease:s.ease(),repeat:s.repeat(),delay:s.delay(),reverse:s.reverse(),rewind:s.rewind(),by:u,transform:function(e){d||(d=n.currentState.fillcolor,p=d.alpha());var t=i.colorTransform(d,h,e);return{fillcolor:p>0?t.alpha(p):t}}})}}},t.parseColor=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7),o=r(0),a=r(22);function s(e){var t=Number(e);if(!Number.isNaN(t))return o.toDeg(t)}t.parseAnimRotate=function(e){var t=e.node,r=e.animation,c=e.context,u=e.animBox,l=new i.AnimationBehavior(t),p=!1,h=s(t.attr.getStringOptional("to"));if(null==h&&(p=!0,h=s(t.attr.getStringOptional("by"))),null==h){var d=new a.AnimVariant({context:c,animBox:u}).parse(t.childElementOptional("p:by"),"rotate");n.isNumeric(d)&&(h=o.toDeg(Number(d)))}if(null!=h){var f=h,y=s(t.attr.getStringOptional("from"));return new n.AnimStatePlayer({animBox:u,effectType:r.nodeType,playerID:l.animeId(),eventSource:r.eventSourceShapeId,duration:l.duration(),ease:l.ease(),repeat:l.repeat(),delay:l.delay(),reverse:l.reverse(),rewind:l.rewind(),by:p,transform:n.createAnimVarTransform((function(){var e;return{rotate:null!=y?y:p?0:(e=u.currentState.rotate,null!=e?e:0)}}),{rotate:f})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7),o=r(0);function a(e){if(e)return{scaleX:o.parseSTPercentage(e.attr.getString("x")),scaleY:o.parseSTPercentage(e.attr.getString("y"))}}t.parseAnimScale=function(e){var t=e.node,r=e.animation,o=e.animBox,s=new i.AnimationBehavior(t),c=!1,u=a(t.childElementOptional("p:to"));if(null==u&&(c=!0,u=a(t.childElementOptional("p:by"))),null!=u){var l=u,p=a(t.childElementOptional("p:from"));return new n.AnimStatePlayer({animBox:o,effectType:r.nodeType,playerID:s.animeId(),eventSource:r.eventSourceShapeId,duration:s.duration(),ease:s.ease(),repeat:s.repeat(),delay:s.delay(),reverse:s.reverse(),rewind:s.rewind(),by:c,transform:n.createAnimVarTransform((function(){var e,t;return null!=p?p:c?{scaleX:1,scaleY:1}:{scaleX:(e=o.currentState.scaleX,null!=e?e:1),scaleY:(t=o.currentState.scaleY,null!=t?t:1)}}),l)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7);function o(e){var t=/^playFrom\(([^)]+)\)$/.exec(e);return t?{name:"playFrom",value:parseFloat(t[1])}:e.includes("pause")?{name:"pause"}:{name:"stop"}}t.parseAnimCmd=function(e){var t=e.node,r=e.animation,a=e.animBox,s=new i.AnimationBehavior(t),c=o(t.attr.getString("cmd"));return new n.AnimCmdPlayer({animBox:a,effectType:r.nodeType,playerID:s.animeId(),eventSource:r.eventSourceShapeId,duration:1,delay:s.delay(),reverse:s.reverse(),rewind:s.rewind(),cmd:c})},t.parseCmd=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(7),o=r(92),a=r(93);t.parseAnim=function(e){var t,r=e.node,s=e.animation,c=e.animBox,u=new i.AnimationBehavior(r),l=r.attr.getString("calcmode","lin"),p=u.attrNames()[0];if(p){var h=new a.AttrValue(r,c),d=!1,f=o.parserTavList(e,l,p);if(!f){var y=h.parse("from",p),A=h.parse("to",p);if(A||(d=!0,A=h.parse("by",p)),!A)return;f=n.createAnimVarTransform((function(){var e;return(e={})[p]=null!=y?y:c.currentState[p],e}),((t={})[p]=A,t))}return new n.AnimStatePlayer({animBox:c,effectType:s.nodeType,playerID:u.animeId(),eventSource:s.eventSourceShapeId,duration:u.duration(),ease:u.ease(),repeat:u.repeat(),delay:u.delay(),reverse:u.reverse(),rewind:u.rewind(),by:d,transform:f})}console.error("Missing attrName for p:anim",u.animeId())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(0),o=r(22);function a(e,t,r){return function(n){for(var i,o,a=1;a<e.length;a++){var s=e[a-1],c=e[a];if(n>=s.progress&&n<=c.progress){var u=r(s.val,c.val,(n-s.progress)/(c.progress-s.progress));return(i={})[t]=s.fmla?s.fmla.evaluate(u):u,i}}var l=e[e.length-1],p=l.fmla,h=l.val;return(o={})[t]=p?p.evaluate(h):h,o}}function s(e,t,r){return r<1?e:t}t.parserTavList=function(e,t,r){var c=e.node,u=e.context,l=e.animBox,p=c.childElementOptional("p:tavLst");if(p){var h=new o.AnimVariant({context:u,animBox:l}),d=p.elementsWithName("p:tav").map((function(e){var t=h.parse(e.childElement("p:val"),r);if(null!=t)return{val:t,progress:i.parseSTPercentage(e.attr.getString("tm")),fmla:function(e){if(e){if(n.isNumeric(l.initState[r]))return new n.Formula(e,h.formulaScope);console.error("Expr "+e+" cannot work with targetKey "+r)}}(e.attr.getStringOptional("fmla"))}})).filter((function(e){return Boolean(e)}));if(!(d.length<=0)){if("lin"!==t)return a(d,r,s);if(n.isNumeric(d[0].val))return a(d,r,n.numericTransform);if(d[0].val instanceof n.Color)return a(d,r,n.mixColor)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(){function e(e,t){this.node=e,this.animBox=t}return e.prototype.parse=function(e,t){var r=this.node.attr.getStringOptional(e);if(r){var i=this.animBox.initState[t];if(i instanceof n.Color)try{return new n.Color(r)}catch(e){return}if(n.isNumeric(i)){var o=Number(r);return n.isNumeric(o)?o:new n.Formula(r,this.formulaScope)}return(t="visible")?"hidden"!==r:void 0}},Object.defineProperty(e.prototype,"formulaScope",{get:function(){return this._formulaScope?this._formulaScope:this._formulaScope=new n.FormulaScope(this.animBox)},enumerable:!0,configurable:!0}),e}();t.AttrValue=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.parseSoundEffect=function(e,t){if(e.soundEffectId)return new n.AnimCmdPlayer({animBox:t,effectType:e.nodeType,playerID:"SF"+String(Date.now()),eventSource:e.eventSourceShapeId,duration:1,delay:0,cmd:{name:"playSF",value:e.soundEffectId}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.parseDim=function(e,t,r){return new n.AnimStatePlayer({animBox:e,effectType:t,playerID:"Dim"+String(Date.now()),duration:1,delay:r,transform:n.createAnimVarTransform((function(){return{visible:e.currentState.visible}}),{visible:!1})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRepeatCount=function(e){return"number"==typeof e?e:"indefinite"===e?1/0:1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(98);t.SlidePlayer=n.SlidePlayer;var i=r(102);t.AnimationManager=i.AnimationManager;var o=r(103);t.Sequence=o.Sequence;var a=r(104);t.ShapeAnimeMerger=a.ShapeAnimeMerger},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(99),i=r(16),o=function(){function e(e){var t=this;this._loopTimestamp=Date.now(),this.onTick=function(e){for(var r in t._loopTimestamp=e,t.player.isPlayingSequence){var n=e-t.deviceTimestamp[r],i=t._progressTimestamp[r]+n;i>=t.playToTimestamp[r]?(t._progressTimestamp[r]=t.playToTimestamp[r],t.player.setPlayingSequence(!1,r)):t._progressTimestamp[r]=i,t.deviceTimestamp[r]=e}t.onAnimationFrame()},this.sequence=e.sequence,this.onAnimationFrame=e.onAnimationFrame,this.player=new a(e.sequence,this.onTick);var r={},n={},o={},s={};e.sequence.forEach((function(t){var a=t.key;if(void 0!==e.sequenceSteps&&0!==e.sequenceSteps[a]&&void 0!==e.sequenceSteps[a]){var c=e.sequenceSteps[a];a===i.mainSequenceEventSourceId?c>=t.value.stepCount?r[a]=t.value.endAt:e.sequence.get(a).autoPlayFirstSequence&&1===c?r[a]=0:r[a]=t.value.range(c-1).endAt:c>=t.value.stepCount?r[a]=t.value.endAt:r[a]=t.value.range(c-1).endAt,o[a]=c}else r[a]=0,o[a]=0;n[a]=0,s[a]=0})),this._progressTimestamp=r,this.playToTimestamp=n,this._sequenceSteps=o,this.deviceTimestamp=s}return Object.defineProperty(e.prototype,"state",{get:function(){return{progressTimestamp:this._progressTimestamp,loopTimestamp:this._loopTimestamp,hasLoopAnimation:this.player.isPlayingLoop}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progressTimestamp",{get:function(){return this._progressTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopTimestamp",{get:function(){return this._loopTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sequenceIndex",{get:function(){return this._sequenceSteps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlayingLoop",{get:function(){return this.player.isPlayingLoop},set:function(e){this.player.isPlayingLoop=e},enumerable:!0,configurable:!0}),e.prototype.pause=function(){for(var e in this.player.isPlayingSequence)this.player.setPlayingSequence(!1,e);this.player.isPlayingLoop=!1},e.prototype.seekToStep=function(e,t,r){e===this.sequence.get(t).stepCount?void 0!==this.sequence.get(t)&&(this._progressTimestamp[t]=this.sequence.get(t).endAt,this.playToTimestamp[t]=this.sequence.get(t).endAt,this._sequenceSteps[t]=e,this.player.setPlayingSequence(!1,t),r||this.onAnimationFrame()):0===e?void 0!==this.sequence.get(t)&&void 0!==this.sequence.get(t).range(e)&&(this._progressTimestamp[t]=this.sequence.get(t).range(e).beginAt,this.playToTimestamp[t]=this.sequence.get(t).range(e).beginAt,this._sequenceSteps[t]=e,this.player.setPlayingSequence(!1,t),r||this.onAnimationFrame()):void 0!==this.sequence.get(t)&&void 0!==this.sequence.get(t).range(e-1)&&(this._progressTimestamp[t]=this.sequence.get(t).range(e-1).endAt,this.playToTimestamp[t]=this.sequence.get(t).range(e-1).endAt,this._sequenceSteps[t]=e,this.player.setPlayingSequence(!1,t),r||this.onAnimationFrame())},e.prototype.playToStep=function(e,t){if(0===e)this.seekToStep(e,t);else{var r=this.sequence.get(t).range(e-1);this._progressTimestamp[t]=r.beginAt,this._sequenceSteps[t]=e,this.deviceTimestamp[t]=Date.now(),this.playToTimestamp[t]=r.endAt,this.player.setPlayingSequence(!0,t)}},e}();t.SlidePlayer=o;var a=function(){function e(e,t){this.isPlaying=!1,this._isPlayingLoop=!1;var r={},n={};e.forEach((function(e){var t=e.key;r[t]=!1,n[t]=!1})),this._isPlayingSequence=n,this.invoker=t}return Object.defineProperty(e.prototype,"isPlayingSequence",{get:function(){return this._isPlayingSequence},set:function(e){this._isPlayingSequence=e,this.refreshPlayingState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlayingLoop",{get:function(){return this._isPlayingLoop},set:function(e){this._isPlayingLoop=e,this.refreshPlayingState()},enumerable:!0,configurable:!0}),e.prototype.setPlayingSequence=function(e,t){this._isPlayingSequence[t]=e,this.refreshPlayingState()},e.prototype.refreshPlayingState=function(){var t=!1;for(var r in this._isPlayingSequence)if(!0===this._isPlayingSequence[r]||!0===this._isPlayingLoop){t=!0;break}!this.isPlaying&&t?n.addAnimation(e.priority,this.invoker):this.isPlaying&&!t&&n.removeAnimation(e.priority,this.invoker),this.isPlaying=t},e.priority=0,e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(100);t.addAnimation=n.addAnimation,t.removeAnimation=n.removeAnimation,t.addAfterAnimationsInvoker=n.addAfterAnimationsInvoker,t.removeAfterAnimationsInvoker=n.removeAfterAnimationsInvoker},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(101);t.addAnimation=n.addAnimation,t.removeAnimation=n.removeAnimation,t.removeAfterAnimationsInvoker=n.removeAfterAnimationsInvoker,t.addAfterAnimationsInvoker=n.addAfterAnimationsInvoker},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};function i(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}function o(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addAnimation=function(e,t){a.addAnimation(e,t)},t.removeAnimation=function(e,t){a.removeAnimation(e,t)},t.addAfterAnimationsInvoker=function(e){a.addAfterAnimationsInvoker(e)},t.removeAfterAnimationsInvoker=function(e){a.removeAfterAnimationsInvoker(e)};var a=new(function(){function e(){var e=this;this.animationPriorities=[],this.animations={},this.afterAnimationsInvokers=[],this.animationId=null,this.isInAnimationFrame=!1,this.onAnimationFrame=function(){try{var t=Date.now();e.isInAnimationFrame=!0;for(var r=0,i=e.animationPriorities;r<i.length;r++)for(var o=i[r],a=0,s=n(e.animations[o]);a<s.length;a++)(0,s[a])(t);for(var c=0,u=n(e.afterAnimationsInvokers);c<u.length;c++)(0,u[c])(t);e.animationPriorities.length>0?e.animationId=window.requestAnimationFrame(e.onAnimationFrame):e.animationId=null}finally{e.isInAnimationFrame=!1}}}return e.prototype.addAnimation=function(e,t){var r=this.animations[e],n=!1;r||(r=this.animations[e]=[],this.animationPriorities.push(e),this.animationPriorities.sort(),n=1===this.animationPriorities.length),o(r,t),n&&null===this.animationId&&(this.animationId=window.requestAnimationFrame(this.onAnimationFrame))},e.prototype.removeAnimation=function(e,t){var r=this.animations[e];r&&(i(r,t),0===r.length&&(delete this.animations[e],i(this.animationPriorities,e),0!==this.animationPriorities.length||this.isInAnimationFrame||null===this.animationId||(window.cancelAnimationFrame(this.animationId),this.animationId=null)))},e.prototype.addAfterAnimationsInvoker=function(e){o(this.afterAnimationsInvokers,e)},e.prototype.removeAfterAnimationsInvoker=function(e){i(this.afterAnimationsInvokers,e)},e}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(23),i=function(){function e(e){this.playingLoop=!1,this.executionStacks={},this.id=e.id,this.animes=e.animes,this.sequences=e.sequences,this.presetStyle=e.presetStyle,this.createMerger=this.createMergerCreator(e.mergerConstructor)}return e.prototype.createMergerCreator=function(e){var t=this;return this.currentShapeState=this.presetStyle,function(r,n,i){return new e(r,Object.assign({},t.presetStyle,n),i)}},e.prototype.animeState=function(e){for(var t in this.animes)this.filterSequenceIntoExecutionStacks(this.animes[t],this.sequences.get(t),e,t);var r={},n=function(e){var t=[];if(i.executionStacks[e].isEmpty())return"continue";i.executionStacks[e].forEach((function(e){t=t.concat(e.value)})),r[e]=t},i=this;for(var o in this.executionStacks)n(o);return this.currentShapeState=this.createMerger(r,this.currentShapeState,this.setPlayingLoop.bind(this)).state(e),Object.assign({},this.presetStyle,this.currentShapeState)},e.prototype.setPlayingLoop=function(e){this.playingLoop=e},e.prototype.filterSequenceIntoExecutionStacks=function(e,t,r,n){var i,o=t.sequenceStepOfTimestamp(r.progressTimestamp[n]),a=o.step,s=o.sequenceIndex,c=s===a;for(i in e){var u=e[i],l=u.getPointerNode();if(void 0!==l)if(l.key===""+s)(p=u.getByPointer()).forEach((function(e){return e.prepareToPlay()})),this.pushIntoExcutionStack(p,i,parseInt(l.key),n);else{if(!(parseInt(l.key)<s)){if(void 0===l.prevKey)continue;if(parseInt(l.prevKey)>s){this.popOutofExcutionStack(i,parseInt(l.prevKey),n),u.setPointer(l.prevKey);continue}continue}do{p=u.getByPointer(),parseInt(l.key)===s&&p.forEach((function(e){return e.prepareToPlay()})),this.pushIntoExcutionStack(p,i,parseInt(l.key),n),l=u.getPointerNode()}while(void 0!==l&&parseInt(l.key)<=s)}else{var p,h=u.tail;if(void 0===h)continue;if(parseInt(h.key)>s){this.popOutofExcutionStack(i,parseInt(h.key),n),u.setPointer(h.key);continue}if(c&&((p=h.value).forEach((function(e){e.resetCache(),e.prepareToPlay()})),"visible"===i))try{var d=n+"_"+h.key;this.executionStacks[i].get(d)&&this.executionStacks[i].get(d)[this.executionStacks[i].get(d).length-1].lastTime!==r.progressTimestamp[n]&&this.executionStacks[i].moveToTail(d)}catch(e){}}}},e.prototype.popOutofExcutionStack=function(e,t,r){var n=r+"_"+t;if(void 0!==this.executionStacks[e]){var i=this.executionStacks[e].get(n);void 0!==i&&i.forEach((function(e){return e.resetCache()})),this.executionStacks[e].remove(n)}},e.prototype.pushIntoExcutionStack=function(e,t,r,i){var o=i+"_"+r;void 0===this.executionStacks[t]?this.executionStacks[t]=new n.LinkedMap([{key:o,value:e}]):this.executionStacks[t].put(o,e)},e}();t.AnimationManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=e.durationList,r=e.autoPlayFirstSequence;this.autoPlayFirstSequence=r,this.ranges=this.createRanges(t),this.endAt=this.countEndAt()}return e.prototype.createRanges=function(e){for(var t=[],r=0,n=0;n<e.length;++n){var i=r+e[n];t.push(Object.freeze({beginAt:r,endAt:i,index:n})),r=i}return t},e.prototype.countEndAt=function(){return this.ranges.length>0?this.ranges[this.ranges.length-1].endAt:0},e.prototype.range=function(e){return this.ranges[e]},e.prototype.sequenceStepOfTimestamp=function(e){for(var t=0,r=0,n=0;n<this.ranges.length;++n){var i=this.ranges[n];if(e<i.beginAt)break;e===i.beginAt?(t=n,r=n):(t=n+1,r=n)}return{sequenceIndex:r,step:t}},Object.defineProperty(e.prototype,"sequencesCount",{get:function(){return this.ranges.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepCount",{get:function(){return this.ranges.length+1},enumerable:!0,configurable:!0}),e}();t.Sequence=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(24),o=function(){function e(e,t,r){this.atomAnimes=e,this.playingLoopCallback=r,void 0!==t&&(this._from=t)}return e.prototype.state=function(e){var t,r=this,o={},a=!1,s=void 0,c=void 0;for(t in this.atomAnimes){var u=void 0;if("visible"===t){var l=!1;u=[];for(var p=0;p<this.atomAnimes[t].length;p++){var h=this.atomAnimes[t][p];"indefinite"===h.repeatCount&&0!==e.progressTimestamp[h.eventSourceId]&&(a=!0);var d=n({},this._from);if(0!==p){var f=this.atomAnimes[t][p-1];!0===f.to&&!1===h.to?d.visible=!0:!1===f.to&&!0===h.to&&(d.visible=!1)}var y=h.state(e.progressTimestamp[h.eventSourceId],d,e.loopTimestamp);void 0!==y.soundEffectId&&(s=y.soundEffectId),void 0!==y.playingSoundEffecting&&(c=y.playingSoundEffecting),u.push(y),!0!==l&&h.animePlayState!==i.AnimePlayState.Ready&&(l=!0)}l||(u=[u[0]])}else u=this.atomAnimes[t].map((function(t){"indefinite"===t.repeatCount&&0!==e.progressTimestamp[t.eventSourceId]&&(a=!0);var n=t.state(e.progressTimestamp[t.eventSourceId],r._from,e.loopTimestamp);return void 0!==n.soundEffectId&&(s=n.soundEffectId),void 0!==n.playingSoundEffecting&&(c=n.playingSoundEffecting),n}));var A=this.merge(t,u);void 0!==A&&(o[t]=A)}return this.mergePPTAttributeToScale(o),this.playingLoopCallback&&this.playingLoopCallback(a),o.soundEffectId=s,o.playingSoundEffecting=c,o},e.prototype.mergePPTAttributeToScale=function(e){return void 0!==e.ppt_w&&(void 0===e.scaleX?e.scaleX=e.ppt_w:e.scaleX=e.scaleX*e.ppt_w),void 0!==e.ppt_h&&(void 0===e.scaleY?e.scaleY=e.ppt_h:e.scaleY=e.scaleY*e.ppt_h),e},e.prototype.merge=function(e,t){switch(e){case"scaleX":case"scaleY":case"ppt_w":case"ppt_h":var r;return t.forEach((function(e){void 0!==e.value&&(void 0===r||"absolute"===e.animeType?r=e.value:r*=e.value)})),void 0===r?void 0:r;case"translateX":case"translateY":var n;return t.forEach((function(e){void 0!==e.value&&(void 0===n||e.startTimestamp>=n.startTimestamp)&&(n=e)})),void 0===n?void 0:n.value;case"rotate":var i;return t.forEach((function(e){void 0!==e.value&&(void 0===i?i=e.value:i+=e.value)})),void 0===i?void 0:i;case"opacity":var o;return t.forEach((function(e){void 0!==e.value&&(void 0===o||e.startTimestamp>=o.startTimestamp)&&(o=e)})),void 0===o?void 0:o.value;case"fillcolor":var a;return t.forEach((function(e){void 0!==e.value&&(void 0===a||e.startTimestamp>=a.startTimestamp)&&(a=e)})),void 0===a?void 0:a.value;case"visible":var s;return t.forEach((function(e){void 0!==e.value&&(s=e)})),void 0===s?void 0:s.value;case"play":case"stop":var c;return t.forEach((function(e){void 0!==e.value&&(void 0===c||e.startTimestamp>=c.startTimestamp)&&(c=e)})),void 0===c?void 0:c.value;default:return}},e}();t.ShapeAnimeMerger=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(106),i=r(23),o=function(){function e(e,t,r){this.animations=e,this.sequences=t,this.context=r}return e.prototype.combine=function(){return this.createTimingAnimes()},e.prototype.createSequenceTimingAnimesLinkMap=function(e){var t,r={};for(t in e){var n=e[t];void 0!==n&&(r[t]=new i.LinkedMap(n))}return r},e.prototype.createTimingAnimes=function(){var e,t={};for(var r in this.animations){var n={},i=this.animations[r];if(void 0!==i)for(var o in i){var a=this.createSequenceTimingAnimes(i[o],this.sequences.get(o));void 0!==n?n[o]=a:((e={})[o]=a,n=e)}t[r]=n}return t},e.prototype.createSequenceTimingAnimes=function(e,t){var r=this,n={};return e.forEach((function(e,i){e.forEach((function(e,o){var a=e.animeProps,s=e.atomAnimeProps,c=t.range(i);s.forEach((function(e){var t;for(t in e){var s=r.createAtomTimingAnime(t,e[t],a,c.beginAt,o);if(void 0!==s)if(void 0!==n[t]){var u=n[t].find((function(e){return e.key===""+i}));void 0!==u?u.value.push(s):n[t].push({key:""+i,value:[s]})}else n[t]=[{key:""+i,value:[s]}]}}))}))})),this.createSequenceTimingAnimesLinkMap(n)},e.prototype.createAtomTimingAnime=function(e,t,r,i,o){switch(e){case"translateX":case"translateY":return new n.TranslateTimingAnime({props:t,animation:r},e,this.context,i,o);case"scaleX":case"scaleY":case"ppt_w":case"ppt_h":return new n.ScaleTimingAnime({props:t,animation:r},e,this.context,i,o);case"rotate":return new n.RotateTimeAnime({props:t,animation:r},e,this.context,i,o);case"opacity":return new n.OpacityTimingAnime({props:t,animation:r},e,this.context,i,o);case"visible":return new n.VisibleTimingAnime({props:t,animation:r},e,this.context,i,o);case"play":case"stop":return new n.MediaTimingAnime({props:t,animation:r},e,this.context,i,o);case"fillcolor":return new n.ColorTimingAnime({props:t,animation:r},e,this.context,i,o);default:return void console.warn("can not resolve attribute "+e)}},e}();t.AnimationsCombiner=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(24);t.CacheTimingAnime=n.CacheTimingAnime;var i=r(8);t.AtomTimingAnime=i.AtomTimingAnime;var o=r(115);t.ColorTimingAnime=o.ColorTimingAnime;var a=r(116);t.MediaTimingAnime=a.MediaTimingAnime;var s=r(117);t.RotateTimeAnime=s.RotateTimeAnime;var c=r(118);t.ScaleTimingAnime=c.ScaleTimingAnime;var u=r(119);t.VisibleTimingAnime=u.VisibleTimingAnime;var l=r(120);t.OpacityTimingAnime=l.OpacityTimingAnime;var p=r(121);t.TranslateTimingAnime=p.TranslateTimingAnime},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(43),a=r(6),s=r(0),c=r(13),u={"style.rotation":"rotate","style.visibility":"opacity"};t.AnimePropMap={ppt_x:"translateX",ppt_y:"translateY",rotateX:"rotateX",rotateY:"rotateY",opacity:"opacity"};var l=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r.prototype.parse=function(e){var r,n,i=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),s=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),l=e.childElement("p:cBhvr"),p=a.parseBehaviorAttr(l),h=e.attr.getString("calcmode","lin"),d=e.attr.getString("valueType","str"),f=a.getValueHolderOptional(e.childElementOptional("p:from"),d,this.context),y=a.getValueHolderOptional(e.childElementOptional("p:to"),d,this.context),A=a.getValueHolderOptional(e.childElementOptional("p:by"),d,this.context),m=e.attr.getStringOptional("from")||(f?f.attrValue:void 0),g=e.attr.getStringOptional("to")||(y?y.attrValue:void 0),v=e.attr.getStringOptional("by")||(A?A.attrValue:void 0),b=void 0;p.timeFilter&&(b=(new c.TimeFilterResolver).resolve(p.timeFilter));var P=t.AnimePropMap[p.animationAttrNames[0]]||p.animationAttrNames[0];if(u[P]&&(P=u[P]),m||g||v)return(r={})[P]={animeId:""+i,type:"lin"===h?"linear":"discrete",from:this.translateAttrValue(m,P,this.context),to:this.translateAttrValue(g,P,this.context),by:this.translateAttrValue(v,P,this.context),duration:p.duration,delay:this.animation.delay+p.delay,fill:p.fill,timeFilter:b,autoRev:s},r;var S=e.childElementOptional("p:tavLst");if(S){var w,x,O=this.parseAnimatedValueAttr(S,d,this.context),k=O[0],M=O[O.length-1];return w=void 0!==k.formula?o.parse(k.formula).compile():k.attrValueType===a.AnimatedAttrValueType.formulaType?o.parse(k.attrValue).compile():this.translateAttrValue(k.attrValue,P,this.context),x=void 0!==M.formula?o.parse(M.formula).compile():M.attrValueType===a.AnimatedAttrValueType.formulaType?o.parse(M.attrValue).compile():this.translateAttrValue(M.attrValue,P,this.context),(n={})[P]={animeId:i,type:"lin"===h?"linear":"discrete",from:w,to:x,duration:p.duration,delay:this.animation.delay+ +p.delay,fill:p.fill,timeFilter:b,animatedValueAttrs:O,autoRev:s},n}console.warn("anime has not even attr driver",m)},r.prototype.translateAttrValue=function(e,t,r){if(!e)return e;var n=r.shapeParamsIndex[parseInt(this.animation.spId)];if(!n)throw new Error("not found shape "+this.animation.spId+" data");switch(t){case"translateX":return e*r.slideWidth-n.rectangle.x;case"translateY":return e*r.slideHeight-n.rectangle.y;case"scaleX":return e*r.slideWidth/n.rectangle.width;case"scaleY":return e*r.slideHeight/n.rectangle.height;default:return e}},r.prototype.parseAnimatedValueAttr=function(e,t,r){return e.elementsWithName("p:tav").map((function(e){var n=e.childElement("p:val"),i=a.getValueHolder(n,t,r),o=i.attrValue,c=i.attrValueType,u=e.attr.getStringOptional("fmla");return{time:s.parseSTPercentage(e.attr.getNumber("tm")),formula:u?u.replace(/#/g,"$"):u,attrValueType:c,attrValue:o}}))},r}(a.Parser);t.AnimParser=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(13),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=o.getValueHolderOptional(e.childElementOptional("p:by"),"num",this.context),i=e.attr.getStringOptional("by")||(n?n.attrValue:void 0),s=e.childElement("p:cBhvr"),c=o.parseBehaviorAttr(s),u=void 0;return c.timeFilter&&(u=(new a.TimeFilterResolver).resolve(c.timeFilter)),{rotate:{animeId:""+t,type:"linear",by:i.toString(),duration:c.duration,delay:this.animation.delay+c.delay,timeFilter:u,fill:c.fill,autoRev:r}}},t}(o.Parser);t.AnimRotateParser=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(0),s=r(13),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=this.resolveAttrDriver(e.childElementOptional("p:from")),i=this.resolveAttrDriver(e.childElementOptional("p:to")),a=this.resolveAttrDriver(e.childElementOptional("p:by")),c=e.childElement("p:cBhvr"),u=o.parseBehaviorAttr(c),l=void 0;return u.timeFilter&&(l=(new s.TimeFilterResolver).resolve(u.timeFilter)),{scaleX:{animeId:""+t,type:"linear",from:n?this.resolveScaleAttrValue(n.x):void 0,to:i?this.resolveScaleAttrValue(i.x):void 0,by:a?this.resolveScaleAttrValue(a.x):void 0,duration:u.duration,delay:this.animation.delay+u.delay,timeFilter:l,fill:u.fill,autoRev:r},scaleY:{animeId:""+t,type:"linear",from:n?this.resolveScaleAttrValue(n.y):void 0,to:i?this.resolveScaleAttrValue(i.y):void 0,by:a?this.resolveScaleAttrValue(a.y):void 0,duration:u.duration,delay:this.animation.delay+u.delay,timeFilter:l,fill:u.fill,autoRev:r}}},t.prototype.resolveScaleAttrValue=function(e){return parseFloat(e)/a.STPercentage100},t.prototype.resolveAttrDriver=function(e){return e?{x:e.attr.getString("x"),y:e.attr.getString("y")}:void 0},t}(o.Parser);t.AnimScaleParser=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(13),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),r=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),n=e.childElement("p:cBhvr"),i=o.parseBehaviorAttr(n),s=e.attr.getStringOptional("transition"),c=void e.attr.getStringOptional("filter");return i.timeFilter&&(c=(new a.TimeFilterResolver).resolve(i.timeFilter)),s?"in"===s?{opacity:{animeId:""+r,type:"linear",from:0,to:1,fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,timeFilter:c,autoRev:t}}:{opacity:{animeId:""+r,type:"linear",from:1,to:0,fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,timeFilter:c,autoRev:t}}:void 0},t}(o.Parser);t.AnimEffectParser=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),s=r(6),c=r(2),u=r(5),l=r(0),p=r(3),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t,r,n=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),i=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),o=this.resolveColorBy(this.context.slideContext,e.childElementOptional("p:by")),a=this.resolveColor(this.context.slideContext,e.childElementOptional("p:to")),c=e.childElement("p:cBhvr"),u=s.parseBehaviorAttr(c),l=u.animationAttrNames[0];if("fillcolor"===l)return o?((t={})[l]={animeId:""+n,by:o,duration:u.duration,delay:this.animation.delay+u.delay,fill:u.fill,type:"colorByLinear",autoRev:i},t):a?((r={})[l]={animeId:""+n,to:a,duration:u.duration,delay:this.animation.delay+u.delay,fill:u.fill,type:"colorLinear",autoRev:i},r):void 0},t.prototype.resolveColor=function(e,t){if(t){var r=t.childElementOptional(new p.TagOrExpr("p:rgb","p:hsl"));if(!r){var n=t.childElement(new(p.TagOrExpr.bind.apply(p.TagOrExpr,o([void 0],u.ALL_COLOR_TYPE))));return c.getColor(n,e)}switch(r.name){case"p:rgb":return a({r:r.attr.getNumber("r"),g:r.attr.getNumber("g"),b:r.attr.getNumber("b")});case"p:hsl":return a({h:r.attr.getNumber("h")/l.Degree,s:r.attr.getNumber("s")/l.STPercentage100*100,l:r.attr.getNumber("l")/l.STPercentage100*100})}}},t.prototype.resolveColorBy=function(e,t){if(t){var r=t.childElementOptional(new p.TagOrExpr("p:rgb","p:hsl"));if(!r){var n=t.childElement(new(p.TagOrExpr.bind.apply(p.TagOrExpr,o([void 0],u.ALL_COLOR_TYPE))));return this.colorToColorPatch(c.getColor(n,e))}switch(r.name){case"p:rgb":return{r:r.attr.getNumber("r"),g:r.attr.getNumber("g"),b:r.attr.getNumber("b"),clrSpc:"rgb"};case"p:hsl":return{h:r.attr.getNumber("h")/l.Degree,s:r.attr.getNumber("s")/l.STPercentage100*100,l:r.attr.getNumber("l")/l.STPercentage100*100,clrSpc:"hsl"}}}},t.prototype.colorToColorPatch=function(e){if(e){var t=e.rgb().object();return{r:t.r,g:t.g,b:t.b,clrSpc:"rgb"}}},t}(s.Parser);t.AnimColorParser=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=e.childElement("p:cBhvr"),i=o.parseBehaviorAttr(n),a=o.getValueHolderOptional(e.childElementOptional("p:to"),"str",this.context);switch(i.animationAttrNames[0]){case"style.visibility":return{visible:{animeId:""+t,type:"discrete",from:void 0,to:!a||"hidden"!==a.attrValue,fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,autoRev:r}};case"style.opacity":return{opacity:{animeId:""+t,type:"discrete",from:void 0,to:parseFloat(a.attrValue.toString()),fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,autoRev:r}};default:return}},t}(o.Parser);t.AnimSetParser=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),r=e.childElement("p:cBhvr"),n=o.parseBehaviorAttr(r);return{play:{animeId:""+t,type:"discrete",duration:1,delay:this.animation.delay+n.delay,from:0,to:1,fill:n.fill},stop:{animeId:""+t,type:"discrete",duration:1===n.duration?9999999:n.duration,delay:this.animation.delay+n.delay,from:0,to:1,fill:n.fill}}},t}(o.Parser);t.AnimCmdParser=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(41),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=e.attr.getString("path","M 0 0"),i=e.childElement("p:cBhvr"),s=o.parseBehaviorAttr(i),c=a.createCurve(n);return{translateX:{animeId:""+t,type:"linear",duration:s.duration,delay:this.animation.delay+s.delay,fill:s.fill,curve:c,autoRev:r},translateY:{animeId:""+t,type:"linear",duration:s.duration,delay:this.animation.delay+s.delay,fill:s.fill,curve:c,autoRev:r}}},t}(o.Parser);t.AnimMotionParser=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),a=r(8),s=r(9),c=function(e){function t(t,r,n,i,o){var a=e.call(this,t,r,n,i,o)||this;return a.tempFrom=void 0,a.to=t.props.to,a.by=t.props.by,a.timeFilter=t.props.timeFilter,a.animeType="relative",a.rateCaculator=new s.LinearRateCaculator(a.delay,a.duration,a.timeFilter,a.fill),a}return i(t,e),t.prototype.getState=function(e,t){var r,n,i=this.rateCaculator.caclulate(e).rate;if("number"!=typeof i)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};if(r=i,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom[this.attrName]&&(this.tempFrom[this.attrName]=t[this.attrName]),(n=void 0!==this.tempFrom?this.tempFrom.fillcolor:o({r:0,g:0,b:0}))instanceof o||(n=o({r:0,g:0,b:0})),void 0!==this.to){var a=n.rgb().object(),s=this.to.rgb().object(),c=a.r+r*(s.r-a.r),u=a.g+r*(s.g-a.g),l=a.b+r*(s.b-a.b);return{value:o({r:c,g:u,b:l}),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}}if(n instanceof o||(n=o({r:0,g:0,b:0})),"rgb"===this.by.clrSpc)return c=(a=n.rgb().object()).r+r*this.by.r,u=a.g+r*this.by.g,l=a.b+r*this.by.b,{value:o({r:c,g:u,b:l}),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};var p=(a=n.hsl().object()).h+r*this.by.h,h=a.s+r*this.by.s,d=a.l+r*this.by.l;return{value:o({h:p,s:h,l:d}),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}},t}(a.AtomTimingAnime);t.ColorTimingAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(9),s=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.attrName=r,s.from=t.props.from,s.to=t.props.to,s.animeType="absolute",s.rateCaculator=new a.DiscreteRateCaculator(s.delay,s.duration,s.fill),s}return i(t,e),t.prototype.getState=function(e){var t=this.rateCaculator.caclulate(e).rate;return"number"!=typeof t?{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay}:{value:1===t?this.to:this.from,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay}},t}(o.AtomTimingAnime);t.MediaTimingAnime=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(9),s=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.timeFilter=t.props.timeFilter,s.by=t.props.by,s.animeType="relative",s.rateCaculator=new a.LinearRateCaculator(s.delay,s.duration,s.timeFilter,s.fill),s}return i(t,e),t.prototype.getState=function(e){var t,r=this.rateCaculator.caclulate(e).rate;if("number"!=typeof r)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};if(t=r,void 0!==this.formulas){var n=this.getExcutingFormula(t,this.formulas),i=void 0;if(void 0!==n){var o=(t-n.startProcessRate)/(n.endProcessRate-n.startProcessRate),a=n.from;i=a+(n.to-a)*o}else i=void 0;return{value:i,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}}return{value:t*this.by,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}},t}(o.AtomTimingAnime);t.RotateTimeAnime=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(9),s=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.tempFrom=void 0,s.attrName=r,s.timeFilter=t.props.timeFilter,s.from=t.props.from,s.to=t.props.to,s.by=t.props.by,s.context=n,void 0!==t.props.to?s.animeType="absolute":s.animeType="relative",s.rateCaculator=new a.LinearRateCaculator(s.delay,s.duration,s.timeFilter,s.fill),s}return i(t,e),t.prototype.getState=function(e,t){var r,n=this.rateCaculator.caclulate(e).rate;if("number"!=typeof n)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};if(r=n,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom[this.attrName]&&(this.tempFrom[this.attrName]=t[this.attrName]),void 0!==this.formulas){void 0===this.currentShapeParams&&void 0!==this.tempFrom&&(this.currentShapeParams={ppt_w:void 0===this.tempFrom.scaleX?this.shapeAnimationParams.ppt_w:this.tempFrom.scaleX*this.shapeAnimationParams.ppt_w,ppt_h:void 0===this.tempFrom.scaleY?this.shapeAnimationParams.ppt_h:this.tempFrom.scaleY*this.shapeAnimationParams.ppt_h,ppt_x:this.shapeAnimationParams.ppt_x,ppt_y:this.shapeAnimationParams.ppt_y});var i=this.getExcutingFormula(r,this.formulas),o=this.cacluateAttr(i,r,this.currentShapeParams);if(void 0===o)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};var a=void 0;return"ppt_w"===this.attrName?a=o/this.shapeAnimationParams.ppt_w:"scaleX"===this.attrName?a=o:"ppt_h"===this.attrName?a=o/this.shapeAnimationParams.ppt_h:"scaleY"===this.attrName&&(a=o),{value:a,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}}if(void 0!==this.by)return{value:(s=1)+r*(this.by-s),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};var s=void 0;return{value:(s=void 0!==this.from?this.from:void 0!==this.tempFrom?"scaleX"===this.attrName?this.tempFrom.scaleX:"scaleY"===this.attrName?this.tempFrom.scaleY:1:1)+r*(this.to-s),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}},t}(o.AtomTimingAnime);t.ScaleTimingAnime=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(9),s=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.tempFrom=void 0,s.animeType="absolute",s.to=t.props.to,s.rateCaculator=new a.LinearRateCaculator(s.delay,s.duration,void 0,s.fill),s}return i(t,e),t.prototype.setLastValue=function(e){this.lastTime=e},t.prototype.getState=function(e,t){this.lastTime=e,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom.visible&&(this.tempFrom.visible=t.visible);var r=this.rateCaculator.caclulate(e).rate;if(void 0!==this.formulas){if("number"!=typeof r)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};var n=this.getExcutingFormula(r,this.formulas);return{value:void 0!==n?r<n.endProcessRate?"hidden"!==n.from:"hidden"!==n.to:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}}return"number"==typeof r?{value:r>0?this.to:this.tempFrom.visible,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}:{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}},t}(o.AtomTimingAnime);t.VisibleTimingAnime=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(9),s=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.tempFrom=void 0,s.timeFilter=t.props.timeFilter,s.type=t.props.type,s.from=t.props.from,s.to=t.props.to,s.animeType="absolute","discrete"===s.type?s.rateCaculator=new a.DiscreteRateCaculator(s.delay,s.duration,s.fill):s.rateCaculator=new a.LinearRateCaculator(s.delay,s.duration,s.timeFilter,s.fill),s}return i(t,e),t.prototype.getState=function(e,t){var r,n,i=this.rateCaculator.caclulate(e).rate;return"number"!=typeof i?{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}:(r=i,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom.opacity&&(this.tempFrom.opacity=t.opacity),"discrete"===this.type?{value:1===r?this.to:this.tempFrom.opacity,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}:{value:(n=void 0!==this.from?this.from:void 0!==this.tempFrom?this.tempFrom.opacity:1)+r*(this.to-n),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting})},t}(o.AtomTimingAnime);t.OpacityTimingAnime=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=r(9),s=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.tempFrom=void 0,s.slideWidth=n.slideWidth,s.slideHeight=n.slideHeight,s.attrName=r,s.timeFilter=t.props.timeFilter,s.from=t.props.from,s.to=t.props.to,s.curve=t.props.curve,s.animeType="absolute",s.rateCaculator=new a.LinearRateCaculator(s.delay,s.duration,s.timeFilter,s.fill),s}return i(t,e),t.prototype.getState=function(e,t){var r,n,i=this.rateCaculator.caclulate(e).rate;if("number"!=typeof i)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting};if(r=i,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom[this.attrName]&&(this.tempFrom[this.attrName]=t[this.attrName]),void 0!==this.curve){var o=this.curve.get(r*this.curve.length);return"translateX"===this.attrName?{value:o.x*this.slideWidth,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}:{value:o.y*this.slideHeight,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}}if(void 0!==this.formulas){void 0===this.currentShapeParams&&void 0!==this.tempFrom&&(this.currentShapeParams={ppt_w:this.shapeAnimationParams.ppt_w,ppt_h:this.shapeAnimationParams.ppt_h,ppt_x:void 0===this.tempFrom.translateX?this.shapeAnimationParams.ppt_x:this.tempFrom.translateX/this.slideWidth+this.shapeAnimationParams.ppt_x,ppt_y:void 0===this.tempFrom.translateY?this.shapeAnimationParams.ppt_y:this.tempFrom.translateY/this.slideHeight+this.shapeAnimationParams.ppt_y});var a=this.getExcutingFormula(r,this.formulas),s=this.cacluateAttr(a,r,this.currentShapeParams);return void 0===s?{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}:"translateX"===this.attrName?{value:s*this.slideWidth-(this.shapeParam?this.shapeParam.rectangle.x:0),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}:{value:s*this.slideHeight-(this.shapeParam?this.shapeParam.rectangle.y:0),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}}return{value:(n=void 0!==this.from?this.from:void 0!==this.tempFrom?"translateX"===this.attrName?this.tempFrom.translateX:this.tempFrom.translateY:0)+r*(this.to-n),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.soundEffectId,playingSoundEffecting:this.playingSoundEffecting}},t}(o.AtomTimingAnime);t.TranslateTimingAnime=s},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),a=r(34),s=r(123),c=r(124),u=r(126),l=r(131),p=r(0),h=r(26),d=r(33),f=r(132),y=r(17);t.loadPPT=function(e,t,r,a,s,c,u){var l;return void 0===r&&(r=!1),n(this,void 0,void 0,(function(){var n,a,p,h,f,m,g,v;return i(this,(function(i){switch(i.label){case 0:return c&&c.info("Start load ppt "+t+" resource."),e=e.replace(/\/$/i,""),n=void 0,u&&u.scheme&&(n=u.scheme,e=e.replace(/^[a-zA-z]+[^\:\/\/]/,n)),a=new d.ResourcePreLoader(n),[4,Promise.all([o.fetchJSON(e+"/info.json",c),o.fetchText(e+"/pptxml/ppt.xml",c),o.fetchText(e+"/table/tableStyles.xml").catch((function(e){var t;null===(t=c)||void 0===t||t.warn(e)}))])];case 1:return p=i.sent(),h=p[0],f=p[1],m=p[2],[4,a.loadLumiaPSD(r,c)];case 2:return i.sent(),c&&c.info("load ppt "+t+" resource success"),g=(u||{}).useServerWrap,(v=void 0===g||g)&&y.loadSubsetFonts(e,t,h.fonts),[2,new A({uuid:t,url:e,width:h.width,height:h.height,slidesCount:h.totalPageSize,mainXMLContent:f,tableStylesXMLContent:m,userFonts:s,preload:r,logger:c,resourceScheme:n,rtcClient:null===(l=u)||void 0===l?void 0:l.rtcClient,useServerWrap:v})]}}))}))};var A=function(){function e(e){this.url=e.url,this.uuid=e.uuid,this.width=e.width*p.EmuToPt,this.height=e.height*p.EmuToPt,this.slidesCount=e.slidesCount,this.userFonts=e.userFonts,this.preload=e.preload,this.logger=e.logger,this.resourceScheme=e.resourceScheme,this.mainXMLContent=e.mainXMLContent,this.tableStylesXMLContent=e.tableStylesXMLContent,this.rtcClient=e.rtcClient,this.useServerWrap=e.useServerWrap}return e.prototype.loadSlide=function(e){var t,r,o,p;return n(this,void 0,void 0,(function(){var n,h,d,f,y,A,m,g,v,b,P,S,w,x,O,k,M,C,T,_,I,E,j,R=this;return i(this,(function(i){switch(i.label){case 0:if(null===(t=this.logger)||void 0===t||t.debug("begin load slide "+(e+1)),n=u.createSlidePickers(),h=new a.XMLNodeRuntime("main",n).parse(this.mainXMLContent),d=this.tableStylesXMLContent?new a.XMLNodeRuntime("main",n).parse(this.tableStylesXMLContent):void 0,e<0||e>=this.slidesCount)throw new Error("index should be in 0 ~ "+(this.slidesCount-1));return f=e+1,[4,this.fetchSlideInfo(f)];case 1:return y=i.sent(),A=y.slideXMLContent,m=y.slideRefXMLContent,g=y.layoutXMLContent,v=y.masterXMLContent,b=y.themeXMLContent,P=y.resource,S=y.wrapResource,!0===this.preload&&(null===(r=this.logger)||void 0===r||r.debug("begin preload slide "+(f+1)),this.prefetch(f+1).catch((function(e){var t;null===(t=R.logger)||void 0===t||t.debug("prefetch slide "+(f+1)+" error: ",e)})),null===(o=this.logger)||void 0===o||o.debug("preloaded slide "+(f+1))),w=new a.XMLNodeRuntime("layout",n).parse(g),x=s.createLayoutIndex(w.childElement("p:sldLayout","p:cSld","p:spTree")),O=new a.XMLNodeRuntime("master",n).parse(v),k=s.createLayoutIndex(O.childElement("p:sldMaster","p:cSld","p:spTree"),O.childElementOptional("p:sldMaster","p:txStyles")),M=new a.XMLNodeRuntime("theme",n).parse(b),C=new c.ResourceLoader(P,this.resourceScheme),T=new a.XMLNodeRuntime("slide",n).parse(A),_=new a.XMLNodeRuntime("slideRef",n).parse(m),I={},void 0!==_.element&&_.element.elements.forEach((function(e){I[e.attr.getString("Id")]=e.attr.getStringOptional("Target")})),E={slide:T,layout:w,layoutIndex:x,master:O,masterIndex:k,masterThemeColorMapping:O.childElement("p:sldMaster","p:clrMap").attr.attributes,theme:M,main:h,tableStyles:d,userFonts:this.userFonts},n.context=Object.freeze(E),j=l.createSlideAnimations(T,Object.freeze({pptUUID:this.uuid,slideIndex:f,slideContext:E,slideWidth:this.width,slideHeight:this.height,shapeParamsIndex:this.getShapeIndexMap(T.childElement("p:sld","p:cSld","p:spTree"))})),null===(p=this.logger)||void 0===p||p.debug("loaded slide "+f),[2,Object.freeze({uuid:this.uuid,url:this.url,index:e,width:this.width,height:this.height,masterXML:O,masterIndex:k,layoutXML:w,layoutIndex:x,mainXML:h,themeXML:M,slideXML:T,slideRefIndex:I,resourceLoader:C,animations:j,tableStylesXML:d,preload:this.preload,logger:this.logger,rtcClient:this.rtcClient,WrapResource:S})]}}))}))},e.prototype.fetchSlideInfo=function(e){return n(this,void 0,void 0,(function(){var t,r,n,a,s,c,u,l,p;return i(this,(function(i){switch(i.label){case 0:return t=[o.fetchText(this.url+"/slide/slide"+e+".xml",this.logger),o.fetchText(this.url+"/slideRef/slideRef"+e+".xml",this.logger).catch((function(e){return console.log("error ",e),""})),o.fetchText(this.url+"/layout/layout"+e+".xml",this.logger),o.fetchText(this.url+"/master/master"+e+".xml",this.logger),o.fetchText(this.url+"/theme/theme"+e+".xml",this.logger),o.fetchJSON(this.url+"/resources/resource"+e+".json",this.logger)],[4,Promise.all(t)];case 1:if(r=i.sent(),n=r[0],a=r[1],s=r[2],c=r[3],u=r[4],l=r[5],!this.useServerWrap)return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,f.fetchWrapResource(this.url,e)];case 3:return p=i.sent(),[3,5];case 4:return i.sent(),[3,5];case 5:return[2,{slideXMLContent:n,slideRefXMLContent:a,layoutXMLContent:s,masterXMLContent:c,themeXMLContent:u,resource:l,wrapResource:p}]}}))}))},e.prototype.prefetch=function(e){var t,r;return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return e>this.slidesCount?(null===(t=this.logger)||void 0===t||t.debug("no slide need prefetch"),[2]):[4,(n=new d.ResourcePreLoader(this.resourceScheme)).fetchPageResource(this.url,e)];case 1:return o=i.sent(),n.prefetchPageResource(o),null===(r=this.logger)||void 0===r||r.debug("prefetch slide "+e+" finish"),[2]}}))}))},e.prototype.getShapeIndexMap=function(e){var t={},r=e.extraAttr.getNumber("spId"),n=h.parsingShapeGroupXML(e);return this.getShapeGroupIndexMap(e,t,r,n.transform),t},e.prototype.getShapeGroupIndexMap=function(e,t,r,n){var i=this,o=e.elementsWithName("p:sp");this.getChildShapesIndexMap(o,t,r,n);var a=e.elementsWithName("p:cxnSp");this.getChildShapesIndexMap(a,t,r,n);var s=e.elementsWithName("p:pic");this.getChildShapesIndexMap(s,t,r,n);var c=e.elementsWithName("p:graphicFrame");this.getChildShapesIndexMap(c,t,r,n);var u=e.elementsWithName("p:grpSp");u.length>0&&u.forEach((function(e){var o=e.extraAttr.getNumber("spId"),a=h.parsingShapeGroupXML(e,void 0,r,n);i.getShapeGroupIndexMap(e,t,o,a.transform),t[o]=a}))},e.prototype.getChildShapesIndexMap=function(e,t,r,n){e.forEach((function(e){var i=e.extraAttr.getNumber("spId"),o=h.parsingShapeXML(e,void 0,r,n);t[i]=o}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);function i(e){var t={},r=e.elementWithName("p:bodyStyle");r&&(t.body=r);var n=e.elementWithName("p:titleStyle");n&&(t.title=n,t.subTitle=n,t.ctrTitle=n);var i=e.elementWithName("p:otherStyle");return i&&(t.other=i),t}t.createLayoutIndex=function(e,t){for(var r={},o={},a={},s=0,c=e.elements;s<c.length;s++){var u=c[s],l=u.childElementOptional(new n.TagOrExpr("p:nvSpPr","p:nvCxnSpPr"));if(l){var p=l.childElement("p:cNvPr").attr.getStringOptional("id"),h=l.childElementOptional("p:nvPr","p:ph"),d=h&&h.attr.getStringOptional("idx"),f=h&&h.attr.getStringOptional("type");void 0!==p&&(r[p]=u),void 0!==d?o[d]=u:"title"!==f&&"ctrTitle"!==f||(o[0]=u),"title"===f||"ctrTitle"===f?(a.title=u,a.ctrTitle=u):void 0!==f&&(a[f]=u)}}return t?Object.freeze({idIndex:Object.freeze(r),idxIndex:Object.freeze(o),typeIndex:Object.freeze(a),txStyle:Object.freeze(i(t))}):Object.freeze({idIndex:Object.freeze(r),idxIndex:Object.freeze(o),typeIndex:Object.freeze(a)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(125))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.resource=e,this.resourceScheme=t}return e.prototype.loadURL=function(e,t){var r=this.resource[e]&&this.resource[e][t];return void 0===r?r:r=this.replaceProtocolByresourceScheme(r)},e.prototype.replaceProtocolByresourceScheme=function(e){return this.resourceScheme&&(e=e.replace(/^[a-zA-z]+[^\:\/\/]/,this.resourceScheme)),e},e}();t.ResourceLoader=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(127),i=r(36),o=r(128),a=r(35),s=r(129),c=r(130);e=new a.PickersModule,n.bindTextPickers(e),i.bindShapeCommonPickers(e),o.bindShapeLayoutPickers(e),s.bindTablePickers(e),c.bindBackgroundPickers(e),t.createSlidePickers=function(){return e.createPickers()}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(5),a=r(0),s=r(17),c=r(20),u=r(2);t.bindTextPickers=function(e){e.bindAttributePicker("a:p","*",p),e.bindAttributePicker("a:p","indent",h(-342900,0)),e.bindAttributePicker("a:p","marL",h(342900,0)),e.bindAttributePicker("a:p","level",d),e.bindAttributePicker("a:bodyPr","*",l),e.bindAttributePicker(["a:r","a:br","a:endParaRPr","a:fld"],"*",y),e.bindAttributePicker(["a:r","a:br","a:endParaRPr","a:fld","a:p"],"sz",m),e.bindAttributePicker(["a:r"],"highlight",A),e.bindAttributePicker(["a:r","a:fld"],"color",v),e.bindAttributePicker(["a:r","a:fld"],"fontType",b),e.bindAttributePicker("a:p","placeHolderType",P),e.bindChildPicker("a:p","bu",S),e.bindAttributePicker("a:p","buClr",w),e.bindAttributePicker("a:p","lineHeight",O),e.bindAttributePicker("a:p",["a:spcBef","a:spcAft"],k)};var l=function(e,t,r,n,o){for(var a=function(e,t,r,n){var o=r.bodyPrXMlList;return o||(o=r.bodyPrXMlList=Object.freeze(function(e,t,r){for(var n=[],o=e.parentElement(new i.TagOrExpr("p:sp","p:graphicFrame")),a=c.getRelationshipPlaceHolder(o,t,r),s=a.allShape,u=a.hasPlaceHolder,l=0,p=s;l<p.length;l++){var h=p[l].childElementOptional("p:txBody","a:bodyPr");h&&n.push(h)}return{pPrXMLList:n,hasPlaceHolder:u}}(e,t,n))),o}(e,t,n,o).pPrXMLList,s=0,u=a;s<u.length;s++){var l=u[s].attr.getOptional(r);if(void 0!==l)return l}},p=function(e,t,r,n,i){for(var o=0,a=f(e,t,n,i).pPrXMLList;o<a.length;o++){var s=a[o].attr.getOptional(r);if(void 0!==s)return s}},h=function(e,t){return function(r,n,i,o,a){for(var s=f(r,n,o,a),c=s.pPrXMLList,u=s.hasPlaceHolder,l=0,p=c;l<p.length;l++){var h=p[l].attr.getOptional(i);if(void 0!==h)return h}return u?e:t}},d=function(e,t,r,n,i){return f(e,t,n,i).level};function f(e,t,r,n){var o=r.pPrXMlList;return o||(o=r.pPrXMlList=Object.freeze(function(e,t,r){var n,o=[],a=e.parentElement(new i.TagOrExpr("p:sp","p:graphicFrame")),s=e.childElementOptional("a:pPr"),u=0;s&&(o.push(s),u=s.attr.getNumber("lvl",0));for(var l="a:lvl"+(u+1)+"pPr",p=c.getRelationshipPlaceHolder(a,t,r),h=p.allShape,d=p.placeHolderType,f=p.masterStyleXML,y=(p.isTextBox,p.hasPlaceHolder),A=0,m=h;A<m.length;A++)(n=m[A].childElementOptional("p:txBody","a:lstStyle",l))&&o.push(n);return f&&(n=f.childElementOptional(l))&&o.push(n),{pPrXMLList:o,placeHolderType:d,level:u,hasPlaceHolder:y}}(e,t,n))),o}var y=function(e,t,r,n,i){for(var o=0,a=g(e,t,n,i).pPrXMLList;o<a.length;o++){var s=a[o].attr.getOptional(r);if(void 0!==s)return s}},A=function(e,t,r,a,s){var c=e.childElementOptional("a:rPr","a:highlight",new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],o.ALL_COLOR_TYPE))));return c?u.getColor(c,t):void 0},m=function(e,t,r,n,i){var o=y(e,t,"sz",n,i),a=y(e,t,"kern",n,i);return o||a};function g(e,t,r,a){var s=r.rangeXMlList;return s||(s=r.rangeXMlList=Object.freeze(function(e,t,r){var a=e.elementWithName("a:rPr"),s=function(e,t,r){var n,a=[],s=e.parentElement(new i.TagOrExpr("p:sp","p:graphicFrame")),u=e.childElementOptional("a:pPr"),l=0;if(u){l=u.attr.getNumber("lvl",0);var p=u.childElementOptional("a:defRPr");p&&a.push(p)}for(var h="a:lvl"+(l+1)+"pPr",d=c.getRelationshipPlaceHolder(s,t,r),f=d.allShape,y=d.placeHolderType,A=d.masterStyleXML,m=d.hasPlaceHolder,g=0,v=f;g<v.length;g++){var b=v[g];(n=b.childElementOptional("p:txBody","a:lstStyle",h,"a:defRPr"))&&a.push(n);var P=b.childElementOptional("p:style");if(P){var S=o.mergeShapeStyle(P,t);a.push(S.font.fontRef),S.font.xml&&a.push(S.font.xml)}}return A&&(n=A.childElementOptional(h,"a:defRPr"))&&a.push(n),{pPrXMLList:a,placeHolderType:y,level:l,hasPlaceHolder:m}}("a:p"===e.name?e:e.parentElement("a:p"),t,r),u=s.placeHolderType,l=s.pPrXMLList,p=s.level,h=s.hasPlaceHolder;return a?{placeHolderType:u,pPrXMLList:n([e,a],l),level:p,hasPlaceHolder:h}:{placeHolderType:u,pPrXMLList:n([e],l),level:p,hasPlaceHolder:h}}(e,t,a))),s}var v=function(e,t,r,a,s){for(var c=0,l=g(e,t,a,s).pPrXMLList;c<l.length;c++){var p=l[c],h=p.childElementOptional(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],o.ALL_FILL_TYPE))));if(h)return(new u.FillOrLineFillReader).read(h,t);var d=p.childElementOptional(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],o.ALL_COLOR_TYPE))));if(d)return u.getColor(d,t)}},b=function(e,t,r,n,i){for(var a=g(e,t,n,i),u=[],l=0,p=a.pPrXMLList;l<p.length;l++){var h,d=p[l],f=d.childElementOptional("a:latin"),y=d.childElementOptional("a:ea");f&&"string"==typeof(h=f.attr.getOptional("typeface"))&&u.push(h),y&&"string"==typeof(h=y.attr.getOptional("typeface"))&&u.push(h)}u=(u=c.isMajor(a.placeHolderType)?u.concat(o.getFontList(o.getMajorFont(t))):u.concat(o.getFontList(o.getMinorFont(t)))).filter((function(e){return""!==e}));var A=[],m=o.getMajorFont(t),v=o.getMinorFont(t);return u.forEach((function(e){switch(e){case"+mj-lt":A=m.latin?A.concat(m.latin):A;break;case"+mj-ea":A=m.ea?A.concat(m.ea):A;break;case"+mj-cs":A=m.cs?A.concat(m.cs):A;break;case"+mn-lt":A=v.latin?A.concat(v.latin):A;break;case"+mn-ea":A=v.ea?A.concat(v.ea):A;break;case"+mn-cs":A=m.cs?A.concat(m.cs):A;break;default:A.push(e)}})),A.forEach((function(e){return s.loadFont(e,t.userFonts)})),A.join(",")},P=function(e,t,r,n,o){var a=e.parentElement(new i.TagOrExpr("p:sp","p:graphicFrame")).childElementOptional(new i.TagOrExpr("p:nvSpPr","p:nvCxnSpPr"));return a&&a.childElementOptional("p:nvPr","p:ph")?"true":"false"},S=function(e,t,r,n,o){for(var a=0,s=f(e,t,n,o).pPrXMLList;a<s.length;a++){var c=s[a].childElementOptional(new i.TagOrExpr("a:buChar","a:buNone","a:buAutoNum","a:buBlip"));if(void 0!==c)return c}},w=function(e,t,r,a,s){for(var c=0,l=f(e,t,a,s).pPrXMLList;c<l.length;c++){var p=l[c].childElementOptional("a:buClr");if(p)return u.getColor(p.childElement(new(i.TagOrExpr.bind.apply(i.TagOrExpr,n([void 0],o.ALL_COLOR_TYPE)))),t)}};function x(e){var t=e.childElementOptional("a:lnSpc",new i.TagOrExpr("a:spcPct","a:spcPts"));if(t){var r=0,n=e.parentElementOptional("p:txBody");if(n){var o=n.childElementOptional("a:bodyPr","a:normAutofit");o&&(r=a.parseSTPercentage(o.attr.getNumber("lnSpcReduction",0)))}switch(t.name){case"a:spcPct":return a.parseSTPercentage(t.attr.getString("val"))-r;case"a:spcPts":return t.attr.getNumber("val")/100*(1-r)+"pt";default:return}}}var O=function(e,t,r,n,i){for(var o=0,s=f(e,t,n,i).pPrXMLList;o<s.length;o++){var c=x(s[o]);if(void 0!==c)return c}return a.DefatultHeightLine},k=function(e,t,r,n,i){for(var o=0,a=f(e,t,n,i).pPrXMLList;o<a.length;o++){var s=M(a[o],r);if(void 0!==s)return s}};function M(e,t){var r=e.childElementOptional(t,new i.TagOrExpr("a:spcPct","a:spcPts"));if(r)switch(r.name){case"a:spcPct":return a.parseSTPercentage(r.attr.getString("val"));case"a:spcPts":return r.attr.getNumber("val")/100+"pt";default:return}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(3);function o(e,t,r){for(var i=0,o=n.getRelationshipPlaceHolder(e,t,r).allShape;i<o.length;i++){var a=o[i],c=a.childElementOptional("p:spPr","a:xfrm","a:off");if(void 0!==c)return c;if(void 0!==(c=a.childElementOptional("p:xfrm","a:off")))return c}var u=s(e,t,r);return u&&u.childElementOptional("a:off")}function a(e,t,r){for(var i=0,o=n.getRelationshipPlaceHolder(e,t,r).allShape;i<o.length;i++){var a=o[i],c=a.childElementOptional("p:spPr","a:xfrm","a:ext");if(void 0!==c)return c;if(void 0!==(c=a.childElementOptional("p:xfrm","a:ext")))return c}var u=s(e,t,r);return u&&u.childElementOptional("a:ext")}function s(e,t,r){var n;if("slide"===r){var i=e.childElementOptional("p:spPr","a:xfrm");if(i)return i;var o=null===(n=e.childElementOptional("p:nvPicPr","p:nvPr","p:ph"))||void 0===n?void 0:n.attr.getStringOptional("idx");if(o){var a=t.layoutIndex.idxIndex[o];if(a)return a.childElementOptional("p:spPr","a:xfrm");var s=t.masterIndex.idxIndex[o];return s?s.childElementOptional("p:spPr","a:xfrm"):void 0}}}t.bindShapeLayoutPickers=function(e){e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"x",(function(e,t,r,n,i){var a=o(e,t,i);return a?a.attr.getOptional("x"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"y",(function(e,t,r,n,i){var a=o(e,t,i);return a?a.attr.getOptional("y"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"width",(function(e,t,r,n,i){var o=a(e,t,i);return o?o.attr.getOptional("cx"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"height",(function(e,t,r,n,i){var o=a(e,t,i);return o?o.attr.getOptional("cy"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"flipV",(function(e,t){var r=s(e,t,"slide");return void 0===r?"false":r.attr.getOptional("flipV")?r.attr.getOptional("flipV"):"false"})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"flipH",(function(e,t){var r=s(e,t,"slide");return void 0===r?"false":r.attr.getOptional("flipH")?r.attr.getOptional("flipH"):"false"})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"hidden",(function(e,t,r,n,o){var a=e.childElementOptional(new i.TagOrExpr("p:nvGraphicFramePr","p:nvSpPr","p:nvCxnSpPr","p:nvPicPr"),"p:cNvPr");return a?a.attr.get("hidden","false"):"false"})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp"],"rot",(function(e,t){var r=s(e,t,"slide");return r?r.attr.getOptional("rot"):0}))}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(5),a=r(3);t.bindTablePickers=function(e){e.bindAttributePicker("a:tcPr","*",s)};var s=function(e,t,r,s,l){var h=function(e,t,r,n,i){var o=n.tableStyleXML;return o||(o=n.tableStyleXML=Object.freeze(function(e,t){var r,n,i=e.parentElement("a:tbl").childElementOptional("a:tblPr");if(i&&i.hasChildElementWithName("a:tableStyleId")){var o=i.childElement("a:tableStyleId").text;return{tableStyle:null===(n=null===(r=t.tableStyles)||void 0===r?void 0:r.childElement("a:tblStyleLst").elementsWithName("a:tblStyle"))||void 0===n?void 0:n.filter((function(e){return e.attr.getString("styleId")===o}))[0],bandCol:i.attr.getBoolean("bandCol",!1),bandRow:i.attr.getBoolean("bandRow",!1),firstCol:i.attr.getBoolean("firstCol",!1),firstRow:i.attr.getBoolean("firstRow",!1),lastCol:i.attr.getBoolean("lastCol",!1),lastRow:i.attr.getBoolean("lastRow",!1),rtl:i.attr.getBoolean("rtl",!1)}}return{tableStyle:void 0,bandCol:!1,bandRow:!1,firstCol:!1,firstRow:!1,lastCol:!1,lastRow:!1,rtl:!1}}(e,t))),o}(e,t,0,s),d=r.split("-"),f=parseInt(d[0]),y=parseInt(d[1]);r=d[2];var A=e.parentElement("a:tbl"),m=function(e,t,r,s){switch(r){case"isBold":case"isItalic":return;case"fillColor":var c=e.childElementOptional(new(a.TagOrExpr.bind.apply(a.TagOrExpr,n([void 0],o.ALL_FILL_TYPE))));return c?(new i.FillOrLineFillReader).read(c,t):(new i.FillOrLineFillReader).read(s,t);case"fontFamily":case"fontColor":return;case"bottomBorderWidth":return new p(e,"a:lnB").getBorderWidth();case"bottomBorderColor":return new p(e,"a:lnB").getBorderColor(t);case"bottomBorderStyle":return new p(e,"a:lnB").getBorderType();case"bottomBorderStrokeDashArray":return new p(e,"a:lnB").getBorderStrokeDashArray();case"topBorderWidth":return new p(e,"a:lnT").getBorderWidth();case"topBorderColor":return new p(e,"a:lnT").getBorderColor(t);case"topBorderStyle":return new p(e,"a:lnT").getBorderType();case"topBorderStrokeDashArray":return new p(e,"a:lnT").getBorderStrokeDashArray();case"leftBorderWidth":return new p(e,"a:lnL").getBorderWidth();case"leftBorderColor":return new p(e,"a:lnL").getBorderColor(t);case"leftBorderStyle":return new p(e,"a:lnL").getBorderType();case"leftBorderStrokeDashArray":return new p(e,"a:lnL").getBorderStrokeDashArray();case"rightBorderWidth":return new p(e,"a:lnR").getBorderWidth();case"rightBorderColor":return new p(e,"a:lnR").getBorderColor(t);case"rightBorderStyle":return new p(e,"a:lnR").getBorderType();case"rightBorderStrokeDashArray":return new p(e,"a:lnR").getBorderStrokeDashArray();default:return}}(e,t,r,A.childElementOptional("a:tblPr"));if(void 0!==m&&m!==i.UNDEFINED)return m;if(h.tableStyle){var g=h.tableStyle.childElementOptional("a:band1H"),v=h.tableStyle.childElementOptional("a:band2H"),b=h.tableStyle.childElementOptional("a:band1V"),P=h.tableStyle.childElementOptional("a:band2V"),S=h.tableStyle.childElementOptional("a:firstRow"),w=h.tableStyle.childElementOptional("a:firstCol"),x=(h.tableStyle.childElementOptional("a:lastRow"),h.tableStyle.childElementOptional("a:lastCol"),h.tableStyle.childElementOptional("a:wholeTbl")),O=(f+1)%2==1,k=(y+1)%2==1,M=0===f,C=0===f;return h.firstRow&&M?c(S,t,r,x):h.firstCol&&C?c(w,t,r,x):h.bandRow?h.firstRow?c(O?v:g,t,r,x):c(O?g:v,t,r,x):h.bandCol?h.firstCol?c(k?P:b,t,r,x):c(k?b:P,t,r,x):u(x,t,r)}};function c(e,t,r,n){if(e){var i=u(e,t,r);return void 0===i?u(n,t,r):i}return u(n,t,r)}function u(e,t,r){switch(r){case"isBold":var s=e&&e.childElementOptional("a:tcTxStyle");return s?s.attr.getString("b","off"):"false";case"isItalic":var c=e&&e.childElementOptional("a:tcTxStyle");return c?c.attr.getString("i","off"):"false";case"fillColor":var u=e&&e.childElementOptional("a:tcStyle","a:fill",new(a.TagOrExpr.bind.apply(a.TagOrExpr,n([void 0],o.ALL_FILL_TYPE))));return u?(new i.FillOrLineFillReader).read(u,t):void 0;case"fontFamily":var p=e&&e.childElementOptional("a:tcTxStyle","a:fontRef");return p?o.parseAndLoadThemeFont(p.attr.getString("idx","none"),t).join(","):void 0;case"fontColor":var h=e&&e.childElementOptional("a:tcTxStyle",new(a.TagOrExpr.bind.apply(a.TagOrExpr,n([void 0],o.ALL_COLOR_TYPE))));return h?i.getColor(h,t):void 0;case"bottomBorderWidth":return new l(e,"a:bottom").getBorderWidth();case"bottomBorderColor":return new l(e,"a:bottom").getBorderColor(t);case"bottomBorderStyle":return new l(e,"a:bottom").getBorderType();case"topBorderWidth":return new l(e,"a:top").getBorderWidth();case"topBorderColor":return new l(e,"a:top").getBorderColor(t);case"topBorderStyle":return new l(e,"a:top").getBorderType();case"leftBorderWidth":return new l(e,"a:left").getBorderWidth();case"leftBorderColor":return new l(e,"a:left").getBorderColor(t);case"leftBorderStyle":return new l(e,"a:left").getBorderType();case"rightBorderWidth":return new l(e,"a:right").getBorderWidth();case"rightBorderColor":return new l(e,"a:right").getBorderColor(t);case"rightBorderStyle":return new l(e,"a:right").getBorderType();default:return}}var l=function(){function e(e,t){this.tcStyle=e,this.lnKey=t}return e.prototype.getBorderColor=function(e){var t=this.tcStyle&&this.tcStyle.childElementOptional("a:tcStyle","a:tcBdr",this.lnKey,"a:ln",new(a.TagOrExpr.bind.apply(a.TagOrExpr,n([void 0],o.ALL_FILL_TYPE))));return t?(new i.FillOrLineFillReader).read(t,e):void 0},e.prototype.getBorderWidth=function(){var e=this.tcStyle&&this.tcStyle.childElementOptional("a:tcStyle","a:tcBdr",this.lnKey,"a:ln");return e?e.attr.getNumberOptional("w"):void 0},e.prototype.getBorderType=function(){var e=this.tcStyle&&this.tcStyle.childElementOptional("a:tcStyle","a:tcBdr",this.lnKey,"a:ln");if(e){var t=e.childElementOptional("a:prstDash");if(t&&t.attr.has("val"))return t.attr.getString("val")}return"solid"},e}(),p=function(){function e(e,t){this.tcPrXMl=e,this.lnKey=t}return e.prototype.getBorderColor=function(e){var t=this.tcPrXMl.childElementOptional(this.lnKey);return t?(new i.FillOrLineFillReader).read(t.childElement(new(a.TagOrExpr.bind.apply(a.TagOrExpr,n([void 0],o.ALL_FILL_TYPE)))),e):void 0},e.prototype.getBorderWidth=function(){var e=this.tcPrXMl.childElementOptional(this.lnKey);return e?e.attr.getNumber("w",0):void 0},e.prototype.getBorderType=function(){var e=this.tcPrXMl.childElementOptional(this.lnKey);if(e){var t=e.childElementOptional("a:prstDash");if(t&&t.attr.has("val")){var r=t.attr.getStringOptional("val");return"dot"===r||"sysDot"===r?"dotted":"dash"===r||"sysDash"===r?"dashed":"solid"}}},e.prototype.getBorderStrokeDashArray=function(){var e=this.getBorderWidth(),t=this.getBorderType();if(void 0!==e&&void 0!==t)switch(t){case"solid":return"0";case"dash":return""+5*e;case"dashDot":return" "+5*e+", "+5*e+", "+e+", "+5*e;case"dot":return e+",  "+5*e;case"lgDash":return 2*e+", "+e;case"lgDashDot":return 10*e+", "+5*e+", "+e+", "+5*e+", "+e+", "+5*e;case"sysDash":return 5*e+", "+2*e;case"sysDashDot":return 5*e+", "+2*e+", "+e+", "+5*e;case"sysDashDotDot":return 5*e+", "+2*e+", "+e+", "+5*e+", "+e+", "+5*e;case"sysDot":return 2*e+", "+5*e;default:return"0"}},e}()},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(3),a=r(5);t.bindBackgroundPickers=function(e){e.bindChildPicker(["p:cSld"],"getBackgroundImageFill",s),e.bindAttributePicker(["p:cSld"],"backgroundResId",c),e.bindAttributePicker(["p:cSld"],"backgroundImageResourceType",l),e.bindAttributePicker(["p:cSld"],"backgroundColor",p)};var s=function(e,t,r,n,i){var o=h(e,t,r,n,i);if(o.bgXML&&o.bgXML.hasChildElementWithName("p:bgRef")){var a=o.bgXML.childElement("p:bgRef").attr.getNumber("idx");return t.theme.childElement("a:theme","a:themeElements","a:fmtScheme","a:bgFillStyleLst").elements[a-1e3-1]}return o.bgXML.childElementOptional("p:bgPr","a:blipFill")},c=function(e,t,r,n,i){var o=h(e,t,r,n,i);if(!o.bgXML||!o.bgXML.hasChildElementWithName("p:bgRef"))return u(o.bgXML.childElementOptional("p:bgPr","a:blipFill"));var a=o.bgXML.childElement("p:bgRef").attr.getNumber("idx"),s=t.theme.childElement("a:theme","a:themeElements","a:fmtScheme","a:bgFillStyleLst").elements[a-1e3-1];return"a:blipFill"===s.name?u(s):void 0};function u(e){return e?e.childElement("a:blip").attr.getStringOptional("r:embed"):void 0}var l=function(e,t,r,n,i){var o=h(e,t,r,n,i);return o.bgXML&&o.bgXML.hasChildElementWithName("p:bgRef")?"theme":o.resourceType},p=function(e,t,r,s,c){var u=h(e,t,r,s,c);if(u.bgXML&&u.bgXML.hasChildElementWithName("p:bgRef")){var l=u.bgXML.childElement("p:bgRef").attr.getNumber("idx"),p=t.theme.childElement("a:theme","a:themeElements","a:fmtScheme","a:bgFillStyleLst").elements[l-1e3-1];return new i.FillOrLineFillReader(u.bgXML.childElement("p:bgRef").childElementOptional("a:schemeClr")).read(p,t)}return(new i.FillOrLineFillReader).read(u.bgXML.childElement("p:bgPr",new(o.TagOrExpr.bind.apply(o.TagOrExpr,n([void 0],a.ALL_FILL_TYPE)))),t)};function h(e,t,r,n,i){var o=n.bgXML;return o||(o=n.bgXML=Object.freeze(function(e,t){return e.hasChildElementWithName("p:bg")?{bgXML:e.childElement("p:bg"),resourceType:"slide"}:t.layout.childElementOptional("p:sldLayout","p:cSld","p:bg")?{bgXML:t.layout.childElement("p:sldLayout","p:cSld","p:bg"),resourceType:"layout"}:{bgXML:t.master.childElement("p:sldMaster","p:cSld","p:bg"),resourceType:"master"}}(e,t))),o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);t.createSlideAnimations=n.createSlideAnimations},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(15);t.fetchWrapResource=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a,s,c;return i(this,(function(i){switch(i.label){case 0:return[4,o.fetchJSON(e+"/text/slide/slide"+t+".json")];case 1:return r=i.sent(),n=r.masterPartName.replace("/ppt/slideMasters/slideMaster","/text/master/master").replace(".xml",".json"),a=r.layoutPartName.replace("/ppt/slideLayouts/slideLayout","/text/layout/layout").replace(".xml",".json"),[4,o.fetchJSON(""+e+n)];case 2:return s=i.sent(),[4,o.fetchJSON(""+e+a)];case 3:return c=i.sent(),[2,{slide:r,master:s,layout:c}]}}))}))}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(1),u=r(39),l=r(134),p=r(135),h=r(136),d=r(137),f=r(44),y=r(27),A=r(15),m=function(e){function t(t){var r=e.call(this,t)||this;return r.previewList=[],r.PPTSliderList=[],r.stateAdapter={disableInteractive:!1,setState:function(e,t,n){return a(r,void 0,void 0,(function(){return s(this,(function(e){return this.setState({globalPPTState:n}),[2]}))}))},onPageToPrev:function(){var e=r.state.slideIndex;r.changePageTo(e-1)},onPageToNext:function(){var e=r.state.slideIndex;r.changePageTo(e+1)},onPageJumpTo:function(e,t){return a(r,void 0,void 0,(function(){return s(this,(function(e){return this.changePageTo(t-1),[2]}))}))},setSlideStateAdapterCallbacks:function(e){}},r.state={slide:void 0,slideIndex:0,globalPPTState:void 0,isExtendingSidebar:!1,isShownNote:!1,noteList:[],isLoading:!0},t.conversionResponse.status!==d.Status.finished||(r.uuid=t.conversionResponse.uuid,t.conversionResponse.progress.convertedFileList.forEach((function(e){r.PPTSliderList.push(o(o({},e),{conversionFileUrl:e.conversionFileUrl.replace(/\d.slide/g,"")})),e.preview&&r.previewList.push(e.preview)})),r.total=r.PPTSliderList.length),r}return i(t,e),t.prototype.UNSAFE_componentWillMount=function(){return a(this,void 0,void 0,(function(){var e,t,r,n;return s(this,(function(i){switch(i.label){case 0:return e=this.state.slideIndex,t=this.PPTSliderList[e],r=this,[4,f.loadPPT(t.conversionFileUrl,this.uuid,!0,this.props.preloadProgress,this.props.userFonts,this.props.logger,{scheme:"https",useServerWrap:!0})];case 1:return r.ppt=i.sent(),[4,this.ppt.loadSlide(e)];case 2:return n=i.sent(),[4,this.getNoteList()];case 3:return i.sent(),this.setState({slide:n,isLoading:!1}),[2]}}))}))},t.prototype.getNoteList=function(){return a(this,void 0,void 0,(function(){var e,t,r;return s(this,(function(n){switch(n.label){case 0:e=this.state.slideIndex,t=this.PPTSliderList[e],n.label=1;case 1:return n.trys.push([1,3,,4]),[4,A.fetchJSON(t.conversionFileUrl.replace("pptx","https")+"notes/note"+(e+1)+".json")];case 2:return r=n.sent(),this.setState({noteList:r}),[3,4];case 3:return n.sent(),this.setState({noteList:[]}),[3,4];case 4:return[2]}}))}))},t.prototype.changeStep=function(e){this.state.isLoading||this.slideRef.changeStep(e)},t.prototype.changePageTo=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return e<0||e>=this.total||this.state.isLoading?[2]:(this.setState({isLoading:!0}),[4,this.ppt.loadSlide(e)]);case 1:return t=r.sent(),this.setState({slide:t,slideIndex:e,isLoading:!1,isShownNote:!1}),[4,this.getNoteList()];case 2:return r.sent(),[2]}}))}))},t.prototype.clickSidebarHandler=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return this.changePageTo(e),[2]}))}))},t.prototype.clickControllerHandler=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return this.changePageTo(e),[2]}))}))},t.prototype.changeIsExtendSidebar=function(e){0!==this.previewList.length&&this.setState({isExtendingSidebar:e})},t.prototype.changeIsShowNote=function(e){0!==this.state.noteList.length&&this.setState({isShownNote:e})},t.prototype.resetCurrentSlideAnimation=function(){this.slideRef&&this.slideRef.resetCurrentSlideAnimation()},t.prototype.resetCurrentPPTAnimation=function(){this.slideRef&&this.slideRef.resetCurrentPPTAnimation()},t.prototype.render=function(){var e=this,t=this.total,r=this.PPTSliderList,n=this.state,i=n.globalPPTState,o=n.slide,a=n.slideIndex,s=n.isExtendingSidebar,u=n.isShownNote,d=n.noteList,f=n.isLoading,A=this.props,m=A.parentElement,g=A.config,v=r[0].width,b=r[0].height+40,P={width:v+"px",height:b+"px",transform:""},S=Math.min(m.offsetWidth/v,m.offsetHeight/b);return m.style.width&&(P.transform="scale("+S+", "+S+")"),c.createElement("div",{style:P,className:"ppt-preview-container"},c.createElement(l.default,{international:g&&g.international,isShowNote:u,disableNote:!d.length,disableSidebar:!this.previewList.length,isExtendSidebar:s,changeStep:function(t){e.changeStep(t)},changeIsShowNote:this.changeIsShowNote.bind(this),changeIsExtendSidebar:this.changeIsExtendSidebar.bind(this),total:t,resetCurrentSlideAnimation:this.resetCurrentSlideAnimation.bind(this),resetCurrentPPTAnimation:this.resetCurrentPPTAnimation.bind(this),changeToPage:this.clickControllerHandler.bind(this),slideIndex:a}),c.createElement("div",{style:{position:"relative",display:"inline-block",overflow:"hidden",width:"100%",fontSize:"0"},className:"ppt-preview-main-container"},c.createElement("div",{style:{display:"inline-block"},className:"ppt-preview-slide-container"},!f&&o&&c.createElement(y.Slide,{ref:function(t){return e.slideRef=t},stateAdapter:this.stateAdapter,pptState:i,data:o,renderMode:y.RenderMode.Normal}),f&&c.createElement("div",{style:P})),this.previewList.length>0&&c.createElement(h.default,{isExtend:s,previewList:this.previewList,changeToPage:this.clickSidebarHandler.bind(this)}),d.length>0&&c.createElement(p.default,{isShow:u,noteList:d})))},t}(c.Component);t.default=m,t.previewPPT=function(e,t,r,n,i,o,a){void 0===n&&(n=!1),t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",u.render(c.createElement(m,{conversionResponse:e,parentElement:t,preload:n,userFonts:i,logger:o,config:r,pptPrams:a}),t)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=function(e){function t(t){var r=e.call(this,t)||this;return r.state={disableJumpTo:!1},r}return i(t,e),t.prototype.onPrePageHandler=function(){var e=this.props,t=e.slideIndex,r=e.changeToPage;t>0&&r(t-1)},t.prototype.onNextPageHandler=function(){var e=this.props,t=e.slideIndex,r=e.changeToPage;t<e.total-1&&r(t+1)},t.prototype.onClickJumpToHandler=function(){var e=this.props,t=e.total,r=e.changeToPage,n=parseInt(this.inputRef.value)-1;return Number.isNaN(n)||n<0?(this.inputRef.value="1",void r(0)):n>t-1?(this.inputRef.value=""+t,void r(t-1)):(this.inputRef.value=(n+1).toString(),void r(n))},t.prototype.onPreStepHandler=function(){this.props.changeStep(-1)},t.prototype.onNextStepHandler=function(){this.props.changeStep(1)},t.prototype.invalidJumpTo=function(){isNaN(parseInt(this.inputRef.value))?this.setState({disableJumpTo:!0}):this.setState({disableJumpTo:!1})},t.prototype.resetCurrentSlideAnimation=function(){this.props.resetCurrentSlideAnimation()},t.prototype.resetCurrentPPTAnimation=function(){this.props.resetCurrentPPTAnimation()},t.prototype.render=function(){var e=this,t=this.state.disableJumpTo,r=this.props,n=r.slideIndex,i=r.total,a=r.isExtendSidebar,s=r.isShowNote,c=r.changeIsExtendSidebar,u=r.changeIsShowNote,l=r.international,p=r.disableSidebar,h=r.disableNote;return o.createElement("div",{className:"ppt-preview-beauty-scroll-bar ppt-preview-controls"},o.createElement("button",{className:"ppt-preview-controls-button",disabled:0===n,onClick:function(){e.onPrePageHandler()}},l&&l.prePage||"上一页"),o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){e.onPreStepHandler()}},l&&l.preStep||"上一步"),o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){e.onNextStepHandler()}},l&&l.nextStep||"下一步"),o.createElement("button",{className:"ppt-preview-controls-button",disabled:n===i-1,onClick:function(){e.onNextPageHandler()}},l&&l.nextPage||"下一页"),o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){e.resetCurrentSlideAnimation()}},l&&l.resetCurrentSlideAnimation||"重置当前页动画"),o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){e.resetCurrentPPTAnimation()}},l&&l.resetCurrentPPTAnimation||"重置所有动画"),o.createElement("input",{className:"ppt-preview-controls-input",type:"text",onInput:function(){e.invalidJumpTo()},ref:function(t){return e.inputRef=t}}),o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){e.onClickJumpToHandler()},disabled:t},l&&l.jumpTo||"跳转到此页"),a?o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){c(!1)}},l&&l.hideSidebar||"隐藏侧边栏"):o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){c(!0)},disabled:p},l&&l.displaySidebar||"显示侧边栏"),s?o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){u(!1)}},l&&l.hideNote||"隐藏备注"):o.createElement("button",{className:"ppt-preview-controls-button",onClick:function(){u(!0)},disabled:h},l&&l.displayNote||"显示备注"),o.createElement("p",{className:"ppt-preview-controls-page"},l&&l.pageNumber||"页码","：",n+1," / ",i))},t}(o.Component);t.default=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(11),s=function(e){function t(t){var r=e.call(this,t)||this;return r.state={noteList:[]},r}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.isShow,r=e.noteList,n={width:"100%",height:"200px",overflow:"auto",position:"absolute",bottom:t?0:"-200px",transition:"1s",zIndex:"2",fontSize:"12px",padding:"12px",boxSizing:"border-box",fontFamily:"等线"};return o.createElement("div",{style:n,className:"ppt-preview-beauty-scroll-bar ppt-preview-note"},r.map((function(e,t){var r,n={textAlign:a.toTextAlign((r=e.align,null!=r?r:"l")),marginLeft:e.marginLeft?e.marginLeft+"px":0,marginRight:e.marginRight?e.marginRight+"px":0,textIndent:e.indent?e.indent+"px":0};return o.createElement("div",{key:t,style:n},e.buchar&&o.createElement("span",null,parseInt(e.buchar)?e.buchar+".":e.buchar,"  "),!e.runs&&o.createElement("br",null),e.runs&&e.runs.map((function(e,r){var n,i={letterSpacing:e.wordSpace?e.wordSpace+"px":0,verticalAlign:e.baseline?e.baseline+"px":0,textDecoration:e.underLine?a.toUnderLine(e.underLine):"none",strikeThrough:e.strikeThrough?"":"none",fontWeight:e.bold?"bolder":"normal",fontStyle:e.italic?"italic":"normal"},s=e.text?e.text:"";if(null===(n=e.text)||void 0===n?void 0:n.includes("\t")){for(var c=[],u=0;u<e.text.length;u+=1)"\t"===e.text[u]?c.push(o.createElement("span",{key:"tab"+u},"\t")):c.push(o.createElement("span",{key:"tab"+u,style:{fontFamily:"等线"}},e.text[u]));return o.createElement("pre",{key:s+t+r,style:{margin:"0",display:"inline"}},c)}return"sngStrike"===e.strikeThrough?o.createElement("span",{key:s+t+r,style:i},o.createElement("s",null,e.text)):"br"===e.runType?o.createElement("br",null):"text"===e.runType?o.createElement("span",{key:s+t+r,style:i},e.text):o.createElement("span",{key:s+t+r})})))})))},t}(o.Component);t.default=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.clickHandler=function(e){this.props.changeToPage(e)},t.prototype.render=function(){var e=this,t={display:"flex",flexDirection:"column",justifyContent:"flex-start",position:"absolute",right:this.props.isExtend?0:"-20%",width:"20%",overflow:"auto",transition:"1s",top:0,bottom:0,zIndex:"3",borderLeft:"1px solid #ccc",backgroundColor:"#eee"},r={display:"flex",flexDirection:"column",justifyContent:"space-around"};return o.createElement("div",{style:t,className:"ppt-preview-beauty-scroll-bar ppt-preview-sidebar"},this.props.previewList.map((function(t,n){return o.createElement("div",{className:"ppt-preview-sidebar-item ppt-event-source",key:t,style:r,onClick:function(){e.clickHandler(n)}},o.createElement("img",{className:"ppt-preview-sidebar-img",src:t,alt:"PPT略缩图"}),o.createElement("span",{className:"ppt-preview-sidebar-span"},n+1))})))},t}(o.Component);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.waiting="Waiting",e.converting="Converting",e.finished="Finished",e.fail="Fail"}(t.Status||(t.Status={})),function(e){e.packaging="Packaging",e.extracting="Extracting",e.generatingPreview="GeneratingPreview",e.mediaTranscode="MediaTranscode"}(t.CurrentStep||(t.CurrentStep={})),function(e){e.dynamic="dynamic",e.static="static"}(t.ConversionType||(t.ConversionType={}))}]))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(80),u=r(2),l=r(0),p=r(81),h=r(1),d=r(4),f=r(82),y=r(34),A=r(38),m=r(5),g=r(22),v=r(51),b=r(8),P=r(134),S=r(54),w=r(10);!function(e){e.Desktop="desktop",e.Phone="phone",e.Pad="pad",e.TV="tv"}(s=t.ScreenType||(t.ScreenType={}));var x=function(){function e(t){var r,i=this.parseAppIdentifier(t.appIdentifier),o=i.teamUUID,f=i.appUUID;if(t.deviceType&&t.screenType)this.deviceType=t.deviceType,this.screenType=t.screenType;else if(t.deviceType&&!t.screenType)this.deviceType=t.deviceType,this.screenType=t.deviceType===h.DeviceType.Desktop?s.Desktop:s.Phone;else if(!t.deviceType&&t.screenType)this.deviceType=t.screenType===s.Desktop?h.DeviceType.Desktop:h.DeviceType.Touch,this.screenType=t.screenType;else switch(c.default.deviceType){case"mouseOnly":this.deviceType=h.DeviceType.Desktop,this.screenType=s.Desktop;break;case"touchOnly":this.deviceType=h.DeviceType.Touch,this.screenType=s.Phone;break;case"hybrid":this.deviceType=h.DeviceType.Surface,this.screenType=s.Desktop}if(t.renderEngine===b.RenderEngine.SVG||this.isCanvasRenderEngineAvailable()?t.renderEngine?this.renderEngine=t.renderEngine:this.renderEngine=b.RenderEngine.Canvas:this.renderEngine=b.RenderEngine.SVG,this.region=t.region||d.environment.defaultRegion,this.pptParams=t.pptParams,void 0!==(null===(r=t.loggerOptions)||void 0===r?void 0:r.disableReportLog))throw new Error("loggserOptions.disableReportLog is deprecated. please replace it with reportDebugLogMode or reportQualityMode");this.enableReportQuality(t.loggerOptions)&&(this.qualityLoggerFactory=new v.QualityLoggerFactory(o,f)),this.whiteLoggerFactory=new v.WhiteLoggerFactory(o,f,t.loggerOptions),this.akkoApp=new l.AkkoApp({appIdentifier:t.appIdentifier,observerAdapter:new p.MobXObserverAdapter,clientVersion:d.environment.sdkVersion,enableAnimationFrame:!0,jsxFactory:u.createElement,escapeObjectFilter:u.isValidElement,reconnectionOptions:t.reconnectionOptions,netStateAdapter:e.netState,convertIdToUrl:t.urlInterrupter||function(e){return e},configsInterrupter:P.configsInterrupter,shuntApiHosts:d.environment.shuntApiHosts,onAkkoSetupFailed:t.onWhiteSetupFailed}),this.preloadDynamicPPT=!!t.preloadDynamicPPT,this.fonts=Object.freeze(n({},t.fonts)),this.handToolKey=t.handToolKey,this.fontFamily=t.fontFamily,this.urlInterrupter=t.urlInterrupter||function(e){return e},this.boundless=new h.Boundless(this.deviceType),this.plugins=this.assertPlugins(t.plugins),this.invisiblePlugins=this.assertInvisiblePlugins(t.invisiblePlugins),this.wrappedComponents=Object.freeze(t.wrappedComponents?a(t.wrappedComponents):[]),this.useMobXState=!!t.useMobXState,this.onlyCallbackRemoteStateModify=!!t.onlyCallbackRemoteStateModify,S.cursorCssInjecter.injectDefaultStyleIfNotInjectBefore()}return e.prototype.joinRoom=function(t,r){return i(this,void 0,void 0,(function(){var n,i,a,s,c;return o(this,(function(o){switch(o.label){case 0:return n=t.region||this.region,i=t.uuid,a=this.whiteLoggerFactory.createRealtimeLogger(i,n),s=this.qualityLoggerFactory&&{connection:this.qualityLoggerFactory.createQualityConnectionCommitter(i,n),disconnection:this.qualityLoggerFactory.createQualityDisconnectionCommitter(i,n),sample:this.qualityLoggerFactory.createQualitySampleCommitter(i,n)},[4,(c=new w.RoomImplement({whiteLogger:a,qualityComitters:s,region:n,boundless:this.boundless,screenType:this.screenType,renderEngine:this.renderEngine,autoResize:!t.disableAutoResize,plugins:this.plugins,invisiblePlugins:this.mergeArray(this.invisiblePlugins,this.assertInvisiblePlugins(t.invisiblePlugins)),wrappedComponents:this.mergeArray(this.wrappedComponents,t.wrappedComponents),akkoApp:this.akkoApp,preloadDynamicPPT:this.preloadDynamicPPT,userFonts:this.fonts,handToolKey:this.handToolKey,fontFamily:this.fontFamily,cameraBound:this.standardizeCameraBound(t.cameraBound),userPayload:t.userPayload,disableDeviceInputs:!!t.disableDeviceInputs,disableCameraTransform:t.disableCameraTransform,disableEraseImage:!!t.disableEraseImage,disableOthersSelectingBox:!!t.disableOthersSelectingBox,useMultiViews:t.useMultiViews,onlyCallbackRemoteStateModify:this.onlyCallbackRemoteStateModify,cursorAdapter:t.cursorAdapter,hotKeys:t.hotKeys,rejectWhenReadonlyErrorLevel:t.rejectWhenReadonlyErrorLevel,eraserRadiusCursor:new m.EraserRadiusCursor(a),urlInterrupter:this.urlInterrupter,pptParams:this.pptParams,useMobXState:this.useMobXState,floatBarOptions:A.standardizeFloatBarOptions(t.floatBar),callbacks:r})).connect({uuid:i,region:n,roomToken:t.roomToken,userPayload:t.userPayload,deviceType:this.deviceType,isWritable:e.defaultValue(t.isWritable,!0),enableDrawPoint:e.defaultValue(t.enableDrawPoint,!1),disableNewPencil:e.defaultValue(t.disableNewPencil,!0)})];case 1:return o.sent(),[2,c]}}))}))},e.prototype.isPlayable=function(e){return i(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t={region:e.region||this.region,room:e.room,roomToken:e.roomToken,slice:e.slice,beginTimestamp:e.beginTimestamp,duration:e.duration},[4,this.akkoApp.searchSlices(t)];case 1:return[2,r.sent().length>0]}}))}))},e.prototype.replayRoom=function(e,t){return i(this,void 0,void 0,(function(){var r,n,i;return o(this,(function(o){switch(o.label){case 0:if(e.mediaURL)throw new Error("mediaURL was deprecated. please to see https://github.com/netless-io/netless-combine-player");return r=e.region||this.region,n=this.whiteLoggerFactory.createPlayerLogger(r),[4,(i=new w.PlayerImplement({logger:n,region:r,boundless:this.boundless,screenType:this.screenType,renderEngine:this.renderEngine,autoResize:!e.disableAutoResize,plugins:this.plugins,invisiblePlugins:this.mergeArray(this.invisiblePlugins,this.assertInvisiblePlugins(e.invisiblePlugins)),wrappedComponents:this.mergeArray(this.wrappedComponents,e.wrappedComponents),preloadDynamicPPT:this.preloadDynamicPPT,userFonts:this.fonts,handToolKey:this.handToolKey,fontFamily:this.fontFamily,cameraBound:this.standardizeCameraBound(e.cameraBound),onlyCallbackRemoteStateModify:this.onlyCallbackRemoteStateModify,disableCameraTransform:e.disableCameraTransform,disableOthersSelectingBox:!!e.disableOthersSelectingBox,useMultiViews:e.useMultiViews,cursorAdapter:e.cursorAdapter,eraserRadiusCursor:new m.EraserRadiusCursor(n),urlInterrupter:this.urlInterrupter,pptParams:this.pptParams,useMobXState:this.useMobXState,callbacks:t})).setupReconstructor({akkoApp:this.akkoApp,region:r,slice:e.slice,room:e.room,roomToken:e.roomToken,beginTimestamp:e.beginTimestamp,duration:e.duration})];case 1:return o.sent(),[2,i]}}))}))},e.prototype.pptConverter=function(e){return new y.LegacyPPTConverterImplement(e)},e.prototype.standardizeCameraBound=function(e){return void 0===e&&(e={}),n({maxContentMode:w.contentModeScale(10),minContentMode:w.contentModeScale(.1),width:1/0,height:1/0},e)},e.prototype.enableReportQuality=function(e){var t;return(null===(t=e)||void 0===t?void 0:t.reportQualityMode)!==v.LoggerReportMode.BanReport},e.prototype.isCanvasRenderEngineAvailable=function(){var e=document.createElement("canvas");if(void 0===e)return!1;var t=e.getContext("2d");if(null===t)return!1;for(var r=0,n=["setTransform","translate","scale","drawImage","getTransform","resetTransform","clearRect","fillStyle","lineWidth","strokeStyle","lineJoin","lineCap","beginPath","moveTo","quadraticCurveTo","bezierCurveTo","stroke","lineTo","arc","fill","ellipse","setLineDash","strokeRect","closePath"];r<n.length;r++)if(!(n[r]in t))return!1;return!0},e.prototype.parseAppIdentifier=function(e){if(!/^[0-9a-zA-Z\-_]+\/[0-9a-zA-Z\-_]+$/.test(e))throw new Error("find invalid appIdentifier: "+JSON.stringify(e));var t=e.split("/");return{teamUUID:t[0],appUUID:t[1]}},e.prototype.assertPlugins=function(e){var t;return e&&(e instanceof g.PluginsImplement?t=e:console.warn("plugins is not instance of Plugins. plugins will not be working. you should call createPlugins() to create it")),t||(t=new g.PluginsImplement({})),t},e.prototype.assertInvisiblePlugins=function(e){var t=[];if(e)for(var r=0,n=e;r<n.length;r++){var i=n[r];this.isValidInvisiblePluginClass(i)&&t.push(i)}return Object.freeze(t)},e.prototype.isValidInvisiblePluginClass=function(e){if("string"!=typeof e.kind)return console.warn("invisible plugin class is invalid. expect `public static readonly kind: string = 'xxx';`"),!1;for(var t=e.prototype;null!==t;){if(t===g.InvisiblePlugin.prototype)return!0;t=Object.getPrototypeOf(t)}return console.warn("invisible plugin class is not extends InvisiblePlugin"),!1},e.prototype.mergeArray=function(e,t){var r=a(e);if(t)for(var n=0,i=t;n<i.length;n++){var o=i[n];-1===e.indexOf(o)&&r.push(o)}return r},e.defaultValue=function(e,t){return void 0===e?t:e},e.netState=new f.NetState,e}();t.WhiteWebSdk=x},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(35)),n(r(92))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),a=r(4),s=r(36),c=r(5);!function(e){e.Dynamic="dynamic",e.Static="static"}(t.PPTKind||(t.PPTKind={})),function(e){e.Waiting="Waiting",e.Converting="Converting"}(t.PPTTaskStatus||(t.PPTTaskStatus={})),function(e){e.Extracting="Extracting",e.Packaging="Packaging",e.GeneratingPreview="GeneratingPreview",e.MediaTranscode="MediaTranscode"}(t.PPTTaskStep||(t.PPTTaskStep={})),t.createPPTTask=function(e){return new u(e)};var u=function(){function e(t){this.pptPromise=null,this.uuid=t.uuid,this.region=t.region||a.environment.defaultRegion,this.kind=t.kind,this.taskToken=t.taskToken,this.checkProgressInterval=t.checkProgressInterval||e.defaultCheckProgressInterval,this.checkProgressTimeout=t.checkProgressTimeout||e.defaultCheckProgressTimeout,this.callbacks=new c.CallbacksImplement(t.callbacks)}return e.prototype.checkUtilGet=function(){var e=this;return this.pptPromise||(this.pptPromise=this.getPPTResult(),this.pptPromise.then((function(t){e.callbacks.dispatch("onTaskSuccess",(function(e){return e(t)}))})).catch((function(t){e.callbacks.dispatch("onTaskFail",(function(e){return e(t)}))}))),this.pptPromise},e.prototype.getPPTResult=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o;return i(this,(function(a){switch(a.label){case 0:e=!1,t=Date.now(),r=function(){var r,o,a,s;return i(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,n.fetchProgress(n.uuid,n.kind,n.taskToken)];case 1:switch((o=i.sent()).status){case"Waiting":case"Converting":n.updateProgress(o);break;case"Finished":return e||n.updateProgress(o),[2,{value:n.toPPT(o)}];case"Fail":throw new Error(o.failedReason)}if((a=r+n.checkProgressInterval)>=t+n.checkProgressTimeout)throw new Error("timeout");return 100===o.progress.convertedPercentage&&(e=!0),(s=a-Date.now())>0?[4,new Promise((function(e){return setTimeout(e,s)}))]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))},n=this,a.label=1;case 1:return[5,r()];case 2:return"object"==A(o=a.sent())?[2,o.value]:[3,1];case 3:return[2]}}))}))},e.prototype.updateProgress=function(e){var t=Object.freeze({status:e.status,currentStep:e.progress.currentStep,totalPageSize:e.progress.totalPageSize,convertedPageSize:e.progress.convertedPageSize,convertedPercentage:e.progress.convertedPercentage});this.callbacks.dispatch("onProgressUpdated",(function(e){return e(t)}))},e.prototype.toPPT=function(e){for(var t=e.progress.convertedFileList,r=[],n=0,i=0,o=0;o<t.length;++o){var a=t[o],s={name:""+(o+1),ppt:{src:a.conversionFileUrl,previewURL:a.preview,width:a.width,height:a.height}};n=Math.max(n,a.width),i=Math.max(i,a.height),r.push(s)}return{uuid:this.uuid,kind:this.kind,width:n,height:i,scenes:r}},e.prototype.fetchProgress=function(t,r,a){return n(this,void 0,void 0,(function(){var n,s,c,u;return i(this,(function(i){switch(i.label){case 0:return n="http://ppt-api/v5/services/conversion/tasks/"+t,s=o.stringify({type:r}),[4,e.apiFetch(n+"?"+s,{method:"get",headers:{"content-type":"application/json",token:a,region:this.region}})];case 1:return 200===(c=i.sent()).status?[3,3]:[4,c.json()];case 2:throw u=i.sent(),new Error(u.error.title);case 3:return[4,c.json()];case 4:return[2,i.sent()]}}))}))},e.apiFetch=s.fetcher.fetch("api"),e.defaultCheckProgressInterval=1500,e.defaultCheckProgressTimeout=3e5,e}();t.PPTTaskImplement=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4);t.fetcher=new n.AkkoFetcher({fetcher:window.fetch.bind(window),retryCount:2,retryLoopsCount:0,configmap:{api:{hosts:{"*":i.environment.shuntApiHosts}},"ppt-api":{hosts:{"*":i.environment.hosts.pptApi}}}})},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function o(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return window.createImageBitmap?[2,window.createImageBitmap(e)]:[2,new Promise((function(t,r){var n=URL.createObjectURL(e),i=document.createElement("img");i.addEventListener("load",(function(){URL.revokeObjectURL(i.src),t(i)})),i.src=n}))]}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCanvasImageSource=function(e){return n(this,void 0,void 0,(function(){var t,r,n,a;return i(this,(function(i){switch(i.label){case 0:t=3,r=null,n=null,a=0,i.label=1;case 1:if(!(a<t))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,fetch(e)];case 3:return r=i.sent(),[3,5];case 4:return i.sent(),n=n,[3,6];case 5:if(200===r.status)return[3,7];throw new Error("fetch "+JSON.stringify(e)+" failed with status "+r.status);case 6:return++a,[3,1];case 7:if(n)throw n;return[4,r.blob()];case 8:return[4,o(i.sent())];case 9:return[2,i.sent()]}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(93);t.FloatBar=n.FloatBar;var i=r(129);t.standardizeFloatBarOptions=i.standardizeFloatBarOptions},function(e,t,r){"use strict";function n(e){return function(t,r){var n=t.width/r.width,i=t.height/r.height,o=Math.max(n,i)*e;return Number.isNaN(o)?1:o}}function i(e,t){return function(r,n){var i=r.width/(n.width+2*t),o=r.height/(n.height+2*t),a=Math.min(i,o)*e;return Number.isNaN(a)||a===1/0?0:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.contentModeScale=function(e){return function(){return e}},t.contentModeAspectFill=function(){return n(1)},t.contentModeAspectFillScale=n,t.contentModeAspectFit=function(){return i(1,0)},t.contentModeAspectFitSpace=function(e){return i(1,e)},t.contentModeAspectFitScale=function(e){return i(e,0)};var o=function(){function e(e,t){this._cameraBound=t,this.cameraman=e.bindCameraman(this.toCameraBorder(t))}return Object.defineProperty(e.prototype,"cameraBound",{get:function(){return this._cameraBound},enumerable:!0,configurable:!0}),e.prototype.setScreenSize=function(e){this.screenSize&&this.screenSize.width===e.width&&this.screenSize.height===e.height||(this.screenSize=e,this.setCameraBound({maxContentMode:this.maxContentMode,minContentMode:this.minContentMode}))},e.prototype.setCameraBound=function(e){this._cameraBound=e,this.cameraman.setCameraBorder(this.toCameraBorder(e))},e.prototype.toCameraBorder=function(e){var t=e.damping,r=e.centerX,n=e.centerY,i=e.width,o=e.height,a=this.boundSize(i,o);this.maxContentMode=e.maxContentMode,this.minContentMode=e.minContentMode;var s=1/0,c=0;return this.screenSize&&(this.maxContentMode&&(s=this.maxContentMode(this.screenSize,a)),this.minContentMode&&(c=this.minContentMode(this.screenSize,a))),function(e){for(var t in e)void 0===e[t]&&delete e[t];return e}({damping:t,centerX:r,centerY:n,width:i,height:o,maxScale:s,minScale:c})},e.prototype.boundSize=function(e,t){return this.cameraman?{width:void 0===e?this.cameraman.cameraBorder.width:e,height:void 0===t?this.cameraman.cameraBorder.height:t}:{width:void 0===e?1/0:e,height:void 0===t?1/0:t}},e}();t.CameraBoundState=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(5),c=r(41),u=r(99),l=r(19);!function(e){e[e.Writable=0]="Writable",e[e.FollowSceneAndCamera=1]="FollowSceneAndCamera",e[e.FollowScene=2]="FollowScene",e[e.Freedom=3]="Freedom"}(a=t.ViewVisionMode||(t.ViewVisionMode={}));var p=function(e){function t(t,r,n,i,c,l,p){var h=e.call(this,c)||this;return h.didRelease=!1,h.wannaFocusScenePath=void 0,h._mode=a.Freedom,h.onSizeUpdated=function(e){var t=e.width,r=e.height;h._size=Object.freeze({width:t,height:r}),h._callbacks.dispatch("onSizeUpdated",(function(e){return e(h._size)}))},h.onCameraUpdated=function(e){h._camera=Object.freeze(o({},e)),h._callbacks.dispatch("onCameraUpdated",(function(e){return e(h._camera)}))},h.onBoundlessEvent=function(e){h.delegate.onBoundlessEvent(e)},h.onHandToolActive=function(e){h._callbacks.dispatch("onHandToolActive",(function(t){return t(e)}))},h.onCameraTransformation=function(e){h._callbacks.dispatch("onCameraTransform",(function(t){return t(e)}))},h.id=t,h.commonScreenContext=r,h.params=n,h.node=new u.ViewContextNode(h,r,i,n,h.shouldHideCursors(i)),h.node.maskFloatBar=!1,h.latestScenePath=h.node.scenePath,h.delegate=l,h._callbacks=new s.CallbacksImplement(p),h.registerScreenAndCameraman(h.node.screen,h.node.cameraman),h}return i(t,e),Object.defineProperty(t.prototype,"scenePath",{get:function(){return this.latestScenePath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusScenePath",{get:function(){return this.wannaFocusScenePath},set:function(e){var t=this;this.wannaFocusScenePath!==e&&(this.wannaFocusScenePath=e,this.shouldFollowScene(this._mode)||this.watchScenePathUpdate((function(){t.node.foucsScenePath=e})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callbacks",{get:function(){return this._callbacks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){var t=this;this.assertNotRelease(),this._mode!==e&&this.watchScenePathUpdate((function(){t._mode===a.Writable&&t.delegate.onIsWriterChanged(!1),t.shouldFollowCamera(e)&&!t.shouldFollowCamera(t._mode)&&t.node.refreshCameraToFocus(),t.shouldFollowScene(e)&&!t.shouldFollowScene(t._mode)?t.node.foucsScenePath=void 0:!t.shouldFollowScene(e)&&t.shouldFollowScene(t._mode)&&(t.node.foucsScenePath=t.wannaFocusScenePath),t.node.maskScreenObserverId=t.shouldMaskScreenObserverId(e),e===a.Writable?(t.node.maskFloatBar=!1,t.delegate.onIsWriterChanged(!0)):t.node.maskFloatBar=!0,t._mode=e}))},enumerable:!0,configurable:!0}),t.prototype.shouldMaskScreenObserverId=function(e){return e!==a.Writable},t.prototype.shouldFollowCamera=function(e){switch(e){case a.Writable:case a.FollowSceneAndCamera:return!0;default:return!1}},t.prototype.shouldHideCursors=function(e){var t="/"+e.applianceManager.getCurrentScenePath().join("/");return!(!this.wannaFocusScenePath||this.shouldFollowScene(this._mode)||t===this.wannaFocusScenePath)},t.prototype.shouldFollowScene=function(e){switch(e){case a.Writable:case a.FollowSceneAndCamera:case a.FollowScene:return!0;default:return!1}},Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.node.screen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraman",{get:function(){return this.node.cameraman},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"divElement",{get:function(){return this.state.divElement},set:function(e){this.putState({divElement:e})},enumerable:!0,configurable:!0}),t.prototype.getTargetsMap=function(e,t){return this.node.getTargetsMap(e,t)},t.prototype.cancelCurrentContinuityEvent=function(){this.cameraman.cancelCurrentContinuityEvent()},t.prototype.setCommonScreenContext=function(e){this.assertNotRelease(),this.commonScreenContext=e,this.node.setCommonScreenContext(e)},t.prototype.updateContext=function(e){var t=this,r=this.node.maskFloatBar;this.assertNotRelease(),this.node.release(),this.unregisterScreenAndCameraman(this.node.screen,this.node.cameraman),this.node=new u.ViewContextNode(this,this.commonScreenContext,e,this.params,this.shouldHideCursors(e),this.node),this.node.maskFloatBar=r,this.shouldFollowScene(this._mode)&&this.watchScenePathUpdate((function(){return t.node.foucsScenePath=t.wannaFocusScenePath})),this.registerScreenAndCameraman(this.node.screen,this.node.cameraman)},t.prototype.updateDisableBoundlessEvent=function(e){this.node.cameraman.disableBoundlessEvent=e},t.prototype.updateCursorClass=function(e){this.node.updateCursorClass(e)},t.prototype.updateCursorStyle=function(e){this.node.updateCursorStyle(e)},t.prototype.resizeScreen=function(){this.node.resizeScreen()},t.prototype.refreshRender=function(){var e=this;this.watchScenePathUpdate((function(){return e.node.refreshRender()}))},t.prototype.scenePreview=function(e,t,r,n){return this.node.scenePreview(e,t,r,n)},t.prototype.generateScreenshot=function(e,t,r){return this.node.generateScreenshot(e,t,r)},t.prototype.fillSceneSnapshot=function(e,t,r,n){this.node.fillSceneSnapshot(e,t,r,n)},t.prototype.convertToPointInWorld=function(e){var t=e.x,r=e.y;return this.node.screen.convertPointToScene(t,r)},t.prototype.fireRenderDuration=function(e){this._callbacks.dispatch("onRenderDuration",(function(t){return t(e)}))},t.prototype.release=function(){this.assertNotRelease(),this.node.release(),this.unregisterScreenAndCameraman(this.node.screen,this.node.cameraman),this.didRelease=!0,this.delegate.onRelease()},t.prototype.onStateUpdate=function(e){this.node.updateState(e)},t.prototype.registerScreenAndCameraman=function(e,t){var r=this,n=e.width,i=e.height,a=e.camera;this._size&&this._size.width===n&&this._size.height===i||(this._size=Object.freeze({width:n,height:i}),this._callbacks.dispatch("onSizeUpdated",(function(e){return e(r._size)}))),this._camera&&l.isEquals(this._camera,a)||(this._camera=Object.freeze(o({},a)),this._callbacks.dispatch("onCameraUpdated",(function(e){return e(r._camera)}))),e.addSizeUpdatedListener(this.onSizeUpdated),e.addCameraUpdatedListener(this.onCameraUpdated),t.addBoundlessEventListener(this.onBoundlessEvent),t.addHandToolActiveListener(this.onHandToolActive),t.addCameraTransformationListener(this.onCameraTransformation)},t.prototype.unregisterScreenAndCameraman=function(e,t){e.removeSizeUpdatedListener(this.onSizeUpdated),e.removeCameraUpdatedListener(this.onCameraUpdated),t.removeBoundlessEventListener(this.onBoundlessEvent),t.removeHandToolActiveListener(this.onHandToolActive),t.removeCameraTransformationListener(this.onCameraTransformation)},t.prototype.assertNotRelease=function(){if(this.didRelease)throw new Error("view did release")},t.prototype.watchScenePathUpdate=function(e){try{return e()}finally{var t=this.latestScenePath,r=this.node.scenePath;this.wannaFocusScenePath&&!this.shouldFollowScene(this._mode)&&r!==this.wannaFocusScenePath?this.node.isCursorsHidden=!0:this.node.isCursorsHidden=!1,t!==r&&(this.latestScenePath=r,this._callbacks.dispatch("onScenePathUpdated",(function(e){return e(r)})))}},t}(c.StateOwner);t.ViewImplement=p},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(42),o=function(){function e(e){this._state=Object.freeze(n({},e))}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.putState=function(e){var t=i.assign(this._state,e),r=!1;if(t){var n=this._state;this._state=Object.freeze(t),this.onStateUpdate(e,n),r=!0}return r},e}();t.StateOwner=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.assign=function(e,t){var r=n({},e),i=!1;for(var o in t){var a=t[o];e[o]!==a&&(r[o]=a,i=!0)}return i?r:null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnecting="disconnecting",e.Disconnected="disconnected"}(t.RoomPhase||(t.RoomPhase={})),function(e){e.ThrowError="throwError",e.Warn="warn",e.Ignore="ignore"}(t.RoomErrorLevel||(t.RoomErrorLevel={}))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(111)),n(r(45)),n(r(114)),n(r(47)),n(r(46))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(112),i=r(1),o=r(113),a=function(){function e(e,t,r,n){var i=this;this.paintingShape=null,this.extraSteups=0,this.lastCurveBeginIndex=0,this.points=[],this.commiter=null,this.onAddExtraSteups=function(){i.applianceManager.addBezierCurveExtraSteups(),i.extraSteups+=1,i.extraSteups>=i.bezierCurvePainter.maxExtraSteups&&i.fountain.stop()},this.applianceManager=e,this.cameraObserver=t,this.pencilOptions=r,this.bezierCurvePainter=n,this.fountain=new s(this.onAddExtraSteups)}return e.prototype.pushBoundlessMouseEvent=function(e,t){switch(this.commiter=null,e){case i.BoundlessEventKind.MouseDown:case i.BoundlessEventKind.SortedTouchStart:this.onMouseDown(t);break;case i.BoundlessEventKind.MouseMove:case i.BoundlessEventKind.SortedTouchMove:this.onMouseMove(t);break;case i.BoundlessEventKind.MouseUp:case i.BoundlessEventKind.SortedTouchEnd:case i.BoundlessEventKind.SortedTouchCancel:this.onMouseUp(t);break;case i.BoundlessEventKind.MouseLeave:this.onMouseLeave(t)}return this.commiter},e.prototype.onMouseDown=function(e){var t=e.x,r=e.y;this.paintingShape||(this.paintingShape=this.createCurveShape(t,r),this.fountain.touch())},e.prototype.onMouseMove=function(e){if(this.paintingShape){var t=e.x,r=e.y;this.points.push(this.createStrokePoint(t,r)),this.fitCurvesIfNeed(),this.fountain.touch()}else this.applianceManager.onMouseMove(e)},e.prototype.onMouseUp=function(e){var t=e.x,r=e.y;this.paintingShape&&(this.fountain.stop(),this.bezierCurvePainter.completePainting(),this.pencilOptions.shouldCancelPaintingPencil(this.paintingShape)?this.applianceManager.cancelPencilPainting(t,r):this.commiter=this.applianceManager.completePencilPainting(t,r),this.points=[],this.paintingShape=null)},e.prototype.onMouseLeave=function(e){this.paintingShape||(this.commiter=this.applianceManager.onMouseLeave(e))},e.prototype.createStrokePoint=function(e,t){var r=this.points[this.points.length-1],n=0;if(r){var i=e-r.x,o=t-r.y;n=r.distance+Math.sqrt(i*i+o*o)}return this.bezierCurvePainter.pushPoint(e,t),{x:e,y:t,distance:n}},e.prototype.createCurveShape=function(e,t){var r=this.applianceManager.createBezierCurve({x:e,y:t});return this.bezierCurvePainter.startPainting(r.identifier),this.paintingShape=r,this.extraSteups=0,this.lastCurveBeginIndex=0,r},e.prototype.fitCurvesIfNeed=function(){if(this.points.length>1){var t=e.fitCurveMaxError/this.cameraObserver.cameraState.scale,r=this.points.slice(this.lastCurveBeginIndex),n=o.fitCurve(r,Math.pow(t,2)),i=0;if(this.extraSteups>0&&(this.extraSteups-=1,i=1),1===n.length){var a=n[0].curve,s=this.points.length-this.lastCurveBeginIndex,c=this.createBezierCurve(a,0,s);this.applianceManager.updateBezierCurveTail(c,i)}else{for(var u=0,l=[],p=0,h=n;p<h.length;p++){var d=h[p],f=d.curve,y=d.beginIndex,A=d.count;l.push(this.createBezierCurve(f,y,A)),u=Math.max(u,y)}this.lastCurveBeginIndex+=u,this.applianceManager.splitBezierCurveTail(l,i)}this.points.length>e.maxSegmentsPointsCount&&(this.points.shift(),this.bezierCurvePainter.cleanAndKeepPoints(1),this.lastCurveBeginIndex-=1)}},e.prototype.createBezierCurve=function(e,t,r){var n=r-2,i=this.points[t],o=this.points[t+r-1];return{point1:e[1],point2:e[2],point3:e[3],hiddenPoints:n,cubic:this.fitCubic(t,r),distance:o.distance-i.distance}},e.prototype.fitCubic=function(e,t){var r,i=this.points[e].distance,o=this.points[e+t-1].distance-i;if(t>=1&&o>0){for(var a=[],s=0;s<t;++s){var c=this.points[e+s].distance;a.push({distance:(c-i)/o,progress:s/(t-1)})}r=n.uncmin((function(e){for(var t=0,r=0,n=a;r<n.length;r++){var i=n[r],o=i.distance,s=i.progress,c=e[0]*Math.pow(o,3)+e[1]*Math.pow(o,2)+e[2]*o+e[3]-s;t+=Math.pow(c,2)}return t}),[1,1,1,1]).solution}else r=[0,0,1,0];return r},e.fitCurveMaxError=1,e.maxSegmentsPointsCount=350,e}();t.BezierPencilAppliance=a;var s=function(){function e(t){var r=this;this.onGush=t,this.sleepTimer=null,this.gushInterval=null,this.onTick=function(){r.sleepTimer=null,r.gushInterval=setTimeout(r.onTick,e.GushInterval),r.onGush()}}return e.prototype.touch=function(){this.gushInterval&&(clearTimeout(this.gushInterval),this.gushInterval=null),this.sleepTimer&&clearTimeout(this.sleepTimer),this.sleepTimer=setTimeout(this.onTick,e.SleepDuration)},e.prototype.stop=function(){this.gushInterval&&(clearTimeout(this.gushInterval),this.gushInterval=null),this.sleepTimer&&(clearTimeout(this.sleepTimer),this.sleepTimer=null)},e.SleepDuration=68,e.GushInterval=17,e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e){this.inputs={},this.outputs={},this.previousId=0,this.pressedInputId="",this.isPressed=!1,this.output=void 0,this.outputSwitch=e}return e.prototype.createInput=function(){var e=this,t=""+(this.previousId+=1),r=Object.freeze({id:t,pushEvent:function(r){return e.pushEventByInput(t,r)}});return this.inputs[t]={input:r,isPressed:!1},r},e.prototype.removeInput=function(e){var t;(null===(t=this.inputs[e.id])||void 0===t?void 0:t.input)===e&&(delete this.inputs[e.id],(this.pressedInputId=e.id)&&(this.pressedInputId=""))},e.prototype.putOutput=function(e,t){this.outputs[e]=t},e.prototype.pushEventByInput=function(e,t){var r=this.inputs[e];switch(t.kind){case n.BoundlessEventKind.MouseDown:case n.BoundlessEventKind.SortedTouchStart:r.isPressed=!0,this.isPressed=!0,""===this.pressedInputId&&(this.pressedInputId=e,this.pushEvent(r.input,t));break;case n.BoundlessEventKind.MouseMove:case n.BoundlessEventKind.MouseLeave:case n.BoundlessEventKind.SortedTouchMove:(""===this.pressedInputId&&!r.isPressed||this.pressedInputId===e)&&this.pushEvent(r.input,t);break;case n.BoundlessEventKind.MouseUp:case n.BoundlessEventKind.SortedTouchEnd:case n.BoundlessEventKind.SortedTouchCancel:this.pressedInputId===e&&(this.pressedInputId="",this.pushEvent(r.input,t)),r.isPressed=!1,this.isPressed=!1}},e.prototype.pushEvent=function(e,t){var r,n,i,o=this.outputSwitch(e),a=this.outputs[o];if(void 0===this.output||this.output!==o){var s=null===(r=void 0!==this.output?this.outputs[this.output]:void 0)||void 0===r?void 0:r.onCancel,c=null===(n=a)||void 0===n?void 0:n.onStart;this.output=o,this.isPressed&&(s&&s(t,e),c&&c(t,e))}else null===(i=a)||void 0===i||i.onEvent(t,e)},e}();t.EventsChannel=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(1),c=r(8),u=r(23),l=function(){function e(e,t){var r=this;this.isReadonlyMode=!1,this.isOverrideWithFreedom=!1,this.overrideDisposer=null,this.previousRectangle=null,this.onCreatedView=function(e){r.previousRectangle&&r.refreshScreenRectangle(e,r.previousRectangle)},this.viewsHub=e,this.applianceManager=t,this.followerCheckingDisposer=o.reaction((function(){return r.getCurrentMode()===c.ViewMode.Follower}),(function(e){e?r.refreshCameraRectangle():r.previousRectangle=null})),e.callbacks.on("onCreatedView",this.onCreatedView)}return e.prototype.release=function(){this.overrideDisposer&&(this.overrideDisposer(),this.overrideDisposer=null),this.viewsHub.callbacks.off("onCreatedView",this.onCreatedView),this.followerCheckingDisposer()},e.prototype.setReadonlyMode=function(e){this.isReadonlyMode!==e&&(this.isReadonlyMode=e,this.overrideDisposer&&!e&&(this.overrideDisposer(),this.overrideDisposer=null))},e.prototype.overrideWithFreedom=function(e){var t=this;this.isReadonlyMode&&this.isOverrideWithFreedom!==e&&(this.isOverrideWithFreedom=e,e?this.overrideDisposer=o.when((function(){return t.applianceManager.getViewState().mode===c.ViewMode.Freedom}),(function(){t.isReadonlyMode&&t.isOverrideWithFreedom&&(t.isOverrideWithFreedom=!1),t.overrideDisposer=null})):this.overrideDisposer&&(this.overrideDisposer(),this.overrideDisposer=null))},e.prototype.getBroadcastState=function(){var e=this.applianceManager,t=a.copy(e.getBroadcasterId()),r=void 0;if(void 0!==t)for(var n=0,i=e.getMemberDisplayers();n<i.length;n++){var o=i[n];if(o.memberId===t){r=a.copy(o.information);break}}return{mode:this.getCurrentMode(),broadcasterId:t,broadcasterInformation:r}},e.prototype.getCurrentMode=function(){return this.isReadonlyMode&&this.isOverrideWithFreedom?c.ViewMode.Freedom:this.applianceManager.getViewState().mode},e.prototype.refreshCameraRectangle=function(){var e=this,t=this.applianceManager.getViewState(),r=t.originX,n=t.originY,i=t.width,o=t.height,a={originX:r,originY:n,width:i,height:o};this.previousRectangle&&this.previousRectangle.originX===r&&this.previousRectangle.originY===n&&this.previousRectangle.width===i&&this.previousRectangle.height===o||(this.viewsHub.forEach((function(t){return e.refreshScreenRectangle(t,a)})),this.previousRectangle=a)},e.prototype.refreshScreenRectangle=function(e,t){var r=e.mode;r!==u.ViewVisionMode.Writable&&r!==u.ViewVisionMode.FollowSceneAndCamera||e.screen.adaptRectangle(n(n({},t),{animationMode:s.AnimationMode.Continuous,adapterMode:s.RectangleAdapterMode.Centering}))},i([o.observable],e.prototype,"isReadonlyMode",void 0),i([o.observable],e.prototype,"isOverrideWithFreedom",void 0),i([o.action],e.prototype,"setReadonlyMode",null),i([o.action],e.prototype,"overrideWithFreedom",null),e}();t.ViewStateObserver=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(122))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WaitingFirstFrame="waitingFirstFrame",e.Playing="playing",e.Pause="pause",e.Stopped="stop",e.Ended="ended",e.Buffering="buffering"}(t.PlayerPhase||(t.PlayerPhase={})),function(e){e.Directory="directory",e.Freedom="freedom"}(t.ObserverMode||(t.ObserverMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"arrow-down-disabled":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDMgMy0zSDB6IiBmaWxsPSIjRTdFN0U3IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-down-hover":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDMgMy0zSDB6IiBmaWxsPSIjN0Q3RDdEIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-down-pressed":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDMgMy0zSDB6IiBmaWxsPSIjNUI5MDhFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-down":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDMgMy0zSDB6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-up-disabled":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDAgMyAzSDB6IiBmaWxsPSIjRTdFN0U3IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-up-hover":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDAgMyAzSDB6IiBmaWxsPSIjN0Q3RDdEIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-up-pressed":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDAgMyAzSDB6IiBmaWxsPSIjNUI5MDhFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","arrow-up":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0zIDAgMyAzSDB6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=","bold-active":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQuNSAySDhhMi41IDIuNSAwIDAgMSAwIDVINS41aDBtLTEgMGg0YTMgMyAwIDAgMSAwIDZoLTQgMG0wIDFWMiIgc3Ryb2tlPSIjMzM4MUZGIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=",bold:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQuNSAySDhhMi41IDIuNSAwIDAgMSAwIDVINS41aDBtLTEgMGg0YTMgMyAwIDAgMSAwIDZoLTQgMG0wIDFWMiIgc3Ryb2tlPSIjNDQ0RTYwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=",check:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIG9wYWNpdHk9Ii4wMSIgZD0iTTAgMGg4djhIMHoiLz48cGF0aCBkPSJNNy4xMjUgMS40ODRoLS41NDZhLjI0OS4yNDkgMCAwIDAtLjE5Ni4wOTZMMy4xNjIgNS42NiAxLjYxNyAzLjcwM2EuMjUuMjUgMCAwIDAtLjE5Ni0uMDk1SC44NzVhLjA2Mi4wNjIgMCAwIDAtLjA1LjFsMi4xNCAyLjcxMmEuMjUuMjUgMCAwIDAgLjM5NCAwbDMuODE1LTQuODM2YS4wNjIuMDYyIDAgMCAwLS4wNDktLjF6Ii8+PC9zdmc+",delete:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDZ2NmEyIDIgMCAwIDEtMiAySDZhMiAyIDAgMCAxLTItMlY2aDBtMS0yYTIgMiAwIDAgMSAyLTJoMmEyIDIgMCAwIDEgMiAyaDBNMyA0aDEwIiBzdHJva2U9IiM0NDRFNjAiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==",duplicate:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjNDQ0RTYwIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMSAySDZhMSAxIDAgMCAwLTEgMXY4YTEgMSAwIDAgMCAxIDFoNmExIDEgMCAwIDAgMS0xVjRoMGwtMi0yeiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTExIDJ2MWExIDEgMCAwIDAgMSAxaDFsLTItMnoiLz48cGF0aCBkPSJNOSAxNEg0YTEgMSAwIDAgMS0xLTFWNWgwIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L2c+PC9zdmc+","easer-cursor":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANKSURBVHgB1VTdS5NhFD/7iuXa8KNw7SK/IjBYo13soqvEITENtj9AwZiCOCTvQrNWF9rFFPGLrC1iF10Oiy68mBSUF2KB4YabhKKyTfFCc+3Lzb2ds72LsfbxCkZ04Mf7Puc5z/k95+M5AP+R8OAvCW9nZ6cyHo8/SSaTc4RQKKQ+S0JyxFtbW6va39//ZjKZmMbGRkar1TJOp5MhYtwXwBkQkgMROnyXIcmGw+FgYrHY00JkQm4cqYPCaDQ6ZrFY7i4sLPxhMDg4SJ8hTOOWRCJ5jf8npyUiEgE6eGy1Wk12u72gIZHJZDLr4eHhVnl5+YdsslL5pH1+JBIx22y2h9PT01BKpFIpLC4ufhKJRFpcxhEM6fmlSMLh8P35+XlOJCTBYBC2t7dr8fdctv+iRHjI4HK5LAMDA8BVFAoFyOVyH/6KIKsxCtVIgC188+Dg4CV2GJxGpqamYHR09AHklEWQY5d6K/gg67HD3huNRrlKpYLNzU3gIsPDw8Dn84fa29s/4zIK6Rol8xIhSUMikXB2dXXV4AHo6en5KhaLFcvLy0VJent7QaPRzKrV6le4DCEi2UTCnGgE1dXVj3Q6XY1er08drKiosK2urnbjnrFQQxBJU1PTC3y4kyxJGHEMWe2dTUSNIcLZVXl0dAStra3BiYmJOTqgVCqfu91uull3LhlFjbZv6urqiCTIElHaEsC2dq4QqXRlZeUePsrUDFtfX/eZzebbqL+GuIFks1js32OHRtHu7u5H3FMiahFViPNQYuZRO8oQVzY2NibJocFgYAKBgLuzs/M66hsQKuzELx0dHak9rKe3paXlFurrERdZEiGUGARkcAFxmSJAJ/aRkRGGnOKwdPn9/rG9vT0HXaC5uZnxer3+vr4+HdpeRVxClBWLJFuZqhF7gAjL0PGz8fFxvcfjSY0WevVUv5mZmQDWyog1/I52PyBdlxgUqUu+qMSQznVtW1ubBlP3dmlpicnA5/N5+vv770C6bhS9lEu6eHnWFP45NioJS5xxRLdNsrenKH5CusNOWH1BEeTRMTnI6MgZpYYeYhhOmS5eEX0mMhELPktGoBd/zCWSUkTAOs4QZqZ8JsokS8Kp8KWICtlwdv5P5BchBHaEIRURoQAAAABJRU5ErkJggg==","easer-cursor@2x":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII=","font-colors-active":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTQgMTEgNC05IDQgOU02IDdoNCIgc3Ryb2tlPSIjMzM4MUZGIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=","font-colors":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTQgMTEgNC05IDQgOU02IDdoNCIgc3Ryb2tlPSIjNDQ0RTYwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=","font-size-active":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIgMmg4TTYgMnYxMm02LTZ2Nm0tMi02aDQiIHN0cm9rZT0iIzMzODFGRiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+","font-size":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIgMmg4TTYgMnYxMm02LTZ2Nm0tMi02aDQiIHN0cm9rZT0iIzQ0NEU2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+","hand-grasp":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZD0iTTExLjcyIDE0LjM0NEg0Ljk3OGMtLjUxMyAwLS45MzEtLjQ3My0uOTMxLTEuMDU1IDAtLjQ0Mi0uMS0uNzQ0LS4zMzQtMS4wMUwuNDQ2IDguNzQxLjQ0NCA4Ljc0QTEuNzkgMS43OSAwIDAgMSAwIDcuNTU0VjQuODc4QzAgMy45OC42NDUgMy4yNSAxLjQzNyAzLjI1Yy4zOTQgMCAuNzU5LjE3NiAxLjAyOC40OTUuMDkyLjExLjE3LjIzMS4yMzIuMzYzVjIuMjAyYzAtLjg5OC42NDUtMS42MjggMS40MzctMS42MjguNTcgMCAxLjA1NC4zNjcgMS4yODcuOTEzLjA1OC0uMzYuMjEtLjY5Mi40NDMtLjk1NUExLjUwNiAxLjUwNiAwIDAgMSA3IDBhLjguOCAwIDAgMSAuMTc0LjAxNWMuNjMyLjA4IDEuMTQyLjU3OSAxLjM0MSAxLjI1LjItLjYyNi43My0xLjA3NCAxLjM1LTEuMDc0LjEgMCAuMTkzLjAxMy4yOC4wMjdsLjAxNS4wMDNjLjY2Mi4xNTYgMS4xNDMuODQzIDEuMTQzIDEuNjM1di4zM2MuMjQ0LS41MDQuNzE3LS44NDggMS4yNi0uODQ4LjM5NCAwIC43NTkuMTc2IDEuMDI4LjQ5NC4yNjQuMzEyLjQwOS43MjguNDA5IDEuMTd2Mi45NGMwIC4zNTItLjAzOC42ODYtLjExNC45OTNsLTEuMTM4IDUuMjEtLjAwMS4wMDRhMy41MyAzLjUzIDAgMCAwLS4wOTYuODQxdi4yOTljMCAuNTgyLS40MTcgMS4wNTUtLjkzIDEuMDU1eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xLjAyNCA4LjM5OSAzLjE1MiAzLjQxMi4wMDIuMDAyYy4zMi4zNjMuNDY4LjguNDY4IDEuMzc0IDAgLjI0OC4xODUuNDU3LjQwNC40NTdoNi41MDdjLjIxOCAwIC40MDMtLjIxLjQwMy0uNDU3VjEyLjljMC0uMzQuMDM3LS42NjIuMTEtLjk1OWwxLjA5OC01LjAyNlY2LjkxYTMuMzcgMy4zNyAwIDAgMCAuMDkzLS44MTJWMy4yNjJjMC0uNTg2LS4zOTEtMS4wNDUtLjg5MS0xLjA0NS0uNDkyIDAtLjg5MS40NTMtLjg5MSAxLjAxdi42NWgtLjgyVjIuMTU1YzAtLjQ5Ni0uMjk1LS45MjYtLjcwMS0xLjAyNS0uMDY2LS4wMS0uMTMtLjAyLS4xOTEtLjAyLS40OTEgMC0uODkxLjQ1My0uODkxIDEuMDF2MS43NTdoLS44MlYyLjE5YzAtLjY1MS0uNDA4LTEuMTktLjk0OC0xLjI1NEw3LjA5Ni45MzQgNy4wODUuOTMyYy0uMDI3LS4wMDYtLjA1LS4wMDYtLjA4My0uMDA2LS41ODEgMC0xLjA1NC41MzYtMS4wNTQgMS4xOTV2MS43NTZoLS44MlYyLjUyNGMwLS41ODYtLjM5Mi0xLjA0NC0uODkxLTEuMDQ0LS40OTIgMC0uODkyLjQ1My0uODkyIDEuMDF2NS41OTJsLS44Mi0uODcyVjUuMTA2YzAtLjU4Ni0uMzkxLTEuMDQ1LS44OS0xLjA0NS0uNDkzIDAtLjg5Mi40NTMtLjg5MiAxLjAxdjIuNTgzYzAgLjI3NC4xLjUzOC4yOC43NDV6IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTUuNTY2IDYuMDgydjQuNjM2YzAgLjE5LjIyMy4zNDQuNS4zNDQuMjc2IDAgLjUtLjE1NC41LS4zNDRWNi4wODJjMC0uMTktLjIyNC0uMzQ0LS41LS4zNDQtLjI3NyAwLS41LjE1NC0uNS4zNDR6bTIuMTggMHY0LjYzNmMwIC4xOS4yMjQuMzQ0LjUuMzQ0cy41LS4xNTQuNS0uMzQ0VjYuMDgyYzAtLjE5LS4yMjQtLjM0NC0uNS0uMzQ0cy0uNS4xNTQtLjUuMzQ0em0yLjE4IDB2NC42MzZjMCAuMTkuMjI0LjM0NC41LjM0NHMuNS0uMTU0LjUtLjM0NFY2LjA4MmMwLS4xOS0uMjI0LS4zNDQtLjUtLjM0NHMtLjUuMTU0LS41LjM0NHoiIGZpbGw9IiMwMDAiLz48L2c+PC9zdmc+","hand-loosen":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZD0iTTkuMTU0IDBBMS4yMjYgMS4yMjYgMCAwIDAgOC4xMS42MDdjLS4yMDguMzQ4LS4yOTUuNzY4LS4zNDUgMS4yMzItLjEuOTI5LS4wMjUgMi4wNTgtLjAxNCAzLjA0Ni4wMDcuNTEyLjAwNCAxLjA0MS0uMDAxIDEuNTQ3YTYzLjMxIDYzLjMxIDAgMCAxLS4zNS0uOXYtLjAwM2wtLjAwMS0uMDAxYy0uMzU5LS45MjYtLjY5Mi0xLjg3LTEuMTUtMi41NjItLjIzLS4zNDYtLjQ5Ni0uNjQtLjg1LS44MDctLjM1Ni0uMTY2LS43OTItLjE2NS0xLjIwNC4wMmwtLjAwMy4wMDEtLjAwNC4wMDJjLS40LjE4Ny0uNjUuNTYzLS43MjIuOTU4LS4wNzQuMzk0LS4wMTkuODEyLjA4MiAxLjI2Mi4yMDMuOS42MTMgMS45NC44OTIgMi45Ny4yMi44MTMuNDM0IDEuNjMyLjYxMyAyLjMyMmExMy44NTUgMTMuODU1IDAgMCAwLS44NzQtLjgxNmMtLjU0My0uNDYyLTEuMTQtLjg4OS0xLjc1Ny0xLjExOS0uNjE2LS4yMy0xLjMyMy0uMjQ0LTEuODQ1LjIxOGwtLjAwNC4wMDQtLjAwNC4wMDRjLS40MS4zODQtLjYxNC44Ni0uNTYgMS4zMjMuMDUzLjQ2NC4zMDcuODcxLjY0MiAxLjI5LjY2OS44MzYgMS43MiAxLjc1MSAyLjczNCAyLjk2OCAxLjEzNSAxLjM2MiAyLjM3MiAzLjUzOCAzLjI1MSA0LjY4MWwuMTE4LjE1M2g3LjcwNGwuMDg2LS4yNzRjLjE1LS40ODIuMzE4LTEuNDQyLjU4Ny0yLjY0Mi4yNjgtMS4yLjYyNy0yLjYxIDEuMTA0LTMuODQ3LjYzNS0xLjY0NiAxLjI4NS0zLjE5NCAxLjU3Ny00LjQyMy4xNDctLjYxNC4yMTQtMS4xNTEuMDk1LTEuNjI2YTEuMzA2IDEuMzA2IDAgMCAwLTEuMDQ4LS45NmMtLjQ2Ny0uMDg4LS45MS4xMi0xLjIyLjQzNC0uMzEuMzE2LS41NDYuNzM2LS43NjUgMS4yMDctLjE3LjM2NS0uMzI3Ljc2NS0uNDgxIDEuMTY2bC0uMDEtMS43MzRjLS4wMDQtMS4wMDcuMDU5LTIuMTM2LS4wMTctMy4wNDQtLjAzOC0uNDU1LS4xMDMtLjg1NS0uMjcyLTEuMTkxLS4xNjUtLjMyNy0uNTI0LS42LS45MjUtLjU4NWExLjE4IDEuMTggMCAwIDAtLjk2OS40NmMtLjIyMy4yODUtLjM1NC42MzYtLjQ1OSAxLjAyMy0uMjEuNzczLS4zMDIgMS43MDktLjQ0MyAyLjQ4bC0uMTk1IDEuMDkyYTQ1Ljg3NCA0NS44NzQgMCAwIDEtLjEzNi0xLjE4N2MtLjA5NC0uOTM3LS4xNi0yLjA1NS0uMzU2LTIuOTctLjA5Ny0uNDU3LS4yMjItLjg2Ni0uNDM1LTEuMTk5LS4yMTQtLjMzMi0uNTgyLS41OTctMS4wMS0uNTc5aC4wM0w5LjE1NSAweiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik05LjE1Ljc4NGguMDQ5Yy4xMzItLjAwNS4xOTUuMDMuMzE3LjIyLjEyMy4xOTIuMjQxLjUyOC4zMjkuOTM5LjE3NS44Mi4yNDUgMS45MjQuMzQyIDIuODg0LjIxMiAyLjEwOC41MTQgMy42MzUuNTE0IDMuNjM1bC43Ny0uMDEzcy4yODctMS43NjMuNTk4LTMuNDYzYy4xNS0uODIuMjQ3LTEuNzQ2LjQyOS0yLjQxNy4wOS0uMzM1LjIwNy0uNi4zMTktLjc0My4xMTItLjE0Mi4xNjktLjE3NC4zMTktLjE2M2wuMDMuMDAyLjAyOC0uMDAyYy4xMi0uMDA5LjExNi0uMDEuMi4xNTYuMDg0LjE2Ny4xNTcuNDk1LjE5MS45MDMuMDY4LjgxNS4wMSAxLjk0Mi4wMTUgMi45ODNsLjAxOSAzLjcwNS43NDUuMTY4Yy40NTUtLjk0OC44MTktMi4xMTIgMS4yMjEtMi45NzguMjAxLS40MzMuNDE1LS43ODcuNjEzLS45ODguMTk3LS4yLjMyMy0uMjUuNTE2LS4yMTNoLjAwNGwuMDA1LjAwMmMuMjk5LjA1MS4zNi4xMjcuNDI0LjM3OC4wNjMuMjUuMDM1LjY5Ny0uMDk3IDEuMjU0LS4yNjUgMS4xMTUtLjkwNyAyLjY2NC0xLjU0NiA0LjMyMi0uNTAyIDEuMy0uODY2IDIuNzQtMS4xMzggMy45NTctLjIyLjk4My0uMzg3IDEuODM0LS40OTkgMi4zMDRINy4xNDRjLS44MDItMS4wOS0xLjk5Ny0zLjE2LTMuMTU3LTQuNTUyLTEuMDYtMS4yNzEtMi4xMzYtMi4yMi0yLjcyNC0yLjk1Ni0uMjk0LS4zNjgtLjQ1LS42NzMtLjQ3Ni0uODktLjAyNS0uMjE1LjAyNi0uMzg2LjMxMi0uNjU2LjI3LS4yMzcuNTgyLS4yNDMgMS4wNDktLjA2OS40NjcuMTc1IDEuMDE4LjU1MiAxLjUyNC45ODJhMTUuODggMTUuODggMCAwIDEgMS44NDcgMS45MDRsLjY4Ny0uMzRzLS41MDQtMi4wMS0xLjAxLTMuODcyQzQuOTAzIDYuMDggNC40OTQgNS4wMyA0LjMxNCA0LjIzYy0uMDktLjQtLjExNi0uNzMzLS4wNzctLjk0Ny4wNC0uMjEzLjA5Ny0uMzAyLjI4My0uMzkuMjQ4LS4xMS4zODgtLjA5OC41NDctLjAyNC4xNTkuMDc0LjM0NC4yNTEuNTI5LjUzLjM2OC41NTcuNzEgMS40NzYgMS4wNzMgMi40MTJsLS4wMDItLjAwNGMuMzcuOTgzIDEuMDc4IDIuNzE0IDEuMDc4IDIuNzE0bC43NTUtLjEzN3MuMDU1LTEuOTEuMDM2LTMuNTA5Yy0uMDEyLTEuMDE4LS4wNzgtMi4xMzYuMDEtMi45NTIuMDQzLS40MDguMTMxLS43MzUuMjM4LS45MTUuMTA3LS4xNzkuMTctLjIyNS4zNjctLjIyNHoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNNy43MjMgMTAuOHY0LjY5MmMwIC4xOTIuMjIzLjM0OC41LjM0OC4yNzYgMCAuNS0uMTU2LjUtLjM0OFYxMC44YzAtLjE5Mi0uMjI0LS4zNDgtLjUtLjM0OC0uMjc3IDAtLjUuMTU2LS41LjM0OHptMi4yMDYgMHY0LjY5MmMwIC4xOTIuMjI0LjM0OC41LjM0OHMuNS0uMTU2LjUtLjM0OFYxMC44YzAtLjE5Mi0uMjI0LS4zNDgtLjUtLjM0OHMtLjUuMTU2LS41LjM0OHptMi4yMDYgMHY0LjY5MmMwIC4xOTIuMjI0LjM0OC41LjM0OC4yNzcgMCAuNS0uMTU2LjUtLjM0OFYxMC44YzAtLjE5Mi0uMjIzLS4zNDgtLjUtLjM0OC0uMjc2IDAtLjUuMTU2LS41LjM0OHoiIGZpbGw9IiMwMDAiLz48L2c+PC9zdmc+","italic-active":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcgMTQgOSAyTTUgMTRoNE03IDJoNCIgc3Ryb2tlPSIjMzM4MUZGIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=",italic:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcgMTQgOSAyTTUgMTRoNE03IDJoNCIgc3Ryb2tlPSIjNDQ0RTYwIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=","laser-pointer-cursor":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGZpbHRlciB4PSItMTIwJSIgeT0iLTEyMCUiIHdpZHRoPSIzNDAlIiBoZWlnaHQ9IjM0MCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImEiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjQiIGluPSJTb3VyY2VHcmFwaGljIi8+PC9maWx0ZXI+PC9kZWZzPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkgOSkiIGZpbGw9IiNGRjAxMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGNpcmNsZSBmaWx0ZXI9InVybCgjYSkiIGN4PSI1IiBjeT0iNSIgcj0iNSIvPjxwYXRoIGQ9Ik01IDhhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2em0wLTEuNzE0YTEuMjg2IDEuMjg2IDAgMSAxIDAtMi41NzIgMS4yODYgMS4yODYgMCAwIDEgMCAyLjU3MnoiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvZz48L3N2Zz4=","layer-pressed":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTE2IDEwLTYgNCA2IDQgNi00em0tNiA4IDYgNCA2LTQiIHN0cm9rZT0iIzMzODFGRiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+",layer:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTE2IDEwLTYgNCA2IDQgNi00em0tNiA4IDYgNCA2LTQiIHN0cm9rZT0iIzQ0NEU2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+","line-through-active":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQgOGg4bS0xLTNhMyAzIDAgMCAwLTMtM2gtLjkzOEEyLjY0IDIuNjQgMCAwIDAgNC41IDRhMi41NyAyLjU3IDAgMCAwIDEuMzQ0IDIuOTIybDQuMzEyIDIuMTU2QTIuNTcgMi41NyAwIDAgMSAxMS41IDEyYTIuNjQgMi42NCAwIDAgMS0yLjU2MiAySDdhMyAzIDAgMCAxLTMtM2gwIiBzdHJva2U9IiMzMzgxRkYiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==","line-through":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQgOGg4bS0xLTNhMyAzIDAgMCAwLTMtM2gtLjkzOEEyLjY0IDIuNjQgMCAwIDAgNC41IDRhMi41NyAyLjU3IDAgMCAwIDEuMzQ0IDIuOTIybDQuMzEyIDIuMTU2QTIuNTcgMi41NyAwIDAgMSAxMS41IDEyYTIuNjQgMi42NCAwIDAgMS0yLjU2MiAySDdhMyAzIDAgMCAxLTMtM2gwIiBzdHJva2U9IiM0NDRFNjAiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==","lock-hover":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgb3BhY2l0eT0iLjAxIiBkPSJNMCAwaDE2djE2SDB6Ii8+PHBhdGggZD0iTTEzIDcuMjVoLTEuMDYzdi0zLjVhMiAyIDAgMCAwLTItMkg2LjA2M2EyIDIgMCAwIDAtMiAydjMuNUgzYS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWgxMGEuNS41IDAgMCAwIC41LS41di02YS41LjUgMCAwIDAtLjUtLjV6bS00LjU2MyAzLjcwM3YuODI4YS4xMjUuMTI1IDAgMCAxLS4xMjQuMTI1aC0uNjI2YS4xMjUuMTI1IDAgMCAxLS4xMjUtLjEyNXYtLjgyOEEuNzQ5Ljc0OSAwIDAgMSA4IDkuNTkzYS43NS43NSAwIDAgMSAuNDM4IDEuMzZ6bTIuMzc2LTMuNzAzSDUuMTg2di0zLjVjMC0uNDgzLjM5My0uODc1Ljg3NS0uODc1aDMuODc1Yy40ODMgMCAuODc2LjM5Mi44NzYuODc1djMuNXoiIGZpbGw9IiM3RDdEN0QiLz48L2c+PC9zdmc+","lock-new-pressed":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGZpbGw9IiM0NDRFNjAiIGN4PSIxNiIgY3k9IjE3IiByPSIxIi8+PHJlY3Qgc3Ryb2tlPSIjNDQ0RTYwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHg9IjExIiB5PSIxNCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjgiIHJ4PSIyIi8+PHBhdGggZD0iTTEzIDE0di0zYTMgMyAwIDAgMSA2IDB2MWgwbS0zIDV2MyIgc3Ryb2tlPSIjNDQ0RTYwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+","lock-new":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGZpbGw9IiM0NDRFNjAiIGN4PSIxNiIgY3k9IjE3IiByPSIxIi8+PHJlY3Qgc3Ryb2tlPSIjNDQ0RTYwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHg9IjExIiB5PSIxNCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjgiIHJ4PSIyIi8+PHBhdGggZD0iTTEzIDE0di0zYTMgMyAwIDAgMSA2IDB2MWgwbS0zIDV2MyIgc3Ryb2tlPSIjNDQ0RTYwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+","lock-pressed":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgb3BhY2l0eT0iLjAxIiBkPSJNMCAwaDE2djE2SDB6Ii8+PHBhdGggZD0iTTEzIDcuMjVoLTEuMDYzdi0zLjVhMiAyIDAgMCAwLTItMkg2LjA2M2EyIDIgMCAwIDAtMiAydjMuNUgzYS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWgxMGEuNS41IDAgMCAwIC41LS41di02YS41LjUgMCAwIDAtLjUtLjV6bS00LjU2MyAzLjcwM3YuODI4YS4xMjUuMTI1IDAgMCAxLS4xMjQuMTI1aC0uNjI2YS4xMjUuMTI1IDAgMCAxLS4xMjUtLjEyNXYtLjgyOEEuNzQ5Ljc0OSAwIDAgMSA4IDkuNTkzYS43NS43NSAwIDAgMSAuNDM4IDEuMzZ6bTIuMzc2LTMuNzAzSDUuMTg2di0zLjVjMC0uNDgzLjM5My0uODc1Ljg3NS0uODc1aDMuODc1Yy40ODMgMCAuODc2LjM5Mi44NzYuODc1djMuNXoiIGZpbGw9IiM1QjkwOEUiLz48L2c+PC9zdmc+",lock:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggb3BhY2l0eT0iLjAxIiBkPSJNMCAwaDE2djE2SDB6Ii8+PHBhdGggZD0iTTEzIDcuMjVoLTEuMDYzdi0zLjVhMiAyIDAgMCAwLTItMkg2LjA2M2EyIDIgMCAwIDAtMiAydjMuNUgzYS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWgxMGEuNS41IDAgMCAwIC41LS41di02YS41LjUgMCAwIDAtLjUtLjV6bS00LjU2MyAzLjcwM3YuODI4YS4xMjUuMTI1IDAgMCAxLS4xMjQuMTI1aC0uNjI2YS4xMjUuMTI1IDAgMCAxLS4xMjUtLjEyNXYtLjgyOEEuNzQ5Ljc0OSAwIDAgMSA4IDkuNTkzYS43NS43NSAwIDAgMSAuNDM4IDEuMzZ6bTIuMzc2LTMuNzAzSDUuMTg2di0zLjVjMC0uNDgzLjM5My0uODc1Ljg3NS0uODc1aDMuODc1Yy40ODMgMCAuODc2LjM5Mi44NzYuODc1djMuNXoiLz48L3N2Zz4=","pencil-cursor":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJ2SURBVHgB7ZXPqxJRFMfvjI4F+cqkTcrjge9B+B+0LJQ27lq4ijZprly6DaF1COKPjYRrVy0CF/aof6Baa6ChOPkLFcdMm1+dM93RafzxZuptgnfgC3ecO+dzz497JOTKNsZMp9OAoihvZFku4xp/I5dsbL/fP221Wl/D4bCKwnWn0znDd+SSDE/N6ZBgMKjJBNuKzC4dHTgQ5PF4bququn7R7XZJPB4/kSTpHcBOiQlmJ6cMpCvAcdz5ZDJhF4tF1u12v4jFYkc8z683+f1+Uq1W38K+x/AogVQ7ETF4SnB+Ho1GTxKJxDFC2u32q1KpJPh8vvVGjHK5XM4xahv+tYgRcranJrNarfay2WwKoVBIRTUajW42m70P390EOYmFrOEGdhfECEMIwur1Og+p5VOp1CP47piCOB3EXBBJAIuLRcZi7zKsSaVSEbxe70N4FEEL0AyE6VuBZEJD2wmyAkHDmoxGIwGW36ljBP2gUEXf5/wXCDZBsVjky+XyUwpCyBL0k0ai7gNp3WUVUigUvgHoWSaTaRoi2YJojk1r52q1eh2JRJ5YgUB3Pc/n83WyXRPV/A1rWrtgSAZsQL6Q3ynTI1F2QdCMqXNQEGsDMqMgrMt6ChwCaXcGYdBFjA3InELkQxBCtkcEI4riHyPFCMnlcnEKMbYzQhRi0TCKa6A76XT6wWAweD8ejz8Oh8PPcEc+9Xq9D8lkMgLv74Hugo5ALmJzlumG4+IG6BZ1dJ06wtPqN14gmza2FYljD1SljrCTsAaYpjnZFP7CmpADEel/ai4qffLiqSUKFSlEP8xfgYwwlmzyr1KYHoUtgBU4Y9D/Y78AxCeE/aWoyrkAAAAASUVORK5CYII=","pencil-cursor@2x":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg==",rotate:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjNDQ0RTYwIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTEzIDZhNiA2IDAgMSAxLTMuNzA5IDEuMjgzIi8+PHBhdGggZD0ibTEzIDYgMS40MTQgMi40NUwxMyA2bDIuNDUtMS40MTQiLz48L2c+PC9zdmc+","selector-cursor":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKeSURBVHgB3VTLi1JhFD86zlQ4ysxSXAy1GWYZzMxmYAhHagRB/QN8FLqPFq4FIQhXkS6kTQ4t2ilIKEWgSS0SmVpIm0BdaBJSaOP78XU+PXey6+saburAD+73uL/feX0H4H81GQdj7D7ilrCGFRonk3c6nXvhcJiFQiGWy+Xy/X7/WbPZ1K1KkBOsl0qlO36/n+3t7Q1hs9kYF+WC3W73MTpxc1lBmej7KuJaoVDInZ6eqsWXDw4OwGKxwPHx8Se1Wn1Wr9cjW1tbOTxi9D9bJCJHXEFslsvlR263+246nYZZptPpQK/Xg8lkSvZ6vbNGo5EgQRCLiSPhIqpoNHobo3keCARgkalUKjg5ORlGuL+/n8T6PVAqlefjYmKRdYQSsZ3P5z8aDAYVLGFarRbi8fhbhUKhx2VPEJGP3eEbfTrs4MUwr4EU49FYrVbweDy1SqXyipy95FaI7g8QXS6SyWReHx4e2ubVBc+HtTk6OjqvVqtvvF7vi0gkUiSByyyJ21BGwpswJ2Vmsxlw/0Kj0bxMJBJJl8vFPWkhGogLQoeyMhEJo2jGUzYRjcPh+Op0Oq2pVOoHkXE0SahF/w+E+3KYNEaX2pSyiSiKxeJTFPiGyyriO6FKEUgSESLp4ht4bzQaf4pFYrHYO/ysEXGNyJtjKRqM/zNNhFuf0B7vst3dXdjZ2Yn4fL4vRFwn8jaMGqYPU179LBEGf3bZcNNutwPOtScwKnCLPJ9KLMWEh7mNuIFdVsNXzbBNP+D6Ou1vwAqm8hqMWlmbzWYf4mz6HAwGzbjWwGgqrEklmucJT+UGCfG3wiPjueeNwGvB0zkAid7OMmF8CyOck/I6NJcR4KZYcM6J2vCbUGhvyQIA0gonzCEZkQud9Fcd9W/bL57cJu3lkjuNAAAAAElFTkSuQmCC","selector-cursor@2x":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg==","to-bottom-pressed":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDEwdjhtMCAwLTItMm0yIDIgMi0ybS00IDZoMTJtLTYtNGg2bS02LTRoNm0tNi00aDYiIHN0cm9rZT0iIzQ0NEU2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+","to-bottom":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDEwdjhtMCAwLTItMm0yIDIgMi0ybS00IDZoMTJtLTYtNGg2bS02LTRoNm0tNi00aDYiIHN0cm9rZT0iIzQ0NEU2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+","to-top":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDIydi04bTAgMC0yIDJtMi0yIDIgMm0tNC02aDEybS02IDRoNm0tNiA0aDZtLTYgNGg2IiBzdHJva2U9IiM0NDRFNjAiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==","underline-active":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDJ2NWE0IDQgMCAxIDEtOCAwVjJoME0zIDE0aDEwIiBzdHJva2U9IiMzMzgxRkYiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==",underline:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDJ2NWE0IDQgMCAxIDEtOCAwVjJoME0zIDE0aDEwIiBzdHJva2U9IiM0NDRFNjAiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==","unlock-new":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGZpbGw9IiMzMzgxRkYiIGN4PSIxNiIgY3k9IjE3IiByPSIxIi8+PHJlY3Qgc3Ryb2tlPSIjMzM4MUZGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHg9IjExIiB5PSIxNCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjgiIHJ4PSIyIi8+PHBhdGggZD0iTTEzIDE0di0xYTMgMyAwIDAgMSA2IDB2MWgwbS0zIDN2MyIgc3Ryb2tlPSIjMzM4MUZGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+",unlock:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGZpbGw9IiM0NDRFNjAiIGN4PSI4IiBjeT0iOSIgcj0iMSIvPjxyZWN0IHN0cm9rZT0iIzQ0NEU2MCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiB4PSIzIiB5PSI2IiB3aWR0aD0iMTAiIGhlaWdodD0iOCIgcng9IjIiLz48cGF0aCBkPSJtNS4yMDQgNC40NDcuMjYtLjk2NmEzIDMgMCAxIDEgNS43OTUgMS41NTNMMTEgNmgwTTggOXYzIiBzdHJva2U9IiM0NDRFNjAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4="}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(130);t.LoggerReportMode=n.LoggerReportMode,t.WhiteLoggerFactory=n.WhiteLoggerFactory;var i=r(133);t.QualityLoggerFactory=i.QualityLoggerFactory;var o=r(26);t.QualityKind=o.QualityKind},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=r(12)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.ClientLoggerHub=n.ClientLoggerHub},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(3),a=function(){function e(e){this.events=e.events,this.argusEncoder=new i.ArgusEncoder(e.events,e.vid),this.reporter=new o.ClientLoggerReporter(this.argusEncoder,e.reportResourceURL,e.timestampKey),this.logger=new i.DefaultLoggerHub({prefix:e.prefix,levelMask:e.printLevelMask}),this.reportLevelMaskIndex=i.LevelToIndexMap[e.reportLevelMask||"info"]}return e.prototype.commit=function(e,t){this.reportLogNode(e,{timestamp:Date.now(),logObject:n({},t)})},e.prototype.log=function(e,t,r,o){if(this.logger.log(e,t,r),i.LevelToIndexMap[t]>=this.reportLevelMaskIndex){var a={timestamp:Date.now(),logObject:n(n({},o),{level:t,message:r})};this.reportLogNode(e,a)}},e.prototype.isSupportedEvents=function(e){return e in this.events},e.prototype.reportLogNode=function(e,t){this.reporter.report(t,e).catch((function(e){console.warn(e)}))},e}();t.ClientLoggerHub=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=function(){function e(e,t,r){this.argusEncoder=e,this.resourceURL=t,this.timestampKey=r}return e.prototype.report=function(t,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){return n=this.convertToBody(t),o=this.argusEncoder.encode(r,n),e.logQueue.append(o),1===e.logQueue.length&&this.sendLog().catch((function(e){console.warn(e)})),[2]}))}))},e.prototype.sendLog=function(){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:if(!(t=e.logQueue.next))return[3,6];n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.request(t,3)];case 2:return n.sent(),[3,5];case 3:return r=n.sent(),console.warn(r),[3,5];case 4:return e.logQueue.done(),[7];case 5:return[3,7];case 6:return[3,8];case 7:return[3,0];case 8:return[2]}}))}))},e.prototype.request=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o;return i(this,(function(i){switch(i.label){case 0:r=1,i.label=1;case 1:if(!(r<=t))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,window.fetch(this.resourceURL,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})];case 3:if(!(n=i.sent()).ok)throw new Error("report log failed, request status code "+n.status);return[3,6];case 4:if(o=i.sent(),r===t)throw new Error("report log failed (with "+t+" times failed), error: "+o);return[3,5];case 5:return r++,[3,1];case 6:return[2]}}))}))},e.prototype.convertToBody=function(e){var t=e.timestamp,r=e.logObject,n={};for(var i in void 0!==this.timestampKey&&(n[this.timestampKey]=""+t),r)n[i]=""+r[i];return n},e.logQueue=new o.LogQueue,e}();t.ClientLoggerReporter=a}]))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4);t.createWhiteBasicTags=function(e,t){var r,o,a,s=function(){var e=window.__nativeTags;if("object"==A(e)&&null!==e){var t=e.nativeVersion,r=e.platform;if("string"==typeof t&&"string"==typeof r)return{nativeVersion:t,platform:r}}return null}(),c={team:e,app:t,platform:(null===(r=s)||void 0===r?void 0:r.platform)||"browser",akkoVersion:n.AkkoVersion,sdkVersion:i.environment.sdkVersion,nativeVersion:null===(o=s)||void 0===o?void 0:o.nativeVersion,os:null===(a=window.navigator)||void 0===a?void 0:a.platform};for(var u in c)void 0===c[u]&&delete c[u];return c}},function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(50);!function(e){e.Hand="cursor-hand",e.HandGrasp="cursor-hand-grasp",e.LaserPointer="cursor-laserPointer",e.Selector="cursor-selector",e.Pencil="cursor-pencil",e.Eraser="cursor-eraser",e.Rectangle="cursor-rectangle",e.Ellipse="cursor-ellipse",e.Shape="cursor-shape",e.Straight="cursor-straight",e.Arrow="cursor-arrow",e.Text="cursor-text",e.Nwse="cursor-nwse",e.Nesw="cursor-nesw",e.Ns="cursor-ns",e.Ew="cursor-ew"}(o=t.CursorNames||(t.CursorNames={}));var s=Object.freeze(((n={})[o.Hand]=Object.freeze(["url("+a.default["hand-loosen"]+") 7 7, auto;","-webkit-image-set(url("+a.default["hand-loosen"]+") 7 7, auto);"]),n[o.HandGrasp]=Object.freeze(["url("+a.default["hand-grasp"]+") 6 6, auto;","-webkit-image-set(url("+a.default["hand-grasp"]+") 6 6, auto);"]),n[o.LaserPointer]=Object.freeze(["url("+a.default["laser-pointer-cursor"]+") 14 14, auto;","-webkit-image-set(url("+a.default["laser-pointer-cursor"]+") 14 14, auto);"]),n[o.Selector]=Object.freeze(["url("+a.default["selector-cursor"]+") 5 4, auto;","-webkit-image-set(\n            url("+a.default["selector-cursor"]+") 1x,\n            url("+a.default["selector-cursor@2x"]+") 2x) 5 4, auto;"]),n[o.Pencil]=Object.freeze(["url("+a.default["pencil-cursor"]+") 2 22, auto;","-webkit-image-set(\n            url("+a.default["pencil-cursor"]+") 1x,\n            url("+a.default["pencil-cursor@2x"]+") 2x) 2 22, auto;"]),n[o.Eraser]=Object.freeze(["url("+a.default["easer-cursor"]+") 8 18, auto;","-webkit-image-set(\n            url("+a.default["easer-cursor"]+") 1x,\n            url("+a.default["easer-cursor@2x"]+") 2x) 8 18, auto;"]),n[o.Rectangle]=Object.freeze(["crosshair;"]),n[o.Ellipse]=Object.freeze(["crosshair;"]),n[o.Shape]=Object.freeze(["crosshair;"]),n[o.Straight]=Object.freeze(["crosshair;"]),n[o.Arrow]=Object.freeze(["crosshair;"]),n[o.Text]=Object.freeze(["text;"]),n[o.Nwse]=Object.freeze(["nwse-resize;"]),n[o.Nesw]=Object.freeze(["nesw-resize;"]),n[o.Ns]=Object.freeze(["ns-resize;"]),n[o.Ew]=Object.freeze(["ew-resize;"]),n)),c=function(){function e(){this.isInjected=!1}return e.prototype.injectDefaultStyleIfNotInjectBefore=function(){this.isInjected||(this.injectToDom(s),this.isInjected=!0)},e.prototype.injectCustomStyle=function(e){if(this.isInjected)throw new Error("cannot be called repeatedly, or after new WhiteWebSdk().");var t=i(i({},s),e);this.injectToDom(t),this.isInjected=!0},e.prototype.injectToDom=function(e){if(Object.keys(e).length>0){var t=document.createElement("style"),r=[];for(var n in e){var i=e[n];if(i){var o=".netless-whiteboard."+n+" {\n                        "+i.map((function(e){return"cursor: "+e})).join("")+"\n                    }";r.push(o)}}t.appendChild(document.createTextNode(r.join("")));var a=document.head;a&&a.appendChild(t)}},e}();t.cursorCssInjecter=new c,t.injectCustomStyle=function(e){t.cursorCssInjecter.injectCustomStyle(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(56),r(57),r(58),r(16),r(76);var n=r(4),i=r(3);t.autorun=i.autorun,t.reaction=i.reaction,t.WhiteVersion=n.environment.sdkVersion,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(33));var o=r(0);t.AkkoVersion=o.AkkoVersion,t.AdminObserverId=o.AdminObserverId,t.EventScope=o.EventScope,t.EventPhase=o.EventPhase;var a=r(1);t.DeviceType=a.DeviceType,t.AnimationMode=a.AnimationMode,t.CNode=a.CNode;var s=r(32);t.previewPPT=s.previewPPT;var c=r(22);t.createPlugins=c.createPlugins,t.InvisiblePlugin=c.InvisiblePlugin;var u=r(51);t.LoggerReportMode=u.LoggerReportMode;var l=r(16);t.setAsyncModuleLoadMode=l.setAsyncModuleLoadMode,t.AsyncModuleLoadMode=l.AsyncModuleLoadMode;var p=r(8);t.ViewMode=p.ViewMode,t.RenderEngine=p.RenderEngine;var h=r(135);t.isRoom=h.isRoom,t.isPlayer=h.isPlayer;var d=r(5);t.DefaultHotKeys=d.DefaultHotKeys,t.KeyboardKind=d.KeyboardKind;var f=r(34);t.createPPTTask=f.createPPTTask,t.PPTKind=f.PPTKind,t.PPTTaskStatus=f.PPTTaskStatus,t.PPTTaskStep=f.PPTTaskStep;var y=r(10);t.contentModeScale=y.contentModeScale,t.contentModeAspectFit=y.contentModeAspectFit,t.contentModeAspectFitScale=y.contentModeAspectFitScale,t.contentModeAspectFitSpace=y.contentModeAspectFitSpace,t.contentModeAspectFill=y.contentModeAspectFill,t.contentModeAspectFillScale=y.contentModeAspectFillScale,t.ViewVisionMode=y.ViewVisionMode,t.ScenePathType=y.ScenePathType,t.RoomPhase=y.RoomPhase,t.RoomErrorLevel=y.RoomErrorLevel,t.PlayerPhase=y.PlayerPhase,t.ObserverMode=y.ObserverMode,t.DisplayerConsumer=y.DisplayerConsumer,t.RoomConsumer=y.RoomConsumer,t.PlayerConsumer=y.PlayerConsumer,t.ShapeType=y.ShapeType,t.ApplianceNames=y.ApplianceNames;var A=r(54);t.injectCustomStyle=A.injectCustomStyle,t.CursorNames=A.CursorNames},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(3).configure({isolateGlobalState:!0})},function(e,t){e.exports=r("SUdx")},function(e,t){e.exports=r("HrR1")},function(e,t){e.exports=r("d+02")},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t){e.exports=r(28)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(12),o=r(7),a=r(13),s=r(16),c=r(15);t.AkkoObjectStruct=c.AkkoObjectStruct;var u=r(11);t.carryObject=u.carryObject;var l=r(12);t.isFlatObjectProxyNode=l.isFlatObjectProxyNode;var p=r(13);t.isArrayProxyNode=p.isArrayProxyNode;var h=r(7);t.isAkkoObjectProxyNode=h.isAkkoObjectProxyNode;var d=r(16);t.isHangUpObjectProxyNode=d.isHangUpObjectProxyNode;var f=r(3);t.isDisplayerNode=f.isDisplayerNode,t.getPhaseWithDisplayerNode=f.getPhaseWithDisplayerNode;var y=r(45);t.copyDisplayerNode=y.copyDisplayerNode,t.CopierMode=y.CopierMode;var A=r(46);t.copyProxyNode=A.copyProxyNode;var m=r(5);t.isProxyNode=m.isProxyNode,t.unwrapProxy=m.unwrapProxy,t.convertToProxy=m.convertToProxy;var g=r(4);t.findIdentifierWith=g.findIdentifierWith,t.ProxyKind=g.ProxyKind,t.ProxyKey=g.ProxyKey;var v=r(47);t.AkkoDisplayerHolder=v.AkkoDisplayerHolder;var b=r(48);t.ProxyObjectOperator=b.ProxyObjectOperator,t.createFlatObjectProxy=function(e,t,r){return new i.FlatObjectProxyNodeImplement(e,t,r)},t.createAkkoObjectProxy=function(e,t,r,n){return new o.AkkoObjectProxyNodeImplement(e,t,r,n)},t.createArrayProxy=function(e,t,r){return new a.ArrayProxyNodeImplement(e,t,r)},t.createHangUpObjectProxy=function(e,t,r){return new s.HangUpObjectProxyNodeImplement(e,t,r)},t.addListener=function(e,t){if(!n.isDisplayerNode(e))throw new Error("it isn't akko wrapped object");e.__proxy.addListener(t)},t.removeListener=function(e,t){if(!n.isDisplayerNode(e))throw new Error("it isn't akko wrapped object");e.__proxy.removeListener(t)}},function(e,t){e.exports=r(11)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.isDisplayerNode=function(e){return e instanceof i},t.getPhaseWithDisplayerNode=function(e){var t=e.__proxy;return t.didDispose?n.DisplayerPhase.Rejected:t.realTarget?n.DisplayerPhase.Committed:n.DisplayerPhase.Uncommitted};var i=function(e){Object.defineProperty(this,"__proxy",{value:e,writable:!1,enumerable:!1,configurable:!1})};t.DisplayerNodeImplement=i,t.addDisplayerKey=function(e,t,r){void 0===r&&(r=!0),Object.defineProperty(e,t,{enumerable:r,configurable:!0,get:function(){var e=this.__proxy,r=e.proxyRuntime.pullValue(e.displayerTarget()[t]);return e.assertAccessible(),e.touchKey(t),r}})},t.removeDisplayerKey=function(e,t){delete e[t]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),o=r(5);t.ProxyKey="__proxy",function(e){e[e.FlatObject=0]="FlatObject",e[e.AkkoObject=1]="AkkoObject",e[e.Array=2]="Array",e[e.HangUpObject=3]="HangUpObject"}(t.ProxyKind||(t.ProxyKind={})),t.findIdentifierWith=function(e){if(n.contextStack.currentNode){if(o.isProxyNode(e))return e.identifier;var r=e[t.ProxyKey];if(!o.isProxyNode(r))throw new Error("identifier not found");return r.identifier}if(i.isDisplayerNode(e))return e.__proxy.identifier;throw"object"!=A(e)?new Error("can not find identifier of "+A(e)):null===e?new Error("can not find identifier of null"):new Error("identifier not found")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(10),a=r(11),s=!1,c=n.ForwardMode.SingleForward;n.contextStack.addListener((function(e,t){if(t){var r=e.proxyRuntime.runtime;s=r.isForcesOnIllusionLine(e.mode),c=e.forwardMode}else s=!1,c=n.ForwardMode.SingleForward})),t.isProxyNode=function(e){return e instanceof u},t.convertToProxy=function(e){return"object"!=A(e)||null===e||e instanceof u?e:e[i.ProxyKey]},t.unwrapProxy=function(e){return"object"!=A(e)||null===e?e:e instanceof u?e.target():e};var u=function(){function e(e,t,r){this._didDispose=!1,this.proxyRuntime=e,this.identifier=t,s?this.illuTarget=a.carryObject(this,r):this.realTarget=a.carryObject(this,r)}return Object.defineProperty(e.prototype,"didDispose",{get:function(){return this._didDispose},enumerable:!0,configurable:!0}),e.prototype.assertAccessible=function(){if(this._didDispose)throw new Error("akko wrapped object isn't accessible")},e.prototype.reportChanged=function(e){if(this.listeners)for(var t=0,r=this.listeners;t<r.length;t++)(0,r[t])(e)},e.prototype.getValue=function(e){return this.target()[e]},e.prototype.touchKey=function(e){var t=this.proxyRuntime.observerAdapter;t&&(this.observer||(this.observer=t.create(this.getDebugName())),void 0===e?this.observer.reportObservedIteration():this.observer.reportObservedKey(e))},e.prototype.dispose=function(){this._didDispose=!0,o.currentUpdatedSection().unbindDelegate(this),this._displayer&&(this.releaseDisplayer(this._displayer),delete this._displayer,delete this.observer),delete this.listeners},e.prototype.target=function(){return s?this.illuTarget:this.realTarget},e.prototype.displayerTarget=function(){return this.illuTarget||this.realTarget},Object.defineProperty(e.prototype,"displayer",{get:function(){return this._displayer||(this._displayer=this.createDisplayer()),this._displayer},enumerable:!0,configurable:!0}),e.prototype.addListener=function(e){var t=this.listeners;t||(t=this.listeners=[]),-1===t.indexOf(e)&&t.push(e)},e.prototype.removeListener=function(e){var t=this.listeners;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1),0===t.length&&delete this.listeners}},e.prototype.toString=function(){return this.target().toString()},e.prototype.toLocaleString=function(){return this.target().toLocaleString()},e.prototype.sideTarget=function(){return c!==n.ForwardMode.DoubleForward||s?void 0:this.illuTarget},e}();t.ProxyNodeImplement=u},function(e,t){e.exports=r(6)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=r(8),s=r(15),c=r(4),u=r(5),l=r(11),p=r(10);t.isAkkoObjectProxyNode=function(e){return e instanceof h};var h=function(e){function t(t,r,n,i){var o=e.call(this,t,r,n)||this;return o.struct=i,o}return i(t,e),t.prototype.getDebugName=function(){return this.struct.classReflection.name},t.prototype.createDisplayer=function(){return new(0,this.struct.displayerNodeClass)(this)},Object.defineProperty(t.prototype,"kind",{get:function(){return c.ProxyKind.AkkoObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clazz",{get:function(){return this.struct.classReflection.clazz},enumerable:!0,configurable:!0}),t.prototype.updateDisplayer=function(e){},t.prototype.reportChanged=function(t){e.prototype.reportChanged.call(this,t);var r=this.observer;if(r)for(var n in t){var i=t[n],o=i.kind,a=i.value;r.reportChanged(n,a,o)}},t.prototype.converge=function(){var e=this.realTarget;if(e){for(var t={},r=0,n=this.struct.serializableValueProperties;r<n.length;r++){var i=n[r];i in e&&(t[i]=e[i])}Object.setPrototypeOf(t,this.struct.classReflection.clazz.prototype),this.replaceIlluTarget(t)}},t.prototype.replaceIlluTarget=function(e){var t=this.illuTarget||this.realTarget,r=l.carryObject(this,e);this.illuTarget=r;for(var n=p.currentUpdatedSection(),i=0,o=this.struct.serializableValueProperties;i<o.length;i++){var a=o[i],s=a in t,c=a in r;c&&!s?n.addProperty(this,a,r[a]):!c&&s?n.removeProperty(this,a):c&&s&&r[a]!==t[a]&&n.setProperty(this,a,r[a])}},t.prototype.getMethod=function(e){return this.target()[e]},t.prototype.touchKey=function(t){switch(this.struct.getPropertyReadableKind(t)){case s.PropertyReadableKind.ReadValue:case s.PropertyReadableKind.CanNotReadPrivateValue:e.prototype.touchKey.call(this,t)}},t.prototype.callOutside=function(e,t){var r,n,i=this;switch(this.assertAccessible(),this.struct.getMethodCallableKind(e)){case s.MethodCallableKind.NoEffects:var c=this.proxyRuntime.runtime,u=this.proxyRuntime.noEffectsIdGenerator,l={authorId:null===c.observerId?o.AdminObserverId:c.observerId,mode:a.CoreFunctionsMode.Outside,timestamp:Date.now(),identifierGenerator:u};n=c.runWithMagix(l,(function(){var r=i.target(),n=r[e],o=i.proxyRuntime.pushValues(u,t,!1);return n.apply(r,o)}));break;case s.MethodCallableKind.Modifiable:if(!this.struct.classReflection.isRootClass)throw new Error("can only call modifiable methods of trigger object");n=this.proxyRuntime.rootObject.onInvokedTriggerMethod(e,t);break;case s.MethodCallableKind.EventReceiver:throw new Error("can't invoke event receiver. you should call dispatch()");case s.MethodCallableKind.Private:throw new Error("can't invoke private method");default:(r=void 0)[e].apply(r,t)}return this.proxyRuntime.pullValue(n)},t.prototype.setValue=function(e,t){var r=this.target();if(this.struct.isValueProperty(e)){var n=r[e],i=e in r;r[e]=t,i?n!==t&&p.currentUpdatedSection().setProperty(this,e,t):p.currentUpdatedSection().addProperty(this,e,t);var o=this.sideTarget();return o&&(o[e]=t),t}return r[e]=t},t.prototype.postfix=function(e,t){var r=this.target();if(this.struct.isValueProperty(e)){var n=r[e],i=e in r,o=r[e]+=t;i?n!==o&&p.currentUpdatedSection().setProperty(this,e,o):p.currentUpdatedSection().addProperty(this,e,o);var a=this.sideTarget();return a&&(a[e]=o),o}return r[e]+=t},t.prototype.prefix=function(e,t){var r=this.target(),n=r[e];if(this.struct.isValueProperty(e)){var i=e in r,o=r[e]+=t;i?n!==o&&p.currentUpdatedSection().setProperty(this,e,o):p.currentUpdatedSection().addProperty(this,e,o);var a=this.sideTarget();a&&(a[e]=o)}else r[e]+=t;return n},t.prototype.removeKey=function(e){if(this.struct.isValueProperty(e)){var t=this.target(),r=e in t;if(r){delete t[e],p.currentUpdatedSection().removeProperty(this,e);var n=this.sideTarget();n&&delete n[e]}return r}return!1},t.prototype.releaseDisplayer=function(e){},t}(u.ProxyNodeImplement);t.AkkoObjectProxyNodeImplement=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(25);t.CoreFunctionsSwitcher=n.CoreFunctionsSwitcher,t.CoreFunctionsMode=n.CoreFunctionsMode;var i=r(42);t.createBranchRuntime=i.createBranchRuntime},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(14),o=r(1);function a(e){if("object"==A(e)&&null!==e){if(o.isProxyNode(e))return e;var t=e[o.ProxyKey];return o.isProxyNode(t)?t:void 0}}function s(e){return e instanceof n.AkkoObject?e.__proxy:e}t.findProxyNode=a,t.standardizeValue=s;var c=function(){function e(){}return e.prototype.updater=function(e){return e},e.prototype.getter=function(e,t){var r=a(e);return r?r.getValue(t):e[t]},e.prototype.caller=function(e,t,r,a){if("function"==typeof e){if(n.ClassReflectionName in e)return e[t].apply(e,r);if(s=i.classStaticMethods.findMethod(e,t))return s.apply(e,r);if("function"==typeof Function.prototype[t])return e[t].apply(e,r);throw new Error("can't call "+e.name+"."+t+", it's not supported")}var s=void 0,c=void 0;return a&&(s=a[t]),o.isProxyNode(e)?(c=e.target(),s||(s=e.getMethod(t))):(c=e,s||(s=e[t])),s.apply(c,r)},e.prototype.setter=function(e,t,r){var n=a(e),i=r;return i=s(i),n?n.setValue(t,i):e[t]=i},e.prototype.prefix=function(e,t,r){var n=a(e);return n?n.prefix(t,r):e[t]+=r},e.prototype.postfix=function(e,t,r){var n=a(e);if(n)return n.postfix(t,r);var i=e[t];return e[t]+=r,i},e.prototype.remover=function(e,t){var r=a(e);return r?r.removeKey(t):delete e[t]},e.prototype.wrapper=function(e){return"object"!=A(e)||null===e?e:e[o.ProxyKey]||e},e.prototype.unwrapper=function(e){return o.isProxyNode(e)?e.target():e},e.prototype.jsxUnwrapper=function(e){return(new i.JsxUnwrapper).unwrap(e)},e}();t.CommonCoreFunctions=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(33))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.carryObject=function(e,t){return Object.defineProperty(t,n.ProxyKey,{enumerable:!1,writable:!1,configurable:!0,value:e}),t}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),a=r(21),s=r(4);t.isFlatObjectProxyNode=function(e){return e instanceof c};var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"kind",{get:function(){return s.ProxyKind.FlatObject},enumerable:!0,configurable:!0}),t.prototype.covertToAkkoObjectProxyNode=function(e){var t=this.realTarget,r=this.illuTarget;return this.struct=this.proxyRuntime.getAkkoObjectStruct(e),this._displayer=void 0,Object.setPrototypeOf(this,o.AkkoObjectProxyNodeImplement.prototype),Object.setPrototypeOf(t,e.clazz.prototype),r&&Object.setPrototypeOf(r,e.clazz.prototype),this},t}(a.PureObjectProxyNode);t.FlatObjectProxyNodeImplement=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(10),c=r(44),u=r(4),l=r(5),p=r(11),h=r(20);t.isArrayProxyNode=function(e){return e instanceof d};var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDebugName=function(){return"Array"},t.prototype.createDisplayer=function(){return new c.ArrayDisplayerNode(this)},t.createArrayValidMethods=function(){var e,t,r;a.contextStack.addListener((function(n,i){i&&n.tools?(e=n.tools.idGenerator,t=n.coreFunctions.updater,r=n.coreFunctions.creator):(e=void 0,t=void 0,r=void 0)}));for(var n=function(t,n){return t===n?t[u.ProxyKey]:r(n,e.generate())},i={},o=function(e,r,o,a,c,l){var p=Array.prototype[e],d=o||a;i[e]=function(){for(var i=[],f=0;f<arguments.length;f++)i[f]=arguments[f];var y=this,A=y.length,m=y[u.ProxyKey],g=p.apply(y,i);if(d&&!h.enableModify(m))throw new Error("Magix is frozen, you can't call Array."+e+"()");var v=l&&l(y,i);if(o&&m.refreshLength(A,y),v)for(var b=Math.min(y.length,v.beginIndex+v.length),P=m.sideTarget(),S=s.currentUpdatedSection(),w=v.beginIndex;w<b;++w){if(a){var x=y[w];P&&(P[w]=x),S.setProperty(m,w,x)}m.touchKey(w)}return c&&m.touchKey(),d&&t(m),r?n(y,g):g}},c=0,l=a.ArrayMethodDescriptions;c<l.length;c++){var p=l[c];o(p.methodName,p.returnArray,p.lengthChanged,p.elementChanged,p.touchLength,p.pickTouchedSegment)}return Object.freeze(i)},Object.defineProperty(t.prototype,"kind",{get:function(){return u.ProxyKind.Array},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clazz",{get:function(){return Array},enumerable:!0,configurable:!0}),t.prototype.updateDisplayer=function(e){var t=this._displayer,r=e.length;t&&r&&c.ArrayDisplayerNode.refreshLength(t,r.value)},t.prototype.reportChanged=function(t){e.prototype.reportChanged.call(this,t);var r=this.observer;if(r){var n=t.length;for(var i in n&&r.reportChanged("length",n.value,n.kind),t){var o=t[i],a=o.kind,s=o.value;o.isIndex&&r.reportChanged(parseInt(i,10),s,a)}}},t.prototype.converge=function(){this.realTarget&&this.replaceIlluTarget(o(this.realTarget))},t.prototype.replaceIlluTarget=function(e){var t=this.illuTarget||this.realTarget,r=p.carryObject(this,e);this.illuTarget=r;for(var n=Math.min(t.length,r.length),i=s.currentUpdatedSection(),o=0;o<n;++o)t[o]!==r[o]&&i.setProperty(this,o,r[o]);this.refreshLength(t.length,r)},t.prototype.getMethod=function(e){return t.arrayValidMethods[e]},t.prototype.getValue=function(e){return"number"==typeof e?this.target()[e]:"length"===e?this.target().length:void 0},t.prototype.setValue=function(e,t){var r=this.target(),n=r.length;if("number"==typeof e){if(e>=0){var i=e in r&&r[e]!==t,o=r[e]=t;i&&s.currentUpdatedSection().setProperty(this,e,t);var a=this.sideTarget();return this.refreshLength(n,r),a&&(a[e]=t),o}return t}return r[e]},t.prototype.removeKey=function(e){return!1},t.prototype.prefix=function(e,t){if("number"==typeof e){var r=this.target(),n=this.sideTarget(),i=e in r,o=r.length,a=r[e],c=r[e]+=t;return i&&c!==a&&s.currentUpdatedSection().setProperty(this,e,c),this.refreshLength(o,r),n&&(n[e]=c),c}},t.prototype.postfix=function(e,t){if("number"==typeof e){var r=this.target(),n=this.sideTarget(),i=e in r,o=r.length,a=r[e],c=r[e]+=t;return i&&c!==a&&s.currentUpdatedSection().setProperty(this,e,c),this.refreshLength(o,r),n&&(n[e]=c),a}},t.prototype.releaseDisplayer=function(e){},t.prototype.refreshLength=function(e,t){if(e!==t.length){var r=this.sideTarget(),n=s.currentUpdatedSection();if(e>t.length){r&&r.splice(t.length);for(var i=t.length;i<e;++i)n.removeProperty(this,i)}else for(i=e;i<t.length;++i)r&&(r[i]=t[i]),n.addProperty(this,i,t[i]);n.setProperty(this,"length",t.length)}},t.arrayValidMethods=t.createArrayValidMethods(),t}(l.ProxyNodeImplement);t.ArrayProxyNodeImplement=d},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(18)),n(r(28)),n(r(35)),n(r(36)),n(r(37))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=r(6),c=r(2),u=r(0),l=r(8),p=r(3);!function(e){e[e.ReadValue=0]="ReadValue",e[e.ReadByGetter=1]="ReadByGetter",e[e.CanNotReadGetter=2]="CanNotReadGetter",e[e.CanNotReadPrivateValue=3]="CanNotReadPrivateValue",e[e.CanNotReadPrivateGetter=4]="CanNotReadPrivateGetter"}(o=t.PropertyReadableKind||(t.PropertyReadableKind={})),function(e){e[e.NoEffects=0]="NoEffects",e[e.Modifiable=1]="Modifiable",e[e.Private=2]="Private",e[e.EventReceiver=3]="EventReceiver"}(a=t.MethodCallableKind||(t.MethodCallableKind={}));var h=function(){function e(e){this.valuePropertiesSet={},this.classReflection=e;var t=[],r=[],n=[],i={};for(var o in e.properties){var a=e.properties[o],c=a.mode===s.ClassReflectionPropertyMode.Value,l=a.decorators.some((function(e){return e===u.noEffects})),p=a.decorators.some((function(e){return e===u.transient}));c&&(i[o]=!0,p?t.push(o):r.push(o)),a.isPublic&&(c||l)&&n.push(o)}this.transientValueProperties=Object.freeze(t),this.serializableValueProperties=Object.freeze(r),this.copyableProperties=Object.freeze(n),this.displayerNodeClass=this.createAkkoDisplayerNodeClass(e),this.valuePropertiesSet=Object.freeze(i),this.propertyKinds=this.createPropertyReadableKinds(e),this.methodKinds=this.createMethodCallableKinds(e)}return e.prototype.isValueProperty=function(e){return e in this.valuePropertiesSet},e.prototype.getPropertyReadableKind=function(e){return this.propertyKinds[e]},e.prototype.getMethodCallableKind=function(e){return this.methodKinds[e]},e.prototype.getValueOutsideFromProxyNode=function(e,t){switch(this.propertyKinds[t]){case o.ReadValue:case o.ReadByGetter:return e.proxyRuntime.pullValue(this.getValueFromProxyNode(e,t));case o.CanNotReadGetter:throw new Error("can't read property "+JSON.stringify(t)+" unless it has @noEffects");case o.CanNotReadPrivateValue:case o.CanNotReadPrivateGetter:throw new Error("can't read private property "+JSON.stringify(t));default:return}},e.prototype.getValueFromProxyNode=function(e,t){switch(e.assertAccessible(),this.propertyKinds[t]){case o.ReadValue:case o.CanNotReadPrivateValue:var r=e.displayerTarget()[t];return e.touchKey(t),r;case o.ReadByGetter:var n=e.proxyRuntime.runtime,i=e.proxyRuntime.noEffectsIdGenerator,a={authorId:null===n.observerId?c.AdminObserverId:n.observerId,mode:l.CoreFunctionsMode.Outside,timestamp:Date.now(),identifierGenerator:i};return n.runWithMagix(a,(function(){return e.target()[t]}));default:return}},e.prototype.createAkkoDisplayerNodeClass=function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(p.DisplayerNodeImplement),r=function(e){Object.defineProperty(t.prototype,e,{enumerable:!1,configurable:!1,get:function(){var t=this.__proxy,r=t.struct;return t.assertAccessible(),r.getValueOutsideFromProxyNode(t,e)}})};for(var n in e.properties)r(n);var o=function(e){t.prototype[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.__proxy.callOutside(e,t)}};for(var a in e.methods)o(a);return t},e.prototype.createPropertyReadableKinds=function(e){var t={};for(var r in e.properties){var n=e.properties[r];n.isPublic?n.mode===s.ClassReflectionPropertyMode.Value?t[r]=o.ReadValue:n.decorators.some((function(e){return e===u.noEffects}))?t[r]=o.ReadByGetter:t[r]=o.CanNotReadGetter:n.mode===s.ClassReflectionPropertyMode.Value?t[r]=o.CanNotReadPrivateValue:t[r]=o.CanNotReadPrivateGetter}return Object.freeze(t)},e.prototype.createMethodCallableKinds=function(e){var t={};for(var r in e.methods){var n=e.methods[r];n.isPublic?n.decorators.some((function(e){return u.isAkkoDecorator(e)&&u.isEventPayload(e.payload)}))?t[r]=a.EventReceiver:n.decorators.some((function(e){return e===u.noEffects}))?t[r]=a.NoEffects:t[r]=a.Modifiable:t[r]=a.Private}return Object.freeze(t)},e}();t.AkkoObjectStruct=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),a=r(21);t.isHangUpObjectProxyNode=function(e){return e instanceof s};var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectFormatId",{get:function(){return this._objectFormatId},enumerable:!0,configurable:!0}),t.prototype.setHangMetadata=function(e){if(this._version||this._objectFormatId)throw new Error("did set version");this._version=e.version,this._objectFormatId=e.objectFormatId},Object.defineProperty(t.prototype,"kind",{get:function(){return o.ProxyKind.HangUpObject},enumerable:!0,configurable:!0}),t}(a.PureObjectProxyNode);t.HangUpObjectProxyNodeImplement=s},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(23)),n(r(50)),n(r(51))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(0),o=r(27),a=r(8),s=function(){function e(e){this.observerId=n.AdminObserverId,this._hasDoubleLines=!1,this._branchRuntime=null,this.logger=e.logger,this.proxyRuntime=e.proxyRuntime,this.imageUsers=e.imageUsers,this.toolsExtra=e.toolsExtra,this.snapshotManager=e.snapshotManager}return Object.defineProperty(e,"coreFunctionsSwitcher",{get:function(){return this._coreFunctionsSwitcher||(this._coreFunctionsSwitcher=new a.CoreFunctionsSwitcher),this._coreFunctionsSwitcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDoubleLines",{get:function(){return this._hasDoubleLines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"branchRuntime",{get:function(){return this._branchRuntime},enumerable:!0,configurable:!0}),e.prototype.changeToDoubleLines=function(){this._hasDoubleLines=!0},e.prototype.forkBranchRuntime=function(){return this._branchRuntime=a.createBranchRuntime(this.logger),this._branchRuntime},e.prototype.releaseBranchRuntime=function(){this._branchRuntime&&(this._branchRuntime=null)},e.prototype.getForwardMode=function(){return!this._hasDoubleLines||this._branchRuntime?i.ForwardMode.SingleForward:i.ForwardMode.DoubleForward},e.prototype.runWithMagix=function(t,r){var n=t.authorId,a=this.getEnvironment(t.mode),s=this.getForwardMode(),c=e.coreFunctionsSwitcher.switchCoreFunctions(t.mode),u=Object.freeze({idGenerator:t.identifierGenerator,environment:a,timestamp:t.timestamp,snapshot:this.snapshotManager,extra:this.toolsExtra,functions:new o.MagixFunctionsImplement({observerId:this.observerId,environment:a,authorId:n,coreFunctions:c,roomObserver:this.proxyRuntime.roomObserver,imageUsers:this.imageUsers})}),l={mode:t.mode,coreFunctions:c,frameSection:t.frameSection,proxyRuntime:this.proxyRuntime,forwardMode:s,tools:u};return i.contextStack.runWith(l,r)},e.prototype.runWithSerialization=function(t,r){var n=this.getForwardMode(),o=e.coreFunctionsSwitcher.switchCoreFunctions(t.mode),a={mode:t.mode,coreFunctions:o,frameSection:t.frameSection,proxyRuntime:this.proxyRuntime,forwardMode:n};return i.contextStack.runWith(a,r)},e.prototype.isForcesOnIllusionLine=function(e){switch(e){case a.CoreFunctionsMode.Real:case a.CoreFunctionsMode.RealAck:return!1;case a.CoreFunctionsMode.Illusion:case a.CoreFunctionsMode.IllusionRebuild:return!0;case a.CoreFunctionsMode.Outside:return this._hasDoubleLines&&!!this._branchRuntime;default:throw new Error("invalid mode "+e)}},e.prototype.getEnvironment=function(e){switch(e){case a.CoreFunctionsMode.Illusion:case a.CoreFunctionsMode.IllusionRebuild:return i.Environment.Illusion;case a.CoreFunctionsMode.Real:case a.CoreFunctionsMode.RealAck:return i.Environment.Real;case a.CoreFunctionsMode.Outside:return i.Environment.NoEffects;default:throw new Error("invalid mode "+e)}},e}();t.Runtime=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.wrapObject=function(e,t,r){return t.constructor===Object?n.createFlatObjectProxy(e,r,t):n.createArrayProxy(e,r,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(0),o=r(8);function a(e){return n.scopeIdWith(e.identifier)===n.NoEffectScopeId}function s(){return!0}t.enableModify=s,i.contextStack.addListener((function(e,r){r&&e.tools&&e.mode===o.CoreFunctionsMode.Outside?t.enableModify=a:t.enableModify=s}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(10),c=r(3),u=r(5),l=r(11),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getDebugName=function(){return"Object"},t.prototype.createDisplayer=function(){var e=new c.DisplayerNodeImplement(this);for(var t in this.displayerTarget())c.addDisplayerKey(e,t);return e},t.prototype.updateDisplayer=function(e){var t=this._displayer;if(t)for(var r in e)switch(e[r].kind){case a.UpdateEventKind.Inserted:c.addDisplayerKey(t,r);break;case a.UpdateEventKind.Removed:c.removeDisplayerKey(t,r)}},t.prototype.reportChanged=function(t){e.prototype.reportChanged.call(this,t);var r=this.observer;if(r)for(var n in t){var i=t[n],o=i.kind,a=i.value;r.reportChanged(n,a,o)}},Object.defineProperty(t.prototype,"clazz",{get:function(){return Object},enumerable:!0,configurable:!0}),t.prototype.converge=function(){this.realTarget&&this.replaceIlluTarget(o({},this.realTarget))},t.prototype.replaceIlluTarget=function(e){var t=this.illuTarget||this.realTarget,r=l.carryObject(this,e);this.illuTarget=r;var n=s.currentUpdatedSection();for(var i in r){var o=r[i];i in t?t[i]!==o&&n.setProperty(this,i,o):n.addProperty(this,i,o)}for(var i in t)i in r||n.removeProperty(this,i)},t.prototype.getMethod=function(e){return this.target()[e]},t.prototype.setValue=function(e,t){var r=this.target(),n=this.sideTarget(),i=r[e],o=e in r;return r[e]=t,o?i!==t&&s.currentUpdatedSection().setProperty(this,e,t):s.currentUpdatedSection().addProperty(this,e,t),n&&(n[e]=t),t},t.prototype.prefix=function(e,t){var r=this.target(),n=this.sideTarget(),i=r[e],o=e in r,a=r[e]+=t;return o?i!==a&&s.currentUpdatedSection().setProperty(this,e,a):s.currentUpdatedSection().addProperty(this,e,a),n&&(n[e]=a),a},t.prototype.postfix=function(e,t){var r=this.target(),n=this.sideTarget(),i=r[e],o=e in r,a=r[e]+=t;return o?i!==a&&s.currentUpdatedSection().setProperty(this,e,a):s.currentUpdatedSection().addProperty(this,e,a),n&&(n[e]=a),i},t.prototype.removeKey=function(e){var t=this.target(),r=e in t;if(r){delete t[e];var n=this.sideTarget();s.currentUpdatedSection().removeProperty(this,e),n&&delete n[e]}return r},t.prototype.releaseDisplayer=function(e){},t}(u.ProxyNodeImplement);t.PureObjectProxyNode=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(17),o=r(1),a=r(14);t.createElement=a.createElement;var s=r(52);t.isAkkoWrappedObjectAccessible=s.isAkkoWrappedObjectAccessible,t.isInstanceOf=s.isInstanceOf,t.findClassId=s.findClassId,t.findClass=s.findClass;var c=r(1);t.findIdentifierWith=c.findIdentifierWith,t.isAkkoObjectProxyNode=c.isAkkoObjectProxyNode,t.isArrayProxyNode=c.isArrayProxyNode,t.isDisplayerNode=c.isDisplayerNode,t.isFlatObjectProxyNode=c.isFlatObjectProxyNode,t.isProxyNode=c.isProxyNode,t.createProxyManager=function(e){return void 0===e&&(e={}),new i.ProxyManagerImplement(e)},t.copy=function(e){return n.contextStack.currentNode?o.copyProxyNode(e):o.copyDisplayerNode(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(24),o=r(1),a=function(){function e(e,t){this.assertObjectFormat=function(e){if(o.isAkkoObjectProxyNode(e))return e.struct.classReflection.objectFormat},this.proxyRuntime=e,this.objectAdapter=i.createProxyObjectAdapter(t,e),this.frameSerialization=i.createProxyFrameSerialization(t,this.objectAdapter)}return e.prototype.serializeSnapshotFrame=function(e){return this.frameSerialization.serializeSnapshotFrame(e)},e.prototype.serializeActionFrame=function(e,t){return this.frameSerialization.serializeActionFrame(e,t)},e.prototype.deserializeSnapshotFrame=function(e,t,r){return this.frameSerialization.deserializeSnapshotFrame(e,t,r)},e.prototype.deserializeActionFrame=function(e,t,r,n){var i=this;return n?this.proxyRuntime.runtime.runWithSerialization(n,(function(){return i.frameSerialization.deserializeActionFrame(e,t,r)})):this.frameSerialization.deserializeActionFrame(e,t,r)},e.prototype.createSerialization=function(e){return new n.Serialization({format:e,objectAdapter:this.objectAdapter,assertObjectFormat:this.assertObjectFormat})},e}();t.ProxyFrameHandlerImplement=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(2),o=r(1),a=r(49);t.createProxyObjectAdapter=function(e,t){return new a.ProxyObjectAdapter(t,e.covertObjectFormatIdToClass)},t.createProxyFrameSerialization=function(e,t){var r=n.getClassReflection(e.rootClass),a=new i.Serialization({format:e.format,objectAdapter:t,assertObjectFormat:function(e){return o.isAkkoObjectProxyNode(e)?e.struct.classReflection.objectFormat:void 0}});return n.createFrameSerialization(a,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(26),a=r(38),s=r(39),c=r(40),u=r(41);!function(e){e[e.Illusion=0]="Illusion",e[e.IllusionRebuild=1]="IllusionRebuild",e[e.Real=2]="Real",e[e.RealAck=3]="RealAck",e[e.Outside=4]="Outside"}(n=t.CoreFunctionsMode||(t.CoreFunctionsMode={}));var l=function(){function e(){var t=this;this.illusion=e.bind(new o.IllusionCoreFunctions),this.illusionRebuild=e.bind(new a.IllusionRebuildCoreFunctions),this.real=e.bind(new s.RealCoreFunctions),this.realAck=e.bind(new c.RealAckCoreFunctions),this.outside=e.bind(new u.OutsideCoreFunctions),this.currentCoreFunctions=this.illusion,i.contextStack.addListener((function(e,r){return t.currentCoreFunctions.onContextUpdate(e,r)}))}return e.prototype.switchCoreFunctions=function(e){switch(e){case n.Illusion:this.currentCoreFunctions=this.illusion;break;case n.IllusionRebuild:this.currentCoreFunctions=this.illusionRebuild;break;case n.Real:this.currentCoreFunctions=this.real;break;case n.RealAck:this.currentCoreFunctions=this.realAck;break;case n.Outside:this.currentCoreFunctions=this.outside}return this.currentCoreFunctions},e.bind=function(e){return Object.freeze({creator:e.creator.bind(e),updater:e.updater.bind(e),wrapper:e.wrapper.bind(e),unwrapper:e.unwrapper.bind(e),jsxUnwrapper:e.jsxUnwrapper.bind(e),getter:e.getter.bind(e),setter:e.setter.bind(e),caller:e.caller.bind(e),remover:e.remover.bind(e),prefix:e.prefix.bind(e),postfix:e.postfix.bind(e),onContextUpdate:e.onContextUpdate.bind(e)})},e}();t.CoreFunctionsSwitcher=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s,c=r(0),u=r(9),l=r(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onContextUpdate=function(e,t){t?(o=e.tools&&e.tools.idGenerator,a=e.frameSection,s=e.proxyRuntime):(o=void 0,a=void 0,s=void 0)},t.prototype.creator=function(e,t){var r;if(void 0===t&&(t=o.generate()),e.constructor===Array)r=l.createArrayProxy(s,t,e);else if(e.constructor===Object)r=l.createFlatObjectProxy(s,t,e);else{var n=e.constructor[c.ClassReflectionName];if("object"!=A(n)||null===n)throw new Error("can't find __reflection");var i=s.getAkkoObjectStruct(n);r=l.createAkkoObjectProxy(s,t,e,i)}return a.addCreatedObject(r),r},t.prototype.updater=function(e){return l.isProxyNode(e)&&a.illusionUpdateProxyNode(e),e},t.prototype.setter=function(e,t,r){var n=u.findProxyNode(e),i=r;return i=u.standardizeValue(i),n?(a.illusionUpdateProxyNode(n),n.setValue(t,i)):e[t]=i},t.prototype.prefix=function(e,t,r){var n=u.findProxyNode(e);return n?(a.illusionUpdateProxyNode(n),n.prefix(t,r)):e[t]+=r},t.prototype.postfix=function(e,t,r){var n=u.findProxyNode(e);if(n)return a.illusionUpdateProxyNode(n),n.postfix(t,r);var i=e[t];return e[t]+=r,i},t.prototype.remover=function(e,t){var r=u.findProxyNode(e);return r?(a.illusionUpdateProxyNode(r),r.removeKey(t)):delete e[t]},t}(u.CommonCoreFunctions);t.IllusionCoreFunctions=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this.usersCache={},this.observerId=e.observerId,this.environment=e.environment,this.authorId=e.authorId,this.core=e.coreFunctions,this.roomObserver=e.roomObserver,this.imageUsers=e.imageUsers}return e.prototype.getAuthorId=function(){return this.environment===n.Environment.NoEffects&&this.observerId===this.authorId&&this.roomObserver.reportObservedSelfUserId(),this.authorId},e.prototype.hasUser=function(e){return this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),this.imageUsers.hasUser(e)},e.prototype.getUsersCount=function(){return this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),this.imageUsers.usersCount},e.prototype.getUser=function(e){var t;return this.imageUsers.hasUser(e)&&((t=this.usersCache[e])||(t=this.usersCache[e]=this.core.creator(this.imageUsers.user(e,!0)))),this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),t},e.prototype.getUserIds=function(){return this.userIdsCache||(this.userIdsCache=this.core.creator(this.imageUsers.userIds)),this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),this.userIdsCache},e}();t.MagixFunctionsImplement=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),a=r(2),s=r(0),c=r(29),u=r(18),l=r(30),p=r(17),h=r(31),d=r(32),f=r(1),y=function(){function e(e,t,r,i){var o=i.observerAdapter,s=i.escapeObjectFilter,c=i.jsxFactory;this.objectOperator=e,this.library=t,this.observerAdapter=o,this.escapeObjectFilter=s||function(){return!1},this.jsxFactory=c,this.roomObserver=new l.RoomObserver(o),this.noEffectsIdGenerator=a.createIdentifierGenerator(a.NoEffectScopeId),this.frameHandler=new p.ProxyFrameHandlerImplement(this,this.library),r&&r.library===this.library?this.structMap=n({},r.structMap):this.structMap={}}return Object.defineProperty(e.prototype,"runtime",{get:function(){return this._runtime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"block",{get:function(){return this.proxyBlock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootObject",{get:function(){return this._rootObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDoubleLines",{get:function(){return this._runtime.hasDoubleLines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBranch",{get:function(){return!!this._runtime.branchRuntime},enumerable:!0,configurable:!0}),e.prototype.forkBranchRuntime=function(){this._runtime.forkBranchRuntime()},e.prototype.mergeBranch=function(){var e=this._runtime;e.branchRuntime.syncTwoBranches(),e.releaseBranchRuntime()},e.prototype.reportUsersChanged=function(e){this.roomObserver.reportUsersChanged(e)},e.prototype.reportObserverIdChanged=function(e){this._runtime.observerId=e,this.roomObserver.reportSelfUserIdChanged(e)},e.prototype.createFrameSection=function(e){var t=this._runtime;t.hasDoubleLines||((new h.ProxyObjectCopier).copyProxyNode(this._rootObject.snapshotRootObject()),t.changeToDoubleLines());var r,n=t.branchRuntime;return n||(n=t.forkBranchRuntime()),e&&(r=e.takeCreatedProxyNodes()),n.createFrameSection(r)},e.prototype.setupWithParameters=function(e,t,r,n){var o=this;this.setupRuntime(n);var c=a.AdminObserverId,u=a.createIdentifierGenerator(e),l=this.pushValues(u,t,!0),h={authorId:c,mode:s.CoreFunctionsMode.Real,timestamp:r,identifierGenerator:u},d=this.runtime.runWithMagix(h,(function(){var e=o.library.rootClass;return new(e.bind.apply(e,i([void 0],l)))})).__proxy;this._rootObject=new p.ProxyRootObjectImplement(this._runtime,d,this.observerAdapter)},e.prototype.setupWithRootObject=function(e,t){if(this.setupRuntime(t),!f.isAkkoObjectProxyNode(e))throw new Error("rootObject should be AkkoObjectProxyNode");this._rootObject=new p.ProxyRootObjectImplement(this._runtime,e,this.observerAdapter)},e.prototype.setupRuntime=function(e){if(this._runtime)throw new Error("did bind runtime params");this._runtime=new u.Runtime({logger:e.logger,imageUsers:e.imageUsers,snapshotManager:e.snapshotManager,proxyRuntime:this,toolsExtra:e.toolsExtra}),this.proxyBlock=new d.ProxyBlockImplement(this._runtime,this.observerAdapter)},e.prototype.pullValue=function(e){return"object"!=A(e)||null===e?e:f.isProxyNode(e)?e.displayer:o.isBuffer(e)?e.readonly?e:e.slice():this.escapeObjectFilter(e)?e:void 0},e.prototype.pushValues=function(e,t,r){var n=[],i=new c.ProxyWrapper(this,e,r);try{for(var o=0;o<t.length;++o)n[o]=i.wrap(t[o]);return n}finally{i.complete()}},e.prototype.getAkkoObjectStruct=function(e){var t=this.structMap[e.id];return t||(t=this.structMap[e.id]=new f.AkkoObjectStruct(e)),t},e.prototype.dispose=function(){},e}();t.ProxyRuntimeImplement=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),o=r(0),a=r(1),s=r(19);function c(e,t){Object.defineProperty(e,"__identifier",{enumerable:!1,configurable:!0,value:t})}o.contextStack.addListener((function(e,t){n=t?e.coreFunctions.creator:void 0}));var u=function(){function e(e,t,r){this.proxyRuntime=e,this.identifierGenerator=t,this.banFunction=r,this.proxyNodes={},this.modifyObjects=[]}return e.prototype.complete=function(){for(var e=0,t=this.modifyObjects;e<t.length;e++)delete t[e].__identifier},e.prototype.wrap=function(e){if(this.banFunction&&"function"==typeof e)throw new Error("can't wrap function");if("object"!=A(e))return e;if(null===e)return e;if(i.isBuffer(e))return e;if(a.isDisplayerNode(e))throw new Error("can't let displayer node pass Magix border");if(e.constructor===Array)return this.wrapArray(e);if(e.constructor===Object)return this.wrapObject(e);throw new Error("can't let object of "+e.constructor.name+" pass Magix border")},e.prototype.wrapArray=function(e){var t,r=e.__identifier;if(void 0===r){c(e,r=this.identifierGenerator.generate());for(var n=(t=this.createProxyNode([],r)).target(),i=0;i<e.length;++i)n[i]=this.wrap(e[i]);this.proxyNodes[r]=t,this.modifyObjects.push(e)}else t=this.proxyNodes[r];return t},e.prototype.wrapObject=function(e){var t,r=e.__identifier;if(void 0===r){c(e,r=this.identifierGenerator.generate());for(var n=(t=this.createProxyNode({},r)).target(),i=0,o=Object.keys(e).sort();i<o.length;i++){var a=o[i];n[a]=this.wrap(e[a])}this.proxyNodes[r]=t,this.modifyObjects.push(e)}else t=this.proxyNodes[r];return t},e.prototype.createProxyNode=function(e,t){return n?n(e,t):s.wrapObject(this.proxyRuntime,e,t)},e}();t.ProxyWrapper=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){e&&(this.observer=e.create("room observer"))}return e.prototype.reportSelfUserIdChanged=function(t){this.observer&&this.observer.reportChanged(e.selfUserId,t,n.UpdateEventKind.Updated)},e.prototype.reportUsersChanged=function(t){this.observer&&this.observer.reportChanged(e.users,t,n.UpdateEventKind.Updated)},e.prototype.reportObservedSelfUserId=function(){this.observer&&this.observer.reportObservedKey(e.selfUserId)},e.prototype.reportObservedUsers=function(){this.observer&&this.observer.reportObservedKey(e.users)},e.selfUserId="userId",e.users="users",e}();t.RoomObserver=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);function i(e,t){Object.defineProperty(e,n.ProxyKey,{enumerable:!1,writable:!1,configurable:!0,value:t})}var o=function(){function e(){this.didTouchedSet={}}return e.prototype.copyProxyNode=function(e){var t=e.identifier;this.didTouchedSet[t]||(this.didTouchedSet[t]=!0,n.isAkkoObjectProxyNode(e)?this.copyAkkoObjectProxyNode(e):n.isFlatObjectProxyNode(e)?this.copyFlatObjectProxyNode(e):n.isArrayProxyNode(e)&&this.copyArrayProxyNode(e))},e.prototype.copyAkkoObjectProxyNode=function(e){var t=e.realTarget;if(t){var r={};for(var o in t){var a=Object.getOwnPropertyDescriptor(t,o);if(a&&!a.get&&!a.set){var s=t[o];n.isProxyNode(s)&&this.copyProxyNode(s),r[o]=s}}i(r,e),Object.setPrototypeOf(r,e.struct.classReflection.clazz.prototype),e.illuTarget=r}},e.prototype.copyFlatObjectProxyNode=function(e){var t=e.realTarget;if(t){var r={};for(var o in t){var a=t[o];n.isProxyNode(a)&&this.copyProxyNode(a),r[o]=a}i(r,e),e.illuTarget=r}},e.prototype.copyArrayProxyNode=function(e){var t=e.realTarget;if(t){for(var r=[],o=0;o<t.length;++o)if(o in t){var a=t[o];n.isProxyNode(a)&&this.copyProxyNode(a),r[o]=a}i(r,e),e.illuTarget=r}},e}();t.ProxyObjectCopier=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=function(){function e(e,t){this.runtime=e,this.observerAdapter=t}return e.prototype.runWithMagix=function(e,t){return this.runtime.runWithMagix(e,t)},e.prototype.runWithDisableObserve=function(e){var t=n.currentUpdatedSection();try{return t.disable=!0,e()}finally{t.disable=!1}},e.prototype.runWithContinuousUpdated=function(e){var t;return this.observerAdapter?this.observerAdapter.observeUpdate((function(){t=n.runWithUpdatedSection(e)})):t=n.runWithUpdatedSection(e),t},e}();t.ProxyBlockImplement=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=new(function(){function e(){}return e.prototype.addProperty=function(e,t,r){},e.prototype.removeProperty=function(e,t){},e.prototype.setProperty=function(e,t,r){},e.prototype.unbindDelegate=function(e){},e.prototype.callbackDelegates=function(){return{didUpdated:!1}},e}());t.currentUpdatedSection=function(){return i},t.runWithUpdatedSection=function(e){var t=i,r=new n.UpdatedSectionImplement;try{return i=r,e(),r.callbackDelegates(),{didUpdated:r.didUpdated}}finally{i=t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){this.disable=!1,this.delegates={},this.unbindsDelegated={},this.updatedObjects={},this._didUpdated=!1}return Object.defineProperty(e.prototype,"didUpdated",{get:function(){return this._didUpdated},enumerable:!0,configurable:!0}),e.prototype.callbackDelegates=function(){for(var e in this.delegates)if(e in this.unbindsDelegated)delete this.delegates[e];else{var t=this.delegates[e],r=this.updatedObjects[e];t.updateDisplayer(r)}for(var e in this.delegates)t=this.delegates[e],r=this.updatedObjects[e],t.reportChanged(r)},e.prototype.unbindDelegate=function(e){this.disable||(this.unbindsDelegated[e.identifier]=!0)},e.prototype.addProperty=function(e,t,r){if(!this.disable&&(this._didUpdated=!0,!e.didDispose)){var i=this.getBufferObject(e),o=i[t];if(o)switch(o.value=r,o.kind){case n.UpdateEventKind.Removed:o.kind=n.UpdateEventKind.Updated;break;case n.UpdateEventKind.Inserted:o.kind=n.UpdateEventKind.Inserted;break;case n.UpdateEventKind.Updated:o.kind=n.UpdateEventKind.Updated}else i[t]={kind:n.UpdateEventKind.Inserted,value:r,isIndex:"number"==typeof t}}},e.prototype.setProperty=function(e,t,r){if(!this.disable&&(this._didUpdated=!0,!e.didDispose)){var i=this.getBufferObject(e),o=i[t];if(o)switch(o.value=r,o.kind){case n.UpdateEventKind.Removed:o.kind=n.UpdateEventKind.Updated;break;case n.UpdateEventKind.Inserted:o.kind=n.UpdateEventKind.Inserted;break;case n.UpdateEventKind.Updated:o.kind=n.UpdateEventKind.Updated}else i[t]={kind:n.UpdateEventKind.Updated,value:r,isIndex:"number"==typeof t}}},e.prototype.removeProperty=function(e,t){if(!this.disable&&(this._didUpdated=!0,!e.didDispose)){var r=this.getBufferObject(e),i=r[t];if(i)switch(i.kind){case n.UpdateEventKind.Removed:break;case n.UpdateEventKind.Inserted:delete r[t];break;case n.UpdateEventKind.Updated:i.kind=n.UpdateEventKind.Removed,i.value=void 0}else r[t]={kind:n.UpdateEventKind.Removed,value:void 0,isIndex:"number"==typeof t}}},e.prototype.getBufferObject=function(e){var t=e.identifier,r=this.updatedObjects[t];return r||(this.delegates[t]=e,this.updatedObjects[t]=r={}),r},e}();t.UpdatedSectionImplement=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1);t.classStaticMethods=n.createClassStaticMethods(),t.classStaticMethods.proxyMethod(Object,"assign",(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>0){var n=t[0];n&&i.isProxyNode(n)&&(e=n)}for(var o=0;o<t.length;++o)t[o]=i.unwrapProxy(t[o]);var a=Object.assign.apply(this,t),s=a[i.ProxyKey];return e&&e!==s&&(s=e,i.carryObject(e,a)),s})),t.classStaticMethods.proxyMethod(String,"fromCodePoint",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)e[r]=i.unwrapProxy(e[r]);return String.fromCodePoint.apply(this,e)})),t.classStaticMethods.proxyMethod(String,"fromCharCode",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)e[r]=i.unwrapProxy(e[r]);return String.fromCharCode.apply(this,e)})),t.classStaticMethods.proxyMethod(Number,"isFinite",Number.isFinite),t.classStaticMethods.proxyMethod(Number,"isInteger",Number.isInteger),t.classStaticMethods.proxyMethod(Number,"isNaN",Number.isNaN),t.classStaticMethods.proxyMethod(Number,"isSafeInteger",Number.isSafeInteger),t.classStaticMethods.proxyMethod(Number,"parseFloat",Number.parseFloat),t.classStaticMethods.proxyMethod(Number,"parseInt",Number.parseInt)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0);i.contextStack.addListener((function(e,t){n=t?e.proxyRuntime.jsxFactory:void 0})),t.createElement=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!n)throw i.contextStack.currentNode?new Error("can't create JSX. you didn't set jsxFactory"):new Error("can't create JSX. maybe you called it out of Magix");return n.apply(void 0,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(1),o=function(){function e(){this.unwrappedMap={}}return e.prototype.unwrap=function(e){return i.isProxyNode(e)?this.unwrapProxyNode(e):n.isBuffer(e)?e.readonly?e:e.slice():e},e.prototype.unwrapProxyNode=function(e){if(i.isAkkoObjectProxyNode(e))return e.displayer;var t=e.identifier,r=this.unwrappedMap[t];if(!r){var n=e.target();if(i.isFlatObjectProxyNode(e))for(var o in this.unwrappedMap[t]=r={},n)r[o]=this.unwrap(n[o]);else if(i.isArrayProxyNode(e)){this.unwrappedMap[t]=r=[];for(var a=0;a<n.length;++a)r[a]=this.unwrap(n[a])}}return r},e}();t.JsxUnwrapper=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s,c=r(0),u=r(9),l=r(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onContextUpdate=function(e,t){t?(o=e.tools&&e.tools.idGenerator,a=e.frameSection,s=e.proxyRuntime):(o=void 0,a=void 0,s=void 0)},t.prototype.creator=function(e,t){void 0===t&&(t=o.generate());var r=a.illusionTakeCreatedObject(t,e);if(r)r.replaceIlluTarget(e);else if(e.constructor===Array)r=l.createArrayProxy(s,t,e);else if(e.constructor===Object)r=l.createFlatObjectProxy(s,t,e);else{var n=e.constructor[c.ClassReflectionName];if("object"!=A(n)||null===n)throw new Error("can't find __reflection");var i=s.getAkkoObjectStruct(n);r=l.createAkkoObjectProxy(s,t,e,i)}return a.addCreatedObject(r),r},t.prototype.updater=function(e){return l.isProxyNode(e)&&a.illusionUpdateProxyNode(e),e},t.prototype.setter=function(e,t,r){var n=u.findProxyNode(e),i=r;return i=u.standardizeValue(i),n?(a.illusionUpdateProxyNode(n),n.setValue(t,i)):e[t]=i},t.prototype.prefix=function(e,t,r){var n=u.findProxyNode(e);return n?(a.illusionUpdateProxyNode(n),n.prefix(t,r)):e[t]+=r},t.prototype.postfix=function(e,t,r){var n=u.findProxyNode(e);if(n)return a.illusionUpdateProxyNode(n),n.postfix(t,r);var i=e[t];return e[t]+=r,i},t.prototype.remover=function(e,t){var r=u.findProxyNode(e);return r?(a.illusionUpdateProxyNode(r),r.removeKey(t)):delete e[t]},t}(u.CommonCoreFunctions);t.IllusionRebuildCoreFunctions=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=r(0),c=r(9),u=r(1),l=s.ForwardMode.SingleForward,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onContextUpdate=function(e,t){t?(o=e.tools&&e.tools.idGenerator,a=e.proxyRuntime,l=e.forwardMode):(o=void 0,a=void 0,l=s.ForwardMode.SingleForward)},t.prototype.creator=function(e,t){var r;if(void 0===t&&(t=o.generate()),e.constructor===Array)r=u.createArrayProxy(a,t,e);else if(e.constructor===Object)r=u.createFlatObjectProxy(a,t,e);else{var n=e.constructor[s.ClassReflectionName];if("object"!=A(n)||null===n)throw new Error("can't find __reflection");var i=a.getAkkoObjectStruct(n);r=u.createAkkoObjectProxy(a,t,e,i)}return l===s.ForwardMode.DoubleForward&&r.converge(),r},t.prototype.wrapper=function(e){if("object"!=A(e)||null===e)return e;var t=e[u.ProxyKey];return t?(l===s.ForwardMode.DoubleForward&&t.converge(),t):e},t}(c.CommonCoreFunctions);t.RealCoreFunctions=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s,c=r(0),u=r(9),l=r(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onContextUpdate=function(e,t){t?(o=e.tools&&e.tools.idGenerator,a=e.frameSection,s=e.proxyRuntime):(o=void 0,a=void 0,s=void 0)},t.prototype.creator=function(e,t){void 0===t&&(t=o.generate());var r=a.realTakeCreatedObject(t,e);if(r)r.realTarget=l.carryObject(r,e);else if(e.constructor===Array)(r=l.createArrayProxy(s,t,e)).converge(),a.realUpdateProxyNode(r);else if(e.constructor===Object)(r=l.createFlatObjectProxy(s,t,e)).converge(),a.realUpdateProxyNode(r);else{var n=e.constructor[c.ClassReflectionName];if("object"!=A(n)||null===n)throw new Error("can't find __reflection");var i=s.getAkkoObjectStruct(n);(r=l.createAkkoObjectProxy(s,t,e,i)).converge(),a.realUpdateProxyNode(r)}return r},t.prototype.wrapper=function(e){if("object"!=A(e)||null===e)return e;var t=e[l.ProxyKey];return t?(t.illuTarget||(t.converge(),a.realUpdateProxyNode(t)),t):e},t.prototype.updater=function(e){return l.isProxyNode(e)&&a.realUpdateProxyNode(e),e},t.prototype.setter=function(e,t,r){var n=u.findProxyNode(e),i=r;return i=u.standardizeValue(i),n?(a.realUpdateProxyNode(n),n.setValue(t,i)):e[t]=i},t.prototype.prefix=function(e,t,r){var n=u.findProxyNode(e);return n?(a.realUpdateProxyNode(n),n.prefix(t,r)):e[t]+=r},t.prototype.postfix=function(e,t,r){var n=u.findProxyNode(e);if(n)return a.realUpdateProxyNode(n),n.postfix(t,r);var i=e[t];return e[t]+=r,i},t.prototype.remover=function(e,t){var r=u.findProxyNode(e);return r?(a.realUpdateProxyNode(r),r.removeKey(t)):delete e[t]},t}(u.CommonCoreFunctions);t.RealAckCoreFunctions=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=r(0),c=r(9),u=r(20),l=r(1);function p(e,t){if(u.enableModify(e))return!0;var r=s.getClassReflection(e.target());if(r){var n=r.properties[t];if(n&&n.isTransient)return!0}return!1}var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onContextUpdate=function(e,t){t?(o=e.tools&&e.tools.idGenerator,a=e.proxyRuntime):(o=void 0,a=void 0)},t.prototype.creator=function(e,t){var r;if(void 0===t&&(t=o.generate()),e.constructor===Array)r=l.createArrayProxy(a,t,e);else if(e.constructor===Object)r=l.createFlatObjectProxy(a,t,e);else{var n=e.constructor[s.ClassReflectionName];if("object"!=A(n)||null===n)throw new Error("can't find __reflection");var i=a.getAkkoObjectStruct(n);r=l.createAkkoObjectProxy(a,t,e,i)}return r},t.prototype.getter=function(e,t){var r=c.findProxyNode(e);if(r){var n=r.getValue(t);return r.touchKey(t),n}return e[t]},t.prototype.unwrapper=function(e){return l.isProxyNode(e)?(e.touchKey(),e.target()):e},t.prototype.setter=function(e,t,r){var n=c.findProxyNode(e),i=r;if(n&&p(n,t))return i=c.standardizeValue(i),n?n.setValue(t,i):e[t]=i;throw new Error("Magix is frozen, you can't modify anything")},t.prototype.prefix=function(e,t,r){var n=c.findProxyNode(e);if(n&&p(n,t)){var i=n.prefix(t,r);return n.touchKey(t),i}throw new Error("Magix is frozen, you can't modify anything")},t.prototype.postfix=function(e,t,r){var n=c.findProxyNode(e);if(n&&p(n,t)){var i=n.postfix(t,r);return n.touchKey(t),i}throw new Error("Magix is frozen, you can't modify anything")},t.prototype.remover=function(e,t){var r=c.findProxyNode(e);if(r&&p(r,t))return r.removeKey(t);throw new Error("Magix is frozen, you can't modify anything")},t}(c.CommonCoreFunctions);t.OutsideCoreFunctions=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(43),o=r(1);function a(e,t){return!(e===t||(Number.isNaN(e)?Number.isNaN(t):n.isBuffer(e)&&n.isBuffer(t)&&e.isEqualsTo(t)))}t.createBranchRuntime=function(e){return new s(e)};var s=function(){function e(e){this.logger=e,this.updatedProxyNodes=i.createUniteSet(),this.noConvergentRealNodes={},this.noConvergentIllusionNodes={}}return e.prototype.createFrameSection=function(e){return new c(this,this.updatedProxyNodes.createSubSet(),e)},e.prototype.syncTwoBranches=function(){for(var e in this.updatedProxyNodes.release((function(e){e.converge()})),this.noConvergentIllusionNodes){var t=this.noConvergentIllusionNodes[e];t!==this.noConvergentRealNodes[e]&&t.converge(),delete this.noConvergentIllusionNodes[e]}for(var e in this.noConvergentRealNodes)this.noConvergentRealNodes[e].converge(),delete this.noConvergentRealNodes[e]},e.prototype.isUpdatedProxyNode=function(e){return this.updatedProxyNodes.hasElement(e)},e.prototype.isNoConvergentIllusionProxyNode=function(e){return e in this.noConvergentIllusionNodes},e.prototype.isNoConvergentRealProxyNode=function(e){return e in this.noConvergentRealNodes},e.prototype.addNoConvergentIllusionProxyNode=function(e){this.logger.warn("found no convergent illusion object: "+e.identifier),this.noConvergentIllusionNodes[e.identifier]=e},e.prototype.addNoConvergentRealProxyNode=function(e){this.logger.warn("found no convergent real object: "+e.identifier),this.noConvergentRealNodes[e.identifier]=e},e}();t.BranchRuntimeImplement=s;var c=function(){function e(e,t,r){void 0===r&&(r={}),this.createdProxyNodes={},this.branch=e,this.illuUpdatedProxyNodes=t,this.realUpdatedProxyNodes={},this.legacyCreatedProxyNodes=r}return e.prototype.takeCreatedProxyNodes=function(){try{return this.createdProxyNodes}finally{this.createdProxyNodes={}}},e.prototype.illusionUpdateProxyNode=function(e){this.branch.isNoConvergentIllusionProxyNode(e.identifier)||this.illuUpdatedProxyNodes.add(e)},e.prototype.realUpdateProxyNode=function(e){this.branch.isNoConvergentRealProxyNode(e.identifier)||this.branch.isUpdatedProxyNode(e)||(this.realUpdatedProxyNodes[e.identifier]=e)},e.prototype.addCreatedObject=function(e){e.identifier in this.createdProxyNodes||(this.createdProxyNodes[e.identifier]=e),this.illuUpdatedProxyNodes.add(e)},e.prototype.illusionTakeCreatedObject=function(e,t){return this.takeCreatedObject(e,t,this.legacyCreatedProxyNodes)},e.prototype.realTakeCreatedObject=function(e,t){var r=this.takeCreatedObject(e,t,this.createdProxyNodes);return r&&!this.branch.isUpdatedProxyNode(r)&&(this.realUpdatedProxyNodes[e]=r),r},e.prototype.takeCreatedObject=function(e,t,r){var n=r[e];return n&&(delete r[e],(o.isArrayProxyNode(n)&&t.constructor!==Array||o.isFlatObjectProxyNode(n)&&t.constructor!==Object||o.isAkkoObjectProxyNode(n)&&t.constructor!==n.struct.classReflection.clazz)&&(n.dispose(),n=void 0)),n},e.prototype.completeRebuild=function(){for(var e in this.legacyCreatedProxyNodes)this.legacyCreatedProxyNodes[e].dispose(),delete this.legacyCreatedProxyNodes[e]},e.prototype.completeACK=function(){var t=this;for(var r in this.realUpdatedProxyNodes){var n=this.realUpdatedProxyNodes[r];e.isShallowEquals(n)||this.branch.addNoConvergentRealProxyNode(n),delete this.realUpdatedProxyNodes[r]}for(var r in this.illuUpdatedProxyNodes.release((function(r){r.realTarget&&!e.isShallowEquals(r)&&t.branch.addNoConvergentIllusionProxyNode(r)})),this.createdProxyNodes)this.createdProxyNodes[r].dispose(),delete this.createdProxyNodes[r]},e.isShallowEquals=function(e){var t=e.realTarget,r=e.illuTarget;if(!t||!r)return!1;switch(e.kind){case o.ProxyKind.Array:var n=t,i=r;if(n.length!==i.length)return!1;for(var s=0;s<n.length;++s)if(a(n[s],i[s]))return!1;return!0;case o.ProxyKind.FlatObject:case o.ProxyKind.HangUpObject:for(var c in t){if(!(c in r))return!1;if(a(r[c],t[c]))return!1}for(var c in r)if(!(c in t))return!1;return!0;case o.ProxyKind.AkkoObject:for(var u=0,l=e.struct.serializableValueProperties;u<l.length;u++){if((c=l[u])in t!=c in r)return!1;if(a(t[c],r[c]))return!1}return!0;default:return!1}},e}();t.BranchFrameSectionImplement=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUniteSet=function(){return new n};var n=function(){function e(){this.counterSet={},this.elementSet={}}return e.prototype.hasElement=function(e){var t=this.elementSet[e.identifier];return!!t&&t===e},e.prototype.createSubSet=function(){return new i(this)},e.prototype.release=function(e){for(var t in this.elementSet){var r=this.elementSet[t];e&&e(r),delete this.counterSet[t],delete this.elementSet[t]}},e.prototype.add=function(e){var t=e.identifier;return t in this.counterSet?this.counterSet[t]+=1:(this.elementSet[t]=e,this.counterSet[t]=1)},e.prototype.remove=function(e){var t=this.counterSet[e];return void 0===t?t=0:0==(t-=1)&&(delete this.counterSet[e],delete this.elementSet[e]),t},e}();t.UniteSetImplement=n;var i=function(){function e(e){this.uniteSet=e,this.elementSet={}}return e.prototype.add=function(e){var t=e.identifier;t in this.elementSet||(this.elementSet[t]=e,this.uniteSet.add(e))},e.prototype.release=function(e){for(var t in this.elementSet){var r=this.elementSet[t],n=this.uniteSet.remove(t);e&&0===n&&e(r),delete this.elementSet[t]}},e}();t.ChildSetImplement=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=function(e){function t(t){for(var r=e.call(this,t)||this,n=t.displayerTarget(),i=0;i<n.length;++i)o.addDisplayerKey(r,i);return r}return i(t,e),t.refreshLength=function(e,t){for(var r=t;r in e;)o.removeDisplayerKey(e,r),r+=1;if(r===t)for(r=t-1;r>=0&&!(r in e);)o.addDisplayerKey(e,r),r-=1},t.unwrapToPureArray=function(e){if(e instanceof t){for(var r=e.__proxy.displayerTarget().length,n=new Array(r),i=0;i<r;++i)n[i]=e[i];return n}return e},t.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=t.unwrapToPureArray(this),i=0;i<e.length;++i)e[i]=t.unwrapToPureArray(e[i]);return Array.prototype.concat(n,e)},t.prototype.every=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.every.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},t.prototype.filter=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.filter.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},t.prototype.find=function(e,t){var r=this,n=this.__proxy.proxyRuntime,i=Array.prototype.find.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}));return n.pullValue(i)},t.prototype.findIndex=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.findIndex.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},t.prototype.forEach=function(e,t){var r=this,n=this.__proxy.proxyRuntime;Array.prototype.forEach.call(this.__proxy.displayerTarget(),(function(i,o){e.call(t,n.pullValue(i),o,r)}))},t.prototype.indexOf=function(e,t){var r=e;return o.isDisplayerNode(r)&&(r=r.__proxy),Array.prototype.indexOf.call(this.__proxy.displayerTarget(),r,t)},t.prototype.lastIndexOf=function(e,t){var r=e;return o.isDisplayerNode(r)&&(r=r.__proxy),Array.prototype.lastIndexOf.call(this.__proxy.displayerTarget(),r,t)},t.prototype.join=function(e){return Array.prototype.join.call(this.__proxy.displayerTarget(),e)},t.prototype.map=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.map.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},t.prototype.reduce=function(e,t){var r=this,n=this.__proxy.proxyRuntime,i=t;return Array.prototype.reduce.call(this.__proxy.displayerTarget(),(function(t,o,a){var s=t;return i!==s&&(s=n.pullValue(s)),i=e(s,n.pullValue(o),a,r)}),t)},t.prototype.reduceRight=function(e,t){var r=this,n=this.__proxy.proxyRuntime,i=t;return Array.prototype.reduceRight.call(this.__proxy.displayerTarget(),(function(t,o,a){var s=t;return i!==s&&(s=n.pullValue(s)),i=e(s,n.pullValue(o),a,r)}),t)},t.prototype.slice=function(e,t){for(var r=this.__proxy.proxyRuntime,n=Array.prototype.slice.call(this.__proxy.displayerTarget(),e,t),i=0;i<n.length;++i)n[i]=r.pullValue(n[i]);return n},t.prototype.some=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.some.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},t.prototype.toString=function(){return Array.prototype.toString.apply(this.__proxy.displayerTarget())},t.prototype.copyWithin=function(){t.throwImmutableError()},t.prototype.fill=function(){t.throwImmutableError()},t.prototype.pop=function(){t.throwImmutableError()},t.prototype.push=function(){t.throwImmutableError()},t.prototype.reverse=function(){t.throwImmutableError()},t.prototype.shift=function(){t.throwImmutableError()},t.prototype.splice=function(){t.throwImmutableError()},t.prototype.unshift=function(){t.throwImmutableError()},t.prototype.sort=function(){t.throwImmutableError()},t.prototype.entries=function(){t.throwBanMethodError()},t.prototype.keys=function(){t.throwBanMethodError()},t.prototype.values=function(){t.throwBanMethodError()},t.throwImmutableError=function(){throw new Error("it is immutable")},t.throwBanMethodError=function(){throw new Error("ban method")},t}(o.DisplayerNodeImplement);t.ArrayDisplayerNode=a,Object.defineProperty(a.prototype,"length",{enumerable:!1,configurable:!0,get:function(){var e=this.__proxy,t=e.proxyRuntime.pullValue(e.displayerTarget().length);return e.touchKey("length"),t}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),o=r(3),a=r(12),s=r(7),c=r(13),u=r(5);!function(e){e[e.ExportsPropertyMode=0]="ExportsPropertyMode",e[e.SerializablePropertyMode=1]="SerializablePropertyMode"}(n=t.CopierMode||(t.CopierMode={})),t.copyDisplayerNode=function(e,t,r){return void 0===t&&(t=n.ExportsPropertyMode),new l(t,r).copyValue(e)};var l=function(){function e(e,t){this.mode=e,this.creator=t,this.copedObjectMap={}}return e.prototype.copyValue=function(e){return o.isDisplayerNode(e)?this.copyProxyNode(e.__proxy):u.isProxyNode(e)?this.copyProxyNode(e):e},e.prototype.copyProxyNode=function(e){var t=e.identifier,r=this.copedObjectMap[t];if(!r){var n=e.displayerTarget();if(a.isFlatObjectProxyNode(e)){var i={};for(var o in this.copedObjectMap[t]=r=i,n)i[o]=this.copyInsideValue(e.proxyRuntime,n[o])}else if(s.isAkkoObjectProxyNode(e)){var u=e.struct;i=this.createAkkoObject(u.classReflection.clazz),this.copedObjectMap[t]=r=i;for(var l=0,p=this.getPropertiesToCopy(e);l<p.length;l++)i[o=p[l]]=this.copyInsideValue(e.proxyRuntime,u.getValueFromProxyNode(e,o))}else if(c.isArrayProxyNode(e)){var h=n.length,d=[];this.copedObjectMap[t]=r=d;for(var f=0;f<h;++f)d[f]=this.copyInsideValue(e.proxyRuntime,n[f])}}return r},e.prototype.getPropertiesToCopy=function(e){switch(this.mode){case n.ExportsPropertyMode:return e.struct.copyableProperties;case n.SerializablePropertyMode:return e.struct.serializableValueProperties;default:throw new Error("invalid mode "+this.mode)}},e.prototype.createAkkoObject=function(e){return this.creator?this.creator(e):{}},e.prototype.copyInsideValue=function(e,t){return"object"!=A(t)||null===t?t:u.isProxyNode(t)?this.copyProxyNode(t):i.isBuffer(t)?t.readonly?t:t.slice():e.escapeObjectFilter(t)?t:void 0},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(5),a=r(12),s=r(7),c=r(13),u=r(16);i.contextStack.addListener((function(e,t){n=t&&e.tools?e.coreFunctions:null})),t.copyProxyNode=function(e){return(new l).copyValue(e)};var l=function(){function e(){this.copedObjectMap={}}return e.prototype.copyValue=function(e){return o.isProxyNode(e)?this.copyProxyNode(e):e},e.prototype.copyProxyNode=function(e){var t=e.identifier,r=this.copedObjectMap[t];if(!r)if(a.isFlatObjectProxyNode(e)||u.isHangUpObjectProxyNode(e)){var i=n.creator({});for(var o in this.copedObjectMap[t]=r=i,n.unwrapper(e)){var l=this.copyValue(n.getter(e,o));n.setter(r,o,l)}}else if(s.isAkkoObjectProxyNode(e)){var p=e.struct,h={};Object.setPrototypeOf(h,p.classReflection.clazz.prototype),i=n.creator(h),this.copedObjectMap[t]=r=i;for(var d=0,f=p.serializableValueProperties;d<f.length;d++)o=f[d],l=this.copyValue(n.getter(e,o)),n.setter(i,o,l)}else{if(!c.isArrayProxyNode(e))throw new Error("invalid proxy node");var y=n.getter(e,"length"),A=n.creator([]);this.copedObjectMap[t]=r=A;for(var m=0;m<y;++m)l=this.copyValue(n.getter(e,m)),n.setter(A,m,l)}return r},e}()},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(0),c=r(8),u=r(4),l=r(15),p=r(3),h=function(){function e(e,t){var r=this;this.didDispose=!1,this.onAkkoProxyNodeUpdated=function(e){if(r.observer)for(var t in e){var n=e[t],i=n.kind,o=n.value;r.observer.reportChanged(t,o,i)}},this.struct=e.struct,this.observerAdapter=t,this._akkoProxyNode=e,this.displayer=this.createDisplayer(e),this._akkoProxyNode.addListener(this.onAkkoProxyNodeUpdated),this.valueProperties=Object.freeze(o(this.struct.transientValueProperties,this.struct.serializableValueProperties))}return e.prototype.dispose=function(){this.didDispose||(this._akkoProxyNode.removeListener(this.onAkkoProxyNodeUpdated),this.didDispose=!0)},Object.defineProperty(e.prototype,"akkoProxyNode",{get:function(){return this._akkoProxyNode},set:function(e){var t=this;this._akkoProxyNode!==e&&(this._akkoProxyNode.removeListener(this.onAkkoProxyNodeUpdated),this.observerAdapter?this.observerAdapter.observeUpdate((function(){t.compareAndReportUpdated(t._akkoProxyNode,e),t._akkoProxyNode=e})):(this.compareAndReportUpdated(this._akkoProxyNode,e),this._akkoProxyNode=e))},enumerable:!0,configurable:!0}),e.prototype.compareAndReportUpdated=function(e,t){if(this.observer){for(var r=e.displayerTarget(),n=t.displayerTarget(),i=0,o=this.valueProperties;i<o.length;i++){var a=o[i],c=a in r,l=a in n;c&&!l?this.observer.reportChanged(a,void 0,s.UpdateEventKind.Removed):!c&&l?this.observer.reportChanged(a,n[a],s.UpdateEventKind.Inserted):r[a]!==n[a]&&this.observer.reportChanged(a,n[a],s.UpdateEventKind.Updated)}this.observer.reportChanged(u.ProxyKey,t,s.UpdateEventKind.Updated)}},e.prototype.createDisplayer=function(e){var t=this,r=e.struct.classReflection,n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(p.DisplayerNodeImplement),o=function(e){Object.defineProperty(n.prototype,e,{enumerable:!1,configurable:!1,get:function(){return t.getProperty(e)}})};for(var a in r.properties)o(a);var s=function(e){n.prototype[e]=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.invokeMethod(e,r)}};for(var c in r.methods)s(c);return new n(e)},e.prototype.getProperty=function(e){var t,r=this,n=this.akkoProxyNode.proxyRuntime;switch(this.struct.getPropertyReadableKind(e)){case l.PropertyReadableKind.ReadValue:t=n.pullValue(this.akkoProxyNode.displayerTarget()[e]),this.touchKey(e);break;case l.PropertyReadableKind.ReadByGetter:var i=n.runtime,o=n.noEffectsIdGenerator,s={authorId:null===i.observerId?a.AdminObserverId:i.observerId,mode:c.CoreFunctionsMode.Outside,timestamp:Date.now(),identifierGenerator:o};t=i.runWithMagix(s,(function(){return r.akkoProxyNode.target()[e]})),this.touchKey(u.ProxyKey),t=n.pullValue(t);break;case l.PropertyReadableKind.CanNotReadGetter:throw new Error("can't read property "+JSON.stringify(e)+" unless it has @noEffects");case l.PropertyReadableKind.CanNotReadPrivateValue:case l.PropertyReadableKind.CanNotReadPrivateGetter:throw new Error("can't read private property "+JSON.stringify(e))}return t},e.prototype.invokeMethod=function(e,t){var r=this.akkoProxyNode.callOutside(e,t);return this.touchKey(u.ProxyKey),r},e.prototype.touchKey=function(e){var t=this.observerAdapter;t&&(this.observer||(this.observer=t.create("AkkoDisplayerHolder")),this.observer.reportObservedKey(e))},e}();t.AkkoDisplayerHolder=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=null;n.contextStack.addListener((function(e,t){o=t?e.coreFunctions:null}));var a=function(){function e(){}return e.prototype.isValidObject=function(e){return i.isAkkoObjectProxyNode(e)},e.prototype.isDisplayerObject=function(e){return i.isDisplayerNode(e)},e.prototype.identifier=function(e){return e.identifier},e.prototype.kind=function(e){if(i.isAkkoObjectProxyNode(e))return n.ObjectKind.AkkoObject;if(i.isFlatObjectProxyNode(e))return n.ObjectKind.FlatObject;if(i.isArrayProxyNode(e))return n.ObjectKind.Array;if(i.isDisplayerNode(e))return n.ObjectKind.Displayer;throw new Error("unrecognized proxy node")},e.prototype.forEach=function(e,t){if(i.isFlatObjectProxyNode(e)){var r=e.target();for(var n in r)t(r[n],n)}else if(i.isArrayProxyNode(e)){r=e.target();for(var o=0;o<r.length;++o)t(r[o],o)}else if(i.isAkkoObjectProxyNode(e)){r=e.target();for(var a=0,s=e.struct.serializableValueProperties;a<s.length;a++)t(r[n=s[a]],n)}},e.prototype.createObject=function(e,t){return o.creator(t,e)},e.prototype.wrapDisplayer=function(e,t){return t.displayer},e.prototype.unwrapDisplayer=function(e,t){return t.__proxy},e.prototype.getClassReflection=function(e){var t=e;if(i.isDisplayerNode(t)&&(t=t.__proxy),i.isAkkoObjectProxyNode(t))return t.struct.classReflection},e.prototype.override=function(e,t,r){if(i.isFlatObjectProxyNode(e)){for(var n in o.unwrapper(e))n in t||o.remover(e,n);for(var n in t)o.setter(e,n,t[n])}else if(i.isArrayProxyNode(e)){var a=t,s=o.getter(e,"length");a.length>s&&o.caller(e,"splice",[s]);for(var c=0;c<a.length;++c)o.setter(e,c,a[c])}else if(i.isAkkoObjectProxyNode(e)){for(var u=e.proxyRuntime.getAkkoObjectStruct(r),l=0,p=u.transientValueProperties;l<p.length;l++)n=p[l],o.remover(e,n);for(var h=0,d=u.serializableValueProperties;h<d.length;h++)n=d[h],o.setter(e,n,t[n])}},e.prototype.displayerPhase=function(e){if(i.isDisplayerNode(e))return i.getPhaseWithDisplayerNode(e);throw new Error("it isn't akko wrapped object")},e.prototype.copyDisplayer=function(e){return i.copyDisplayerNode(e)},e}();t.ProxyObjectOperator=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(2),a=r(1),s=r(19);i.contextStack.addListener((function(e,t){n=t?e.coreFunctions.creator:void 0}));var c=function(){function e(e,t){this.decorateObjectEnums=Object.freeze([o.ObjectEnum.Object]),this.proxyRuntime=e,this.covertIdToClass=t}return e.prototype.createObject=function(e,t){if(t===o.ObjectEnum.HangUpObject)return a.createHangUpObjectProxy(this.proxyRuntime,e,{});var r=t===o.ObjectEnum.Array?[]:{};return n?n(r,e):s.wrapObject(this.proxyRuntime,r,e)},e.prototype.findIdentifier=function(e){var t=e.identifier;if(void 0===t)throw a.isProxyNode(e)?new Error("can't find identifier of proxy node"):new Error("object should be proxy node");return t},e.prototype.findHangUpMetadata=function(e){if(!a.isHangUpObjectProxyNode(e))throw new Error("it's not hang up object");return e},e.prototype.checkObjectEnum=function(e){switch(e.kind){case a.ProxyKind.Array:return o.ObjectEnum.Array;case a.ProxyKind.AkkoObject:case a.ProxyKind.FlatObject:return o.ObjectEnum.Object;case a.ProxyKind.HangUpObject:return o.ObjectEnum.HangUpObject;default:throw new Error("unrecognized object")}},e.prototype.keys=function(e){return Object.keys(e.target())},e.prototype.length=function(e){return a.isArrayProxyNode(e)?e.target().length:void 0},e.prototype.hasKey=function(e,t){return t in e.target()},e.prototype.getValue=function(e,t){return e.target()[t]},e.prototype.setValue=function(e,t,r){e.setValue(t,r)},e.prototype.completeHangUpObject=function(e,t){a.isHangUpObjectProxyNode(e)&&e.setHangMetadata(t)},e.prototype.decorateObject=function(e,t,r,n,s){if(n&&t===o.ObjectType.AssertedObject){var c=this.covertIdToClass(n.id);if(!c)throw new o.DeserializerError("can't find class by object format id "+n.id);var u=c[i.ClassReflectionName];a.isFlatObjectProxyNode(e)&&e.covertToAkkoObjectProxyNode(u)}},e}();t.ProxyObjectAdapter=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e,t,r){this.runtime=e,this.rootObject=t,this.observerAdapter=r}return e.prototype.initialize=function(){this.holder=new n.AkkoDisplayerHolder(this.rootObject,this.observerAdapter)},e.prototype.initializeWithOriginRootObject=function(e){this.holder=e.holder,this.holder.akkoProxyNode=this.rootObject},Object.defineProperty(e.prototype,"observerId",{get:function(){return this.runtime.observerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayer",{get:function(){return this.holder.displayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.rootObject.target()},enumerable:!0,configurable:!0}),e.prototype.getRootMethod=function(e){return this.rootObject.getMethod(e)},e.prototype.snapshotRootObject=function(){return this.rootObject},e}();t.ProxyRootObjectImplement=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=r(14),a=function(){function e(e){this.params=Object.freeze(n({},e)),this.objectOperator=new i.ProxyObjectOperator}return e.prototype.createProxyRuntime=function(e,t){return new o.ProxyRuntimeImplement(this.objectOperator,e,t,{escapeObjectFilter:this.params.escapeObjectFilter,jsxFactory:this.params.jsxFactory,observerAdapter:this.params.observerAdapter})},e}();t.ProxyManagerImplement=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1);function o(e){switch(A(e)){case"function":return e;case"object":if(null!==e)return function(e){var t=e.__proxy;switch(function(e){if(i.isAkkoObjectProxyNode(e))return n.ObjectKind.AkkoObject;if(i.isFlatObjectProxyNode(e))return n.ObjectKind.FlatObject;if(i.isArrayProxyNode(e))return n.ObjectKind.AkkoObject;if(i.isDisplayerNode(e))return n.ObjectKind.Displayer;throw new Error("unrecognized proxy node")}(t)){case n.ObjectKind.FlatObject:return Object;case n.ObjectKind.Array:return Array;case n.ObjectKind.AkkoObject:return function(e){var t=e;if(i.isDisplayerNode(t)&&(t=t.__proxy),i.isAkkoObjectProxyNode(t))return t.struct.classReflection}(t).clazz}return e.constructor}(e)}}t.isAkkoWrappedObjectAccessible=function(e){if(!i.isDisplayerNode(e))throw new Error("it isn't akko wrapped object");return n.DisplayerPhase.Rejected!==i.getPhaseWithDisplayerNode(e)},t.isInstanceOf=function(e,t){return i.isDisplayerNode(e)?e.__proxy.displayerTarget()instanceof t:i.isProxyNode(e)?e.displayerTarget()instanceof t:e instanceof t},t.findClassId=function(e){var t=o(e);if(t===Object)return-1;if(t===Array)return-2;if(void 0===t)return-3;var r=t[n.ClassReflectionName];return r?r.id:-3},t.findClass=o}]))},function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valueWithDefault=function(e,t){return void 0===e?t:e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.AkkoFetcher=n.AkkoFetcher},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),s=r(4),c=r(5),u=r(0),l=function(){function e(t){var r=new a.HostsRepo(t.configmap),n={};this.fetcher=new c.TimeoutFetcher(t.fetcher),this.keys=r.keys,this.onIngoreFetchError=t.onIngoreFetchError,this.retryCount=t.retryCount,this.retryLoopsCount=t.retryLoopsCount,this.timeout=e.parseTimeoutFromParams(t.timeout),this.bussySleepDuration=u.valueWithDefault(t.bussySleepDuration,3e3);for(var i=0,o=this.keys;i<o.length;i++){var l=o[i];n[l]=new s.HostsLoop(r.host(l),t.region)}this.loops=Object.freeze(n)}return e.parseTimeoutFromParams=function(t,r){if(void 0===r&&(r=e.defaultTimeout),"number"==typeof t)return Object.freeze([t]);if(Array.isArray(t)){if(0===t.length)throw new Error("timeout cannot be []");return Object.freeze(o(t))}return r},e.prototype.fetch=function(e){var t=this,r=this.parseFetchingContext(e),n=r.key,i=this.loop(n);return function(e,n){return t.fetchWithKey(r,i,e,n)}},e.prototype.origin=function(e,t){var r=this.loop(t),n=r.host(),i=e;return/:$/im.test(i)||(i+=":"),this.replaceProtocol(i,r.useSSL)+"//"+n},e.prototype.reportSuccess=function(e,t){this.loop(e).markSuccess(t)},e.prototype.reportFail=function(e,t){this.loop(e).markFail(t)},e.prototype.fetchWithKey=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n,a,s,c,u,l,p,h,d,f,y,A,m;return i(this,(function(i){switch(i.label){case 0:n=(o&&o.method||"get").toLowerCase(),void 0===(a=e.enableRetry)&&(a=this.checkIsIdempotent(n)),s=a?this.getFetchingCount(e,t):1,c=null,u=0,i.label=1;case 1:if(!(u<s))return[3,8];l=Date.now(),i.label=2;case 2:return i.trys.push([2,6,,7]),p=t.host(),h=this.replaceURL(r,p,t.useSSL),d=e.timeout.length,f=u<d?e.timeout[u]:e.timeout[d-1],[4,this.fetcher.fetch(h,o,f)];case 3:return y=i.sent(),this.isServerBussyCode(y.status)?u<s-1?[4,new Promise((function(t){return setTimeout(t,e.bussySleepDuration)}))]:[3,5]:(t.markSuccess(Date.now()-l),[2,y]);case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return A=i.sent(),c=A,t.markFail(Date.now()-l),[3,7];case 7:return++u,[3,1];case 8:throw this.onIngoreFetchError&&c&&this.onIngoreFetchError(c),m="fail to "+n+" "+r,s>1&&(m+=" after "+s+" times retries"),c=c?new Error(m+" and the last Error is: "+c.message):new Error(m)}}))}))},e.prototype.getFetchingCount=function(e,t){var r,n;return"number"==typeof e.retryCount&&(r=e.retryCount+1),"number"==typeof e.retryLoopsCount&&(n=(e.retryLoopsCount+1)*t.hostsCount),void 0!==r&&void 0!==n?Math.max(r,n):void 0!==r?r:void 0!==n?n:t.hostsCount},e.prototype.replaceURL=function(e,t,r){var n=new URL(e),i=n.protocol,o=n.port,a=n.pathname,s=n.search,c=t;return o&&(c+=":"+o),this.replaceProtocol(i,r)+"//"+c+a+s},e.prototype.parseFetchingContext=function(t){var r=t;return"string"==typeof r&&(r={key:r}),Object.freeze({key:r.key,enableRetry:r.enableRetry,timeout:e.parseTimeoutFromParams(r.timeout,this.timeout),retryCount:u.valueWithDefault(r.retryCount,this.retryCount),retryLoopsCount:u.valueWithDefault(r.retryLoopsCount,this.retryLoopsCount),bussySleepDuration:u.valueWithDefault(r.bussySleepDuration,this.bussySleepDuration)})},e.prototype.checkIsIdempotent=function(e){switch(e){case"put":case"options":case"head":case"patch":case"delete":case"get":return!0;default:return!1}},e.prototype.isServerBussyCode=function(e){switch(e){case 503:case 504:return!0;default:return!1}},e.prototype.replaceProtocol=function(e,t){switch(e){case"http:":case"https:":return t?"https:":"http:";case"ws:":case"wss:":return t?"wss:":"ws:";default:return e}},e.prototype.loop=function(e){var t=this.loops[e];if(!t)throw new Error("undefined key "+JSON.stringify(e));return t},e.defaultTimeout=Object.freeze([5e3,1e4,25e3]),e}();t.AkkoFetcher=l},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=function(){function e(e){var t={},r=[];for(var i in e){var a=e[i],s=o.valueWithDefault(a.enablePing,!0),c=o.valueWithDefault(a.useSSL,!0),u=[],l={};for(var p in a.hosts)"*"===p?u.push.apply(u,this.readStringArray(a.hosts[p])):l[p]=this.readStringArray(a.hosts[p]);r.push(i),t[i]=Object.freeze({enablePing:s,useSSL:c,hosts:Object.freeze({default:Object.freeze(u),regions:Object.freeze(l)})})}this.keys=Object.freeze(r.sort()),this.hosts=Object.freeze(n({},t))}return e.prototype.readStringArray=function(e){return"string"==typeof e?Object.freeze([e]):Object.freeze(i(e))},e.prototype.host=function(e){var t=this.hosts[e];if(!t)throw new Error("cannot find host "+JSON.stringify(e));return t},e}();t.HostsRepo=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r;if(this.nextIndex=0,this.enablePing=e.enablePing,this.useSSL=e.useSSL,0===(r=void 0===t?e.hosts.default:e.hosts.regions[t]||e.hosts.default).length)throw void 0===t?new Error("expect region: unexpect undefined"):new Error("invalid region "+JSON.stringify(t)+": cannot find any hosts of region");this.hosts=r}return Object.defineProperty(e.prototype,"hostsCount",{get:function(){return this.hosts.length},enumerable:!0,configurable:!0}),e.prototype.host=function(){return this.hosts[this.nextIndex]},e.prototype.markSuccess=function(e){},e.prototype.markFail=function(e){var t=this.nextIndex+1;t>=this.hosts.length&&(t=0),this.nextIndex=t},e}();t.HostsLoop=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.fetcher=e}return e.prototype.fetch=function(e,t,r){var n=this;return new Promise((function(i,o){var a=setTimeout((function(){a=null,o(new Error("timeout"))}),r);n.fetcher(e,t).then((function(e){null!==a&&(clearTimeout(a),i(e))})).catch((function(e){null!==a&&(clearTimeout(a),o(e))}))}))},e}();t.TimeoutFetcher=n}]))},function(e,t){e.exports=r("jpn6")},function(e,t,r){"use strict";r.r(t),r.d(t,"AnimBox",(function(){return Ut})),r.d(t,"AnimCmdPlayer",(function(){return We})),r.d(t,"AnimStatePlayer",(function(){return Ve})),r.d(t,"AnimationPlayerEventType",(function(){return n})),r.d(t,"Color",(function(){return Ne})),r.d(t,"ColorModelType",(function(){return xe})),r.d(t,"Formula",(function(){return Ce})),r.d(t,"FormulaScope",(function(){return Me})),r.d(t,"ParPlayer",(function(){return P})),r.d(t,"ParPlusPlayer",(function(){return se})),r.d(t,"SeqPlayer",(function(){return ce})),r.d(t,"TRANSPARENT",(function(){return Ge})),r.d(t,"TriggerEvent",(function(){return Gt})),r.d(t,"colorAlphaTransform",(function(){return Le})),r.d(t,"colorTransform",(function(){return Be})),r.d(t,"createAnimFromToTransform",(function(){return De})),r.d(t,"createAnimVarTransform",(function(){return ze})),r.d(t,"hasOwnProperty",(function(){return _e})),r.d(t,"isByable",(function(){return Wt})),r.d(t,"isHsl",(function(){return Re})),r.d(t,"isNumeric",(function(){return Ie})),r.d(t,"isRgb",(function(){return je})),r.d(t,"linear",(function(){return X})),r.d(t,"mixColor",(function(){return Ue})),r.d(t,"numericTransform",(function(){return le})),r.d(t,"pipeTransform",(function(){return ue})),r.d(t,"sync",(function(){return re})),r.d(t,"toPt",(function(){return Ee}));var n,i,s=r(27),c=Object.defineProperty,p=Object.defineProperties,f=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=function(e,t,r){return t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},v=function(e,t){for(var r in t||(t={}))A.call(t,r)&&g(e,r,t[r]);if(y){var n,i=d(y(t));try{for(i.s();!(n=i.n()).done;){r=n.value;m.call(t,r)&&g(e,r,t[r])}}catch(e){i.e(e)}finally{i.f()}}return e},b=function(e,t){return p(e,f(t))};(i=n||(n={}))[i.Cmd=1]="Cmd",i[i.State=2]="State";var P=function(){function e(t){var r=t.playerID,n=t.players,i=t.effectType,o=void 0===i?"clickEffect":i;l(this,e),this.players=[],this._playerID=r,this.players=n,this.effectType=o,this.repeat=Math.max.apply(Math,u(n.map((function(e){return e.repeat}))).concat([1])),this.duration=Math.max.apply(Math,u(n.map((function(e){return e.duration}))).concat([0])),this.delay=n.length>0?Math.min.apply(Math,u(n.map((function(e){return e.delay})))):0}return h(e,[{key:"play",value:function(){this.players.forEach((function(e){return e.play()}))}},{key:"pause",value:function(){this.players.forEach((function(e){return e.pause()}))}},{key:"seek",value:function(e){if(e>this.progressTime)this.players.forEach((function(t){return t.seek(e)}));else if(e<this.progressTime)for(var t=this.players.length-1;t>=0;t--)this.players[t].seek(e)}},{key:"onFrame",value:function(e){if(e>this.progressTime)this.players.forEach((function(t){return t.onFrame(e)}));else if(e<this.progressTime)for(var t=this.players.length-1;t>=0;t--)this.players[t].onFrame(e)}},{key:"reset",value:function(){for(var e=this.players.length-1;e>=0;e--)this.players[e].reset()}},{key:"stop",value:function(){this.players.forEach((function(e){return e.stop()}))}},{key:"stopFinite",value:function(){this.players.forEach((function(e){return e.stopFinite()}))}},{key:"playerID",get:function(){return this._playerID||(this._playerID="par[".concat(this.players.map((function(e){return e.playerID})).join(","),"]")),this._playerID}},{key:"progressTime",get:function(){return Math.max.apply(Math,u(this.players.map((function(e){return e.progressTime}))||0))}},{key:"isPlaying",get:function(){return this.players.some((function(e){return e.isPlaying}))}},{key:"isComplete",get:function(){return this.players.every((function(e){return e.isComplete}))}}]),e}(),S=function(){return(S=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function w(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}var x=function(e,t){return function(r){return Math.max(Math.min(r,t),e)}},O=function(e){return e%1?Number(e.toFixed(5)):e},k=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,M={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},C=S(S({},M),{transform:x(0,1)}),T=S(S({},M),{default:1}),_=function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},I=_("deg"),E=_("%"),j=_("px"),R=S(S({},E),{parse:function(e){return E.parse(e)/100},transform:function(e){return E.transform(100*e)}}),N=x(0,255),B=function(e){return void 0!==e.red},L=function(e){return void 0!==e.hue},F=function(e){return function(t){if("string"!=typeof t)return t;for(var r={},n=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))}(t).replace(/(,|\/)/g," ").split(/ \s*/),i=0;i<4;i++)r[e[i]]=void 0!==n[i]?parseFloat(n[i]):1;return r}},D=S(S({},M),{transform:function(e){return Math.round(N(e))}});function z(e,t){return e.startsWith(t)&&k.test(e)}var V,W={test:function(e){return"string"==typeof e?z(e,"rgb"):B(e)},parse:F(["red","green","blue","alpha"]),transform:function(e){var t=e.red,r=e.green,n=e.blue,i=e.alpha,o=void 0===i?1:i;return function(e){var t=e.alpha;return"rgba("+e.red+", "+e.green+", "+e.blue+", "+(void 0===t?1:t)+")"}({red:D.transform(t),green:D.transform(r),blue:D.transform(n),alpha:O(C.transform(o))})}},U={test:function(e){return"string"==typeof e?z(e,"hsl"):L(e)},parse:F(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,r=e.saturation,n=e.lightness,i=e.alpha,o=void 0===i?1:i;return function(e){var t=e.alpha;return"hsla("+e.hue+", "+e.saturation+", "+e.lightness+", "+(void 0===t?1:t)+")"}({hue:Math.round(t),saturation:E.transform(O(r)),lightness:E.transform(O(n)),alpha:O(C.transform(o))})}},H=S(S({},W),{test:function(e){return"string"==typeof e&&z(e,"#")},parse:function(e){var t="",r="",n="";return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),G={test:function(e){return"string"==typeof e&&k.test(e)||B(e)||L(e)},parse:function(e){return W.test(e)?W.parse(e):U.test(e)?U.parse(e):H.test(e)?H.parse(e):e},transform:function(e){return B(e)?W.transform(e):L(e)?U.transform(e):e}},X=function(e){return e},Y=(V=function(e,t,r){return Math.min(Math.max(r,e),t)},function(e,t,r){return void 0!==r?V(e,t,r):function(r){return V(e,t,r)}});Y(0,1);var Z="undefined"!=typeof performance?function(){return performance.now()}:function(){return Date.now()},K="undefined"!=typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(Z())}),16.666666666666668)},Q=!0,J=!1,q=!1,$={delta:0,timestamp:0},ee=["read","update","preRender","render","postRender"],te=ee.reduce((function(e,t){var r,n,i,o,a,s,c;return e[t]=(r=function(){return J=!0},n=[],i=[],o=0,a=!1,s=new WeakSet,c={schedule:function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var c=r&&a,u=c?n:i;return t&&s.add(e),-1===u.indexOf(e)&&(u.push(e),c&&a&&(o=n.length)),e},cancel:function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1),s.delete(e)},process:function(e){var t;if(a=!0,n=(t=[i,n])[0],(i=t[1]).length=0,o=n.length)for(var u=0;u<o;u++){var l=n[u];l(e),s.has(l)&&(c.schedule(l),r())}a=!1}}),e}),{}),re=ee.reduce((function(e,t){var r=te[t];return e[t]=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),J||ae(),r.schedule(e,t,n)},e}),{}),ne=ee.reduce((function(e,t){return e[t]=te[t].cancel,e}),{}),ie=function(e){return te[e].process($)},oe=function e(t){J=!1,$.delta=Q?16.666666666666668:Math.max(Math.min(t-$.timestamp,40),1),$.timestamp=t,q=!0,ee.forEach(ie),q=!1,J&&(Q=!1,K(e))},ae=function(){J=!0,Q=!0,q||K(oe)},se=function(){function e(t){var r=t.playerID,n=t.players,i=t.effectType,o=void 0===i?"clickEffect":i,a=t.repeat,s=t.rewind,c=void 0!==s&&s,p=t.reverse,h=void 0!==p&&p,d=t.delay,f=void 0===d?0:d;l(this,e),this.players=[],this.progressTime=0,this.loopCount=0,this.elapsed=0,this._playerID=r,this.players=n,this.effectType=o,this.roundDuration=Math.max.apply(Math,u(n.map((function(e){return e.duration}))).concat([0])),this.repeat=null!=a?Math.max(1,a):Math.max.apply(Math,u(n.map((function(e){return e.repeat}))).concat([1])),this.rewind=c,this.reverse=h,this.delay=f,this.duration=this.delay+this.roundDuration*(Number.isFinite(this.repeat)?this.repeat:1)*(this.reverse?2:1),this.loop=Number.isFinite(this.repeat)?this.reverse?2*(this.repeat-1)+1:this.repeat-1:this.repeat}return h(e,[{key:"play",value:function(){var e=this;this.isPlaying||this.isComplete||(this.frameProcess=re.update((function(t){var r=t.delta;if(e.progressTime+=r,!(e.progressTime<=e.delay)&&(e.elapsed+=r,e.update(),e.isPlaying&&e.elapsed>e.roundDuration)){if(e.loopCount<e.loop)return e.elapsed=0,void(e.loopCount+=1);e.stop()}}),!0))}},{key:"pause",value:function(){this.frameProcess&&(ne.update(this.frameProcess),this.frameProcess=void 0)}},{key:"seek",value:function(e){var t=this.progressTime;this.progressTime=Y(0,this.duration,e),this.progressTime<=this.delay?(this.loopCount=0,this.elapsed=0):(this.loopCount=Math.floor((this.progressTime-this.delay)/this.roundDuration-1),this.elapsed=(this.progressTime-this.delay-1)%this.roundDuration+1);var r=this.reverse&&this.loopCount%2!=0,n=r?this.roundDuration-this.elapsed:this.elapsed;if(t>e||r)for(var i=this.players.length-1;i>=0;i--)this.players[i].seek(n);else t<e&&this.players.forEach((function(e){return e.seek(n)}))}},{key:"onFrame",value:function(e){var t=this.progressTime;this.progressTime=Y(0,this.duration,e),this.progressTime<=this.delay?(this.loopCount=0,this.elapsed=0):(this.loopCount=Math.floor((this.progressTime-this.delay)/this.roundDuration-1),this.elapsed=(this.progressTime-this.delay-1)%this.roundDuration+1);var r=this.reverse&&this.loopCount%2!=0,n=r?this.roundDuration-this.elapsed:this.elapsed;if(t>e||r)for(var i=this.players.length-1;i>=0;i--)this.players[i].onFrame(n);else t<e&&this.players.forEach((function(e){return e.onFrame(n)}))}},{key:"reset",value:function(){if(this.progressTime>0){this.pause(),this.loopCount=0,this.elapsed=0,this.progressTime=0;for(var e=this.players.length-1;e>=0;e--)this.players[e].reset()}}},{key:"stop",value:function(){this.pause(),this.seek(this.duration)}},{key:"stopFinite",value:function(){Number.isFinite(this.repeat)&&this.stop()}},{key:"update",value:function(){var e=this;if(this.reverse&&this.loopCount%2!=0)for(var t=this.players.length-1;t>=0;t--)this.players[t].onFrame(this.roundDuration-this.elapsed);else this.players.forEach((function(t){return t.onFrame(e.elapsed)}))}},{key:"playerID",get:function(){return this._playerID||(this._playerID="par-plus[".concat(this.players.map((function(e){return e.playerID})).join(","),"]")),this._playerID}},{key:"isPlaying",get:function(){return Boolean(this.frameProcess)}},{key:"isComplete",get:function(){return this.progressTime>=this.duration}}]),e}(),ce=function(){function e(t){var r,n,i=t.playerID,o=t.players,a=t.effectType,s=void 0===a?"clickEffect":a;l(this,e),this.players=[],this.index=0,this.progressTime=0,this._playerIndex=0,this.elapsed=0,this._playerID=i,this.players=o,this.effectType=s,this.duration=o.reduce((function(e,t){return e+t.duration}),0),this.delay=null!=(n=null==(r=this.players[0])?void 0:r.delay)?n:0,this.blocks=[],this.indexBlocks=[];for(var c=0;c<this.players.length;c++)0!==c&&"clickEffect"!==this.players[c].effectType||this.blocks.push(c),this.indexBlocks.push(this.blocks.length-1)}return h(e,[{key:"play",value:function(){var e=this;!this.currentPlayer||this.isPlaying||this.isComplete||(this.currentPlayer.play(),this.frameProcess=re.update((function(t){var r,n=t.delta,i=e.currentPlayer;if(i){if(e.elapsed+=n,e.progressTime+=n,i.isPlaying||i.play(),e.elapsed>i.duration){e._playerIndex<e.players.length&&(e._playerIndex+=1,e.elapsed=0,e.index=null!=(r=e.indexBlocks[e._playerIndex])?r:e.blocks.length);var o=e.players[e._playerIndex];if(o&&"clickEffect"!==o.effectType)return void o.play();e.stopTimer()}}else e.stopTimer()}),!0))}},{key:"pause",value:function(){var e;null==(e=this.currentPlayer)||e.pause(),this.stopTimer()}},{key:"seek",value:function(e){var t,r;if(e>this.duration){this.pause();for(var n=this._playerIndex;n<this.players.length;n++){var i=this.players[n];i.seek(i.duration)}this.progressTime=this.duration,this.elapsed=0,this._playerIndex=this.players.length,this.index=this.blocks.length}this.progressTime=Y(0,this.duration,e),this.elapsed=this.progressTime;for(var o=0;o<this.players.length;){var a=this.players[o];if(this.elapsed<=a.duration)break;this.elapsed-=a.duration,o++}if(this._playerIndex<o){for(var s=this._playerIndex;s<o;s++){var c=this.players[s];!Number.isFinite(c.repeat)&&c.isPlaying||c.seek(c.duration)}null==(t=this.players[o])||t.seek(this.elapsed)}else if(this._playerIndex>o)for(var u=this.safePlayerIndex(this._playerIndex);u>=o;u--){var l=this.players[u];u===o?(l.pause(),l.seek(this.elapsed)):l.reset()}this._playerIndex=o,this.index=null!=(r=this.indexBlocks[this._playerIndex])?r:this.blocks.length}},{key:"onFrame",value:function(e){throw new Error("onFrame not implemented in seq player")}},{key:"reset",value:function(){if(this.progressTime>0&&this.players.length>0)for(var e=this.safePlayerIndex(this._playerIndex);e>=0;e--)this.players[e].reset();this._playerIndex=0,this.index=0,this.progressTime=0,this.elapsed=0}},{key:"stop",value:function(){this.pause(),this.seek(this.duration+1)}},{key:"stopFinite",value:function(){this.players.forEach((function(e){return e.stopFinite()}))}},{key:"seekIndex",value:function(e){var t;this.seekPlayerIndex(null!=(t=this.blocks[e])?t:this.players.length)}},{key:"next",value:function(){this.elapsed>0&&this.seekIndex(this.index+1),this.play()}},{key:"back",value:function(){this.pause(),this.progressTime<=0||(this.seekIndex(this.elapsed>0?this.index:this.index-1),this.pause())}},{key:"stopTimer",value:function(){this.frameProcess&&(ne.update(this.frameProcess),this.frameProcess=void 0)}},{key:"safePlayerIndex",value:function(e){return Math.min(e,this.players.length-1)}},{key:"seekPlayerIndex",value:function(e){var t;if(e=Y(0,this.players.length,e),this._playerIndex<e)for(var r=this._playerIndex;r<e;r++)this.players[r].stopFinite();else for(var n=this.safePlayerIndex(this._playerIndex);n>=e;n--)this.players[n].reset();this.progressTime=this.getProgressTimeByPlayerIndex(e),this._playerIndex=e,this.index=null!=(t=this.indexBlocks[e])?t:this.blocks.length,this.elapsed=0}},{key:"getProgressTimeByPlayerIndex",value:function(e){for(var t=0,r=0;r<e;r++)t+=this.players[r].duration;return t}},{key:"playerID",get:function(){return this._playerID||(this._playerID="seq[".concat(this.players.map((function(e){return e.playerID})).join(","),"]")),this._playerID}},{key:"length",get:function(){return this.blocks.length}},{key:"currentPlayer",get:function(){return this.players[this._playerIndex]}},{key:"isPlaying",get:function(){return Boolean(this.frameProcess)}},{key:"isComplete",get:function(){return this.index>=this.blocks.length}},{key:"repeat",get:function(){var e,t;return null!=(t=null==(e=this.currentPlayer)?void 0:e.repeat)?t:1}}]),e}();function ue(e,t){return function(r){return t(e(r))}}function le(e,t,r){return(t-e)*r+e}var pe={exports:{}},he={exports:{}},de=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))},fe=Array.prototype.concat,ye=Array.prototype.slice,Ae=he.exports=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];de(i)?t=fe.call(t,ye.call(i)):t.push(i)}return t};Ae.wrap=function(e){return function(){return e(Ae(arguments))}};var me={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ge=he.exports,ve={};for(var be in me)me.hasOwnProperty(be)&&(ve[me[be]]=be);var Pe=pe.exports={to:{},get:{}};function Se(e,t,r){return Math.min(Math.max(t,e),r)}function we(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}Pe.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=Pe.get.hsl(e),r="hsl";break;case"hwb":t=Pe.get.hwb(e),r="hwb";break;default:t=Pe.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},Pe.get.rgb=function(e){if(!e)return null;var t,r,n,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=t[2],t=t[1],r=0;r<3;r++){var o=2*r;i[r]=parseInt(t.slice(o,o+2),16)}n&&(i[3]=parseInt(n,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(n=(t=t[1])[3],r=0;r<3;r++)i[r]=parseInt(t[r]+t[r],16);n&&(i[3]=parseInt(n+n,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)i[r]=parseInt(t[r+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=me[t[1]])?(i[3]=1,i):null:null;for(r=0;r<3;r++)i[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(r=0;r<3;r++)i[r]=Se(i[r],0,255);return i[3]=Se(i[3],0,1),i},Pe.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,Se(parseFloat(t[2]),0,100),Se(parseFloat(t[3]),0,100),Se(isNaN(r)?1:r,0,1)]}return null},Pe.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,Se(parseFloat(t[2]),0,100),Se(parseFloat(t[3]),0,100),Se(isNaN(r)?1:r,0,1)]}return null},Pe.to.hex=function(){var e=ge(arguments);return"#"+we(e[0])+we(e[1])+we(e[2])+(e[3]<1?we(Math.round(255*e[3])):"")},Pe.to.rgb=function(){var e=ge(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},Pe.to.rgb.percent=function(){var e=ge(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},Pe.to.hsl=function(){var e=ge(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},Pe.to.hwb=function(){var e=ge(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},Pe.to.keyword=function(e){return ve[e.slice(0,3)]};var xe,Oe,ke=pe.exports;(Oe=xe||(xe={}))[Oe.RGB=0]="RGB",Oe[Oe.HSL=1]="HSL";var Me=function(){function e(t){l(this,e),this.animBox=t,this.$=1}return h(e,[{key:"snapshot",get:function(){if(!this._snapshot){var e=this;this._snapshot={$ppt_x:this.animBox.initState.ppt_x,$ppt_y:this.animBox.initState.ppt_y,$ppt_w:this.animBox.initState.ppt_w,$ppt_h:this.animBox.initState.ppt_h,ppt_x:Number(e.animBox.currentState.ppt_x),ppt_y:Number(e.animBox.currentState.ppt_y),ppt_w:Number(e.animBox.currentState.ppt_w),ppt_h:Number(e.animBox.currentState.ppt_h),get $(){return e.$}}}return this._snapshot}}]),e}(),Ce=function(){function e(t,r){l(this,e),this.expr=t,this.scope=r}return h(e,[{key:"valueOf",value:function(){var e;return null!=(e=this.value)?e:this.evaluate(1)}},{key:"evaluate",value:function(e){return this.scope.$=e,this.value=this.formula.evaluate(this.scope.snapshot),this.value}},{key:"formula",get:function(){return this._formula||(this._formula=Object(s.compile)(this.expr.replace(/#/g,"$"))),this._formula}}]),e}(),Te=Object.prototype.hasOwnProperty;function _e(e,t){return Te.call(e,t)}function Ie(e){return e instanceof Ce||"number"==typeof e&&!Number.isNaN(e)}function Ee(e){return e/12700+"pt"}function je(e){return!!(e&&_e(e,"r")&&_e(e,"g")&&_e(e,"b")&&_e(e,"a"))}function Re(e){return!!(e&&_e(e,"h")&&_e(e,"s")&&_e(e,"l")&&_e(e,"a"))}var Ne=function(){function e(t){if(l(this,e),"string"==typeof t){var r=ke.get(t);if(r){var n=r.model,i=r.value;switch(n){case"hsl":return this.model=xe.HSL,void(this._hslCache={h:i[0],s:i[1],l:i[2],a:i[3]});case"rgb":return this.model=xe.RGB,void(this._rgbCache={r:i[0],g:i[1],b:i[2],a:i[3]})}}}else{if(je(t))return this.model=xe.RGB,this._rgbCache=t,void(this._hslCache=void 0);if(Re(t))return this.model=xe.HSL,this._hslCache=t,void(this._rgbCache=void 0)}throw new TypeError("[Animatic] incorrect color: "+t)}return h(e,[{key:"toString",value:function(){if(this.model===xe.HSL){var e=this.hsl,t=e.h,r=e.s,n=e.l,i=e.a;return"hsla(".concat(t,",").concat(r,",").concat(n,",").concat(i,")")}var o=this.rgb,a=o.r,s=o.g,c=o.b,u=o.a;return"rgba(".concat(a,",").concat(s,",").concat(c,",").concat(u,")")}},{key:"lighten",value:function(t){var r=this.hsl;return new e(b(v({},r),{l:Y(0,100,r.l*(1+t))}))}},{key:"darken",value:function(t){var r=this.hsl;return new e(b(v({},r),{l:Y(0,100,r.l*(1-t))}))}},{key:"alpha",value:function(t){var r=this.model===xe.HSL?this.hsl:this.rgb;if(null==t)return r.a;var n=Y(0,1,t);return n===r.a?this:new e(b(v({},r),{a:n}))}},{key:"rbgToHsl",value:function(e){var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=0;o===i?s=0:t===o?s=(r-n)/a:r===o?s=2+(n-t)/a:n===o&&(s=4+(t-r)/a),(s=Math.min(60*s,360))<0&&(s+=360);var c=(i+o)/2;return{h:s,s:100*(o===i?0:c<=.5?a/(o+i):a/(2-o-i)),l:100*c,a:e.a}}},{key:"hslToRgb",value:function(e){var t=e.s/100,r=e.l/100;if(0===t){var n=255*r;return{r:n,g:n,b:n,a:e.a}}for(var i,o,a,s=e.h/360,c=2*r-(i=r<.5?r*(1+t):r+t-r*t),u=[0,0,0],l=0;l<3;l++)(o=s+1/3*-(l-1))<0&&o++,o>1&&o--,a=6*o<1?c+6*(i-c)*o:2*o<1?i:3*o<2?c+(i-c)*(2/3-o)*6:c,u[l]=255*a;return{r:u[0],g:u[1],b:u[2],a:e.a}}},{key:"rgb",get:function(){if(!this._rgbCache){if(!this._hslCache)throw new Error("[Animatic] No color available");this._rgbCache=this.hslToRgb(this._hslCache)}return this._rgbCache}},{key:"hsl",get:function(){if(!this._hslCache){if(!this._rgbCache)throw new Error("[Animatic] No color available");this._hslCache=this.rbgToHsl(this._rgbCache)}return this._hslCache}}]),e}();function Be(e,t,r){if(e.model===xe.HSL||t.model===xe.HSL){var n=e.hsl,i=t.hsl;return new Ne({h:le(n.h,i.h,r),s:le(n.s,i.s,r),l:le(n.l,i.l,r),a:le(n.a,i.a,r)})}var o=e.rgb,a=t.rgb;return new Ne({r:Fe(o.r,a.r,r),g:Fe(o.g,a.g,r),b:Fe(o.b,a.b,r),a:le(o.a,a.a,r)})}function Le(e,t,r,n){var i=e.model===xe.HSL?e.hsl:e.rgb;return new Ne(b(v({},i),{a:le(t,r,n)}))}function Fe(e,t,r){var n=e*e,i=t*t;return Math.sqrt(Math.max(0,r*(i-n)+n))}function De(e,t){var r=Object.keys(t),n=r.reduce((function(r,n){switch(n){case"visible":var i=e[n],o=t[n];r[n]=function(e){return e<=0?i:o};break;case"fillcolor":var a=e[n],s=t[n];if(!a||!s)throw new Error("Mismatch color animation (Key: ".concat(n,", From: ").concat(a,", To: ").concat(s,")"));r[n]=function(e){return Be(a,s,e)};break;default:var c=e[n],u=t[n];if(!Ie(c)||!Ie(u))throw new Error("Mismatch number animation (Key: ".concat(n,", From: ").concat(c,", To: ").concat(u,")"));r[n]=function(e){return le(c,u,e)}}return r}),{});return function(e){return r.reduce((function(t,r){var i,o=null==(i=n[r])?void 0:i.call(n,e);return null!=o&&(t[r]=o),t}),{})}}function ze(e,t){var r;return function(n){return r||(r=De(e(),t)),r(n)}}var Ve=function(){function e(t){var r=t.animBox,n=t.eventSource,i=t.playerID,o=t.effectType,a=void 0===o?"clickEffect":o,s=t.duration,c=t.transform,u=t.ease,p=void 0===u?X:u,h=t.repeat,d=void 0===h?0:h,f=t.rewind,y=void 0!==f&&f,A=t.reverse,m=void 0!==A&&A,g=t.delay,v=void 0===g?0:g,b=t.by,P=void 0!==b&&b;l(this,e),this.progressTime=0,this.loopCount=0,this.fvTime=0,this.elapsed=0,this.animBox=r,this.eventSource=n,this.playerID=i,this.effectType=a,this.roundDuration=s,this.ease=p,this.repeat=Math.max(1,d),this.rewind=y,this.reverse=m,this.delay=v,this.by=P,this.duration=this.delay+this.roundDuration*(Number.isFinite(this.repeat)?this.repeat:1)*(this.reverse?2:1),this.loop=Number.isFinite(this.repeat)?this.reverse?2*(this.repeat-1)+1:this.repeat-1:this.repeat,this.transform=ue(p,null!=c?c:this.noopTransform)}return h(e,[{key:"play",value:function(){var e=this;this.isPlaying||this.isComplete||(this.frameProcess=re.update((function(t){var r=t.delta;if(e.progressTime+=r,e.progressTime<=e.delay)e.fvTime=0;else if(e.fvTime<=0&&(e.fvTime=Date.now()),e.elapsed+=r,e.update(),e.isPlaying&&e.elapsed>e.roundDuration){if(e.loopCount<e.loop)return e.elapsed=0,void(e.loopCount+=1);e.stop()}}),!0))}},{key:"pause",value:function(){this.frameProcess&&(ne.update(this.frameProcess),this.frameProcess=void 0)}},{key:"seek",value:function(e){var t=this;e<=0&&(this.fvTime=0),this.progressTime=Y(0,this.duration,e),this.progressTime<=this.delay?(this.loopCount=0,this.elapsed=0):(this.loopCount=Math.floor((this.progressTime-this.delay)/this.roundDuration-1),this.elapsed=(this.progressTime-this.delay-1)%this.roundDuration+1),re.update((function(){return t.update()}),!1,!1)}},{key:"onFrame",value:function(e){e<=0&&(this.fvTime=0,this.progressTime<=0)||e>=this.duration&&this.progressTime>=this.duration||(this.progressTime=Y(0,this.duration,e),this.progressTime<=this.delay?(this.loopCount=0,this.elapsed=0):(this.loopCount=Math.floor((this.progressTime-this.delay)/this.roundDuration-1),this.reverse?this.elapsed=(this.progressTime-this.delay)%this.roundDuration:this.elapsed=(this.progressTime-this.delay-1)%this.roundDuration+1),this.update())}},{key:"reset",value:function(){var e=this;this.progressTime>0&&(this.pause(),this.loopCount=0,this.fvTime=0,this.elapsed=0,this.progressTime=0),this.preAnimationState&&re.update((function(){e.preAnimationState&&(e.animBox.resetState(e.playerID,e.preAnimationState),e.preAnimationState=void 0)}),!1,!1)}},{key:"stop",value:function(){this.pause(),this.seek(this.duration)}},{key:"stopFinite",value:function(){Number.isFinite(this.repeat)&&this.stop()}},{key:"update",value:function(){this.preAnimationState||(this.preAnimationState=v({},this.animBox.currentPureState));var e=Y(0,1,this.elapsed/this.roundDuration),t=this.transform(this.reverse&&this.loopCount%2!=0?1-e:e);null!=t&&this.animBox.handleStateEvent({type:n.State,playerID:this.playerID,target:this.animBox.target,srcID:this.eventSource,by:this.by,fvTime:this.fvTime,value:t})}},{key:"noopTransform",value:function(){return{}}},{key:"isPlaying",get:function(){return Boolean(this.frameProcess)}},{key:"isComplete",get:function(){return this.progressTime>=this.duration}}]),e}(),We=function(){function e(t){var r=t.cmd,n=t.animBox,i=t.eventSource,o=t.playerID,a=t.effectType,s=void 0===a?"clickEffect":a,c=t.rewind,u=void 0!==c&&c,p=t.delay,h=void 0===p?0:p;l(this,e),this.repeat=1,this.progressTime=0,this.fvTime=0,this.cmd=r,this.animBox=n,this.eventSource=i,this.playerID=o,this.effectType=s,this.rewind=u,this.delay=h,this.duration=this.delay+1}return h(e,[{key:"play",value:function(){var e=this;if(!this.isPlaying&&!this.isComplete)return 1===this.duration?(this.progressTime=1,void re.update((function(){return e.sendEvent()}),!1,!1)):void(this.frameProcess=re.update((function(t){var r=t.delta;e.progressTime+=r,e.progressTime<=e.delay?e.fvTime=0:(e.fvTime<=0&&(e.fvTime=Date.now()),e.sendEvent(),e.pause())}),!0))}},{key:"pause",value:function(){this.frameProcess&&(ne.update(this.frameProcess),this.frameProcess=void 0)}},{key:"seek",value:function(e){e<=0&&(this.fvTime=0),this.progressTime=Y(0,this.duration,e),e<=0&&"pause"!==this.cmd.name&&"stop"!==this.cmd.name&&this.animBox.handleCmdEvent({type:n.Cmd,playerID:this.playerID,target:this.animBox.target,srcID:this.eventSource,fvTime:Date.now(),value:{name:"pause"}})}},{key:"onFrame",value:function(e){e<=0&&(this.fvTime=0,this.progressTime<=0)||e>=this.duration&&this.progressTime>=this.duration||(this.progressTime=Y(0,this.duration,e),this.progressTime>=this.delay&&this.sendEvent())}},{key:"reset",value:function(){this.progressTime>0&&(this.pause(),this.fvTime=0,this.progressTime=0)}},{key:"stop",value:function(){this.pause(),this.seek(this.duration)}},{key:"stopFinite",value:function(){Number.isFinite(this.repeat)&&this.stop()}},{key:"sendEvent",value:function(){this.animBox.handleCmdEvent({type:n.Cmd,playerID:this.playerID,target:this.animBox.target,srcID:this.eventSource,fvTime:this.fvTime,value:this.cmd})}},{key:"isPlaying",get:function(){return Boolean(this.frameProcess)}},{key:"isComplete",get:function(){return this.progressTime>=this.duration}}]),e}();function Ue(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;if(e.model===xe.HSL&&e.model===t.model){var n=e.hsl,i=t.hsl,o=n.h,a=i.h;return new Ne({h:o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),s:n.s+r*(i.s-n.s),l:n.l+r*(i.l-n.l),a:n.a*r+i.a*(1-r)})}var s=e.rgb,c=t.rgb,u=2*r-1,l=s.a-c.a,p=((u*l==-1?u:(u+l)/(1+u*l))+1)/2,h=1-p;return new Ne({r:p*s.r+h*c.r,g:p*s.g+h*c.g,b:p*s.b+h*c.b,a:s.a*r+c.a*(1-r)})}var He,Ge=new Ne({r:0,g:0,b:0,a:0}),Xe=0,Ye="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),r=Math.max(0,16.7-(t-Xe));Xe=t+r,setTimeout((function(){return e(Xe)}),r)},Ze=1/60*1e3,Ke=!0,Qe=!1,Je=!1,qe={delta:0,timestamp:0},$e=["read","update","preRender","render","postRender"],et=function(e){return Qe=e},tt=$e.reduce((function(e,t){var r,n,i,o,a,s,c,u,l;return e[t]=(r=et,n=[],i=[],o=0,a=!1,s=0,c=new WeakSet,u=new WeakSet,l={cancel:function(e){var t=i.indexOf(e);c.add(e),-1!==t&&i.splice(t,1)},process:function(e){var t,p;if(a=!0,n=(t=[i,n])[0],(i=t[1]).length=0,o=n.length)for(s=0;s<o;s++)(p=n[s])(e),!0!==u.has(p)||c.has(p)||(l.schedule(p),r(!0));a=!1},schedule:function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var s=r&&a,l=s?n:i;c.delete(e),t&&u.add(e),-1===l.indexOf(e)&&(l.push(e),s&&(o=n.length))}}),e}),{}),rt=$e.reduce((function(e,t){var r=tt[t];return e[t]=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),Qe||ot(),r.schedule(e,t,n),e},e}),{}),nt=function(e){return tt[e].process(qe)},it=function e(t){Qe=!1,qe.delta=Ke?Ze:Math.max(Math.min(t-qe.timestamp,40),1),Ke||(Ze=qe.delta),qe.timestamp=t,Je=!0,$e.forEach(nt),Je=!1,Qe&&(Ke=!1,Ye(e))},ot=function(){Qe=!0,Ke=!0,Je||Ye(it)},at=function(e){var t=e.onRead,r=e.onRender,n=e.uncachedValues,i=void 0===n?new Set:n,o=e.useCache,a=void 0===o||o;return function(e){void 0===e&&(e={});var n=w(e,[]),o={},s=[],c=!1;function u(e,t){e.startsWith("--")&&(n.hasCSSVariable=!0);var r=o[e];o[e]=t,o[e]!==r&&(-1===s.indexOf(e)&&s.push(e),c||(c=!0,rt.render(l.render)))}var l={get:function(e,r){return void 0===r&&(r=!1),r||!a||i.has(e)||void 0===o[e]?t(e,n):o[e]},set:function(e,t){if("string"==typeof e)u(e,t);else for(var r in e)u(r,e[r]);return this},render:function(e){return void 0===e&&(e=!1),(c||!0===e)&&(r(o,n,s),c=!1,s.length=0),this}};return l}},st=/([a-z])([A-Z])/g,ct=function(e){return e.replace(st,"$1-$2").toLowerCase()},ut=new Map,lt=new Map,pt=["Webkit","Moz","O","ms",""],ht=pt.length,dt="undefined"!=typeof document,ft=function(e,t){return lt.set(e,ct(t))},yt=function(e,t){void 0===t&&(t=!1);var r=t?lt:ut;return r.has(e)||(dt?function(e){He=He||document.createElement("div");for(var t=0;t<ht;t++){var r=pt[t],n=""===r,i=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);if(i in He.style||n){if(n&&"clipPath"===e&&lt.has(e))return;ut.set(e,i),ft(e,(n?"":"-")+ct(i))}}}(e):function(e){ft(e,e)}(e)),r.get(e)||e},At=["","X","Y","Z"],mt=["translate","scale","rotate","skew","transformPerspective"].reduce((function(e,t){return At.reduce((function(e,r){return e.push(t+r),e}),e)}),["x","y","z"]),gt=mt.reduce((function(e,t){return e[t]=!0,e}),{});function vt(e){return!0===gt[e]}function bt(e,t){return mt.indexOf(e)-mt.indexOf(t)}var Pt=new Set(["originX","originY","originZ"]);function St(e){return Pt.has(e)}var wt=S(S({},M),{transform:Math.round}),xt={color:G,backgroundColor:G,outlineColor:G,fill:G,stroke:G,borderColor:G,borderTopColor:G,borderRightColor:G,borderBottomColor:G,borderLeftColor:G,borderWidth:j,borderTopWidth:j,borderRightWidth:j,borderBottomWidth:j,borderLeftWidth:j,borderRadius:j,radius:j,borderTopLeftRadius:j,borderTopRightRadius:j,borderBottomRightRadius:j,borderBottomLeftRadius:j,width:j,maxWidth:j,height:j,maxHeight:j,size:j,top:j,right:j,bottom:j,left:j,padding:j,paddingTop:j,paddingRight:j,paddingBottom:j,paddingLeft:j,margin:j,marginTop:j,marginRight:j,marginBottom:j,marginLeft:j,rotate:I,rotateX:I,rotateY:I,rotateZ:I,scale:T,scaleX:T,scaleY:T,scaleZ:T,skew:I,skewX:I,skewY:I,distance:j,translateX:j,translateY:j,translateZ:j,x:j,y:j,z:j,perspective:j,opacity:C,originX:R,originY:R,originZ:j,zIndex:wt,fillOpacity:C,strokeOpacity:C,numOctaves:wt},Ot=function(e){return xt[e]},kt=function(e,t){return t&&"number"==typeof e?t.transform(e):e},Mt=new Set(["scrollLeft","scrollTop"]),Ct=new Set(["scrollLeft","scrollTop","transform"]),Tt={x:"translateX",y:"translateY",z:"translateZ"};function _t(e){return"function"==typeof e}function It(e){var t=void 0===e?{}:e,r=t.enableHardwareAcceleration,n=void 0===r||r,i=t.isDashCase,o=void 0===i||i,a=t.allowTransformNone,s=void 0===a||a,c={},u={},l={},p=[];return function(e){return p.length=0,function(e,t,r,n,i,o,a,s){void 0===t&&(t=!0),void 0===r&&(r={}),void 0===n&&(n={}),void 0===i&&(i={}),void 0===o&&(o=[]),void 0===a&&(a=!1),void 0===s&&(s=!0);var c=!0,u=!1,l=!1;for(var p in e){var h=e[p],d=Ot(p),f=kt(h,d);vt(p)?(u=!0,n[p]=f,o.push(p),c&&(d.default&&h!==d.default||!d.default&&0!==h)&&(c=!1)):St(p)?(i[p]=f,l=!0):Ct.has(p)&&_t(f)||(r[yt(p,a)]=f)}(u||"function"==typeof e.transform)&&(r.transform=function(e,t,r,n,i,o){void 0===o&&(o=!0);var a="",s=!1;r.sort(bt);for(var c=r.length,u=0;u<c;u++){var l=r[u];a+=(Tt[l]||l)+"("+t[l]+") ",s="z"===l||s}return!s&&i?a+="translateZ(0)":a=a.trim(),_t(e.transform)?a=e.transform(t,n?"":a):o&&n&&(a="none"),a}(e,n,o,c,t,s)),l&&(r.transformOrigin=(i.originX||"50%")+" "+(i.originY||"50%")+" "+(i.originZ||0))}(e,n,c,u,l,p,o,s),c}}var Et=at({onRead:function(e,t){var r=t.element,n=t.preparseOutput,i=Ot(e);if(vt(e))return i&&i.default||0;if(Mt.has(e))return r[e];var o=window.getComputedStyle(r,null).getPropertyValue(yt(e,!0))||0;return n&&i&&i.test(o)&&i.parse?i.parse(o):o},onRender:function(e,t,r){var n=t.element,i=t.buildStyles,o=t.hasCSSVariable;if(Object.assign(n.style,i(e)),o)for(var a=r.length,s=0;s<a;s++){var c=r[s];c.startsWith("--")&&n.style.setProperty(c,e[c])}-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=e.scrollTop)},uncachedValues:Mt}),jt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Rt=function(e,t){return j.transform(e*t)},Nt={x:0,y:0,width:0,height:0};function Bt(e,t,r){return"string"==typeof e?e:j.transform(t+r*e)}var Lt={enableHardwareAcceleration:!1,isDashCase:!1};function Ft(e,t,r){void 0===r&&(r=!0);var n={style:{}},i=It(Lt);return function(o){return function(e,t,r,n,i,o){void 0===t&&(t=Nt),void 0===n&&(n=It(Lt)),void 0===i&&(i={style:{}}),void 0===o&&(o=!0);var a=e.attrX,s=e.attrY,c=e.originX,u=e.originY,l=e.pathLength,p=e.pathSpacing,h=void 0===p?1:p,d=e.pathOffset,f=void 0===d?0:d,y=n(w(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var A in y)"transform"===A?i.style.transform=y[A]:i[o&&!jt.has(A)?ct(A):A]=y[A];return(void 0!==c||void 0!==u||y.transform)&&(i.style.transformOrigin=function(e,t,r){return Bt(t,e.x,e.width)+" "+Bt(r,e.y,e.height)}(t,void 0!==c?c:.5,void 0!==u?u:.5)),void 0!==a&&(i.x=a),void 0!==s&&(i.y=s),void 0!==r&&void 0!==l&&(i[o?"stroke-dashoffset":"strokeDashoffset"]=Rt(-f,r),i[o?"stroke-dasharray":"strokeDasharray"]=Rt(l,r)+" "+Rt(h,r)),i}(o,e,t,i,n,r)}}var Dt=at({onRead:function(e,t){var r=t.element;if(vt(e=jt.has(e)?e:ct(e))){var n=Ot(e);return n&&n.default||0}return r.getAttribute(e)},onRender:function(e,t){var r=t.element,n=(0,t.buildAttrs)(e);for(var i in n)"style"===i?Object.assign(r.style,n.style):r.setAttribute(i,n[i])}}),zt=at({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,i=void 0===n?0:n;return window.scrollTo(i,r)}}),Vt=new WeakMap;function Wt(e){switch(e){case"rotate":case"scaleX":case"scaleY":case"fillcolor":return!0;default:return!1}}var Ut=function(){function e(t){var r=this,n=t.target,i=t.constants,o=t.initState,a=void 0===o?{}:o,s=t.applyStyles;l(this,e),this.handleStateEvent=function(e){var t=e.playerID,n=e.by,i=e.value,o=Object.keys(i).filter((function(e){return null!=i[e]}));if(n){var a=r.byStates.get(t);a||(a={},r.byStates.set(t,a));var s,c=d(o);try{for(c.s();!(s=c.n()).done;){var u=s.value;Wt(u)?(a[u]=i[u],r.currentState[u]=r.currentPureState[u]):(r.currentState[u]=i[u],r.currentPureState[u]=i[u])}}catch(e){c.e(e)}finally{c.f()}}else{r.lastStateEvent=e;var l,p=d(o);try{for(p.s();!(l=p.n()).done;){var h=l.value;r.currentState[h]=i[h],r.currentPureState[h]=i[h]}}catch(e){p.e(e)}finally{p.f()}}var f,y=d(r.byStates.values());try{for(y.s();!(f=y.n()).done;){var A,m=f.value,g=d(o);try{for(g.s();!(A=g.n()).done;){var v=A.value;r.mergeByStates(v,m)}}catch(e){g.e(e)}finally{g.f()}}}catch(e){y.e(e)}finally{y.f()}r.applyStyles(r.convertStyles(r.currentState))},this.handleCmdEvent=function(e){r.lastCmdEvent=e,"playFrom"===e.value.name?null==window||window.postMessage({type:"_changeAudioState",targetID:r.target,play:1,stop:0},"*"):"playSF"===e.value.name?null==window||window.postMessage({type:"_playSoundEffect",targetID:r.target,soundEffectId:e.value.value},"*"):null==window||window.postMessage({type:"_changeAudioState",targetID:r.target,play:0,stop:1},"*")},this.byStates=new Map,this.target=n,this.constants=i;var c=i.x,u=i.y,p=i.slideWidth,h=i.slideHeight,f=i.width,y=i.height;this.initState=b(v({scaleX:1,scaleY:1,rotate:0,opacity:1,xshear:0,yshear:0,fillcolor:Ge,visible:!0},a),{ppt_x:c/p,ppt_y:u/h,ppt_w:f/p,ppt_h:y/h}),this.currentState=v({},this.initState),this.currentPureState=v({},this.initState),s&&(this.applyStyles=s)}return h(e,[{key:"resetState",value:function(e,t){for(var r in this.lastStateEvent=void 0,this.lastCmdEvent=void 0,this.byStates.delete(e),t){var n=r;this.currentPureState[n]=t[n],this.currentState[n]=t[n]}var i,o=d(this.byStates.values());try{for(o.s();!(i=o.n()).done;){var a=i.value;for(var s in a)this.mergeByStates(s,a)}}catch(e){o.e(e)}finally{o.f()}this.applyStyles(this.convertStyles(this.currentState))}},{key:"applyStyles",value:function(e){var t=this.getStyler();t&&t.set(e)}},{key:"applyPreAnimation",value:function(){this.preAnimationState&&this.applyStyles(this.convertStyles(this.preAnimationState))}},{key:"preAnimation",value:function(e){if(!e)return this.preAnimationState;this.preAnimationState||(this.preAnimationState={});for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t],i=e[n];null!=i&&(this.preAnimationState[n]=i,this.currentState[n]=i,this.currentPureState[n]=i)}}},{key:"clearCache",value:function(){this._styler=void 0}},{key:"mergeByStates",value:function(e,t){var r,n,i,o,a,s;switch(e){case"rotate":this.currentState.rotate=(null!=(r=this.currentState.rotate)?r:0)+(null!=(n=t.rotate)?n:0);break;case"scaleX":this.currentState.scaleX=(null!=(i=this.currentState.scaleX)?i:1)*(null!=(o=t.scaleX)?o:1);break;case"scaleY":this.currentState.scaleY=(null!=(a=this.currentState.scaleY)?a:1)*(null!=(s=t.scaleY)?s:1);break;case"fillcolor":this.currentState.fillcolor&&t.fillcolor?this.currentState.fillcolor=Ue(this.currentState.fillcolor,t.fillcolor):t.fillcolor&&(this.currentState.fillcolor=t.fillcolor)}}},{key:"convertStyles",value:function(e){var t,r,n,i,o,a,s,c,u={},l=this.constants,p=l.x,h=l.y,d=l.width,f=l.height,y=l.slideWidth,A=l.slideHeight;for(var m in e)if(_e(e,m))switch(m){case"ppt_x":var g=null!=(t=e.ppt_x)?t:this.currentState.ppt_x;u.translateX=Ee(g*y-p);break;case"ppt_y":var v=null!=(r=e.ppt_y)?r:this.currentState.ppt_y;u.translateY=Ee(v*A-h);break;case"scaleX":var b=null!=(n=e.scaleX)?n:1,P=this.currentState.ppt_w;u.scaleX=b*P*y/d;break;case"ppt_w":var S=null!=(i=this.currentState.scaleX)?i:1,w=null!=(o=e.ppt_w)?o:this.currentState.ppt_w;u.scaleX=S*w*y/d;break;case"scaleY":var x=null!=(a=e.scaleY)?a:1,O=this.currentState.ppt_h;u.scaleY=x*O*A/f;break;case"ppt_h":var k=null!=(s=this.currentState.scaleY)?s:1,M=null!=(c=e.ppt_h)?c:this.currentState.ppt_h;u.scaleY=k*M*A/f;break;case"fillcolor":if(null!=e.fillcolor){var C=e.fillcolor.hsl;u["--sp-fill"]="hsla(".concat(C.h,",").concat(C.s,"%,").concat(C.l,"%,").concat(C.a,")"),u["--sp-fill-h"]=C.h,u["--sp-fill-s"]=C.s+"%",u["--sp-fill-l"]=C.l+"%",u["--sp-fill-a"]=C.a}break;case"visible":null!=e.visible&&(u.display=e.visible?"block":"none");break;case"rotate":case"opacity":null!=e[m]&&(u[m]=Number(e[m]));break;case"xshear":null!=e.xshear&&(u.skewX=45*e.xshear);break;case"yshear":null!=e.yshear&&(u.skewY=45*e.yshear);break;default:null!=e[m]&&(u[m]=e[m])}return this.constants.flipH&&_e(u,"scaleX")&&(u.scaleX*=-1),this.constants.flipV&&_e(u,"scaleY")&&(u.scaleY*=-1),(u.scaleX<0||u.scaleY<0)&&_e(u,"rotate")&&(u.rotate*=-1),u}},{key:"getStyler",value:function(){if(!this._styler){var e=document.getElementById(this.target);e?this._styler=function(e,t){return function(e,t){return Vt.has(e)?Vt.get(e):function(e,t){var r,n,i,o;return e===window?r=zt(e):function(e){return e instanceof HTMLElement||"function"==typeof e.click}(e)?r=function(e,t){void 0===t&&(t={});var r=t.enableHardwareAcceleration,n=t.allowTransformNone,i=w(t,["enableHardwareAcceleration","allowTransformNone"]);return Et(S({element:e,buildStyles:It({enableHardwareAcceleration:r,allowTransformNone:n}),preparseOutput:!0},i))}(e,t):function(e){return e instanceof SVGElement||"ownerSVGElement"in e}(e)&&(i=function(e){try{return function(e){return"function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}(e)}catch(e){return{x:0,y:0,width:0,height:0}}}(n=e),o=function(e){return"path"===e.tagName}(n)&&n.getTotalLength?n.getTotalLength():void 0,r=Dt({element:n,buildAttrs:Ft(i,o)})),Vt.set(e,r),r}(e,t)}("string"==typeof e?document.querySelector(e):e,t)}(e):console.error("Styler: missing DOM element for shape target: "+this.target)}return this._styler}}]),e}(),Ht={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,o||e,a),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,a),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(h=1,c=new Array(p-1);h<p;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(Ht);var Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=a(r);function r(){return l(this,r),t.call(this)}return r}(Ht.exports)},function(e,t){e.exports=r("aSns")},function(e,t){e.exports=r("uhBA")},function(e,t){e.exports=r("xRo1")},function(e,t){e.exports=r("tK0H")},function(e,t){e.exports=r("GBY4")},function(e,t){e.exports=r("A3Fa")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(71);t.defineModulesLoader=n.defineModulesLoader},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(72),a=r(73),s=r(75);t.defineModulesLoader=function(e){return new c(e)};var c=function(){function e(e){var t=this;this.modulesMap={},this.taskPromises={},this.onInterruptFreeModules=function(e,r){t.modulesMap[e]||(t.modulesMap[e]=r)};var r={libName:e.libName,dependencies:e.dependencies};o.defineLibrary(r,this.onInterruptFreeModules),this.origin=e.origin,this.findPath=e.findPath,this.timeout=e.timeout,this.storage=e.cache?new a.ModulesStorage(!!e.storeBase64,e.origin,e.findPath):void 0}return e.prototype.require=function(e,t){return n(this,void 0,void 0,(function(){var r,a,c,u,l,p=this;return i(this,(function(h){switch(h.label){case 0:return(r=this.modulesMap[e])?[3,2]:((a=this.taskPromises[e])||(a=this.taskPromises[e]=n(p,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,,2,3]),t={identifier:e,origin:this.origin,findPath:this.findPath,timeout:this.timeout,storage:this.storage},[4,Promise.all([o.requireModules(e),new s.LoadingTask(t).load()])];case 1:return[2,r.sent()[0]];case 2:return delete this.taskPromises[e],[7];case 3:return[2]}}))}))),c=this.modulesMap,u=e,[4,a]);case 1:r=c[u]=h.sent(),h.label=2;case 2:if(!(l=r[t]))throw new Error("can't find module "+JSON.stringify(t)+" from "+e);return[2,l]}}))}))},e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=new(function(){function e(){var e=this;this.libraryMap={},this.paddingMap={},this.freeInterrupters={},this.defineLibrary=function(t,r){if(t.libName in e.libraryMap)throw new Error("found duplicated library "+JSON.stringify(t.libName));r&&(e.freeInterrupters[t.libName]=r),e.libraryMap[t.libName]=Object.freeze(n({},t))},this.requireModules=function(t){return new Promise((function(r,n){var i=e.paddingMap[t];i||(i=e.paddingMap[t]=[]),i.push({resolve:r,reject:n})}))},this.loader=function(t,r,n){if(!r&&!n){var i=t;return e.createRequireFunction(i)}var o=t;e.handlePanddingNodes(o,r,n)};var t="__netlessJavaScriptLoader",r=window;if(void 0!==r[t])throw new Error("window."+t+" was override");Object.defineProperty(r,t,{enumerable:!1,configurable:!1,writable:!1,value:this.loader})}return e.prototype.handlePanddingNodes=function(e,t,r){var n=this.paddingMap[e];if(n){delete this.paddingMap[e];for(var i=0,o=n;i<o.length;i++){var a=o[i];r?a.reject(r):a.resolve(this.handleModules(t))}}else if(!r&&t){var s=function(e){var t=e.split("/");return t.pop(),t.join("/")}(e),c=this.freeInterrupters[s];c&&c(e,t)}},e.prototype.createRequireFunction=function(e){var t=this.libraryMap[e];if(!t)throw new Error("undefined library "+JSON.stringify(e));return function(r){var n=t.dependencies,i=n&&n[r];if(!i)throw new Error("cannot find module "+JSON.stringify(r)+" of library "+JSON.stringify(e));return i}},e.prototype.handleModules=function(e){for(var t in e){var r=e[t];"__esModule"in r||Object.defineProperty(r,"__esModule",{value:!0})}return Object.freeze(e)},e}());t.requireModules=i.requireModules,t.defineLibrary=i.defineLibrary},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=r(74);function s(e){return new Promise((function(t,r){e.onsuccess=function(){return t(e.result)},e.onerror=function(){if(e.error){var t=new Error(e.error.message);t.name=e.error.name,r(t)}else r(null)}}))}var c=function(){function e(t,r,n){var i=new URL(r),a=i.protocol,s=i.host,c=new o.AkkoFetcher({fetcher:window.fetch.bind(window),retryCount:e.retryCount,retryLoopsCount:0,configmap:{module:{useSSL:"https:"===a,hosts:{"*":s}}}});this.fetcher=c.fetch("module"),this.storeBase64=t,this.findPath=n}return Object.defineProperty(e,"dbp",{get:function(){if(!this._dbp){var e=indexedDB.open("__netlessJavaScriptCache",1);e.onupgradeneeded=function(e){e.target.result.createObjectStore("modules")},this._dbp=s(e)}return this._dbp},enumerable:!0,configurable:!0}),e.prototype.findObjectURL=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.readBlob(e)];case 1:return(t=r.sent())?[3,4]:[4,this.fetchBuffer(e)];case 2:return t=r.sent(),[4,this.writeBlob(e,t)];case 3:r.sent(),r.label=4;case 4:return[2,URL.createObjectURL(t,{oneTimeOnly:!0})]}}))}))},e.prototype.readBlob=function(t){return n(this,void 0,void 0,(function(){var r,n,o,c,u;return i(this,(function(i){switch(i.label){case 0:return[4,e.dbp];case 1:return[4,s(i.sent().transaction(["modules"],"readonly").objectStore("modules").get(t))];case 2:return"string"==typeof(r=i.sent())&&(n=r.split(/;base64\,/im),o=n[0],c=n[1],u=o.replace(/^data:/im,""),r=a.base64ToBlob(c,{type:u})),[2,r]}}))}))},e.prototype.writeBlob=function(t,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return n=r,this.storeBase64?[4,a.blobToBase64(n)]:[3,2];case 1:n=i.sent(),i.label=2;case 2:return[4,e.dbp];case 3:return[4,s(i.sent().transaction(["modules"],"readwrite").objectStore("modules").put(n,t))];case 4:return i.sent(),[2]}}))}))},e.prototype.fetchBuffer=function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return t="http://module"+this.findPath(e),[4,this.fetcher(t,{method:"get",headers:{Accept:"application/javascript"}})];case 1:if(200!==(r=n.sent()).status)throw new Error("failed to fetch "+JSON.stringify(t)+" with status "+r.status);return[4,r.blob()];case 2:return[2,n.sent()]}}))}))},e.retryCount=5,e}();t.ModulesStorage=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToBlob=function(e,t){for(var r=window.atob(e),n=new Uint8Array(r.length),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return new Blob([n],t)},t.blobToBase64=function(e){return new Promise((function(t,r){try{var n=new FileReader;n.onload=function(e){var n,i=null===(n=e.target)||void 0===n?void 0:n.result;"string"==typeof i?t(i):r("blob load wrong type "+A(i))},n.readAsDataURL(e)}catch(e){r(e)}}))}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.params=e,this.completeCallbacks=[]}return e.prototype.load=function(){return n(this,void 0,void 0,(function(){var e,t,r;return i(this,(function(n){switch(n.label){case 0:e=[],void 0!==this.params.timeout&&e.push(this.startTimeout(this.params.timeout)),e.push(this.loadScript()),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,Promise.race(e)];case 2:return n.sent(),[3,4];case 3:for(t=0,r=this.completeCallbacks;t<r.length;t++)(0,r[t])();return[7];case 4:return[2]}}))}))},e.prototype.loadScript=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o,a;return i(this,(function(i){switch(i.label){case 0:if(e=this.params,t=e.origin,r=e.findPath,n=e.identifier,!(o=e.storage))return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o.findObjectURL(n)];case 2:return a=i.sent(),[3,4];case 3:return i.sent(),a=""+t+r(n),[3,4];case 4:return[3,6];case 5:a=""+t+r(n),i.label=6;case 6:return[4,this.loadScriptWithURL(a)];case 7:return i.sent(),[2]}}))}))},e.prototype.loadScriptWithURL=function(e){var t=this;return new Promise((function(r,n){var i=document.createElement("script");t.completeCallbacks.push((function(){i.onerror=null,i.onload=null,i.remove()})),i.charset="utf-8",i.src=e,i.onload=function(){r()},i.onerror=function(t){var r=t&&("load"===t.type?"missing":t.type);n(new Error("fetch "+JSON.stringify(e)+" failed: "+r))},document.head.appendChild(i)}))},e.prototype.startTimeout=function(e){var t=this,r=null;return this.completeCallbacks.push((function(){null!==r&&(clearTimeout(r),r=null)})),new Promise((function(n,i){r=setTimeout((function(){r=null,i(new Error("fetch "+t.params.identifier+" timeout"))}),e)}))},e}();t.LoadingTask=o},function(e,t,r){var n=r(77),i=r(78);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,r){"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function a(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},n=[],i=0;i<e.length;i++){var s=e[i],c=t.base?s[0]+t.base:s[0],u=r[c]||0,l="".concat(c," ").concat(u);r[c]=u+1;var p=a(l),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==p?(o[p].references++,o[p].updater(h)):o.push({identifier:l,updater:y(h,t),references:1}),n.push(l)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,f=0;function y(e,t){var r,n,i;if(t.singleton){var o=f++;r=d||(d=c(t)),n=p.bind(null,r,o,!1),i=p.bind(null,r,o,!0)}else r=c(t),n=h.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=a(r[n]);o[i].references--}for(var c=s(e,t),u=0;u<r.length;u++){var l=a(r[u]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}r=c}}}},function(e,t,r){(t=r(79)(!1)).push([e.i,".netless-whiteboard div.highlight-box {\n  border: 1px solid;\n  box-shadow: 0 0 1px 0 #FFFFFF, inset 0 0 1px 0 #FFFFFF;\n}\n.netless-whiteboard div.editor-box > *.cursor-nwse {\n  cursor: nwse-resize;\n}\n.netless-whiteboard div.editor-box > *.cursor-nesw {\n  cursor: nesw-resize;\n}\n.netless-whiteboard div.editor-box > *.cursor-ns {\n  cursor: ns-resize;\n}\n.netless-whiteboard div.editor-box > *.cursor-ew {\n  cursor: ew-resize;\n}\n.netless-whiteboard div.editor-box {\n  pointer-events: none;\n  border: 1px solid;\n  box-shadow: 0 0 1px 0 #FFFFFF, inset 0 0 1px 0 #FFFFFF;\n}\n.netless-whiteboard div.editor-box > .lock {\n  pointer-events: none;\n  position: absolute;\n  width: 22px;\n  height: 22px;\n  top: -11px;\n  left: -11px;\n}\n.netless-whiteboard div.editor-box > div.operation-point-desktop {\n  width: 7px;\n  height: 7px;\n  position: absolute;\n  pointer-events: auto;\n}\n.netless-whiteboard div.editor-box > div.operation-point-touch {\n  width: 33px;\n  height: 33px;\n  position: absolute;\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.netless-whiteboard div.editor-box > div.operation-point-touch > * {\n  pointer-events: none;\n  width: 7px;\n  height: 7px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.left-top {\n  left: -4px;\n  top: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.right-top {\n  right: -4px;\n  top: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.left-bottom {\n  left: -4px;\n  bottom: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.right-bottom {\n  right: -4px;\n  bottom: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.top {\n  top: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.right {\n  right: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.bottom {\n  bottom: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-desktop.left {\n  left: -4px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.left-top {\n  left: -17px;\n  top: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.right-top {\n  right: -17px;\n  top: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.left-bottom {\n  left: -17px;\n  bottom: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.right-bottom {\n  right: -17px;\n  bottom: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.top {\n  top: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.right {\n  right: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.bottom {\n  bottom: -17px;\n}\n.netless-whiteboard div.editor-box > .operation-point-touch.left {\n  left: -17px;\n}\n.netless-whiteboard div.editor-box-others {\n  border: 1px solid;\n}\n.netless-whiteboard textarea {\n  -webkit-appearance: none;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n  padding: 0;\n  margin: 0;\n  outline: none;\n  border: none;\n  resize: none;\n  overflow: hidden;\n}\n.netless-whiteboard .textarea-border {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  border-width: 1px;\n  border-style: dashed;\n}\n.netless-whiteboard .textarea-border > * {\n  position: absolute;\n  pointer-events: auto;\n}\n.netless-whiteboard .textarea-layout {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  border-width: 1px;\n  border-style: dashed;\n  border-style: solid;\n  border-color: rgba(0, 0, 0, 0);\n}\n.netless-whiteboard .textarea-layout > * {\n  position: absolute;\n  pointer-events: auto;\n}\n.netless-whiteboard textarea.readonly-textarea {\n  background: rgba(255, 255, 255, 0);\n}\n.netless-whiteboard textarea.editable-textarea {\n  background: rgba(255, 255, 255, 0);\n}\n.netless-whiteboard textarea.my-textarea {\n  pointer-events: auto;\n}\n.netless-whiteboard div.float-bar {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background: #ffffff;\n  border: 1px solid #EFEFEF;\n  box-shadow: 0px 6px 12px 0px rgba(0, 0, 0, 0.12);\n  border-radius: 4px;\n}\n.netless-whiteboard div.float-bar div,\n.netless-whiteboard div.float-bar input {\n  pointer-events: auto;\n}\n.netless-whiteboard div.float-bar img {\n  pointer-events: none;\n}\n.netless-whiteboard div.float-bar .button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  border: none;\n}\n.netless-whiteboard div.float-bar .button:hover {\n  background: #EEF0F6;\n}\n.netless-whiteboard div.float-bar > .normal-button {\n  width: 40px;\n  height: 40px;\n}\n.netless-whiteboard div.float-bar > .highlight-button {\n  background: #EEF0F6;\n}\n.netless-whiteboard div.float-bar > img.font-size-icon {\n  width: 16px;\n  height: 16px;\n  margin-left: 12px;\n}\n.netless-whiteboard div.float-bar > input.font-size-input::-webkit-outer-spin-button,\n.netless-whiteboard div.float-bar > input.font-size-input::-webkit-inner-spin-button {\n  /* display: none; <- Crashes Chrome on hover */\n  -webkit-appearance: none;\n  margin: 0;\n  /* <-- Apparently some margin are still there even though it's hidden */\n}\n.netless-whiteboard div.float-bar > input.middle:focus,\n.netless-whiteboard div.float-bar > input:focus {\n  outline-width: 0;\n}\n.netless-whiteboard div.float-bar > input.font-size-input {\n  -moz-appearance: textfield;\n  /* Firefox */\n  width: 29px;\n  height: 20px;\n  margin-left: 10px;\n  font-size: 12px;\n  font-family: PingFang SC, Microsoft Yahei;\n  font-weight: normal;\n  color: #212324;\n  line-height: 14px;\n  border-radius: 2px;\n  border: 1px solid #e7e7e7;\n  text-align: center;\n}\n.netless-whiteboard div.float-bar > div.font-size-buttons {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: none;\n  justify-content: space-between;\n  align-items: stretch;\n  margin-left: 5px;\n  margin-right: 7px;\n}\n.netless-whiteboard div.float-bar > div.font-size-buttons > div.arrow-button {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: none;\n  justify-content: center;\n  align-items: center;\n  width: 16px;\n  height: 8px;\n}\n.netless-whiteboard div.float-bar > div.font-size-buttons > div.arrow-button > img {\n  width: 6px;\n  height: 3px;\n}\n.netless-whiteboard div.float-bar div.font-size-menu {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: stretch;\n  background: #ffffff;\n  box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.12);\n  border-radius: 2px;\n}\n.netless-whiteboard div.float-bar div.font-size-menu > div.hover {\n  background: #e7e7e7;\n}\n.netless-whiteboard div.float-bar div.font-size-menu > div.cell {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  width: 64px;\n  height: 24px;\n}\n.netless-whiteboard div.float-bar div.font-size-menu > div.cell > span {\n  padding-left: 4px;\n  padding-right: 4px;\n  font-size: 12px;\n  font-family: PingFang SC, Microsoft Yahei;\n  font-weight: normal;\n  color: #000000;\n}\n.netless-whiteboard div.float-bar div.font-size-menu > div.cell > .check {\n  width: 8px;\n  height: 8px;\n}\n.netless-whiteboard div.float-bar div.font-colors-icon {\n  position: relative;\n  width: 16px;\n  height: 16px;\n}\n.netless-whiteboard div.float-bar div.font-colors-icon > img {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 16px;\n  height: 16px;\n  z-index: 1;\n}\n.netless-whiteboard div.float-bar div.font-colors-icon > div.bar {\n  position: absolute;\n  left: 2px;\n  right: 2px;\n  top: 12.5px;\n  height: 1.5px;\n  z-index: 2;\n}\n.netless-whiteboard div.float-bar div.font-colors-menu {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  position: absolute;\n  padding: 8px;\n  background: #ffffff;\n  box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.12);\n  border-radius: 2px;\n}\n.netless-whiteboard div.float-bar div.font-colors-menu > div.font-color-selected {\n  border-color: #a7a7a7;\n}\n.netless-whiteboard div.float-bar div.font-colors-menu > div.font-color-not-selected {\n  border-color: #ffffff;\n}\n.netless-whiteboard div.float-bar div.font-colors-menu > div.font-color-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  margin: 4px;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border-width: 1px;\n  border-style: solid;\n}\n.netless-whiteboard div.float-bar div.font-colors-menu > div.font-color-button > .core {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n}\n.netless-whiteboard div.float-bar div.image-layer-menu {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  position: absolute;\n  padding: 4px;\n  background: #ffffff;\n  box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.12);\n  border-radius: 2px;\n}\n.netless-whiteboard div.float-bar div.image-layer-menu > .normal-button {\n  width: 32px;\n  height: 32px;\n}\n.netless-whiteboard * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  pointer-events: none;\n}\n.cursor-selector  .ppt-event-source {\n  cursor: pointer;\n  pointer-events: auto;\n  -webkit-user-select: auto;\n  -moz-user-select: auto;\n  user-select: auto;\n}\n.netless-whiteboard {\n  text-align: start;\n}\n.netless-whiteboard * {\n  box-sizing: border-box;\n}\n.netless-whiteboard * > svg {\n  text-align: start;\n}\n.netless-ppt-last-run::after {\n  content: attr(data-last-word);\n  margin-left: var(--data-last-word-indent);\n  display: inline-block;\n  width: 0;\n}\n.ppt-preview-beauty-scroll-bar::-webkit-scrollbar {\n  width: 12px;\n  height: 6px;\n}\n.ppt-preview-beauty-scroll-bar::-webkit-scrollbar-track {\n  border-radius: 3px;\n  background: rgba(0, 0, 0, 0.06);\n  -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);\n  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);\n}\n.ppt-preview-beauty-scroll-bar::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background: rgba(0, 0, 0, 0.12);\n  -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);\n  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);\n}\n.ppt-preview-main-container {\n  border: 1px solid #222;\n}\n.ppt-preview-show-note-svg {\n  width: 40px;\n  height: 40px;\n}\n.ppt-preview-show-sidebar-svg {\n  width: 40px;\n  height: 40px;\n}\n.ppt-preview-controls {\n  height: 40px;\n  width: 100%;\n}\n.ppt-preview-controls-button {\n  margin: 0 2px;\n}\n.ppt-preview-sidebar {\n  border-left: 1px solid #ccc;\n  background-color: #eee;\n}\n.ppt-preview-sidebar-item {\n  margin: 14px 14px 16px;\n}\n.ppt-preview-sidebar-span {\n  font-size: 10pt;\n  text-align: center;\n}\n.ppt-preview-note {\n  background-color: #eee;\n}\n.ppt-preview-animation-svg {\n  width: 20px;\n  height: 20px;\n}\n.ppt-preview-controls-page {\n  float: right;\n  line-height: 16px;\n  font-size: 16px;\n  padding: 0;\n  margin: 0;\n}\n",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(r=a,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(c).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&i[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t){e.exports=r("Fs82")},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=r(3)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(2))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),o=function(){function e(){}return e.prototype.observeUpdate=function(e){n.runInAction(e)},e.prototype.create=function(e){return new i.MobXObserver(e)},e}();t.MobXObserverAdapter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=function(){function e(e){this.atoms={},this.debugName=e}return e.prototype.reportChanged=function(e,t,r){var n=this.atoms[e];if(n&&n.reportChanged(),this.iterationAtom)switch(r){case i.UpdateEventKind.Removed:case i.UpdateEventKind.Inserted:this.iterationAtom.reportChanged()}n&&r===i.UpdateEventKind.Removed&&delete this.atoms[e]},e.prototype.reportObservedIteration=function(){var e=this.iterationAtom;e||(e=this.iterationAtom=n.createAtom(this.debugName)),e.reportObserved()},e.prototype.reportObservedKey=function(e){var t=this.atoms[e];t||(t=this.atoms[e]=n.createAtom(this.debugName)),t.reportObserved()},e}();t.MobXObserver=o},function(e,t){e.exports=r(0)}]))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.listenerNodes=[]}return Object.defineProperty(e.prototype,"isOnline",{get:function(){return navigator.onLine},enumerable:!0,configurable:!0}),e.prototype.addListener=function(e){var t={origin:e,onOffline:function(){return e.onOffline()},onOnline:function(){return e.onOnline()}};this.listenerNodes.push(t),window.addEventListener("online",t.onOnline),window.addEventListener("offline",t.onOffline)},e.prototype.removeListener=function(e){var t=this.listenerNodes.findIndex((function(t){return t.origin===e}));if(-1!==t){var r=this.listenerNodes.splice(t,1)[0];window.removeEventListener("online",r.onOnline),window.removeEventListener("offline",r.onOffline)}},e}();t.NetState=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(84),i=function(){function e(e){if(this.listeners=new n.MultiValuesMap,this.oncesListeners=new n.MultiValuesMap,e)for(var t in e){var r=e[t];r&&this.listeners.put(t,r)}}return e.prototype.dispatch=function(e,t){var r=0;return r+=this.dispatchTo(e,this.listeners,t),r+=this.dispatchTo(e,this.oncesListeners,t),this.oncesListeners.remove(e),r},e.prototype.dispatchTo=function(e,t,r){var n=t.values(e);if(n){for(var i=0,o=n;i<o.length;i++){var a=o[i];try{r(a)}catch(e){console.error(e)}}return n.length}return 0},e.prototype.on=function(e,t){this.listeners.put(e,t)},e.prototype.once=function(e,t){this.oncesListeners.put(e,t)},e.prototype.off=function(e,t){this.listeners.remove(e,t),this.oncesListeners.remove(e,t)},e.prototype.forwardTo=function(e,t){var r=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.dispatch(e,(function(e){return e.apply(void 0,r)}))};return this.on(e,r),r},e}();t.CallbacksImplement=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.map={}}return e.prototype.values=function(e){return this.map[e]},e.prototype.has=function(e,t){var r=this.map[e];return!!r&&-1!==r.indexOf(t)},e.prototype.put=function(e,t){var r=this.map[e];r||(r=this.map[e]=[]),-1===r.indexOf(t)&&r.push(t)},e.prototype.remove=function(e,t){if(e)if(t){var r=this.map[e];if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),0===r.length&&delete this.map[e])}}else delete this.map[e];else for(var i in this.map)delete this.map[i]},e}();t.MultiValuesMap=n},function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Mac="mac",e.Windows="windows"}(n=t.KeyboardKind||(t.KeyboardKind={})),t.DefaultHotKeys=Object.freeze({delete:Object.freeze(["Backspace","Delete"]),lock:"Shift",undo:function(e,t){var r;switch(t){case n.Mac:return!("z"!==e.key||e.altKey||e.ctrlKey||e.shiftKey||!(null===(r=e.nativeEvent)||void 0===r?void 0:r.metaKey));case n.Windows:return"z"===e.key&&!e.altKey&&e.ctrlKey&&!e.shiftKey}},redo:function(e,t){var r;switch(t){case n.Mac:return!("y"!==e.key||e.altKey||e.ctrlKey||e.shiftKey||!(null===(r=e.nativeEvent)||void 0===r?void 0:r.metaKey));case n.Windows:return"y"===e.key&&!e.altKey&&e.ctrlKey&&!e.shiftKey}},copy:function(e,t){var r;switch(t){case n.Mac:return!("c"!==e.key||e.altKey||e.ctrlKey||e.shiftKey||!(null===(r=e.nativeEvent)||void 0===r?void 0:r.metaKey));case n.Windows:return"c"===e.key&&!e.altKey&&e.ctrlKey&&!e.shiftKey}},paste:function(e,t){var r;switch(t){case n.Mac:return!("v"!==e.key||e.altKey||e.ctrlKey||e.shiftKey||!(null===(r=e.nativeEvent)||void 0===r?void 0:r.metaKey));case n.Windows:return"v"===e.key&&!e.altKey&&e.ctrlKey&&!e.shiftKey}}});var o=function(){function e(e){void 0===e&&(e=t.DefaultHotKeys);var r=[];for(var n in e){var i=e[n];i&&r.push(Object.freeze({kind:n,checker:this.toHotKeyChecker(i)}))}this.nodes=Object.freeze(r)}return e.prototype.checkHotKey=function(e){for(var t=this.getKeyboardKind(),r=0,n=this.nodes;r<n.length;r++){var i=n[r];if(i.checker(e,t))return i.kind}},e.prototype.getKeyboardKind=function(){return/^Mac/i.test(navigator.platform)?n.Mac:n.Windows},e.prototype.toHotKeyChecker=function(e){if("function"!=typeof e&&(e instanceof Array||(e=[e]),e instanceof Array)){var t=Object.freeze(e.map((function(e){return"string"==typeof e&&(e={key:e,altKey:null,ctrlKey:null,shiftKey:null}),Object.freeze(i({},e))})));e=function(e){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(!(i.key!==e.key||null!==i.altKey&&i.altKey!==e.altKey||null!==i.ctrlKey&&i.ctrlKey!==e.ctrlKey||null!==i.shiftKey&&i.shiftKey!==e.shiftKey))return!0}return!1}}return e},e}();t.HotKeysNode=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(6),s=r(19),c=function(){function e(e){var t=this,r=e.disableMaskKey,n=e.useMobXMode,i=e.propertyGetters,o=e.onStateChanged;this.didStateReady=!1,this.updatedState={},this.activeUpdateKey=null,this.updateState=function(){var e=t.updatedState;t._state=t.patchState(e),t.updatedState={},t.onStateChanged&&t.onStateChanged(e)},this.disableActiveCallback=r,this.useMobXMode=n,this.updateLimiter=new a.InvokeFrequencyLimiter(0,this.updateState),this.onStateChanged=o,this.disposers=this.createAutoRun(i)}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.release=function(){for(var e=0,t=this.disposers;e<t.length;e++)(0,t[e])()},e.prototype.activeUpdate=function(e,t){var r;try{this.activeUpdateKey=e;var n=t();return this._state=this.setState(e,n),this.onStateChanged&&!this.disableActiveCallback&&this.onStateChanged(((r={})[e]=n,r)),n}finally{this.activeUpdateKey=null}},e.prototype.createAutoRun=function(e){var t=this,r=[],n=function(n){var i=e[n],a=o.autorun((function(){if(t.didStateReady){var e=i(),r=n in t.updatedState?t.updatedState[n]:t._state[n];t.activeUpdateKey===n||s.isEquals(e,r)||(t.updatedState[n]=e,t.updateLimiter.invoke())}else t.updatedState[n]=i()}));r.push(a)};for(var i in e)n(i);return this._state=this.createState(this.updatedState),this.updatedState={},this.didStateReady=!0,r},e.prototype.createState=function(e){return this.useMobXMode?o.observable(e):Object.freeze(e)},e.prototype.patchState=function(e){if(this.useMobXMode){for(var t in e)this._state[t]=e[t];return this._state}return Object.freeze(Object.assign({},this._state,e))},e.prototype.setState=function(e,t){var r;return this.useMobXMode?(this._state[e]=t,this._state):Object.freeze(n(n({},this._state),((r={})[e]=t,r)))},i([o.action],e.prototype,"activeUpdate",null),i([o.action],e.prototype,"updateState",void 0),e}();t.StateTrigger=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33);t.basePixelWidth=function(e){switch(e){case n.ScreenType.Desktop:case n.ScreenType.Phone:case n.ScreenType.Pad:case n.ScreenType.TV:return 2.42;default:return 1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(37),i=Object.freeze({x:8,y:18}),o=Object.freeze({width:26,height:26}),a=function(){function e(e){var t=this;this.cursors=Object.freeze([]),n.fetchCanvasImageSource("https://sdk.netless.link/resource/mouse-cursor/easer-cursor.png").then((function(e){for(var r=[],n=0;n<1;++n)r[n]=null;for(n=1;n<=36;++n)r[n]=t.createCursor(n,e);t.cursors=Object.freeze(r)})).catch((function(t){return e.error(t)}))}return e.prototype.cursorStyle=function(e){var t=this.cursors[Math.min(Math.ceil(e),36)];return t?"url("+t.url+") "+t.centerX+" "+t.centerY+", auto":void 0},e.prototype.release=function(){for(var e=0,t=this.cursors;e<t.length;e++){var r=t[e];r&&URL.revokeObjectURL(r.url)}this.cursors=Object.freeze([])},e.prototype.createCursor=function(e,t){var r=-e,n=-e,a=-i.x,s=-i.y,c=Number.MAX_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;Number.MIN_SAFE_INTEGER,c=Math.min(c,r),c=Math.min(c,a),u=Math.min(u,n),u=Math.min(u,s),l=Math.max(l,r)+2*e,l=Math.max(l,a)+2*o.width,Math.max(u,n);var p=-c,h=-u,d=l-c,f=Math.max(u,s)+2*o.height-u;a+=p,s+=h;var y=document.createElement("canvas"),A=y.getContext("2d");return y.width=d,y.height=f,A.fillStyle="rgba(216,216,216,146)",A.beginPath(),A.ellipse(p,h,e,e,0,0,2*Math.PI),A.fill(),A.drawImage(t,a,s),Object.freeze({centerX:p,centerY:h,url:y.toDataURL("mycanvas")})},e}();t.EraserRadiusCursor=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this.stackMap=new Map,this.stackIndexMap=new Map,this.index=0,this.textareaExtraStep=0,this.execute=e.execute,this.onCanUndoStepsUpdate=e.onCanUndoStepsUpdate,this.onCanRedoStepsUpdate=e.onCanRedoStepsUpdate}return Object.defineProperty(e.prototype,"canUndoSteps",{get:function(){return this.stack.length-this.index+this.textareaExtraStep},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedoSteps",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stack",{get:function(){var e=this.stackMap.get(this.currentScenePath);return e||(e=[],this.stackMap.set(this.currentScenePath,e)),e},enumerable:!0,configurable:!0}),e.prototype.commit=function(e){var t=this.stack,r=this.canUndoSteps,i=this.canRedoSteps;for(t.splice(0,this.index,n.copy(e)),this.index=0;t.length>20;)t.pop();var o=this.canUndoSteps,a=this.canRedoSteps;o!==r&&this.onCanUndoStepsUpdate(o),a!==i&&this.onCanRedoStepsUpdate(o)},e.prototype.undo=function(){var e=this.stack[this.index];e&&(this.index++,this.textareaExtraStep=0,this.execute(e.undo),this.onCanUndoStepsUpdate(this.canUndoSteps),this.onCanRedoStepsUpdate(this.canRedoSteps),this.stackIndexMap.set(this.currentScenePath,this.index))},e.prototype.redo=function(){this.index>0&&(this.index--,this.textareaExtraStep=0,this.execute(this.stack[this.index].redo),this.onCanUndoStepsUpdate(this.canUndoSteps),this.onCanRedoStepsUpdate(this.canRedoSteps),this.stackIndexMap.set(this.currentScenePath,this.index))},e.prototype.setCurrentScenePath=function(e){this.currentScenePath=e,this.index=this.stackIndexMap.get(this.currentScenePath)||0,this.textareaExtraStep=0,this.onCanUndoStepsUpdate(this.canUndoSteps),this.onCanRedoStepsUpdate(this.canRedoSteps)},e.prototype.onTextareaUpdate=function(e){this.textareaExtraStep=e?1:0,this.onCanUndoStepsUpdate(this.canUndoSteps)},e}();t.UndoStack=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.creators={}}return e.prototype.addTextareaRectGetter=function(e,t){this.creators[e]=t},e.prototype.removeTextareaRectGetter=function(e){delete this.creators[e]},e.prototype.getTextareaSizeMap=function(e){var t={};for(var r in this.creators){var n=this.creators[r](e);n&&(t[r]=n)}return t},e}();t.TextareaHubImplement=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=function(){function e(){var e=this;this.mainView=null,this._cameraState={centerX:0,centerY:0,scale:1,width:0,height:0},this.onSizeUpdated=function(t){t.width===e._cameraState.width&&t.height===e._cameraState.height||(e._cameraState=Object.freeze(n(n({},e._cameraState),t)))},this.onCameraUpdated=function(t){t.centerX===e._cameraState.centerX&&t.centerY===e._cameraState.centerY&&t.scale===e._cameraState.scale||(e._cameraState=Object.freeze(n(n({},e._cameraState),t)))}}return Object.defineProperty(e.prototype,"cameraState",{get:function(){return this._cameraState},enumerable:!0,configurable:!0}),e.prototype.setupMainView=function(e){this.releaseMainView(),this.mainView=e,e.callbacks.on("onSizeUpdated",this.onSizeUpdated),e.callbacks.on("onCameraUpdated",this.onCameraUpdated)},e.prototype.releaseMainView=function(){this.mainView&&(this.mainView.callbacks.off("onSizeUpdated",this.onSizeUpdated),this.mainView.callbacks.off("onCameraUpdated",this.onCameraUpdated),this.mainView=null)},e.prototype.dispose=function(){this.releaseMainView()},i([o.observable],e.prototype,"_cameraState",void 0),i([o.action],e.prototype,"onSizeUpdated",void 0),i([o.action],e.prototype,"onCameraUpdated",void 0),e}();t.CameraObserver=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),a=r(36),s=r(35),c=function(){function e(e){this.roomToken=e,this.apiFetch=a.fetcher.fetch("ppt-api")}return e.prototype.convert=function(t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return[4,this.createPPTTask(t)];case 1:return r=i.sent(),[4,this.checkUtilHasResult(r,t)];case 2:return n=i.sent(),[2,e.wrapPPTDescriptions(r,t.kind,n)]}}))}))},e.prototype.createPPTTask=function(t){return n(this,void 0,void 0,(function(){var r,n,a,s,c,u;return i(this,(function(i){switch(i.label){case 0:return r=o.stringify({roomToken:this.roomToken}),[4,this.apiFetch("http://ppt-api/services/conversion/tasks?"+r,{method:"post",headers:{"content-type":"application/json",Accept:"application/json"},body:JSON.stringify({sourceUrl:t.url,serviceType:e.convertPPTKindToServiceType(t.kind)})})];case 1:if(200!==(n=i.sent()).status)throw new Error("failed to convert "+JSON.stringify(t.url)+" with status "+n.status);return[4,n.json()];case 2:if(a=i.sent().msg,s=a.succeed,c=a.reason,u=a.taskUUID,!s)throw new Error("create ppt task failed: "+c);return[2,u]}}))}))},e.prototype.checkUtilHasResult=function(t,r){return n(this,void 0,void 0,(function(){var n,o,a,s,c,u,l;return i(this,(function(p){switch(p.label){case 0:n=!1,o=Date.now(),a=r.checkProgressInterval||e.defaultCheckProgressInterval,s=r.checkProgressTimeout||e.defaultCheckProgressTimeout,c=function(){var e,c,l,p,h,d,f;return i(this,(function(i){switch(i.label){case 0:return e=Date.now(),[4,u.fetchProgress(t,r.kind)];case 1:switch((c=i.sent()).convertStatus){case"Finished":return r.onProgressUpdated&&!n&&r.onProgressUpdated(1),[2,{value:c.convertedFileList.map((function(e){return{width:e.width,height:e.height,src:c.prefix+e.conversionFileUrl}}))}];case"Fail":case"NotFound":throw new Error("failed to convert "+JSON.stringify(r.url)+": "+c.reason)}if(l=c.totalPageSize,p=c.convertedPercentage,h=0===l?0:p/100,(d=e+a)>=o+s)throw new Error("failed to convert "+JSON.stringify(r.url)+": timeout");return r.onProgressUpdated&&r.onProgressUpdated(h),1===h&&(n=!0),(f=d-Date.now())>0?[4,new Promise((function(e){return setTimeout(e,f)}))]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))},u=this,p.label=1;case 1:return[5,c()];case 2:return"object"==A(l=p.sent())?[2,l.value]:[3,1];case 3:return[2]}}))}))},e.prototype.fetchProgress=function(t,r){return n(this,void 0,void 0,(function(){var n,a,s;return i(this,(function(i){switch(i.label){case 0:return n="http://ppt-api/services/conversion/tasks/"+t+"/progress",a=o.stringify({roomToken:this.roomToken,serviceType:e.convertPPTKindToServiceType(r)}),[4,this.apiFetch(n+"?"+a,{headers:{"content-type":"application/json",Accept:"application/json"}})];case 1:if(200!==(s=i.sent()).status)throw new Error("failed to fetch progress of "+JSON.stringify(n));return[4,s.json()];case 2:return[2,i.sent().msg.task]}}))}))},e.wrapPPTDescriptions=function(e,t,r){for(var n=[],i=[],o=0,a=0,s=0;s<r.length;++s){var c=r[s],u=c.src,l=c.width,p=c.height;n[s]=u,i[s]={name:""+(s+1),ppt:{src:u,width:l,height:p}},o=l,a=p}return{uuid:e,kind:t,width:o,height:a,slideURLs:n,scenes:i}},e.convertPPTKindToServiceType=function(e){switch(e){case s.PPTKind.Dynamic:return"dynamic_conversion";case s.PPTKind.Static:return"static_conversion";default:throw new Error("invalid kind "+JSON.stringify(e))}},e.defaultCheckProgressInterval=1500,e.defaultCheckProgressTimeout=3e5,e}();t.LegacyPPTConverterImplement=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(2),c=r(9),u=r(0),l=r(1),p=r(10),h=r(124),d=r(128);!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Center=4]="Center"}(a||(a={}));var f=function(e){function t(t){var r=e.call(this,t)||this;return r.viewMovingState=new d.ViewMovingState(t.rectangle),r}return i(t,e),t.prototype.componentDidUpdate=function(){this.viewMovingState.setState(this.props.rectangle,this.isEditTextarea())},t.prototype.componentWillUnmount=function(){this.viewMovingState.release()},t.willInterruptEvent=function(e,t){return!0},t.prototype.isEditTextarea=function(){for(var e=this.props.whiteModel.TextareaShape,t=0,r=this.props.components;t<r.length;t++){var n=r[t];if(u.isInstanceOf(n,e)&&void 0!==n.editedBy)return!0}return!1},t.prototype.position=function(e,t,r){for(var n=e.originX,i=e.originY,o=n+e.width,s=i+e.height,c=h.BarPadding.left+h.BarPadding.right,u=h.BarPadding.top+h.BarPadding.bottom,l=0,p=0,d=r;p<d.length;p++){var f=d[p],y=f.width,A=f.height;c+=y,l=Math.max(l,A)}u+=l;var m=c+h.BarMargin.left+h.BarMargin.right,g=u+h.BarMargin.top+h.BarMargin.bottom,v=this.props.screenSize.width,b=this.props.screenSize.height;return{left:n,right:o,top:i,bottom:s,position:i>=g?a.Top:b-s>=g?a.Bottom:n>=m?a.Left:v-o>=m?a.Right:a.Center,boxWidth:c,boxHeight:u,width:m,height:g}},t.prototype.centerXWithTopOrBottom=function(e,t){var r=Math.max(e.left,0),n=Math.min(e.right,t),i=e.width/2,o=(r+n)/2;return o-i<0?o=i:o+i>t&&(o=t-i),o},t.prototype.render=function(){var e=this;return s.createElement(p.RoomConsumer,null,(function(t){return s.createElement(c.Observer,null,(function(){return t?e.renderWhenIsRoom(t):null}))}))},t.prototype.renderWhenIsRoom=function(e){if(this.viewMovingState.shouldHideFloatBar)return null;var t=h.searchButtons({viewMovingState:this.viewMovingState,whiteModel:this.props.whiteModel,components:this.props.components,delegate:e.floatBarDelegate,colors:e.floatBarOptions.colors});if(t.length<=0)return null;var r,n,i=this.position(this.props.rectangle,e,t),o=this.props.screenSize.width,c=this.props.screenSize.height;switch(i.position){case a.Top:r=this.centerXWithTopOrBottom(i,o),n=i.top-i.height/2;break;case a.Bottom:r=this.centerXWithTopOrBottom(i,o),n=i.bottom+i.height/2;break;case a.Left:r=i.left-i.width/2,n=Math.max(i.top,0)+i.height/2;break;case a.Right:r=i.right+i.width/2,n=Math.max(i.top,0)+i.height/2;break;case a.Center:r=(Math.max(i.left,0)+Math.min(i.right,o))/2,n=Math.max(i.top,0)+i.height/2}for(var u=r-i.width/2,p=n-i.height/2,d="translate("+u+"px,"+p+"px)",f=[],y=u,A=0,m=t;A<m.length;A++){var g=m[A],v=g.width,b=(0,g.node)(y,p,i.boxWidth,i.boxHeight,o,c);f.push(b),y+=v}return s.createElement(l.CNode,{context:this.props.cnode,className:"float-bar",style:{WebkitTransform:d,transform:d,width:i.boxWidth,height:i.boxHeight,padding:0,marginLeft:h.BarMargin.left,marginRight:h.BarMargin.right,marginTop:h.BarMargin.top,marginBottom:h.BarMargin.bottom}},f)},o([c.observer],t)}(s.Component);t.FloatBar=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95),i=function(){function e(){this.listeners={},this.eventsMergers={},this.waitingNodes=[]}return e.prototype.dispatchMagixEvent=function(e){var t=this.listeners[e.event];if(t)for(var r=0,n=t;r<n.length;r++){var i=n[r];try{i(e)}catch(e){console.error(e)}}var o=this.waitingNodes.findIndex((function(t){return!!t.filter(e)&&(t.resolve(e),!0)}));-1!==o&&this.waitingNodes.splice(o,1)},e.prototype.addMagixEventsListener=function(e,t,r){var i=n.createEventsMerger(t,r),o=this.eventsMergers[e];o||(o=[],this.eventsMergers[e]=o),o.push(i),this.addMagixEventListener(e,i)},e.prototype.addMagixEventListener=function(e,t){var r=this.listeners[e];r||(r=[],this.listeners[e]=r),r.push(t)},e.prototype.removeMagixEventListener=function(e,t){if(t){var r=this.removeFromEventMerges(e,t);r?this.removeFromListeners(e,r):this.removeFromListeners(e,t)}else delete this.listeners[e],delete this.eventsMergers[e]},e.prototype.removeFromEventMerges=function(e,t){var r=this.eventsMergers[e];if(r){for(var n=-1,i=0;i<r.length;++i)if(r[i].proxyListener===t){n=i;break}if(-1!==n){var o=r[n];return r.splice(n,1),0===r.length&&delete this.eventsMergers[e],o}}},e.prototype.removeFromListeners=function(e,t){var r=this.listeners[e];if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),0===r.length&&delete this.listeners[e])}},e.prototype.waitMagixEvent=function(e){var t=this;return new Promise((function(r){t.waitingNodes.push({resolve:r,filter:e})}))},e}();t.MagixEventsManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.createEventsMerger=function(e,t){var r=[],i=new n.InvokeFrequencyLimiter(t,(function(){r.length>0&&e(r.splice(0,r.length))}));function o(e){r.push(e),i.invoke()}return Object.defineProperty(o,"proxyListener",{writable:!1,value:e}),o}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createPlugins=function(e){return new i(e)};var i=function(){function e(e){this.cacheContextMap={},this.manager=null,this.plugins=this.copyAndFreezePlugins(e)}return e.prototype.copyAndFreezePlugins=function(e){var t={};for(var r in e){var i=e[r];if(void 0!==i.kind&&r!==i.kind)throw new Error("plugin's kind "+JSON.stringify(i.kind)+" is not equals key "+JSON.stringify(r));var o=i.defaultAttributes;"object"==A(o)&&null!==o&&(o=Object.freeze(n({},o))),t[r]=Object.freeze({kind:r,render:i.render,defaultAttributes:o,hitTest:i.hitTest,willInterruptEvent:i.willInterruptEvent})}return Object.freeze(t)},e.prototype.setPluginContext=function(e,t){this.manager?this.manager.setPluginContext(e,t):this.cacheContextMap&&e in this.plugins&&(this.cacheContextMap[e]=t)},e.prototype.getPluginContext=function(e){return this.manager?this.manager.getPluginContext(e):this.cacheContextMap?this.cacheContextMap[e]:void 0},e.prototype.setPluginManager=function(e){if(this.cacheContextMap){for(var t in this.cacheContextMap)e.setPluginContext(t,this.cacheContextMap[t]);this.cacheContextMap=null}else if(this.manager)for(var t in this.plugins){var r=this.manager.getPluginContext(t);e.setPluginContext(t,r)}this.manager=e},e}();t.PluginsImplement=i},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(0),a=r(5),s=function(){function e(e){this.enableCallbackUpdate=!0,this.disposer=null,this.kind=e.kind,this._displayer=e.displayer,this._callbacks=new a.CallbacksImplement,this.onAttributesUpdate&&this._callbacks.on("onAttributesUpdate",this.onAttributesUpdate.bind(this)),this.onDestroy&&this._callbacks.on("onDestroy",this.onDestroy.bind(this)),this.autorunAttributesUpdate()}return e.prototype.autorunAttributesUpdate=function(){var e=this,t=!1;this.disposer=i.autorun((function(){if(e._displayer.applianceManager.hasInvisibilePluginKind(e.kind)){var r=e.attributes;t&&e.enableCallbackUpdate&&e._callbacks.dispatch("onAttributesUpdate",(function(e){return e(r)})),t=!0}}))},Object.defineProperty(e.prototype,"displayer",{get:function(){return this._displayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callbacks",{get:function(){return this._callbacks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var e=this._displayer.applianceManager.getAttributesWithInvisiblePlugin(this.kind);return this._displayer.useMobXState||(e=o.copy(e)),e},enumerable:!0,configurable:!0}),e.prototype.getAttributesValue=function(e){return this._displayer.applianceManager.getAttributesWithInvisiblePlugin(this.kind,e)},e.prototype.setAttributes=function(e){var t=this;try{this.enableCallbackUpdate=!1,this._displayer.applianceManager.updateAttributesInvisiblePlugin(this.kind,e)}finally{Promise.resolve((function(){return t.enableCallbackUpdate=!0}))}},e.prototype.updateAttributes=function(e,t){var r=this;try{this.enableCallbackUpdate=!1,this._displayer.applianceManager.updateAttributesInvisiblePluginWithKeys(this.kind,e,t)}finally{Promise.resolve((function(){return r.enableCallbackUpdate=!0}))}},e.prototype.destroy=function(){var e=this;try{this.enableCallbackUpdate=!1,this._displayer.applianceManager.removeInvisiblePlugin(this.kind)}finally{Promise.resolve((function(){return e.enableCallbackUpdate=!0}))}},e.prototype._dispose=function(e){this.disposer&&(this.disposer(),this.disposer=null),e&&this.enableCallbackUpdate&&this._callbacks.dispatch("onDestroy",(function(e){return e()}))},n([i.computed],e.prototype,"attributes",null),e}();t.InvisiblePlugin=s;var c=function(){function e(e,t,r){this.pluginClasses={},this.plugins={},this.paddingCreators={},this.disposer=null,this._isWatching=!1,this.logger=e,this.displayer=t,this.pluginClasses=this.createPluginClasses(r)}return e.prototype.createPluginClasses=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];if(i.kind in t)throw new Error("duplicated kind from invisible plugin "+JSON.stringify(i.kind));t[i.kind]=i}return Object.freeze(t)},Object.defineProperty(e.prototype,"isWatching",{get:function(){return this._isWatching},set:function(e){var t=this;this._isWatching!==e&&(this._isWatching=e,e&&!this.disposer?this.disposer=i.autorun((function(){for(var e in t.pluginClasses)t.refreshPlugin(t.pluginClasses[e])})):!e&&this.disposer&&(this.disposer(),this.disposer=null))},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this.plugins[e]||null},e.prototype.create=function(e,t){var r=this;return new Promise((function(n,i){var o=e.kind,a=r.displayer.applianceManager;try{if(r.addPaddingCreator(o,n),e!==r.pluginClasses[o])throw new Error("unregister invisible plugin class");a.putInvisiblePlugin(o,t)}catch(e){i(e),r.removePaddingCreator(o,n)}}))},e.prototype.dispose=function(){for(var e in this.disposer&&(this.disposer(),this.disposer=null),this.plugins){try{this.plugins[e]._dispose(!1)}catch(e){this.logger.error(e)}delete this.plugins[e]}},e.prototype.refreshPlugin=function(e){var t=this.displayer.applianceManager,r=e.kind;if(t.hasInvisibilePluginKind(r)){if(!this.plugins[r]){var n=this.plugins[r]=new e({displayer:this.displayer,kind:r});if(e.onCreate)try{e.onCreate(n)}catch(e){this.logger.error(e)}}var i=this.paddingCreators[r];if(i){delete this.paddingCreators[r];for(var o=0,a=i;o<a.length;o++)(0,a[o])(this.plugins[r])}}else if(n=this.plugins[r]){delete this.plugins[r];try{n._dispose(!0)}catch(e){this.logger.error(e)}if(e.onDestroy)try{e.onDestroy(n)}catch(e){this.logger.error(e)}}},e.prototype.addPaddingCreator=function(e,t){var r=this.paddingCreators[e];r||(r=this.paddingCreators[e]=[]),r.push(t)},e.prototype.removePaddingCreator=function(e,t){var r=this.paddingCreators[e];if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),0===r.length&&delete this.paddingCreators[e])}},e}();t.InvisiblePluginNode=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(40),s=r(41),c=r(5),u=function(e){function t(t,r,n){var i=e.call(this,r)||this;return i.viewsMap={},i.previousViewId=0,i.writer=null,i.params=t,i.context=Object.freeze(o({},n)),i._dynamicPpt=n.dynamicPpt,i._callbacks=new c.CallbacksImplement,i.commonScreenContext=Object.freeze({observerId:r.observerId,forcePPTLandscape:r.forcePPTLandscape,disalbeImageHit:r.disalbeImageHit,disableOthersSelectingBox:r.disableOthersSelectingBox}),i}return i(t,e),Object.defineProperty(t.prototype,"writableView",{get:function(){return this.writer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dynamicPpt",{get:function(){return this._dynamicPpt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callbacks",{get:function(){return this._callbacks},enumerable:!0,configurable:!0}),t.prototype.onStateUpdate=function(e,t){var r,n;if("observerId"in e&&this.updateCommonScreenContext("observerId",e.observerId),"forcePPTLandscape"in e&&this.updateCommonScreenContext("forcePPTLandscape",e.forcePPTLandscape),"disalbeImageHit"in e&&this.updateCommonScreenContext("disalbeImageHit",e.disalbeImageHit),"disableOthersSelectingBox"in e&&this.updateCommonScreenContext("disableOthersSelectingBox",e.disableOthersSelectingBox),"disableBoundlessEvent"in e&&this.forEach((function(t){return t.updateDisableBoundlessEvent(e.disableBoundlessEvent)})),"cursorClass"in e&&(null===(r=this.writer)||void 0===r||r.updateCursorClass(e.cursorClass)),"cursorStyle"in e&&(null===(n=this.writer)||void 0===n||n.updateCursorStyle(e.cursorStyle)),"playerState"in e){var i=e.playerState,o=this.context.pluginManager;o.setPlayerState?o.setPlayerState(i):void 0!==i.isPlaying&&o.setPlayingState(i.isPlaying)}},t.prototype.setupViewContext=function(e){e.updateDisableBoundlessEvent(this.state.disableBoundlessEvent),e.updateCursorClass(this.state.cursorClass),e.updateCursorClass(this.state.cursorStyle)},t.prototype.updateCommonScreenContext=function(e,t){var r;for(var n in this.commonScreenContext=Object.freeze(o(o({},this.commonScreenContext),((r={})[e]=t,r))),this.viewsMap)this.viewsMap[n].setCommonScreenContext(this.commonScreenContext)},t.prototype.forEach=function(e){for(var t in this.viewsMap)e(this.viewsMap[t])},t.prototype.createView=function(e,t){var r=this,n=""+(this.previousViewId+=1),i=Object.freeze({onIsWriterChanged:function(e){return r.changeViewIsWriter(o,e)},onRelease:function(){return r.releaseView(o)},onBoundlessEvent:function(e){r._callbacks.dispatch("onBoundlessEvent",(function(t){return t(o,e)}))}}),o=new a.ViewImplement(n,this.commonScreenContext,this.params,this.context,e,i,t);return this.viewsMap[o.id]=o,this.setupViewContext(o),this._callbacks.dispatch("onCreatedView",(function(e){return e(o)})),o},t.prototype.updateContext=function(e){var t=this;for(var r in this.viewsMap){var n=this.viewsMap[r];n.updateContext(e),this.setupViewContext(n)}this._dynamicPpt=e.dynamicPpt,this.writer&&this._callbacks.dispatch("onWritableScreenChanged",(function(e){return e(t.writer)}))},t.prototype.changeViewIsWriter=function(e,t){if(t){if(this.writer&&this.writer!==e)throw new Error("there is another view who's mode is Writable. it should be singleton");this.writer=e,this.writer.updateCursorClass(this.state.cursorClass),this.writer.updateCursorStyle(this.state.cursorStyle),this._callbacks.dispatch("onWritableViewChanged",(function(t){return t(e)})),this._callbacks.dispatch("onWritableScreenChanged",(function(t){return t(e)}))}else this.writer===e&&(this.writer.updateCursorClass(null),this.writer.updateCursorStyle(null),this.writer=null,this._callbacks.dispatch("onWritableViewChanged",(function(e){return e(null)})),this._callbacks.dispatch("onWritableScreenChanged",(function(e){return e(null)})))},t.prototype.releaseView=function(e){delete this.viewsMap[e.id],this.writer===e&&(this.writer=null),this._callbacks.dispatch("onReleasedView",(function(t){return t(e)}))},t}(s.StateOwner);t.ViewsHub=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),s=r(2),c=r(0),u=r(1),l=r(7),p=r(39),h=r(21),d=r(37),f=r(100),y=r(107),A=function(){function e(e,t,r,i,o,a){var s,c=this;this._maskScreenObserverId=!0,this.onScreenSizeUpdated=function(e){c.cameraBoundState.setScreenSize(e),c.cursors&&c.cursors.updateScreenSize(),c.render.refreshSceneComponents(),c._onScreenSizeUpdated&&c._onScreenSizeUpdated(e)},this.updateCursorClassBySelector=function(e){if(c.applianceManager){var t=c.applianceManager.getMemberState();t&&t.currentApplianceName===l.ApplianceNames.selector&&c.updateCursorClass(e)}};var h=r.modules,d=h.WhiteRender,y=d.WhiteboardRender,A=d.BezierCurvePainter;this.engines=r.engines,this.modules=r.modules,this.pluginManager=r.pluginManager,this.applianceManager=r.applianceManager,this.dynamicPpt=r.dynamicPpt,this.view=e,this._isCursorsHidden=o,this.observerId=t.observerId,this.bezierCurvePainter=this.createBezierCurvePainter(A);var m=this.applianceManager.getViewState(),g=this.createScene(i.boundless,i.logger,i.renderEngine,h),v=Object.freeze(n(n({},t),{observerId:this.screenObserverId(t),deviceType:i.boundless.deviceType,dynamicPpt:this.dynamicPpt,disalbeImageHit:!1,disableOthersSelectingBox:!1,pluginManager:this.pluginManager,bezierCurvePainter:this.bezierCurvePainter,fontFamily:i.fontFamily,convertIdToUrl:i.urlInterrupter,updateTextarea:i.onTextareaUpdate,updateCursorClass:this.updateCursorClassBySelector,floatBarClass:i.floatBarClass,textareaHub:i.textareaHub}));if(this.screen=g.createScreen({className:"netless-whiteboard",context:v,engines:null===(s=this.engines)||void 0===s?void 0:s.enginesList,autoResize:i.autoResize,eventInterrupter:i.eventInterrupter,wrappedComponents:i.wrappedComponents,onRenderDuration:function(e){return c.view.fireRenderDuration(e)}}),this.onCatchErrorWhenRender=i.onCatchErrorWhenRender,this._onScreenSizeUpdated=i.onScreenSizeUpdated,i.onCatchErrorWhenRender&&this.screen.addRenderErrorCatchedListener(i.onCatchErrorWhenRender),this.screen.addSizeUpdatedListener(this.onScreenSizeUpdated),a){var b=a.cameraBoundState;this.cameraBoundState=new p.CameraBoundState(this.screen,b.cameraBound),this.cameraBoundState.cameraman.disableBoundlessEvent=b.cameraman.disableBoundlessEvent,this.cameraBoundState.cameraman.disableCameraTransform=b.cameraman.disableCameraTransform,this.cameraBoundState.cameraman.handToolKey=b.cameraman.handToolKey}else this.cameraBoundState=new p.CameraBoundState(this.screen,i.cameraBound),this.cameraBoundState.cameraman.disableBoundlessEvent=i.disableOperations,this.cameraBoundState.cameraman.handToolKey=i.handToolKey;this.cameraBoundState.cameraman.adaptRectangle({originX:m.originX,originY:m.originY,width:m.width,height:m.height,adapterMode:u.RectangleAdapterMode.Centering,animationMode:u.AnimationMode.Immediately}),this.render=new y(this.screen,this.pluginManager,this.applianceManager,this.engines),this.setupViewContextState(e.state),setTimeout((function(){var e;c.cursors=new f.CursorsManager({appVersion:r.appVersion,applianceManager:c.applianceManager,screen:c.screen,engine:null===(e=c.engines)||void 0===e?void 0:e.engines.mouseCurosrEngine,observerId:c.observerId,isHidden:c._isCursorsHidden,willHideObserver:i.willHideSelfCursor,adapter:i.cursorAdapter})}),0)}return Object.defineProperty(e.prototype,"isCursorsHidden",{get:function(){return this._isCursorsHidden},set:function(e){this._isCursorsHidden!==e&&(this._isCursorsHidden=e,this.cursors&&this.cursors.setHidden(this._isCursorsHidden))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskFloatBar",{get:function(){return this.render.maskFloatBar},set:function(e){this.render.maskFloatBar=e},enumerable:!0,configurable:!0}),e.prototype.updateState=function(e){"cameraBound"in e&&this.cameraBoundState.setCameraBound(e.cameraBound),this.syncCameraMoving(e.cameraMoving),"disableCameraTransform"in e&&(this.cameraman.disableCameraTransform=e.disableCameraTransform),"handToolActive"in e&&(this.cameraman.handToolActive=e.handToolActive),"handToolKey"in e&&(this.cameraman.handToolKey=e.handToolKey),"divElement"in e&&(this.screen.divElement=e.divElement)},e.prototype.syncCameraMoving=function(e){if(e){var t=e.camera,r=e.toContaint;if(t){var i=t.animationMode||u.AnimationMode.Continuous;this.cameraman.transformCamera(n(n({},t),{animationMode:i}))}else r&&(i=r.animationMode||u.AnimationMode.Continuous,this.cameraman.adaptRectangle(n(n({},r),{animationMode:i,adapterMode:u.RectangleAdapterMode.Centering})))}},e.prototype.setupViewContextState=function(e){this.cameraBoundState.setCameraBound(e.cameraBound),this.syncCameraMoving(e.cameraMoving),this.cameraman.transformCamera(n(n({},e.cameraMoving),{animationMode:u.AnimationMode.Immediately})),this.cameraman.disableCameraTransform=e.disableCameraTransform,this.cameraman.handToolActive=e.handToolActive,this.cameraman.handToolKey=e.handToolKey,this.screen.divElement=e.divElement},e.prototype.createBezierCurvePainter=function(e){var t=null;return e&&(t=new e([.1,.3,.5,.7,.9,1])),t},e.prototype.createScene=function(e,t,r,n){var i=n.WhiteRender;if(i.createLayoutDescriptions){var o=i.createLayoutDescriptions(r);return e.createSceneWithLegacyLayoutDescriptions(o,t)}return e.createScene(t)},Object.defineProperty(e.prototype,"scenePath",{get:function(){return"/"+this.applianceManager.getCurrentScenePath().join("/")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"foucsScenePath",{get:function(){return this.render.foucsScenePath},set:function(e){this.render.foucsScenePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameraman",{get:function(){return this.cameraBoundState.cameraman},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskScreenObserverId",{get:function(){return this._maskScreenObserverId},set:function(e){this._maskScreenObserverId!==e&&(this._maskScreenObserverId=e,this.screen.context=Object.freeze(n(n({},this.screen.context),{observerId:e?c.AdminObserverId:this.observerId})))},enumerable:!0,configurable:!0}),e.prototype.setCommonScreenContext=function(e){var t,r=this.observerId,i=e.observerId;this.screen.context=Object.freeze(n(n(n({},this.screen.context),e),{observerId:this.screenObserverId(e)})),r!==i&&(this.observerId=i,null===(t=this.cursors)||void 0===t||t.updateObserverId(i))},e.prototype.setCameraBound=function(e){this.cameraBoundState.setCameraBound(e)},e.prototype.resizeScreen=function(){this.screen.resize()},e.prototype.refreshRender=function(){this.render.refreshSceneComponents()},e.prototype.refreshCameraToFocus=function(){var e=this.applianceManager.getViewState(),t={originX:e.originX,originY:e.originY,width:e.width,height:e.height};this.screen.adaptRectangle(n(n({},t),{animationMode:u.AnimationMode.Continuous,adapterMode:u.RectangleAdapterMode.Centering}))},e.prototype.getTargetsMap=function(e,t){var r=e.component,n=e.engine,i=this.modules.WhiteModel.ApplianceComponent,o=void 0;return c.isInstanceOf(r.payload,i)&&(o=this.render.getTargetsMap?this.render.getTargetsMap(r,t):this.render.findTargetsMap(r.id,n.orderIndex,t)),o},e.prototype.release=function(){var e;this.onCatchErrorWhenRender&&this.screen.removeRenderErrorCatchedListener(this.onCatchErrorWhenRender),this.screen.removeSizeUpdatedListener(this.onScreenSizeUpdated),null===(e=this.cursors)||void 0===e||e.release(),this.screen.divElement=null,this.render.release(),this.cameraBoundState.cameraman.release()},e.prototype.scenePreview=function(e,t,r,n){var i=this.modules.WhiteRender,o=i.screenshot,c=i.EnginesHub;if(o){this.screenshotEngines||(this.screenshotEngines=c&&new c("svg"));var u=h.scenePathConverter.parse(e),l=this.screen;r="number"!=typeof r?t.clientWidth:r,n="number"!=typeof n?t.clientHeight:n;var p=1;0!==l.width&&0!==l.height&&(p=Math.min(r/l.width,n/l.height)*l.camera.scale);var d={centerX:l.camera.centerX,centerY:l.camera.centerY,scale:p},f=o({applianceManager:this.applianceManager,engines:this.screenshotEngines,pluginManager:this.pluginManager,bezierCurvePainter:this.bezierCurvePainter,width:r,height:n,path:u,camera:d});if(!s.isValidElement(f))throw new Error("scene preview must render ReactElement");a.render(f,t)}},e.prototype.fillSceneSnapshot=function(e,t,r,n){var i=this.modules.WhiteRender,o=i.screenshot,c=i.EnginesHub;if(o){this.screenshotEngines||(this.screenshotEngines=c&&new c("svg"));var u=h.scenePathConverter.parse(e),l=o({applianceManager:this.applianceManager,engines:this.screenshotEngines,pluginManager:this.pluginManager,bezierCurvePainter:this.bezierCurvePainter,width:r,height:n,path:u});if(!s.isValidElement(l))throw new Error("scene preview must render ReactElement");a.render(l,t)}},e.prototype.generateScreenshot=function(e,t,r){return i(this,void 0,void 0,(function(){var n,i,a;return o(this,(function(o){switch(o.label){case 0:if(e?(i=h.scenePathConverter.parse(e),n=this.applianceManager.scenes.getScene(i)):n=this.applianceManager.scene,!n)throw new Error("cannot find scene with path "+JSON.stringify(e));return(a=this.findBackgroundImage(n))?[4,this.generateImage(a,t,r)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,y.generateEmptyImage(1,1)]}}))}))},e.prototype.findBackgroundImage=function(e){for(var t=this.modules.WhiteModel.BackgroundImage,r=0;r<e.componentsLength;++r){var n=e.componentAt(r);if(c.isInstanceOf(n,t))return n}return null},e.prototype.generateImage=function(e,t,r){return i(this,void 0,void 0,(function(){var n,i,a,s,c,u,l,p,h,f;return o(this,(function(o){switch(o.label){case 0:return n=document.createElement("canvas"),void 0===t&&(t=e.width),void 0===r&&(r=e.height),n.width=t,n.height=r,!(i=e.previewURL)&&/^https?:\/\//im.test(e.src)&&(i=e.src),i?[4,d.fetchCanvasImageSource(i)]:[3,2];case 1:a=o.sent(),s=n.getContext("2d"),c=Math.min(t/e.width,r/e.height),u=e.width*c,l=e.height*c,p=(t-u)/2,h=(r-l)/2,s.drawImage(a,p,h,u,l),o.label=2;case 2:return[4,new Promise((function(e){return n.toBlob(e)}))];case 3:return f=o.sent(),[2,URL.createObjectURL(f)]}}))}))},e.prototype.updateCursorClass=function(e){this.screen.className=null!==e?"netless-whiteboard "+e:"netless-whiteboard"},e.prototype.updateCursorStyle=function(e){this.screen.style=null===e?void 0:{cursor:e}},e.prototype.screenObserverId=function(e){var t=e.observerId;return this._maskScreenObserverId?c.AdminObserverId:t},e}();t.ViewContextNode=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(101);t.CursorsManager=n.CursorsManager},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(102),a=r(106),s=r(8),c=r(10),u=function(){function e(e){var t=this;this._isHidden=!1,this.autoUpdateCursors=function(){var e,r;if(t._isHidden)t.laserPointerStateNodes.removeAll(),null===(e=t.cursorStateNodes)||void 0===e||e.removeAll();else{var n=t.applianceManager.getMemberDisplayers(),i=t.isFollowerFixedOnScreen(n);t.laserPointerStateNodes.updateMemberDisplayers(n,i),null===(r=t.cursorStateNodes)||void 0===r||r.updateMemberDisplayers(n,i)}},this.applianceManager=e.applianceManager,this.screen=e.screen,this.observerId=e.observerId,this._isHidden=e.isHidden;var r=this.getMouseCursorEngine(e.appVersion,e.engine),n=e.willHideObserver;this.laserPointerStateNodes=new o.CursorStateNodesSet({idPrefix:"laser-pointer-",adapter:new a.LaserPointerCursorAdapter,applianceManager:this.applianceManager,engine:r,screen:this.screen,willShow:function(e){return e.currentApplianceName===c.ApplianceNames.laserPointer&&(!n||e.memberId!==t.observerId)}}),e.adapter&&(this.cursorStateNodes=new o.CursorStateNodesSet({idPrefix:"cursor-",adapter:e.adapter,applianceManager:this.applianceManager,engine:r,screen:this.screen,willShow:function(e){return e.currentApplianceName!==c.ApplianceNames.laserPointer&&(!n||e.memberId!==t.observerId)}})),this.disposer=i.autorun(this.autoUpdateCursors)}return Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._isHidden},enumerable:!0,configurable:!0}),e.prototype.setHidden=function(e){this._isHidden!==e&&(this._isHidden=e)},e.prototype.updateObserverId=function(e){this.observerId=e},e.prototype.updateScreenSize=function(){var e;this.laserPointerStateNodes.updateScreenSize(),null===(e=this.cursorStateNodes)||void 0===e||e.updateScreenSize()},e.prototype.release=function(){this.disposer()},e.prototype.getMouseCursorEngine=function(e,t){if(t)return t;switch(e){case"2.0.0":return this.screen.scene.getEngineWithLegacyLayout(4);case"2.1.0":return this.screen.scene.getEngineWithLegacyLayout(5);default:throw new Error("invalid app version "+e)}},e.prototype.isFollowerFixedOnScreen=function(e){for(var t=void 0,r=0;r<e.length;++r){var n=e[r];if(n.memberId===this.observerId){t=n;break}}return!!t&&(t.mode===s.ViewMode.Broadcaster||t.mode===s.ViewMode.Follower)},n([i.observable],e.prototype,"observerId",void 0),n([i.observable],e.prototype,"_isHidden",void 0),n([i.action],e.prototype,"setHidden",null),e}();t.CursorsManager=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(103),i=function(){function e(e){this.nodes={},this.idPrefix=e.idPrefix,this.adapter=e.adapter,this.applianceManager=e.applianceManager,this.engine=e.engine,this.screen=e.screen,this.willShow=e.willShow}return e.prototype.updateScreenSize=function(){for(var e in this.nodes)this.nodes[e].updateScreenSize()},e.prototype.removeAll=function(){for(var e in this.nodes)this.nodes[e].remove(),delete this.nodes[e]},e.prototype.updateMemberDisplayers=function(e,t){for(var r={},i=this.nodes,o=0;o<e.length;++o){var a=e[o],s=a.memberId;if(this.willShow(a)){var c=i[s];c?(c.updateDisplayer(a,t),r[s]=c,delete i[s]):r[s]=new n.CursorStateNode({idPrefix:this.idPrefix,applianceManager:this.applianceManager,screen:this.screen,engine:this.engine,displayer:a,isFollowerFixedOnScreen:t,adapter:this.adapter})}}for(var s in i)i[s].remove();this.nodes=r},e}();t.CursorStateNodesSet=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(24),o=r(104),a=r(8),s=function(){function e(e){this.didMouseCursorMoved=!1,this.inactivityTimer=null,this.shouldAppearNextFrame=!0;var t=e.displayer;this.applianceManager=e.applianceManager,this.screen=e.screen,this.engine=e.engine,this.isCursorInScene=t.isCursorInScene,this.isPressed=t.isPressed,this.isActivity=t.isActivity,this.isKeepVisible=t.isActivity,this.setPositionProperties(t,e.isFollowerFixedOnScreen),this.latestCheckedCursorX=this.cursorX,this.latestCheckedCursorY=this.cursorY,this.cursor=new o.CursorImplement({idPrefix:e.idPrefix,applianceManager:this.applianceManager,displayer:t,screen:this.screen,engine:this.engine,adapter:e.adapter,point:this.getCurrentComponentPosition()}),this.refreshIsVisible()}return Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.isCursorInScene&&this.isKeepVisible},enumerable:!0,configurable:!0}),e.prototype.updateDisplayer=function(e,t){this.setPositionProperties(e,t),this.setVisibleProperties(e),this.refreshComponentPosition(),this.cursor.updateDisplayer(e)},e.prototype.updateScreenSize=function(){this.refreshComponentPosition()},e.prototype.remove=function(){this.cleanInactivityDelayer(),this.screen.scene.removeComponent(this.cursor.component),this.cursor.release()},e.prototype.setPositionProperties=function(e,t){if(this.mode=e.mode,this.originX=e.originX,this.originY=e.originY,this.cursorX=e.cursorX,this.cursorY=e.cursorY,this.width=e.width,this.height=e.height,this.isFollowerFixedOnScreen=t,this.didMouseCursorMoved)this.latestCheckedCursorX=this.cursorX,this.latestCheckedCursorY=this.cursorY;else{var r=i.KeepActiveMaxDistance,n=0===this.width?1:this.screen.width/this.width,o=0===this.height?1:this.screen.height/this.height,a=(this.cursorX-this.latestCheckedCursorX)*this.width*n,s=(this.cursorY-this.latestCheckedCursorY)*this.height*o;a*a+s*s>=r*r&&(this.didMouseCursorMoved=!0,this.latestCheckedCursorX=this.cursorX,this.latestCheckedCursorY=this.cursorY)}},e.prototype.setVisibleProperties=function(e){var t=this.isActivity;this.isCursorInScene=e.isCursorInScene,this.isPressed=e.isPressed,this.isActivity=e.isActivity,t&&!this.isActivity?(this.delayInactivity(),this.checkMouseCursorMoved()):!t&&this.isActivity?(this.cleanInactivityDelayer(),this.isKeepVisible=!0):!this.isActivity&&this.checkMouseCursorMoved()&&this.delayInactivity(),this.refreshIsVisible()},e.prototype.refreshComponentPosition=function(){if(this.isVisible){var e=this.getCurrentComponentPosition(),t=this.getNextAnimationMode();this.cursor.component.moveTo(e.x-this.cursor.x,e.y-this.cursor.y,t)}},e.prototype.getNextAnimationMode=function(){return this.shouldAppearNextFrame?(this.shouldAppearNextFrame=!1,n.AnimationMode.Immediately):this.isPressed?n.AnimationMode.Immediately:n.AnimationMode.Continuous},e.prototype.getCurrentComponentPosition=function(){var e,t;if(this.isFollowerFixedOnScreen&&this.mode!==a.ViewMode.Freedom){var r=0===this.width?1:this.screen.width/this.width,n=0===this.height?1:this.screen.height/this.height,i=Math.min(r,n),o=(this.screen.width-i*this.width)/2,s=(this.screen.height-i*this.height)/2;e=this.cursorX*this.width*i+o-this.screen.width/2,t=this.cursorY*this.height*i+s-this.screen.height/2}else{var c=this.screen.camera,u=c.centerX,l=c.centerY;i=c.scale,e=((e=this.cursorX*this.width+this.originX)-u)*i,t=((t=this.cursorY*this.height+this.originY)-l)*i}return{x:e,y:t}},e.prototype.checkMouseCursorMoved=function(){return!!this.didMouseCursorMoved&&(this.didMouseCursorMoved=!1,!0)},e.prototype.cleanInactivityDelayer=function(){null!==this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null)},e.prototype.delayInactivity=function(){var e=this;null!==this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null),this.isActivity||(this.isKeepVisible=!0,this.refreshIsVisible(),this.inactivityTimer=setTimeout((function(){e.isKeepVisible=!1,e.inactivityTimer=null,e.refreshIsVisible()}),i.BecomeInactivityDuration))},e.prototype.refreshIsVisible=function(){var e=this.isVisible;e||(this.shouldAppearNextFrame=!0),this.cursor.component.setVisible(this.engine,e)},e}();t.CursorStateNode=s},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(3),a=r(1),s=r(105),c=r(19),u=function(){function e(e){var t=this;this.reactNode=null,this.onCursorComponentChanged=function(e){t.cursorComponent=e,e?t.adapter.onAddedCursor&&t.adapter.onAddedCursor(t):t.adapter.onRemovedCursor&&t.adapter.onRemovedCursor(t)},this.onComponentMoved=function(){if(t.adapter.onMovingCursor){var e=t.component.originX+t._x+t.screen.width/2,r=t.component.originY+t._y+t.screen.height/2;t.adapter.onMovingCursor(t,e,r)}},this.idPrefix=e.idPrefix,this.applianceManager=e.applianceManager,this.adapter=e.adapter,this.screen=e.screen,this.memberId=e.displayer.memberId;var r=e.displayer,c=this.adapter.createCursor(r.memberId);this._x=c.x,this._y=c.y,this._width=c.width,this._height=c.height,this.reactNode=c.reactNode||null,this.cursorDefinition=a.createComponentDefinition({name:"Cursor"}),e.engine.bind(this.cursorDefinition)(s.CursorComponent),this.component=this.screen.scene.addComponent({id:this.idPrefix+r.memberId,definition:this.cursorDefinition,originX:e.point.x-this._x,originY:e.point.y-this._y,width:c.width,height:c.height,orderIndex:this.memberId,absoluteCoordinates:!0,payload:{reactNode:this.reactNode,onCursorComponentChanged:this.onCursorComponentChanged}}),this.adapter.onMovingCursor&&this.component.addRectangleUpdatedListener(this.onComponentMoved),this.disposer=o.autorun((function(){var e=t.applianceManager.getMemberState(r.memberId);if(e){var o=e.currentApplianceName,a=i.copy(e.strokeColor);t._cursorMember?(t._cursorMember=Object.freeze(n(n({},t._cursorMember),{color:a,appliance:o})),t.onCursorMemberChanged&&t.onCursorMemberChanged(t._cursorMember)):t._cursorMember=Object.freeze({color:a,appliance:o,information:r.information})}}))}return Object.defineProperty(e.prototype,"cursorMember",{get:function(){return this._cursorMember},enumerable:!0,configurable:!0}),e.prototype.updateDisplayer=function(e){this._cursorMember&&!c.isEquals(this._cursorMember.information,e.information)&&(this._cursorMember=Object.freeze(n(n({},this._cursorMember),{information:e.information})),this.onCursorMemberChanged&&this.onCursorMemberChanged(this._cursorMember))},e.prototype.release=function(){this.disposer(),this.adapter.onMovingCursor&&this.component.removeRectangleUpdatedListener(this.onComponentMoved)},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"divElement",{get:function(){if(!this.cursorComponent)throw new Error("cursor isn't added");return this.cursorComponent.divElement},enumerable:!0,configurable:!0}),e.prototype.setReactNode=function(e){this.reactNode=e,this.component.payload={reactNode:e,onCursorComponentChanged:this.onCursorComponentChanged}},e.prototype.setCursorDescription=function(e){var t=n({x:this._x,y:this._y,width:this._width,height:this._height},e),r=this._x-t.x,i=this._y-t.y;this.component.setRectangle(this.component.originX+r,this.component.originY+i,t.width,t.height),this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height},e}();t.CursorImplement=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=r(1),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRef=function(e){if(!t._divElement&&e)t._divElement=e,t.props.payload.onCursorComponentChanged(t);else if(t._divElement&&!e)try{t.props.payload.onCursorComponentChanged(null)}finally{t._divElement=e}},t}return i(t,e),Object.defineProperty(t.prototype,"divElement",{get:function(){return this._divElement},enumerable:!0,configurable:!0}),t.prototype.render=function(){return o.createElement(a.CNode,{context:this.props.cnode,onRef:this.onRef,style:this.props.size},this.props.payload.reactNode)},t.isVisible=!1,t}(o.Component);t.CursorComponent=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=function(){function e(){}return e.prototype.createCursor=function(){return{x:14,y:14,width:28,height:28,reactNode:o.createElement(s,null)}},e}();t.LaserPointerCursorAdapter=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("img",{src:"https://sdk.netless.link/resource/mouse-cursor/laser-pointer-cursor.svg"})},t}(o.Component)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateEmptyImage=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r.toDataURL("screenshot")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.viewsHub=e}return Object.defineProperty(e.prototype,"writableView",{get:function(){return this.viewsHub.writableView},enumerable:!0,configurable:!0}),e.prototype.createView=function(e){return this.viewsHub.createView({cameraBound:{},handToolActive:!1,divElement:null,disableCameraTransform:!1},e)},e.prototype.forEach=function(e){this.viewsHub.forEach(e)},e}();t.ViewsImplement=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(42),o=function(){function e(e){this._owner=void 0,this._state=Object.freeze(n({},e))}return Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state||this._owner.state},enumerable:!0,configurable:!0}),e.prototype.putState=function(e){var t;if(this._state){var r=i.assign(this._state,e);r&&(this._state=Object.freeze(r)),t=!!r}else t=this._owner.putState(e);return t},e.prototype.updateOwner=function(e){this._owner=e,this._state=null},e}();t.StateProxy=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var u=r(1),l=r(31),p=r(6),h=r(11),d=r(0),f=r(4),y=r(20),m=r(43),g=r(24),v=r(13),b=r(8),P=r(44),S=r(38),w=r(7),x=r(119),O=r(21),k=r(121),M=r(48),C=r(5),T=function(e){function t(t){var r=e.call(this,{logger:t.whiteLogger,region:t.region,useMobXState:t.useMobXState,screenType:t.screenType,renderEngine:t.renderEngine,boundless:t.boundless,cameraBound:t.cameraBound,autoResize:t.autoResize,plugins:t.plugins,invisiblePlugins:t.invisiblePlugins,wrappedComponents:t.wrappedComponents,preloadDynamicPPT:t.preloadDynamicPPT,disableCameraTransform:t.disableCameraTransform,useMultiViews:t.useMultiViews,userFonts:t.userFonts,handToolKey:t.handToolKey,fontFamily:t.fontFamily,onlyCallbackRemoteStateModify:t.onlyCallbackRemoteStateModify,pptHandler:{onPageJumpTo:function(e,t){return r.pptJumpTo(e,t)},onPageToNext:function(){return r.nextPpt()},onPageToPrev:function(){return r.previousPpt()}},textareaHub:t.floatBarOptions&&new C.TextareaHubImplement,floatBarClass:t.floatBarOptions&&S.FloatBar,globalStateUpdater:function(e){return r.setGlobalState(e)},disableOperations:!1,disableOthersSelectingBox:t.disableOthersSelectingBox,willHideSelfCursor:!0,cursorAdapter:t.cursorAdapter,eraserRadiusCursor:t.eraserRadiusCursor,eventInterrupter:function(e){return r.willInterruptEvent(e)},urlInterrupter:t.urlInterrupter,onTextareaUpdate:function(e,t,n){r.magix.isWritable&&(r.applianceManager.updateTextarea(e,t),r.undoStack.onTextareaUpdate(!!n))},callbacks:t.callbacks,pptParams:t.pptParams,userPayload:t.userPayload})||this;return r._phase=m.RoomPhase.Connecting,r._isWritable=!1,r._enableWriteNow=!1,r.isEraser=!1,r.writableView=null,r.copyBuffer=null,r.beginReconnectAt=0,r.onWritableScreenChanged=function(e){r.writableView!==e&&(r.writableView&&(r.writableView.cameraman.removeCameraTransformationListener(r.onCameraTransform),r.writableView.screen.removeCameraUpdatedListener(r.onCameraUpdated)),r.writableView=e,e&&(e.cameraman.addCameraTransformationListener(r.onCameraTransform),e.screen.addCameraUpdatedListener(r.onCameraUpdated)))},r.onRoomStateChanged=function(e){e.globalState&&r.dynamicPpt.setGlobalState(M.copyValue(e.globalState)),e.memberState&&(r.isEraser=e.memberState.currentApplianceName===w.ApplianceNames.eraser,r.refreshShouldDisableImageHit(),r.refreshCursorClass()),e.sceneState&&r.fetchNextPptSlideIfNeeded(e.sceneState),r.callbacks.dispatch("onRoomStateChanged",(function(t){return t(e)}))},r.convertPointToScene=function(e,t){var n=r.viewsHub.writableView;return n?n.screen.convertPointToScene(e,t):{x:e,y:t}},r.onBoundlessKeyEvent=function(e){var t,n=r.hotKeys.checkHotKey(e);switch(n&&(r.handleHotKey(n,e),null===(t=e.nativeEvent)||void 0===t||t.preventDefault()),e.kind){case u.BoundlessEventKind.KeyDown:r.callbacks.dispatch("onKeyDown",(function(t){return t(e.nativeEvent)}));break;case u.BoundlessEventKind.KeyUp:r.callbacks.dispatch("onKeyUp",(function(t){return t(e.nativeEvent)}))}},r.onReceivedHandMouseEvent=function(e,t){var n,i;if(r.magix.phase===d.MagixPhase.Connected)switch(e.kind){case u.BoundlessEventKind.MouseDown:case u.BoundlessEventKind.SortedTouchStart:r.viewsHub.putState({cursorClass:"cursor-hand-grasp"}),null===(n=r.writableView)||void 0===n||n.putState({handToolActive:!0});break;case u.BoundlessEventKind.MouseUp:case u.BoundlessEventKind.SortedTouchEnd:case u.BoundlessEventKind.SortedTouchCancel:r.viewsHub.putState({cursorClass:"cursor-hand"}),null===(i=r.writableView)||void 0===i||i.putState({handToolActive:!1})}},r.onModified=function(){if(r._phase===m.RoomPhase.Connected){var e=r.roomInput.viewStateObserver;b.ViewMode.Follower===e.getCurrentMode()&&e.refreshCameraRectangle(),r.refreshRender()}},r.onReconnected=function(e){var t;null===(t=r.statistics)||void 0===t||t.commitConnection(o(o({},e),{isReconnection:!0}))},r.onDisconnectWithError=function(e){var t;0!==r.beginReconnectAt&&(null===(t=r.statistics)||void 0===t||t.commitDisconnection({isReconnection:!0,duration:Date.now()-r.beginReconnectAt})),r.callbacks.dispatch("onDisconnectWithError",(function(t){return t(e)}))<=0&&r.logger.error(e)},r.updateSelfUserId=function(e){void 0===e?(r.setObserverId(d.AdminObserverId),r._isWritable=!1):(r.setObserverId(e),r._isWritable=!0),r.refreshCursorClass(),r.refreshSyncOperations()},r.onCameraTransform=function(e){m.RoomPhase.Connected===r._phase&&u.CameraTransformation.Begin===e&&b.ViewMode.Follower===r.stateTrigger.state.broadcastState.mode&&(r._isWritable?r.applianceManager.setViewState({mode:b.ViewMode.Freedom}):r.roomInput.viewStateObserver.overrideWithFreedom(!0))},r.onCameraUpdated=function(e){if(r._isWritable)switch(r.stateTrigger.state.broadcastState.mode){case b.ViewMode.Broadcaster:case b.ViewMode.Freedom:r.syncCameraToRemoteLimiter.invoke()}},r.syncCameraToRemote=function(){var e=r.viewsHub.writableView;if(r._isWritable&&e){var t=e.screen,n=t.visionRectangle,i=t.camera.scale*C.basePixelWidth(r.screenType);r.applianceManager.setViewState({originX:n.originX,originY:n.originY,width:n.width,height:n.height,pixelWidth:i})}},r.updateSession=function(e){r.logger.context=o(o({},r.logger.context),{session:e})},r.onPhaseChanged=function(e){r.logger.info("change room phase to "+e),e===d.MagixPhase.Disconnected&&r.dispose();var t=m.RoomPhase.Connecting;switch(e){case d.MagixPhase.Ready:case d.MagixPhase.Connecting:t=m.RoomPhase.Connecting;break;case d.MagixPhase.Connected:t=m.RoomPhase.Connected;break;case d.MagixPhase.Reconnecting:t=m.RoomPhase.Reconnecting;break;case d.MagixPhase.Disconnecting:t=m.RoomPhase.Disconnecting;break;case d.MagixPhase.Disconnected:t=m.RoomPhase.Disconnected}switch(t){case m.RoomPhase.Reconnecting:r.beginReconnectAt=Date.now();break;case m.RoomPhase.Connected:r.beginReconnectAt=0}var n=r._phase!==t;r._phase=t,r.refreshSyncOperations(),n&&r.callbacks.dispatch("onPhaseChanged",(function(e){return e(t)}))},r.floatBarDelegate=r.createFloatBarDelegate(),r.statistics=t.qualityComitters&&new x.RoomRepoter(t.qualityComitters),r.rejectWhenReadonlyErrorLevel=t.rejectWhenReadonlyErrorLevel||m.RoomErrorLevel.ThrowError,r.magix=t.akkoApp.createMagix({logger:r.logger,userPayload:t.userPayload,libraryNodeFetcher:r.libraryNodeFetcher,callbacks:{onPhaseChanged:r.onPhaseChanged,onDisconnectWithError:r.onDisconnectWithError,onModified:r.onModified,onSelfUserIdUpdate:r.updateSelfUserId,onSessionChanged:r.updateSession,onEventFire:function(e){return r.dispatchMagixEventWithObject(e)},onReconnected:r.onReconnected,onKickedWithReason:function(e){return r.callbacks.dispatch("onKickedWithReason",(function(t){return t(e)}))},onCatchErrorWhenAppendFrame:function(e,t){return r.callbacks.dispatch("onCatchErrorWhenAppendFrame",(function(r){return r(e,t)}))},onSliceChanged:function(e){return r.callbacks.dispatch("onSliceChanged",(function(t){return t(e)}))},onReceivedRttReport:r.statistics&&function(e){return r.statistics.commitStatistics({rtt:e})},onIllusionQueueLengthChanged:r.statistics&&function(e){return r.statistics.commitStatistics({illusionQueueLength:e})},onFrameReceivedInterval:r.statistics&&function(e){return r.statistics.commitStatistics({frameReceivedInterval:e})}}}),r.eventsQueue=new k.EventsQueue(r.logger,g.CustomEventLimitTimeInterval,(function(e,t){return r.magix.dispatch(e,t)})),r._disableDeviceInputs=t.disableDeviceInputs,r._disableEraseImage=t.disableEraseImage,r.syncCameraToRemoteLimiter=new p.InvokeFrequencyLimiter(g.TransformLimitTimeInterval,r.syncCameraToRemote),r.undoStack=new C.UndoStack({execute:function(e){return r.applianceManager.execute(e)},onCanUndoStepsUpdate:function(e){return r.callbacks.dispatch("onCanUndoStepsUpdate",(function(t){return t(e)}))},onCanRedoStepsUpdate:function(e){return r.callbacks.dispatch("onCanRedoStepsUpdate",(function(t){return t(e)}))}}),r.hotKeys=new C.HotKeysNode(t.hotKeys),r.floatBarOptions=t.floatBarOptions,r}return i(t,e),Object.defineProperty(t.prototype,"customInput",{get:function(){return this.roomInput.customInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applianceManager",{get:function(){return this.magix.trigger},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWritable",{get:function(){return this.magix.isWritable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWriteNow",{get:function(){return this._enableWriteNow},enumerable:!0,configurable:!0}),t.prototype.setWritable=function(e){return a(this,void 0,void 0,(function(){var t,r,n,i=this;return s(this,(function(o){switch(o.label){case 0:return this.logger.info("set writable "+e),t=this.roomInput.viewStateObserver,e?[4,this.magix.setWritable(e,this.deviceType)]:[3,2];case 1:return o.sent(),this.pencilOptions.becomeWritable(this.applianceManager),(r=this.applianceManager.getViewState().mode)!==b.ViewMode.Broadcaster&&(n=t.getCurrentMode())!==r&&this.stateTrigger.activeUpdate("broadcastState",(function(){return i.applianceManager.setViewState({mode:n}),t.getBroadcastState()})),t.setReadonlyMode(!1),[3,4];case 2:return t.setReadonlyMode(!0),[4,this.magix.setWritable(e)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},Object.defineProperty(t.prototype,"disableDeviceInputs",{get:function(){return this._disableDeviceInputs},set:function(e){this._disableDeviceInputs=e,this.refreshSyncOperations(),this.refreshCursorClass()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableEraseImage",{get:function(){return this._disableEraseImage},set:function(e){this._disableEraseImage=e,this.refreshShouldDisableImageHit()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableSerialization",{get:function(){return this._phase!==m.RoomPhase.Connected||!this.applianceManager.enableExecute},set:function(e){this.isRoomEnableModify()&&(e&&(this.copyBuffer=null),this.applianceManager.setEnableExecute(!e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"session",{get:function(){return this.magix.session},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this.magix.slice},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomToken",{get:function(){return this._roomToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calibrationTimestamp",{get:function(){return this.magix.calibrationTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.stateTrigger.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeDelay",{get:function(){return this.magix.timeDelay},set:function(e){this.magix.timeDelay=e},enumerable:!0,configurable:!0}),t.prototype.setupLibraryNode=function(e,t){var r,n=this;this.updateLibraryNode(t),this.roomInput=new P.RoomInput({deviceType:e,screenType:this.screenType,magix:this.magix,viewsHub:this.viewsHub,cameraObserver:this.cameraObserver,pencilOptions:this.pencilOptions,bezierCurvePainter:this.bezierCurvePainter,convertPointToScene:this.convertPointToScene,onKeyPressed:this.onBoundlessKeyEvent,onReceivedHandMouseEvent:this.onReceivedHandMouseEvent,onCommit:function(e){return n.undoStack.commit(e)}}),this.viewsHub.callbacks.on("onWritableScreenChanged",this.onWritableScreenChanged),this.onWritableScreenChanged(this.viewsHub.writableView);var i=this.roomInput.viewStateObserver,o=this.cameraObserver,a=this.applianceManager;this.stateTrigger=new C.StateTrigger({useMobXMode:this.useMobXState,disableMaskKey:this.onlyCallbackRemoteStateModify,onStateChanged:this.onRoomStateChanged,propertyGetters:{globalState:function(){return d.copy(a.getGlobalState())},memberState:function(){return d.copy(a.getMemberState())},roomMembers:function(){return a.getMemberDisplayers().map(n.covertMemberDisplayerToMember)},sceneState:function(){return n.getCurrentSceneState()},broadcastState:function(){return i.getBroadcastState()},zoomScale:function(){return o.cameraState.scale},cameraState:function(){return o.cameraState}}}),this.invisiblePluginNode.isWatching=!0,this.isEraser=(null===(r=this.stateTrigger.state.memberState)||void 0===r?void 0:r.currentApplianceName)===w.ApplianceNames.eraser,this.dynamicPpt.setGlobalState(d.copy(a.getGlobalState())),this.undoStack.setCurrentScenePath(this.stateTrigger.state.sceneState.scenePath),this.refreshCursorClass(),this.refreshShouldDisableImageHit(),this.refreshSyncOperations()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.roomInput&&this.roomInput.release(),this.stateTrigger&&this.stateTrigger.release()},t.prototype.handleHotKey=function(e,t){switch(e){case"duplicate":this.duplicate();break;case"copy":this.copy();break;case"paste":this.paste();break;case"undo":this.undo();break;case"redo":this.redo();break;case"delete":this.delete();break;case"lock":var r=this.sendToApplianceManager(e,t);r&&this.undoStack.commit(r);break;case"changeToSelector":this.setMemberState({currentApplianceName:w.ApplianceNames.selector});break;case"changeToClick":this.setMemberState({currentApplianceName:w.ApplianceNames.clicker});break;case"changeToLaserPointer":this.setMemberState({currentApplianceName:w.ApplianceNames.laserPointer});break;case"changeToPencil":this.setMemberState({currentApplianceName:w.ApplianceNames.pencil});break;case"changeToRectangle":this.setMemberState({currentApplianceName:w.ApplianceNames.rectangle});break;case"changeToEllipse":this.setMemberState({currentApplianceName:w.ApplianceNames.ellipse});break;case"changeToEraser":this.setMemberState({currentApplianceName:w.ApplianceNames.eraser});break;case"changeToText":this.setMemberState({currentApplianceName:w.ApplianceNames.text});break;case"changeToStraight":this.setMemberState({currentApplianceName:w.ApplianceNames.straight});break;case"changeToArrow":this.setMemberState({currentApplianceName:w.ApplianceNames.arrow});break;case"changeToHand":this.setMemberState({currentApplianceName:w.ApplianceNames.hand})}},t.prototype.sendToApplianceManager=function(e,t){var r=null,n={kind:e};switch(t.kind){case u.BoundlessEventKind.KeyDown:r=this.applianceManager.onKeyDown(n);break;case u.BoundlessEventKind.KeyUp:r=this.applianceManager.onKeyUp(n)}return r},t.prototype.willInterruptEvent=function(e){if(e instanceof KeyboardEvent){var t=!1;return this.callbacks.dispatch("willInterceptKeyboardEvent",(function(r){r(e)&&(t=!0)})),this.releaseAllTextareaByEsc(e),t}return!1},t.prototype.refreshSyncOperations=function(){var e=!this._isWritable||this._phase===m.RoomPhase.Reconnecting||this._phase===m.RoomPhase.Disconnecting||this._phase===m.RoomPhase.Disconnected,t=e||this._disableDeviceInputs;this.hasLibraryNode&&(this.viewsHub.putState({disableBoundlessEvent:t}),this.dynamicPpt.setDisableInteractive(t)),this._enableWriteNow!==e&&(this._enableWriteNow=e,this.callbacks.dispatch("onEnableWriteNowChanged",(function(t){return t(e)})))},t.prototype.connect=function(e){var t,r;return a(this,void 0,void 0,(function(){var n,i,a,c,u,l;return s(this,(function(s){switch(s.label){case 0:n=Date.now(),s.label=1;case 1:return s.trys.push([1,3,,4]),void 0!==(i=function(e){if("object"==A(e)){var t=e.userId;switch(A(t)){case"string":return t;case"number":case"boolean":return""+t}}}(e.userPayload))&&(this.logger.context=o(o({},this.logger.context),{userId:i})),this._uuid=e.uuid,this._roomToken=e.roomToken,this.pencilOptions=new P.PencilOptions(e.enableDrawPoint,e.disableNewPencil,this.undoStack),[4,this.magix.connect({uuid:e.uuid,region:e.region||f.environment.defaultRegion,roomToken:e.roomToken,connectedPayload:e.deviceType,isWritable:e.isWritable})];case 2:return a=s.sent(),c=a.libraryNode,u=a.statistics,this.logger.context=o(o({},this.logger.context),{session:this.magix.session}),this.setupLibraryNode(e.deviceType,c),this.magix.isWritable&&this.updateSelfUserId(this.magix.selfUserId),this._isWritable||this.roomInput.viewStateObserver.setReadonlyMode(!0),this._isWritable&&this.pencilOptions.becomeWritable(this.applianceManager),null===(t=this.statistics)||void 0===t||t.commitConnection(o(o({},u),{isReconnection:!1})),this.logger.info("join room success"),this.fetchNextPptSlideIfNeeded(this.state.sceneState),[3,4];case 3:throw l=s.sent(),null===(r=this.statistics)||void 0===r||r.commitDisconnection({isReconnection:!1,duration:Date.now()-n}),this.logger.error("join room fail"),this.logger.error(l),l;case 4:return[2]}}))}))},t.prototype.onScreenSizeUpdated=function(){this.stateTrigger.state.broadcastState.mode!==b.ViewMode.Follower&&this.syncCameraToRemoteLimiter.invoke()},t.prototype.syncBlockTimestamp=function(e){this.magix.syncBlockTimestamp(e)},t.prototype.stopBlockTimestamp=function(){this.magix.stopBlockTimestamp()},t.prototype.dispatchMagixEvent=function(e,t){this.isRoomEnableModify()&&this.eventsQueue.dispatch(e,t)},t.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:if(this._phase===m.RoomPhase.Disconnected)throw new Error("room did disconnect");return[4,this.magix.disconnect()];case 1:return e.sent(),[2]}}))}))},t.prototype.memberState=function(e){return d.copy(this.magix.trigger.getMemberState(e))},t.prototype.setGlobalState=function(e){var t=this;return this.isRoomEnableModify()?this.stateTrigger.activeUpdate("globalState",(function(){var r=d.copy(t.applianceManager.setGlobalState(e));return t.dynamicPpt.setGlobalState(M.copyValue(r)),r})):this.stateTrigger.state.globalState},t.prototype.setMemberState=function(e){var t,r=this;if(this.isRoomEnableModify()){e.currentApplianceName&&(null===(t=this.viewsHub.writableView)||void 0===t||t.cancelCurrentContinuityEvent(),this.beforeSceneChangeStoreCommit());var n=this.stateTrigger.activeUpdate("memberState",(function(){var t=r.applianceManager.setMemberStateWithCommitter(e),n=t.memberState,i=t.committer;return i&&r.undoStack.commit(i),d.copy(n)}));return this.refreshCursorClass(),n}return this.stateTrigger.state.memberState},t.prototype.setViewMode=function(e){var t=this;this.assertRoomIsConnected();var r=this.roomInput.viewStateObserver;if(this._isWritable)this.stateTrigger.activeUpdate("broadcastState",(function(){return t.applianceManager.setViewState({mode:e}),r.getBroadcastState()})),e===b.ViewMode.Follower&&r.refreshCameraRectangle();else switch(e){case b.ViewMode.Follower:r.overrideWithFreedom(!1),r.refreshCameraRectangle();break;case b.ViewMode.Freedom:r.overrideWithFreedom(!0);break;case b.ViewMode.Broadcaster:throw new Error("cannot be broadcaster when room.isWritable is false")}},t.prototype.nextPpt=function(){var e=this.stateTrigger.state.sceneState,t=e.scenes,r=e.index;r<t.length-1&&this.setSceneIndex(r+1)},t.prototype.previousPpt=function(){var e=this.stateTrigger.state.sceneState.index;e>=1&&this.setSceneIndex(e-1)},t.prototype.pptJumpTo=function(e,t){var r=e+"/"+t+".slide",n=this.state.sceneState.scenes.findIndex((function(e){return!!e.ppt&&e.ppt.src.endsWith(r)}));n>0&&this.setSceneIndex(n)},t.prototype.updatePptPageInfo=function(){var e=this.stateTrigger.state.sceneState,t=e.scenes[e.index],r=t.ppt&&t.ppt.src,n=r&&this.dynamicPpt.getSlideUrl&&this.dynamicPpt.getSlideUrl(r);n&&this.setGlobalState(M.copyValue(this.dynamicPpt.globalStateWith({uuid:n.uuid,pageIndex:n.index,disableAutoPlay:!1})))},t.prototype.setScenePath=function(e){var t=this;if(this.isRoomEnableModify()){this.logger.info("change scene path "+e);var r=this.applianceManager,n=this.scenePathType(e),i=e;if(n===w.ScenePathType.Dir){var o=d.copy(r.getSceneNames(O.scenePathConverter.parse(e))).shift();i=void 0===o?i:[i,o].join(y.PathSegmentSeparator)}this.beforeSceneChangeStoreCommit(),this.stateTrigger.activeUpdate("sceneState",(function(){return r.changeScene(O.scenePathConverter.parse(i)),t.undoStack.setCurrentScenePath(i),t.getCurrentSceneState()})),this.updatePptPageInfo()}},t.prototype.setSceneIndex=function(e){var t=this;if(this.isRoomEnableModify()){var r=this.stateTrigger.state.sceneState.scenes[e];if(!r)throw new Error("index "+e+" is out of range");var n=this.applianceManager,i=c(n.getCurrentScenePath());i.pop(),i.push(r.name),this.logger.info("change scene index "+e+" /"+i.join("/")+"}"),this.beforeSceneChangeStoreCommit(),this.stateTrigger.activeUpdate("sceneState",(function(){n.changeScene(i);var e=t.getCurrentSceneState();return t.undoStack.setCurrentScenePath(e.scenePath),e})),this.updatePptPageInfo()}},t.prototype.moveCamera=function(t){var r=this;this.assertRoomIsConnected(),this._isWritable&&"number"==typeof t.scale?this.stateTrigger.activeUpdate("zoomScale",(function(){return e.prototype.moveCamera.call(r,t),t.scale})):e.prototype.moveCamera.call(this,t)},t.prototype.moveCameraToContain=function(t){var r=this;this.assertRoomIsConnected();var n=this.viewsHub.writableView;this._isWritable&&n?this.stateTrigger.activeUpdate("zoomScale",(function(){return e.prototype.moveCameraToContain.call(r,t),n.screen.camera.scale})):e.prototype.moveCameraToContain.call(this,t)},t.prototype.putScenes=function(e,t,r){var n=this;if(this.isRoomEnableModify()){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o];void 0!==s.name?i.push(s):i.push({name:l.v1().replace(/-/g,""),ppt:s.ppt})}this.stateTrigger.activeUpdate("sceneState",(function(){return n.applianceManager.putScenes(O.scenePathConverter.parse(e),i,r),n.getCurrentSceneState()}))}},t.prototype.cleanCurrentScene=function(e){if(void 0===e&&(e=!0),this.isRoomEnableModify()){var t=this.applianceManager.cleanCurrentScene(e);t&&this.undoStack.commit(t)}},t.prototype.removeScenes=function(e){var t=this;this.isRoomEnableModify()&&this.stateTrigger.activeUpdate("sceneState",(function(){return t.applianceManager.removeScenes(O.scenePathConverter.parse(e)),t.getCurrentSceneState()}))},t.prototype.moveScene=function(e,t){var r=this;this.isRoomEnableModify()&&this.stateTrigger.activeUpdate("sceneState",(function(){return r.applianceManager.moveScene(O.scenePathConverter.parse(e),O.scenePathConverter.parse(t)),r.getCurrentSceneState()}))},t.prototype.createWrappedComponents=function(){return c(e.prototype.createWrappedComponents.call(this),[v.createWrappedComponent(v.roomContext,this)])},t.prototype.createPluginOperator=function(){var t=this;return Object.freeze(o(o({},e.prototype.createPluginOperator.call(this)),{remove:function(e){return t.removePlugin(e)},update:function(e,r){return t.updatePlugin(e,r)}}))},t.prototype.insertImage=function(e){this.isRoomEnableModify()&&this.applianceManager.insertImage(e)},t.prototype.completeImageUpload=function(e,t){this.isRoomEnableModify()&&this.applianceManager.completeImageUpload(e,t)},t.prototype.lockImage=function(e,t){this.isRoomEnableModify()&&this.applianceManager.lockImage(e,t)},t.prototype.createInvisiblePlugin=function(e,t){return this.invisiblePluginNode.create(e,t)},t.prototype.insertPlugin=function(e,t){if(this.isRoomEnableModify()){var r=t&&t.attributes,n=this.assignAttributes(e,r);return n!==r&&(t=o(o({},t),{attributes:n})),this.applianceManager.insertPlugin(e,t).identifier}return h.NullIdentifier},t.prototype.removePlugin=function(e){var t=!1;return this.isRoomEnableModify()&&(t=!!this.applianceManager.removePlugin(e)),t},t.prototype.updatePlugin=function(e,t){var r=!1;return this.isRoomEnableModify()&&(r=!!this.applianceManager.updatePlugin(e,t)),r},t.prototype.getPluginAttributes=function(e){this.assertRoomIsConnected();var t=this.applianceManager.getPlugin(e);return t&&t.attributes},t.prototype.getPluginRectangle=function(e){this.assertRoomIsConnected();var t=this.applianceManager.getPlugin(e);return t&&{originX:t.originX,originY:t.originY,width:t.width,height:t.height}},t.prototype.duplicate=function(){if(this.isRoomEnableModify()){var e=12*(2*Math.random()-1),t=12*(2*Math.random()-1),r=this.applianceManager.duplicate(e,t);r&&this.undoStack.commit(r)}},t.prototype.copy=function(){this.isRoomEnableModify()&&(this.copyBuffer=this.applianceManager.copy())},t.prototype.paste=function(){if(this.isRoomEnableModify()&&this.copyBuffer){var e=12*(2*Math.random()-1),t=12*(2*Math.random()-1),r=this.applianceManager.paste(this.copyBuffer,e,t);r&&this.undoStack.commit(r)}},Object.defineProperty(t.prototype,"canUndoSteps",{get:function(){return this.undoStack.canUndoSteps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedoSteps",{get:function(){return this.undoStack.canRedoSteps},enumerable:!0,configurable:!0}),t.prototype.undo=function(){return this.isRoomEnableModify()&&(this.applianceManager.hasEditingTextarea()&&this.beforeSceneChangeStoreCommit(),this.undoStack.undo()),this.undoStack.canUndoSteps},t.prototype.redo=function(){return this.isRoomEnableModify()&&this.undoStack.redo(),this.undoStack.canRedoSteps},t.prototype.delete=function(){if(this.isRoomEnableModify()){var e=this.applianceManager.delete();e&&this.undoStack.commit(e)}},t.prototype.pptNextStep=function(){this.isRoomEnableModify()&&this.pptMoveStep(1)},t.prototype.pptPreviousStep=function(){this.isRoomEnableModify()&&this.pptMoveStep(-1)},t.prototype.pptMoveStep=function(e){var t=this.stateTrigger.state.sceneState,r=t.scenes,n=t.index,i=r[n],o=i.ppt&&i.ppt.src;if(o&&this.dynamicPpt.getSlideUrl(o))this.dynamicPpt.moveStep(e);else{var a=n+e;a>=0&&a<r.length&&this.setSceneIndex(a)}},t.prototype.refreshCursorClass=function(){var e=this.stateTrigger.state.memberState;this.magix.isWritable&&!this._disableDeviceInputs&&e?this.viewsHub.putState({cursorClass:"cursor-"+e.currentApplianceName}):this.viewsHub.putState({cursorClass:null})},t.prototype.refreshShouldDisableImageHit=function(){this.viewsHub.putState({disalbeImageHit:this._disableEraseImage&&this.isEraser})},t.prototype.isRoomEnableModify=function(){if(this.assertRoomIsConnected(),this._isWritable)return!0;switch(this.rejectWhenReadonlyErrorLevel){case m.RoomErrorLevel.ThrowError:throw new Error("you can only call it when room is writable");case m.RoomErrorLevel.Warn:this.logger.warn("you can only call it when room is writable")}return!1},t.prototype.createFloatBarDelegate=function(){var e=this;return Object.freeze({delete:function(){return e.delete()},lockImages:function(t){return e.applianceManager.lockImages(t)},moveSelectedComponentsToTop:function(){return e.applianceManager.moveSelectedComponentsToTop()},moveSelectedComponentsToBottom:function(){return e.applianceManager.moveSelectedComponentsToBottom()},duplicate:function(){return e.duplicate()},updateTextareaFormat:function(t){if(e.textareaHub){var r=e.textareaHub.getTextareaSizeMap(t),n=e.applianceManager.updateTextareaFormat(t,r);n&&e.undoStack.commit(n)}},updateTextareaFontSize:function(t){var r=e.applianceManager.updateTextareaFontSize(t);r&&e.undoStack.commit(r)}})},t.prototype.assertRoomIsConnected=function(){if(this._phase!==m.RoomPhase.Connected)throw new Error("you can only call it when room is connected. the phase of room is "+this._phase)},t.prototype.beforeSceneChangeStoreCommit=function(){var e=this.applianceManager.releaseAllTextarea();e&&this.undoStack.commit(e)},t.prototype.releaseAllTextareaByEsc=function(e){if("Escape"===e.code){var t=this.applianceManager.releaseAllTextarea();t&&this.undoStack.commit(t)}},t}(y.DisplayerImplement);t.RoomImplement=T},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),o=function(){function e(e,t,r){this.enableDrawPoint=e,this.disableNewPencil=t,this.undoStack=r}return e.prototype.becomeWritable=function(e){if(this.disableNewPencil){var t=e.getMemberState();if(t){var r=t.pencilOptions;r=r?n(n({},r),{disableBezier:!0}):{disableBezier:!0,enableDrawPoint:!1,sparseHump:3,sparseWidth:4};var i=e.setMemberStateWithCommitter({pencilOptions:r}).committer;i&&this.undoStack.commit(i)}}},e.prototype.shouldUseNewPencil=function(e){return!this.disableNewPencil&&e===i.ApplianceNames.pencil},e.prototype.shouldCancelPaintingPencil=function(e){return!this.enableDrawPoint&&e.isLikePoint()},e}();t.PencilOptions=o},function(e,t){e.exports=r("yyeZ")},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=Object.freeze({x:0,y:0});function o(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function a(e){return Math.pow(e.x,2)+Math.pow(e.y,2)}function s(e,t){return{x:e.x+t.x,y:e.y+t.y}}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{x:e.reduce((function(e,t){return e+t.x}),0),y:e.reduce((function(e,t){return e+t.y}),0)}}function u(e,t){return{x:e.x-t.x,y:e.y-t.y}}function l(e,t){return{x:e.x*t,y:e.y*t}}function p(e){var t=o(e);return 0===t?e:function(e,t){return{x:e.x/t,y:e.y/t}}(e,t)}function h(e,t){return e.x*t.x+e.y*t.y}function d(e,t,r,n,c){var p=function(e,t,r,n){for(var a=e[0],c=e[e.length-1],p=[a,i,i,c],d=t.map((function(e){var t=1-e;return[l(r,3*e*(t*t)),l(n,3*t*(e*e))]})),f=[[0,0],[0,0]],y=[0,0],A=0,g=Array.from(t.entries());A<g.length;A++){var v=g[A],b=v[0],P=v[1],S=d[b],w=S[0],x=S[1];f[0][0]+=h(w,w),f[0][1]+=h(w,x),f[1][0]+=h(w,x),f[1][1]+=h(x,x);var O=u(e[b],m([a,a,c,c],P));y[0]+=h(w,O),y[1]+=h(x,O)}var k=f[0][0]*f[1][1]-f[1][0]*f[0][1],M=f[0][0]*y[1]-f[1][0]*y[0],C=y[0]*f[1][1]-y[1]*f[0][1],T=0===k?0:C/k,_=0===k?0:M/k,I=o(u(a,c)),E=1e-6*I;return T<E||_<E?(p[1]=s(a,l(r,I/3)),p[2]=s(c,l(n,I/3))):(p[1]=s(a,l(r,T)),p[2]=s(c,l(n,_))),p}(e,r,n,c),d=function(e,t,r){for(var n=0,i=Math.floor(e.length/2),s=function(e,t){for(var r=[0],n=e[0],i=0,a=1;a<=10;a++){var s=m(e,a/10);i+=o(u(s,n)),r.push(i),n=s}return r.map((function(e){return e/i}))}(t),c=1;c<e.length-1;c++){var l=e[c],p=a(u(m(t,y(t,r[c],s,10)),l));p>n&&(n=p,i=c)}return[n,i]}(e,p,t);return[p,d[0],d[1]]}function f(e,t,r){return r.map((function(r,n){return i=e,o=t[n],d=u(m(i,p=r),o),b=1-(v=p),y=h(d,f=c(l(u((g=i)[1],g[0]),3*Math.pow(b,2)),l(u(g[2],g[1]),6*b*v),l(u(g[3],g[2]),3*Math.pow(v,2)))),0===(A=a(f)+2*h(d,function(e,t){return s(l(s(u(e[2],l(e[1],2)),e[0]),6*(1-t)),l(s(u(e[3],l(e[2],2)),e[1]),6*t))}(i,p)))?p:p-y/A;var i,o,p,d,f,y,A,g,v,b}))}function y(e,t,r,n){if(t<0)return 0;if(t>1)return 1;for(var i=1;i<=n;i++)if(t<=r[i]){var o=(i-1)/n,a=i/n,s=r[i-1];return(t-s)/(r[i]-s)*(a-o)+o}return Number.NaN}function A(e,t){return p(u(e,t))}function m(e,t){var r=1-t;return c(l(e[0],Math.pow(r,3)),l(e[1],3*Math.pow(r,2)*t),l(e[2],3*r*Math.pow(t,2)),l(e[3],Math.pow(t,3)))}t.fitCurve=function(e,t){if(e.length<2)return[];var r=e.length;return function e(t,r,i,a){var c,h,y;if(2===t.length){var A=(h=t[0],y=t[1],Math.sqrt(Math.pow(h.x-y.x,2)+Math.pow(h.y-y.y,2))/3);return[{curve:[t[0],s(t[0],l(r,A)),s(t[1],l(i,A)),t[1]],beginIndex:0,count:t.length}]}var m=function(e){var t,r,n,i=[];return e.forEach((function(e,a){t=a>0?r+o(u(e,n)):0,i.push(t),r=t,n=e})),i=i.map((function(e){return 0===r?0:e/r}))}(t),g=d(t,m,m,r,i),v=g[0],b=g[1],P=g[2];if(0===b||b<a)return[{curve:v,beginIndex:0,count:t.length}];if(b<a*a)for(var S=m,w=b,x=P,O=0;O<20;O++){if(v=(c=d(t,m,S=f(v,t,S),r,i))[0],b=c[1],P=c[2],b<a)return[{curve:v,beginIndex:0,count:t.length}];if(P===x){var k=b/w;if(k>.9999&&k<1.0001)break}w=b,x=P}var M=u(t[P-1],t[P+1]);if(0===M.x&&0===M.y){var C=u(t[P-1],t[P]),T=C.x;M={x:-C.y,y:T}}for(var _=p(M),I=l(_,-1),E=e(t.slice(0,P+1),r,_,a),j=e(t.slice(P),I,i,a),R=0,N=j;R<N.length;R++)N[R].beginIndex+=P;return n(E,j)}(e,A(e[1],e[0]),A(e[r-2],e[r-1]),t)},t.bezierQ=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(1),a=r(46),s=r(45),c=r(47),u=r(7),l=r(115),p=r(116),h=r(118);!function(e){e[e.Hand=0]="Hand",e[e.NewPencil=1]="NewPencil",e[e.Others=2]="Others",e[e.Ignore=3]="Ignore"}(n||(n={}));var d=function(){function e(e){var t=this;this.views2Inputs={},this.inputs2Views={},this.onCreatedView=function(e){var r=t.eventChannel.createInput();t.views2Inputs[e.id]=r,t.inputs2Views[r.id]=e},this.onReleasedView=function(e){var r=t.views2Inputs[e.id];r&&(delete t.views2Inputs[e.id],delete t.inputs2Views[r.id],t.eventChannel.removeInput(r))},this.onBoundlessEvent=function(e,r){var n;switch(r.kind){case o.BoundlessEventKind.MouseDown:case o.BoundlessEventKind.MouseMove:case o.BoundlessEventKind.MouseUp:case o.BoundlessEventKind.MouseLeave:case o.BoundlessEventKind.SortedTouchStart:case o.BoundlessEventKind.SortedTouchMove:case o.BoundlessEventKind.SortedTouchEnd:case o.BoundlessEventKind.SortedTouchCancel:null===(n=t.views2Inputs[e.id])||void 0===n||n.pushEvent(r);break;case o.BoundlessEventKind.KeyDown:case o.BoundlessEventKind.KeyUp:t.onKeyPressed(r)}},this.onReceviedPencilMouseEvent=function(e,r,n){var i;switch(e){case p.MouseEventKind.Down:i=o.BoundlessEventKind.MouseDown;break;case p.MouseEventKind.Move:i=o.BoundlessEventKind.MouseMove;break;case p.MouseEventKind.Up:i=o.BoundlessEventKind.MouseUp;break;case p.MouseEventKind.Leave:i=o.BoundlessEventKind.MouseLeave}var a=t._bezierPencilAppliance.pushBoundlessMouseEvent(i,n);a&&t.onCommit(a)},this.onReceviedOthersMouseEvent=function(e,r,n){var i=null;switch(e){case p.MouseEventKind.Down:i=t.magix.trigger.onMouseDown(n);break;case p.MouseEventKind.Move:i=t.magix.trigger.onMouseMove(n);break;case p.MouseEventKind.Up:i=t.magix.trigger.onMouseUp(n);break;case p.MouseEventKind.Leave:i=t.magix.trigger.onMouseLeave(n)}i&&t.onCommit(i)},this.magix=e.magix,this.viewsHub=e.viewsHub,this.pencilOptions=e.pencilOptions,this.onKeyPressed=e.onKeyPressed,this.onCommit=e.onCommit,this.onReceivedHandMouseEvent=e.onReceivedHandMouseEvent;var r=new l.RadiusSelector(e.deviceType,e.screenType),n={isWorking:function(){return t.magix.phase===i.MagixPhase.Connected},getWritableScreen:function(){return t.viewsHub.writableView&&t.viewsHub.writableView.screen},getCurrentApplianceName:function(){return t.magix.trigger.getMemberState().currentApplianceName},getTargetsMap:function(e,r){var n;return null===(n=t.viewsHub.writableView)||void 0===n?void 0:n.getTargetsMap(e,r)}};this._viewStateObserver=new c.ViewStateObserver(this.viewsHub,this.magix.trigger),this._bezierPencilAppliance=new s.BezierPencilAppliance(this.magix.trigger,e.cameraObserver,this.pencilOptions,e.bezierCurvePainter),this.pencilChannel=new p.MouseEventChannel(r,n),this.othersChannel=new p.MouseEventChannel(r,n),this.eventChannel=this.createEventsChannel(),this.viewsHub.callbacks.on("onBoundlessEvent",this.onBoundlessEvent),this.viewsHub.callbacks.on("onCreatedView",this.onCreatedView),this.viewsHub.callbacks.on("onReleasedView",this.onReleasedView),this.viewsHub.forEach((function(e){return t.onCreatedView(e)})),this.pencilChannel.onReceviedMouseEvent=this.onReceviedPencilMouseEvent,this.othersChannel.onReceviedMouseEvent=this.onReceviedOthersMouseEvent,this.customEventInput=this.eventChannel.createInput(),this.customInput=new h.CustomInputImplement(this.customEventInput,e.convertPointToScene)}return Object.defineProperty(e.prototype,"viewStateObserver",{get:function(){return this._viewStateObserver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bezierPencilAppliance",{get:function(){return this._bezierPencilAppliance},enumerable:!0,configurable:!0}),e.prototype.release=function(){this._viewStateObserver.release(),this.pencilChannel.release(),this.othersChannel.release(),this.viewsHub.callbacks.off("onBoundlessEvent",this.onBoundlessEvent),this.viewsHub.callbacks.off("onCreatedView",this.onCreatedView),this.viewsHub.callbacks.off("onReleasedView",this.onReleasedView)},e.prototype.createEventsChannel=function(){var e=this,t=new a.EventsChannel((function(t){if(t.id===e.customEventInput.id||e.inputs2Views[t.id]!==e.viewsHub.writableView)return n.Ignore;var r=e.magix.trigger.getMemberState().currentApplianceName;return r===u.ApplianceNames.hand?n.Hand:e.pencilOptions.shouldUseNewPencil(r)?n.NewPencil:n.Others}));return t.putOutput(n.NewPencil,this.pencilChannel),t.putOutput(n.Others,this.othersChannel),t.putOutput(n.Hand,{onEvent:this.onReceivedHandMouseEvent}),t},e}();t.RoomInput=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(7),o=r(5),a=function(){function e(e,t){this.deviceType=e,this.screenType=t,this.previousPoint={x:0,y:0},this.previousTimestamp=0,this.currentSpeed=0,this.isPressed=!1}return e.prototype.radius=function(e,t,r){switch(this.updatePressed(t,r),this.deviceType){case n.DeviceType.Touch:return 36/o.basePixelWidth(this.screenType);default:return e===i.ApplianceNames.eraser?this.getSpeedRaidus():0}},e.prototype.updatePressed=function(e,t){if(this.isPressed!==t&&(this.isPressed=t,t?(this.previousPoint.x=0,this.previousPoint.y=0,this.previousTimestamp=Date.now(),this.currentSpeed=0):this.currentSpeed=0),t){var r=Date.now(),n=e.x-this.previousPoint.x,i=e.y-this.previousPoint.y,o=r-this.previousTimestamp,a=0===o?0:Math.sqrt(n*n+i*i)/o;this.previousPoint.x=e.x,this.previousPoint.y=e.y,this.previousTimestamp=r,this.currentSpeed=(a+this.currentSpeed)/2}},e.prototype.getSpeedRaidus=function(){var e=this.currentSpeed;return e>4.35?e=4.35:e<.45&&(e=.45),90*(e-.45)/(4.35-.45)/o.basePixelWidth(this.screenType)},e}();t.RadiusSelector=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1),o=r(7),a=r(24),s=r(117);!function(e){e[e.Down=0]="Down",e[e.Move=1]="Move",e[e.Up=2]="Up",e[e.Leave=3]="Leave"}(n=t.MouseEventKind||(t.MouseEventKind={}));var c=function(){function e(e,t){var r=this;this.invoker=new s.UnderclockingInvoker(a.HoverMouseEventLimitTimeInterval),this.latestHitTestIdentifies=[],this.isPressed=!1,this.onStart=function(e){var t=r.createProxyEvent(e,n.Down);t&&r.pushProxyEvent(t)},this.onEvent=function(e){var t=r.createProxyEvent(e);t&&r.pushProxyEvent(t)},this.onCancel=function(e){var t=r.createProxyEvent(e,n.Up);t&&r.pushProxyEvent(t)},this.radiusSelector=e,this.delegate=t}return e.prototype.release=function(){this.invoker.cancel()},e.prototype.pushProxyEvent=function(e){var t=this;switch(e.boundlessEvent.kind){case i.BoundlessEventKind.MouseDown:this.invoker.limitDuration=a.MaxMouseEventLimitTimeInterval;break;case i.BoundlessEventKind.MouseUp:this.invoker.limitDuration=a.HoverMouseEventLimitTimeInterval}switch(e.kind){case n.Down:this.invoker.limitDuration=a.MaxMouseEventLimitTimeInterval;break;case n.Up:this.invoker.limitDuration=a.HoverMouseEventLimitTimeInterval}var r=e.mouseEvent.hitTestIdentifies;e.boundlessEvent.kind!==i.BoundlessEventKind.MouseMove||this.isHitTestIdentifiesDifferent(r)?(this.invoker.cancel(),setTimeout((function(){return t.callbackReceiveMouseEvent(e)}),0)):this.invoker.invoke((function(){return t.callbackReceiveMouseEvent(e)})),this.latestHitTestIdentifies=r},e.prototype.callbackReceiveMouseEvent=function(e){var t=e.kind,r=e.eraserRadius,n=e.mouseEvent;this.onReceviedMouseEvent&&this.onReceviedMouseEvent(t,r,n)},e.prototype.createProxyEvent=function(e,t){var r=null,n=this.delegate.getWritableScreen();if(n){var i=0,a=void 0,s=this.delegate.getCurrentApplianceName(),c=e.pointOnScreen,u=this.getProxyEventKind(e,t);if(s===o.ApplianceNames.selector||s===o.ApplianceNames.eraser){var l=this.radiusSelector.radius(s,c,this.isPressed);this.isPressed&&s===o.ApplianceNames.eraser&&(i=l),a=n.hitTest(c.x,c.y,l)}else a=[];r={kind:u,eraserRadius:i,applianceName:s,mouseEvent:this.createMouseEvent(n,e,a),boundlessEvent:e}}return r},e.prototype.createMouseEvent=function(e,t,r){var n=t.nativeEvent,i=void 0;if(n&&n.target){var o=e.findComponentWithTarget(n.target);o&&(i=this.delegate.getTargetsMap(o,n))}return i||(i={}),{x:t.pointOnScene.x,y:t.pointOnScene.y,targetsMap:i,hitTestIdentifies:r}},e.prototype.getProxyEventKind=function(e,t){if(void 0!==t)return t;switch(e.kind){case i.BoundlessEventKind.MouseDown:case i.BoundlessEventKind.SortedTouchStart:return n.Down;case i.BoundlessEventKind.MouseMove:case i.BoundlessEventKind.SortedTouchMove:return n.Move;case i.BoundlessEventKind.MouseUp:case i.BoundlessEventKind.SortedTouchEnd:case i.BoundlessEventKind.SortedTouchCancel:return n.Up;case i.BoundlessEventKind.MouseLeave:return n.Leave;default:throw new Error("invalid kind "+e.kind)}},e.prototype.isHitTestIdentifiesDifferent=function(e){var t=this.latestHitTestIdentifies.length!==e.length;if(!t)for(var r=0;r<e.length&&!(t=e[r]!==this.latestHitTestIdentifies[r]);++r);return t},e}();t.MouseEventChannel=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=function(){function e(e){var t=this;this.onLimiterInvoke=function(){if(t.nextInvoker)try{t.nextInvoker()}finally{t.nextInvoker=void 0}},this.limiter=new n.InvokeFrequencyLimiter(e,this.onLimiterInvoke)}return Object.defineProperty(e.prototype,"limitDuration",{get:function(){return this.limiter.limitDuration},set:function(e){this.limiter.limitDuration=e},enumerable:!0,configurable:!0}),e.prototype.invoke=function(e){this.nextInvoker=e,this.limiter.invoke()},e.prototype.cancel=function(){this.nextInvoker=void 0,this.limiter.cancel()},e}();t.UnderclockingInvoker=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e,t){this.eventsInput=e,this.convertPointToScene=t}return e.prototype.inputDown=function(e,t){this.pushEvent(n.BoundlessEventKind.MouseDown,e,t)},e.prototype.inputMove=function(e,t){this.pushEvent(n.BoundlessEventKind.MouseMove,e,t)},e.prototype.inputUp=function(e,t){this.pushEvent(n.BoundlessEventKind.MouseUp,e,t)},e.prototype.pushEvent=function(e,t,r){var n={kind:e,isOnScreen:!0,pointOnScreen:{x:t,y:r},pointOnScene:this.convertPointToScene(t,r)};this.eventsInput.pushEvent(n)},e}();t.CustomInputImplement=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(120),i=function(){function e(e){var t=this,r=e.connection,i=e.disconnection,o=e.sample;this.statisticsTimer=null,this.onReportStatistics=function(){t.statisticsTimer=null,t.latestReportAt=Date.now();var e=t.statistics.report(),r=e.maxValues,n=e.minValues,i=e.averageValues;t.sampleCommitter.commit({maxRTT:r.rtt,minRTT:n.rtt,averageRTT:i.rtt,maxQueue:r.illusionQueueLength,minQueue:n.illusionQueueLength,averageQueue:i.illusionQueueLength,maxInterval:r.frameReceivedInterval,minInterval:n.frameReceivedInterval,averageInterval:i.frameReceivedInterval})},this.connectionCommitter=r,this.disconnectionCommitter=i,this.sampleCommitter=o,this.statistics=new n.StatisticsNode({rtt:0,frameReceivedInterval:0,illusionQueueLength:0})}return e.prototype.commitConnection=function(e){this.connectionCommitter.commit(e)},e.prototype.commitDisconnection=function(e){this.disconnectionCommitter.commit(e)},e.prototype.commitStatistics=function(t){if(void 0===this.latestReportAt&&(this.latestReportAt=Date.now()),null===this.statisticsTimer){var r=this.latestReportAt+e.reportStatisticsInterval-Date.now();r<0&&(r=e.reportStatisticsInterval,this.statistics.clean()),this.statisticsTimer=setTimeout(this.onReportStatistics,r)}this.statistics.commit(t)},e.prototype.stop=function(){null!==this.statisticsTimer&&(clearTimeout(this.statisticsTimer),this.statisticsTimer=null)},e.reportStatisticsInterval=6e4,e}();t.RoomRepoter=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.lastCommitValues={},this.sumNodes={},this.maxValues={},this.minValues={},this.lastCommitTimestamp=Date.now(),this.backgroundValues=Object.freeze(n({},e))}return e.prototype.report=function(){var e={},t={},r={};for(var n in this.backgroundValues){var i=this.backgroundValues[n],o=this.sumNodes[n],a=this.maxValues[n],s=this.minValues[n];if(void 0===o)e[n]=i;else if(void 0===o.otherValueSum)e[n]=o.firstValue;else{var c=this.lastCommitTimestamp-o.beginAt,u=c/o.count,l=o.firstValue*u+o.otherValueSum,p=u+c;e[n]=p>0?l/p:i}t[n]=void 0===a?i:a,r[n]=void 0===s?i:s}return this.lastCommitTimestamp=Date.now(),this.sumNodes={},this.maxValues={},this.minValues={},{averageValues:e,maxValues:t,minValues:r}},e.prototype.clean=function(){for(var e in this.lastCommitTimestamp=Date.now(),this.sumNodes={},this.maxValues={},this.minValues={},this.lastCommitValues)delete this.lastCommitValues[e]},e.prototype.commit=function(e){var t=Date.now();this.commitSumValues(t,e),this.commitMaxAndMinValues(e),this.lastCommitTimestamp=t},e.prototype.commitSumValues=function(e,t){for(var r in t)void 0!==(n=t[r])&&(this.lastCommitValues[r]=t[r]);for(var r in this.lastCommitValues){var n=this.lastCommitValues[r],i=this.sumNodes[r];void 0===i?this.sumNodes[r]={beginAt:e,firstValue:n,count:1,otherValueSum:n}:(i.count+=1,void 0===i.otherValueSum?i.otherValueSum=n*(e-i.beginAt):i.otherValueSum+=n*(e-this.lastCommitTimestamp))}},e.prototype.commitMaxAndMinValues=function(e){for(var t in e){var r=e[t],n=this.maxValues[t],i=this.minValues[t];this.maxValues[t]=void 0===n?r:Math.max(n,r),this.minValues[t]=void 0===i?r:Math.min(i,r)}},e}();t.StatisticsNode=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=function(){function e(e,t,r){var i=this;this.queue=[],this.limiter=new n.InvokeFrequencyLimiter(t,(function(){var t=i.queue.shift();if(t){try{r(t.event,t.payload)}catch(t){e.error(t)}i.queue.length>0&&i.limiter.invoke()}}))}return e.prototype.dispatch=function(e,t){this.queue.push({event:e,payload:t}),this.limiter.invoke()},e}();t.EventsQueue=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneToPlaneObject=function e(t){if("object"==A(t)&&null!==t){if(t instanceof Array){for(var r=[],n=0;n<t.length;++n)r[n]=e(t[n]);return r}var i={};for(var o in t)i[o]=e(t[o]);return i}return t},t.commitModify=function(e,t){var r={};for(var n in e)r[n]=n in t?t[n]:e[n];return r},t.copyValue=function e(t){if("object"==A(t)){if(null===t)return null;if(t instanceof Array)return t.map((function(t){return e(t)}));var r={};for(var n in t){var i=e(t[n]);void 0!==i&&(r[n]=i)}return r}return"function"==typeof t?void 0:t},t.checkValueIsEquals=function e(t,r){if(t===r)return!0;var n=A(t);if(n!==A(r)||"object"!==n)return!1;if(t instanceof Array&&r instanceof Array){if(t.length!==r.length)return!1;for(var i=0;i<t.length;++i)if(!e(t[i],r[i]))return!1}else if(t.constructor===Object&&r.constructor===Object){for(var o in t)if(!e(t[o],r[o]))return!1;for(var o in r)if(!(o in t))return!1}return!0}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var l=r(3),p=r(1),h=r(0),d=r(20),f=r(49),y=r(13),m=r(5),g=r(4),v=r(44),b=r(48),P=new Date("2019-06-23Z00:00:00").getTime(),S=function(e){function t(r){var n=e.call(this,{logger:r.logger,region:r.region,useMobXState:r.useMobXState,screenType:r.screenType,renderEngine:r.renderEngine,boundless:r.boundless,cameraBound:r.cameraBound,autoResize:r.autoResize,plugins:r.plugins,invisiblePlugins:r.invisiblePlugins,wrappedComponents:r.wrappedComponents,preloadDynamicPPT:r.preloadDynamicPPT,userFonts:r.userFonts,handToolKey:r.handToolKey,fontFamily:r.fontFamily,onlyCallbackRemoteStateModify:r.onlyCallbackRemoteStateModify,disableOthersSelectingBox:r.disableOthersSelectingBox,disableCameraTransform:r.disableCameraTransform,useMultiViews:r.useMultiViews,disableOperations:!0,willHideSelfCursor:!1,cursorAdapter:r.cursorAdapter,eraserRadiusCursor:r.eraserRadiusCursor,urlInterrupter:r.urlInterrupter,pptParams:r.pptParams,callbacks:t.handleLegacyCallbacks(r.callbacks)})||this;return n.didLoadFirstFrame=!1,n.observerMode=f.ObserverMode.Directory,n.onLibraryNodeChanged=function(e,t){var r,i=n.hasLibraryNode;if(n.updateLibraryNode(t),!i){var o=n.applianceManager,a=n.cameraObserver;n.viewStateObserver=new v.ViewStateObserver(n.viewsHub,o),n.stateTrigger=new m.StateTrigger({useMobXMode:n.useMobXState,disableMaskKey:n.onlyCallbackRemoteStateModify,onStateChanged:n.onPlayerStateChanged,propertyGetters:{observerMode:function(){return n.observerMode},globalState:function(){return h.copy(o.getGlobalState())},roomMembers:function(){return o.getMemberDisplayers().map(n.covertMemberDisplayerToMember)},sceneState:function(){return n.getCurrentSceneState()},cameraState:function(){return a.cameraState}}}),n.useMultiViews&&(null===(r=n.mainView)||void 0===r||r.callbacks.on("onCameraTransform",n.onCameraTransform))}},n.onPhaseChanged=function(e){var t=!1;!n.didLoadFirstFrame&&n.hasFrameToDisplay(e)&&(n.didLoadFirstFrame=!0,t=!0,n.fetchNextPptSlideIfNeeded(n.state.sceneState),n.setupAfterLoadFirstFrame()),n.updatePhaseByReconstructorPhase(n.reconstructor.phase)&&(n.logger.info("change player phase to "+n._phase),n.callbacks.dispatch("onPhaseChanged",(function(e){return e(n._phase)})),n.dynamicPpt&&n.dynamicPpt.replayPasue&&n.dynamicPpt.replayPasue(n._phase!==f.PlayerPhase.Playing)),t&&n.callbacks.dispatch("onLoadFirstFrame",(function(e){return e()})),n.invisiblePluginNode.isWatching=n._phase===f.PlayerPhase.Playing||n._phase===f.PlayerPhase.Pause},n.onPlayerStateChanged=function(e){e.globalState&&n.dynamicPpt.setGlobalState(b.copyValue(e.globalState)),e.sceneState&&n.fetchNextPptSlideIfNeeded(e.sceneState),n.callbacks.dispatch("onPlayerStateChanged",(function(t){return t(e)}))},n.onSliceChanged=function(e){n.logger.context=o(o({},n.logger.context),{slice:e&&e.uuid}),n.refreshForcePPTLandscapeWithSlice(e),n.callbacks.dispatch("onSliceChanged",(function(t){return t(e.uuid)}))},n.onCameraTransform=function(e){e===p.CameraTransformation.Begin&&n.observerMode===f.ObserverMode.Directory&&(n.observerMode=f.ObserverMode.Freedom)},n.onModified=function(){n.viewStateObserver&&n.observerMode===f.ObserverMode.Directory&&n.viewStateObserver.refreshCameraRectangle(),n.refreshRender()},n.callbacks.on("onProgressTimeChanged",(function(e){return n.putPlayerState({timestamp:e})})),n}return i(t,e),t.handleLegacyCallbacks=function(e){return e&&e.onScheduleTimeChanged&&(console.warn("onScheduleTimeChanged was deprecated. please replace it with onProgressTimeChanged"),delete(e=o(o({},e),{onProgressTimeChanged:e.onScheduleTimeChanged})).onScheduleTimeChanged),e},Object.defineProperty(t.prototype,"applianceManager",{get:function(){return this.reconstructor.trigger},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackSpeed",{get:function(){return this.reconstructor.playbackSpeed},set:function(e){this.reconstructor.playbackSpeed=e,this.putPlayerState({playbackSpeed:e})},enumerable:!0,configurable:!0}),t.prototype.setupReconstructor=function(e){return s(this,void 0,void 0,(function(){var t,r;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,e.akkoApp.createReconstructor({logger:this.logger,roomToken:e.roomToken,clientVersion:g.environment.sdkVersion,libraryNodeFetcher:this.libraryNodeFetcher,callbacks:this.createReconstructorCallbacks(),rangeQuery:{region:e.region,room:e.room,roomToken:e.roomToken,slice:e.slice,beginTimestamp:e.beginTimestamp,duration:e.duration}})];case 1:return t.reconstructor=n.sent(),this.updatePhaseByReconstructorPhase(this.reconstructor.phase),this.logger.info("setup player success"),this.logger.context=o(o({},this.logger.context),{uuid:this.reconstructor.roomUUID,slice:this.reconstructor.slice&&this.reconstructor.slice.uuid}),[3,3];case 2:throw r=n.sent(),this.logger.error("setup player fail"),this.logger.error(r),r;case 3:return[2]}}))}))},t.prototype.createReconstructorCallbacks=function(){var e=this;return{onEventFire:function(t){return e.dispatchMagixEventWithObject(t)},onSliceChanged:this.onSliceChanged,onLibraryNodeChanged:this.onLibraryNodeChanged,onPhaseChanged:this.onPhaseChanged,onModified:this.onModified,onIsPlayableChanged:function(t){return e.callbacks.dispatch("onIsPlayableChanged",(function(e){return e(t)}))},onProgressTimeChanged:function(t){return e.callbacks.dispatch("onProgressTimeChanged",(function(e){return e(t)}))},onStoppedWithError:function(t){return e.callbacks.dispatch("onStoppedWithError",(function(e){return e(t)}))},onCatchErrorWhenAppendFrame:function(t,r){return e.callbacks.dispatch("onCatchErrorWhenAppendFrame",(function(e){return e(t,r)}))}}},t.prototype.hasFrameToDisplay=function(e){switch(e){case h.ReconstructorPhase.Playing:case h.ReconstructorPhase.Pause:case h.ReconstructorPhase.Buffering:case h.ReconstructorPhase.Ended:return!0;default:return!1}},t.prototype.setupAfterLoadFirstFrame=function(){this.reconstructor.slice&&this.refreshForcePPTLandscapeWithSlice(this.reconstructor.slice),this.dynamicPpt.setGlobalState(h.copy(this.applianceManager.getGlobalState()))},t.prototype.dispose=function(){var t;e.prototype.dispose.call(this),this.viewStateObserver&&this.viewStateObserver.release(),this.stateTrigger&&this.stateTrigger.release(),this.useMultiViews&&(null===(t=this.mainView)||void 0===t||t.callbacks.on("onCameraTransform",this.onCameraTransform))},t.prototype.createWrappedComponents=function(){return u(e.prototype.createWrappedComponents.call(this),[y.createWrappedComponent(y.playerContext,this)])},t.prototype.refreshForcePPTLandscapeWithSlice=function(e){e.beginTimestamp<=P?this.viewsHub.putState({forcePPTLandscape:!0}):this.viewsHub.putState({forcePPTLandscape:!1})},t.prototype.setObserverMode=function(e){var t=this;this.stateTrigger.activeUpdate("observerMode",(function(){return t.observerMode=e})),this.viewStateObserver&&e===f.ObserverMode.Directory&&this.viewStateObserver.refreshCameraRectangle()},t.prototype.memberState=function(e){return h.copy(this.reconstructor.trigger.getMemberState(e))},Object.defineProperty(t.prototype,"state",{get:function(){if(!this.hasLibraryNode)throw new Error("can't read state before load first frame");return this.stateTrigger.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomUUID",{get:function(){return this.reconstructor.roomUUID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this.reconstructor.slice&&this.reconstructor.slice.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.reconstructor.isPlayable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progressTime",{get:function(){return this.reconstructor.progressTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeDuration",{get:function(){return this.reconstructor.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framesCount",{get:function(){return this.reconstructor.framesCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beginTimestamp",{get:function(){return this.reconstructor.beginTimestamp},enumerable:!0,configurable:!0}),t.prototype.play=function(){this.assertRoomIsConnected(),this.reconstructor.play()},t.prototype.pause=function(){this.assertRoomIsConnected(),this.reconstructor.pause()},t.prototype.stop=function(){if(this._phase===f.PlayerPhase.Stopped)throw new Error("player did stop");this.reconstructor.stop(),this.dispose()},t.prototype.seekToProgressTime=function(e){this.assertRoomIsConnected(),this.reconstructor.seekToProgressTime(e)},t.prototype.updatePhaseByReconstructorPhase=function(e){var r=t.covertPhase(e),n=this._phase!==r;return n&&(this._phase=r,this.putPlayerState({isPlaying:r===f.PlayerPhase.Playing})),n},t.covertPhase=function(e){switch(e){case h.ReconstructorPhase.WaitingFirstFrame:return f.PlayerPhase.WaitingFirstFrame;case h.ReconstructorPhase.Playing:return f.PlayerPhase.Playing;case h.ReconstructorPhase.Pause:return f.PlayerPhase.Pause;case h.ReconstructorPhase.Stopped:return f.PlayerPhase.Stopped;case h.ReconstructorPhase.Ended:return f.PlayerPhase.Ended;case h.ReconstructorPhase.Buffering:case h.ReconstructorPhase.Seeking:return f.PlayerPhase.Buffering}},Object.defineProperty(t.prototype,"scheduleTime",{get:function(){return console.warn("scheduleTime was deprecated. please replace it with progressTime"),this.progressTime},enumerable:!0,configurable:!0}),t.prototype.seekToScheduleTime=function(e){console.warn("seekToScheduleTime was deprecated. please replace it with seekToProgressTime"),this.seekToProgressTime(e)},t.prototype.assertRoomIsConnected=function(){if(this._phase===f.PlayerPhase.Stopped)throw new Error("you cannot call it when phase of player is stopped")},a([l.observable],t.prototype,"observerMode",void 0),t}(d.DisplayerImplement);t.PlayerImplement=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(0),o=r(125),a=r(15),s=r(126),c=r(127),u=r(14);function l(e){var t=e.delegate;return n.createElement(a.Button,{key:"delete",className:"normal-button",onClick:function(){return t.delete()}},n.createElement("img",{src:u.iconURL("delete")}))}t.BarMargin=Object.freeze({top:12,bottom:24,left:12,right:12}),t.BarPadding=Object.freeze({top:1,bottom:1,left:1,right:1}),t.searchButtons=function(e){var t=e.whiteModel,r=t.ImageShape,p=t.TextareaShape,h=[],d=e.components;if(0===d.length)return h;for(var f=0,y=0,A=!0,m=!0,g=!0,v=!0,b=!0,P=0,S=d;P<S.length;P++){var w=S[P];if(i.isInstanceOf(w,r))f++;else if(i.isInstanceOf(w,p)){var x=w.format;x.bold||(m=!1),x.italic||(g=!1),x.underline||(v=!1),x.lineThrough||(b=!1),y++}w.locked||(A=!1)}return f===d.length?(h.push({width:40,height:40,node:function(){return l(e)}}),h.push({width:40,height:40,node:function(){return function(e,t){var r=e.delegate,i=!t,o=t?"unlock-new":"lock-new";return n.createElement(a.Button,{key:"lock",className:"normal-button",onClick:function(){return r.lockImages(i)}},n.createElement("img",{src:u.iconURL(o)}))}(e,A)}}),A||h.push(c.createImageLayerButton(e)),h.push({width:40,height:40,node:function(){return function(e){var t=e.delegate;return n.createElement(a.Button,{key:"duplicate",className:"normal-button",onClick:function(){return t.duplicate()}},n.createElement("img",{src:u.iconURL("duplicate")}))}(e)}})):y===d.length&&(h.push({width:40,height:40,node:function(){return l(e)}}),h.push({width:40,height:40,node:function(){return function(e,t){var r=e.viewMovingState,i=e.delegate,o=!t,s=t?"bold-active":"bold";return n.createElement(a.Button,{key:"text-blob",className:"normal-button",onClick:function(){r.maskHideFloatBarSometime(),i.updateTextareaFormat({bold:o})}},n.createElement("img",{src:u.iconURL(s)}))}(e,m)}}),h.push({width:40,height:40,node:function(){return function(e,t){var r=e.viewMovingState,i=e.delegate,o=!t,s=t?"italic-active":"italic";return n.createElement(a.Button,{key:"text-italic",className:"normal-button",onClick:function(){r.maskHideFloatBarSometime(),i.updateTextareaFormat({italic:o})}},n.createElement("img",{src:u.iconURL(s)}))}(e,g)}}),h.push({width:40,height:40,node:function(){return function(e,t){var r=e.viewMovingState,i=e.delegate,o=!t,s=t?"line-through-active":"line-through";return n.createElement(a.Button,{key:"text-line-through",className:"normal-button",onClick:function(){r.maskHideFloatBarSometime(),i.updateTextareaFormat({lineThrough:o})}},n.createElement("img",{src:u.iconURL(s)}))}(e,b)}}),h.push({width:40,height:40,node:function(){return function(e,t){var r=e.viewMovingState,i=e.delegate,o=!t,s=t?"underline-active":"underline";return n.createElement(a.Button,{key:"text-underline",className:"normal-button",onClick:function(){r.maskHideFloatBarSometime(),i.updateTextareaFormat({underline:o})}},n.createElement("img",{src:u.iconURL(s)}))}(e,v)}}),h.push(o.createFontSizeButton(e)),h.push(s.createFontColorsButton(e))),h}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(9),c=r(14),u=r(15),l=r(25);function p(e){var t=Math.floor(e);return e>=t+.5&&t++,t}t.createFontSizeButton=function(e){var t=e.viewMovingState,r=e.delegate,n=e.components;return{width:95,height:40,node:function(e,i,o,s,c,u){var l=i+s/2<=u/2;return a.createElement(h,{key:"font-size",delegate:r,viewMovingState:t,components:n,isMenuToDown:l})}}};var h=function(e){function t(t){var r=e.call(this,t)||this;return r.inputRef=a.createRef(),r.upArrowButton=Object.freeze({iconName:"arrow-up",isUp:!0,ref:a.createRef()}),r.downArrowButton=Object.freeze({iconName:"arrow-down",isUp:!1,ref:a.createRef()}),r.onFocusInput=function(){var e=r.inputRef.current;e&&(e.type="text",e.setSelectionRange(0,e.value.length),e.type="number",r.setState({isFocusInput:!0}))},r.onShouldBecomeHide=function(e){var t=r.inputRef.current,n=r.upArrowButton.ref.current,i=r.downArrowButton.ref.current;t&&n&&i&&!l.Menu.isEventFiredOnElement(e,n)&&!l.Menu.isEventFiredOnElement(e,i)&&r.commitFontSizeWithString(t.value)},r.onPressKeyInput=function(e){"Enter"===e.key&&r.commitFontSizeWithString(e.target.value)},r.state={overrideFontSize:void 0,hoverIndex:void 0,isFocusInput:!1},r}var r;return i(t,e),r=t,t.prototype.getFontSize=function(){for(var e=void 0,t=0,r=this.props.components;t<r.length;t++){var n=r[t],i=p(n.currentScale*n.textSize);if(void 0===e)e=i;else if(e!==i){e=void 0;break}}return e},t.prototype.shouldUpdateFontSize=function(e){for(var t=0,r=this.props.components;t<r.length;t++){var n=r[t];if(n.currentScale*n.textSize!==e)return!0}return!1},t.prototype.onSelectFontSize=function(e){this.commitFontSizeWithInt(e),this.setState({overrideFontSize:void 0,hoverIndex:void 0,isFocusInput:!1})},t.prototype.commitFontSizeWithString=function(e){var t,n=Number.parseFloat(e);Number.isNaN(n)||(n=p(n),n=Math.max(n,r.minFontSize),n=Math.min(n,r.maxFontSize),this.commitFontSizeWithInt(n),null===(t=this.inputRef.current)||void 0===t||t.blur(),this.setState({overrideFontSize:void 0,isFocusInput:!1,hoverIndex:void 0}))},t.prototype.commitFontSizeWithInt=function(e){this.shouldUpdateFontSize(e)&&(this.props.viewMovingState.maskHideFloatBarSometime(),this.props.delegate.updateTextareaFontSize(e))},t.prototype.render=function(){var e=this,t=this.state.overrideFontSize;if(void 0===t){var r=this.getFontSize();t=void 0===r?"":""+r}var n=this.state.isFocusInput?"font-size-active":"font-size";return a.createElement(a.Fragment,{key:"font-size"},a.createElement("img",{className:"font-size-icon",src:c.iconURL(n)}),a.createElement("input",{className:"font-size-input",type:"number",value:t,ref:this.inputRef,onFocus:this.onFocusInput,onKeyUp:this.onPressKeyInput,onChange:function(t){return e.setState({overrideFontSize:t.target.value})}}),this.state.isFocusInput&&this.renderMenu(t),a.createElement("div",{className:"font-size-buttons"},this.renderArrowButton(t,this.upArrowButton),this.renderArrowButton(t,this.downArrowButton)))},t.prototype.renderMenu=function(e){var t=this,n=this.inputRef.current;if(!n)return null;var i=r.menuSize,o=i.width,s=i.height,c=r.menuMargin,u={left:n.offsetLeft+(n.offsetWidth-o)/2,top:this.props.isMenuToDown?n.offsetTop+n.offsetHeight+c:n.offsetTop-c-s,width:o,height:s};return a.createElement(l.Menu,{className:"font-size-menu",style:u,onMouseLeave:function(){return t.setState({hoverIndex:void 0})},onShouldBecomeHide:this.onShouldBecomeHide},this.renderFontSizeList(e))},t.prototype.renderFontSizeList=function(e){for(var t=this,n=parseInt(e),i=r.fontSizeList,o=[],s=function(e){var r=i[e],s=null,l="cell";n===r&&(s=a.createElement("img",{className:"check",src:c.iconURL("check")})),e===u.state.hoverIndex&&(l+=" hover"),o.push(a.createElement("div",{key:""+e,className:l,onMouseEnter:function(){return t.setState({hoverIndex:e})},onClick:function(){return t.onSelectFontSize(r)}},s&&a.createElement("div",{className:"check"}),a.createElement("span",null,r),s))},u=this,l=0;l<i.length;++l)s(l);return o},t.prototype.renderArrowButton=function(e,t){var n=this,i=void 0,o=Number.parseFloat(e),s=r.fontSizeList;if(!Number.isNaN(o))if(t.isUp){for(var l=0;l<s.length;++l)if((p=s[l])>o){i=p;break}}else for(l=s.length-1;l>=0;--l){var p;if((p=s[l])<o){i=p;break}}var h=t.iconName;return a.createElement(u.Button,{className:"arrow-button",disable:void 0===i,refObject:t.ref,onClick:function(){void 0!==i&&(n.props.viewMovingState.maskHideFloatBarSometime(),n.commitFontSizeWithInt(i),n.setState({overrideFontSize:void 0,hoverIndex:void 0}))}},a.createElement("img",{src:c.iconURL(h)}))},t.minFontSize=1,t.maxFontSize=999,t.fontSizeList=Object.freeze([12,14,18,24,36,48,64,80,144,288]),t.menuMargin=21,t.menuSize=Object.freeze({width:64,height:248}),r=o([s.observer],t)}(a.Component)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),c=r(9),u=r(15),l=r(25),p=r(14);function h(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}t.createFontColorsButton=function(e){var t=e.viewMovingState,r=e.delegate,n=e.components,i=e.colors;return{width:40,height:40,node:function(e,o,a,c,u,l){var p=o+c/2<=l/2;return s.createElement(d,{key:"font-colors",delegate:r,viewMovingState:t,colors:i,components:n,parentWidth:a,parentHeight:c,isMenuToDown:p})}}};var d=function(e){function t(t){var r=e.call(this,t)||this;return r.onClickDisplayButton=function(){r.state.isDisplayMenu||r.setState({isDisplayMenu:!0})},r.state={isDisplayMenu:!1},r}var r;return i(t,e),r=t,t.prototype.getSelectedColor=function(){for(var e=null,t=0,r=this.props.components;t<r.length;t++){var n=r[t].format.color;if(e){if(!h(e,n)){e=null;break}}else e=n}return e},t.prototype.onClickColorButton=function(e){var t=a(e);this.props.delegate.updateTextareaFormat({color:t}),this.setState({isDisplayMenu:!1})},t.prototype.render=function(){var e=this.getSelectedColor(),t=e&&s.createElement("div",{className:"bar",style:{backgroundColor:"rgb("+e[0]+","+e[1]+","+e[2]+")"}}),r=this.state.isDisplayMenu?"font-colors-active":"font-colors";return s.createElement(s.Fragment,null,s.createElement(u.Button,{className:"normal-button",onClick:this.onClickDisplayButton},s.createElement("div",{className:"font-colors-icon"},s.createElement("img",{src:p.iconURL(r)}),t)),this.state.isDisplayMenu&&this.renderMenu(e))},t.prototype.renderMenu=function(e){var t=this,n=Math.ceil(this.props.colors.length/r.menuLineCellsCount),i=Math.min(this.props.colors.length,r.menuLineCellsCount)*r.menuCellSize.width+2*r.menuPadding,o=n*r.menuCellSize.height+2*r.menuPadding,a=r.menuMargin,c={left:this.props.parentWidth-i,top:this.props.isMenuToDown?this.props.parentHeight+a:-(a+o),width:i,height:o};return s.createElement(l.Menu,{className:"font-colors-menu",style:c,onShouldBecomeHide:function(){return t.setState({isDisplayMenu:!1})}},this.renderColorButtons(e))},t.prototype.renderColorButtons=function(e){for(var t=this,r=this.props.colors,n=[],i=function(i){var o=r[i],a="rgb("+o[0]+", "+o[1]+", "+o[2]+")",c="font-color-button";e&&h(e,o)?c+=" font-color-selected":c+=" font-color-not-selected",n.push(s.createElement("div",{key:""+i,className:c,onClick:function(){return t.onClickColorButton(o)}},s.createElement("div",{className:"core",style:{backgroundColor:a}})))},o=0;o<r.length;++o)i(o);return n},t.menuMargin=8,t.menuPadding=8,t.menuLineCellsCount=4,t.menuCellSize=Object.freeze({width:28,height:28}),r=o([c.observer],t)}(s.Component)},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(9),c=r(25),u=r(15),l=r(14);t.createImageLayerButton=function(e){var t=e.delegate;return{width:40,height:40,node:function(e,r,n,i,o,s){var c=r+i/2<=s/2;return a.createElement(p,{key:"image-layer-button",isMenuToDown:c,delegate:t})}}};var p=function(e){function t(t){var r=e.call(this,t)||this;return r.buttonRef=a.createRef(),r.state={isDisplayMenu:!1},r}var r;return i(t,e),r=t,t.prototype.render=function(){var e=this,t=this.state.isDisplayMenu?"layer-pressed":"layer";return a.createElement(a.Fragment,null,a.createElement(u.Button,{key:"layer",className:"normal-button "+(this.state.isDisplayMenu?"highlight-button":""),refObject:this.buttonRef,onClick:function(){return e.setState({isDisplayMenu:!e.state.isDisplayMenu})}},a.createElement("img",{src:l.iconURL(t)})),this.state.isDisplayMenu&&this.renderMenu())},t.prototype.renderMenu=function(){var e=this,t=this.buttonRef.current;if(!t)return null;var n=r.menuSize,i=n.width,o=n.height,s=r.menuMargin,p={left:t.offsetLeft+(t.offsetWidth-i)/2,top:this.props.isMenuToDown?t.offsetTop+t.offsetHeight+s:t.offsetTop-s-o,width:i,height:o};return a.createElement(c.Menu,{className:"image-layer-menu",style:p,onShouldBecomeHide:function(){return e.setState({isDisplayMenu:!1})}},a.createElement(u.Button,{key:"layer-unlock",className:"normal-button",onClick:function(){return e.props.delegate.moveSelectedComponentsToTop()}},a.createElement("img",{src:l.iconURL("to-top")})),a.createElement(u.Button,{key:"layer-lock",className:"normal-button",onClick:function(){return e.props.delegate.moveSelectedComponentsToBottom()}},a.createElement("img",{src:l.iconURL("to-bottom")})))},t.menuMargin=21,t.menuSize=Object.freeze({width:72,height:40}),r=o([s.observer],t)}(a.Component)},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3);function o(e,t){return Math.abs(e-t)<=.01}var a=function(){function e(e){var t=this;this.latestCallMaskTimestamp=0,this.timer=null,this._shouldHideFloatBar=!1,this.onAfterMoving=function(){t._shouldHideFloatBar&&(t._shouldHideFloatBar=!1),t.timer=null},this.rectangle=e}return Object.defineProperty(e.prototype,"shouldHideFloatBar",{get:function(){return this._shouldHideFloatBar},enumerable:!0,configurable:!0}),e.prototype.setState=function(t,r){var n=this.rectangle,i=!o(n.originX,t.originX)||!o(n.originY,t.originY),a=!o(n.width,t.width)||!o(n.height,t.height);(i||!r&&a)&&(!this._shouldHideFloatBar&&Date.now()>=this.latestCallMaskTimestamp+e.maskDuration&&(this._shouldHideFloatBar=!0),null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.onAfterMoving,e.cameraTouchInterval)),(i||a)&&(this.rectangle=t)},e.prototype.maskHideFloatBarSometime=function(){this.latestCallMaskTimestamp=Date.now()},e.prototype.release=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null,this._shouldHideFloatBar=!1)},e.isRectangleEquals=function(e,t){return e.originX===t.originX&&e.originY===t.originY&&e.width===t.width&&e.height===t.height},e.cameraTouchInterval=300,e.maskDuration=100,n([i.observable],e.prototype,"_shouldHideFloatBar",void 0),n([i.action],e.prototype,"setState",null),e}();t.ViewMovingState=a},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};function i(e){return e?Object.freeze(e.map((function(e){return Object.freeze(n(e))}))):o}Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeFloatBarOptions=function(e){var t=void 0;return"boolean"==typeof e?t=e?Object.freeze({colors:i()}):void 0:e&&(t=Object.freeze({colors:i(e.colors)})),t};var o=Object.freeze([Object.freeze([224,32,32]),Object.freeze([250,100,0]),Object.freeze([247,181,0]),Object.freeze([109,212,0]),Object.freeze([68,215,182]),Object.freeze([50,197,255]),Object.freeze([0,145,255]),Object.freeze([98,54,255]),Object.freeze([182,32,224]),Object.freeze([109,114,120]),Object.freeze([0,0,0]),Object.freeze([255,255,255])])},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(12),a=r(52),s=r(4),c=r(26),u=r(53);!function(e){e.AlwaysReport="alwaysReport",e.BanReport="banReport",e.DependsOnRemote="dependsOnRemote"}(i=t.LoggerReportMode||(t.LoggerReportMode={}));var l=function(){function e(e,t,r){this.teamUUID=e,this.appUUID=t,this.loggerHub=this.createLoggerHub(r)}return e.prototype.createLoggerHub=function(e){void 0===e&&(e={});var t,r=e.reportDebugLogMode||i.AlwaysReport;switch(r){case i.BanReport:t=new o.DefaultLoggerHub({prefix:"[White]",levelMask:e.printLevelMask});break;case i.AlwaysReport:case i.DependsOnRemote:var n=s.environment.log.argusOptions,u=n.reportResourceURL,l=n.vid;t=new a.ClientLoggerHub({vid:l,reportResourceURL:u,prefix:"[White]",reportLevelMask:e.reportLevelMask,printLevelMask:e.printLevelMask,timestampKey:"createdAt",events:c.whiteEvents});break;default:throw new Error("unrecognized LoggerReportMode "+JSON.stringify(r))}return t},e.prototype.createRealtimeLogger=function(e,t){var r=Object.freeze(n(n({},u.createWhiteBasicTags(this.teamUUID,this.appUUID)),{uuid:e,region:t}));return o.createLogger(this.loggerHub,"Realtime",r)},e.prototype.createPlayerLogger=function(e){var t=Object.freeze(n(n({},u.createWhiteBasicTags(this.teamUUID,this.appUUID)),{region:e}));return o.createLogger(this.loggerHub,"Player",t)},e}();t.WhiteLoggerFactory=l},function(e,t,r){"use strict";var n=r(132),i=n.Reader,o=n.Writer,a=n.util,s=n.roots.default||(n.roots.default={});s.WhiteBoardPlayer=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.lts=a.Long?a.Long.fromBits(0,0,!1):0,e.prototype.uuid="",e.prototype.region="",e.prototype.slice="",e.prototype.team="",e.prototype.app="",e.prototype.akkoVersion="",e.prototype.sdkVersion="",e.prototype.nativeVersion="",e.prototype.platform="",e.prototype.os="",e.prototype.createdAt="",e.prototype.level="",e.prototype.message="",e.prototype.vid=0,e.prototype.clientIP="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(18).string(e.uuid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(26).string(e.region),null!=e.slice&&Object.hasOwnProperty.call(e,"slice")&&t.uint32(34).string(e.slice),null!=e.team&&Object.hasOwnProperty.call(e,"team")&&t.uint32(42).string(e.team),null!=e.app&&Object.hasOwnProperty.call(e,"app")&&t.uint32(50).string(e.app),null!=e.akkoVersion&&Object.hasOwnProperty.call(e,"akkoVersion")&&t.uint32(58).string(e.akkoVersion),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(66).string(e.sdkVersion),null!=e.nativeVersion&&Object.hasOwnProperty.call(e,"nativeVersion")&&t.uint32(74).string(e.nativeVersion),null!=e.platform&&Object.hasOwnProperty.call(e,"platform")&&t.uint32(82).string(e.platform),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(90).string(e.os),null!=e.createdAt&&Object.hasOwnProperty.call(e,"createdAt")&&t.uint32(98).string(e.createdAt),null!=e.level&&Object.hasOwnProperty.call(e,"level")&&t.uint32(106).string(e.level),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(114).string(e.message),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(120).int32(e.vid),null!=e.clientIP&&Object.hasOwnProperty.call(e,"clientIP")&&t.uint32(130).string(e.clientIP),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.WhiteBoardPlayer;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.lts=e.int64();break;case 2:n.uuid=e.string();break;case 3:n.region=e.string();break;case 4:n.slice=e.string();break;case 5:n.team=e.string();break;case 6:n.app=e.string();break;case 7:n.akkoVersion=e.string();break;case 8:n.sdkVersion=e.string();break;case 9:n.nativeVersion=e.string();break;case 10:n.platform=e.string();break;case 11:n.os=e.string();break;case 12:n.createdAt=e.string();break;case 13:n.level=e.string();break;case 14:n.message=e.string();break;case 15:n.vid=e.int32();break;case 16:n.clientIP=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=A(e)||null===e?"object expected":null!=e.lts&&e.hasOwnProperty("lts")&&!(a.isInteger(e.lts)||e.lts&&a.isInteger(e.lts.low)&&a.isInteger(e.lts.high))?"lts: integer|Long expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!a.isString(e.uuid)?"uuid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.slice&&e.hasOwnProperty("slice")&&!a.isString(e.slice)?"slice: string expected":null!=e.team&&e.hasOwnProperty("team")&&!a.isString(e.team)?"team: string expected":null!=e.app&&e.hasOwnProperty("app")&&!a.isString(e.app)?"app: string expected":null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&!a.isString(e.akkoVersion)?"akkoVersion: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!a.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&!a.isString(e.nativeVersion)?"nativeVersion: string expected":null!=e.platform&&e.hasOwnProperty("platform")&&!a.isString(e.platform)?"platform: string expected":null!=e.os&&e.hasOwnProperty("os")&&!a.isString(e.os)?"os: string expected":null!=e.createdAt&&e.hasOwnProperty("createdAt")&&!a.isString(e.createdAt)?"createdAt: string expected":null!=e.level&&e.hasOwnProperty("level")&&!a.isString(e.level)?"level: string expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isString(e.message)?"message: string expected":null!=e.vid&&e.hasOwnProperty("vid")&&!a.isInteger(e.vid)?"vid: integer expected":null!=e.clientIP&&e.hasOwnProperty("clientIP")&&!a.isString(e.clientIP)?"clientIP: string expected":null},e.fromObject=function(e){if(e instanceof s.WhiteBoardPlayer)return e;var t=new s.WhiteBoardPlayer;return null!=e.lts&&(a.Long?(t.lts=a.Long.fromValue(e.lts)).unsigned=!1:"string"==typeof e.lts?t.lts=parseInt(e.lts,10):"number"==typeof e.lts?t.lts=e.lts:"object"==A(e.lts)&&(t.lts=new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber())),null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.region&&(t.region=String(e.region)),null!=e.slice&&(t.slice=String(e.slice)),null!=e.team&&(t.team=String(e.team)),null!=e.app&&(t.app=String(e.app)),null!=e.akkoVersion&&(t.akkoVersion=String(e.akkoVersion)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.nativeVersion&&(t.nativeVersion=String(e.nativeVersion)),null!=e.platform&&(t.platform=String(e.platform)),null!=e.os&&(t.os=String(e.os)),null!=e.createdAt&&(t.createdAt=String(e.createdAt)),null!=e.level&&(t.level=String(e.level)),null!=e.message&&(t.message=String(e.message)),null!=e.vid&&(t.vid=0|e.vid),null!=e.clientIP&&(t.clientIP=String(e.clientIP)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.lts=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lts=t.longs===String?"0":0;r.uuid="",r.region="",r.slice="",r.team="",r.app="",r.akkoVersion="",r.sdkVersion="",r.nativeVersion="",r.platform="",r.os="",r.createdAt="",r.level="",r.message="",r.vid=0,r.clientIP=""}return null!=e.lts&&e.hasOwnProperty("lts")&&("number"==typeof e.lts?r.lts=t.longs===String?String(e.lts):e.lts:r.lts=t.longs===String?a.Long.prototype.toString.call(e.lts):t.longs===Number?new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber():e.lts),null!=e.uuid&&e.hasOwnProperty("uuid")&&(r.uuid=e.uuid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),null!=e.slice&&e.hasOwnProperty("slice")&&(r.slice=e.slice),null!=e.team&&e.hasOwnProperty("team")&&(r.team=e.team),null!=e.app&&e.hasOwnProperty("app")&&(r.app=e.app),null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&(r.akkoVersion=e.akkoVersion),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&(r.nativeVersion=e.nativeVersion),null!=e.platform&&e.hasOwnProperty("platform")&&(r.platform=e.platform),null!=e.os&&e.hasOwnProperty("os")&&(r.os=e.os),null!=e.createdAt&&e.hasOwnProperty("createdAt")&&(r.createdAt=e.createdAt),null!=e.level&&e.hasOwnProperty("level")&&(r.level=e.level),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),null!=e.vid&&e.hasOwnProperty("vid")&&(r.vid=e.vid),null!=e.clientIP&&e.hasOwnProperty("clientIP")&&(r.clientIP=e.clientIP),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e}(),s.WhiteBoardQualityConnection=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.lts=a.Long?a.Long.fromBits(0,0,!1):0,e.prototype.team="",e.prototype.app="",e.prototype.akkoVersion="",e.prototype.sdkVersion="",e.prototype.nativeVersion="",e.prototype.platform="",e.prototype.os="",e.prototype.kind="",e.prototype.uuid="",e.prototype.region="",e.prototype.userId="",e.prototype.session="",e.prototype.isReconnection="",e.prototype.retryCount="",e.prototype.buildWebSocketDuration="",e.prototype.buildMagixDuration="",e.prototype.createdAt="",e.prototype.vid=0,e.prototype.clientIP="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.team&&Object.hasOwnProperty.call(e,"team")&&t.uint32(18).string(e.team),null!=e.app&&Object.hasOwnProperty.call(e,"app")&&t.uint32(26).string(e.app),null!=e.akkoVersion&&Object.hasOwnProperty.call(e,"akkoVersion")&&t.uint32(34).string(e.akkoVersion),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(42).string(e.sdkVersion),null!=e.nativeVersion&&Object.hasOwnProperty.call(e,"nativeVersion")&&t.uint32(50).string(e.nativeVersion),null!=e.platform&&Object.hasOwnProperty.call(e,"platform")&&t.uint32(58).string(e.platform),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(66).string(e.os),null!=e.kind&&Object.hasOwnProperty.call(e,"kind")&&t.uint32(74).string(e.kind),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(82).string(e.uuid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(90).string(e.region),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(98).string(e.userId),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.isReconnection&&Object.hasOwnProperty.call(e,"isReconnection")&&t.uint32(114).string(e.isReconnection),null!=e.retryCount&&Object.hasOwnProperty.call(e,"retryCount")&&t.uint32(122).string(e.retryCount),null!=e.buildWebSocketDuration&&Object.hasOwnProperty.call(e,"buildWebSocketDuration")&&t.uint32(130).string(e.buildWebSocketDuration),null!=e.buildMagixDuration&&Object.hasOwnProperty.call(e,"buildMagixDuration")&&t.uint32(138).string(e.buildMagixDuration),null!=e.createdAt&&Object.hasOwnProperty.call(e,"createdAt")&&t.uint32(146).string(e.createdAt),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(152).int32(e.vid),null!=e.clientIP&&Object.hasOwnProperty.call(e,"clientIP")&&t.uint32(162).string(e.clientIP),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.WhiteBoardQualityConnection;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.lts=e.int64();break;case 2:n.team=e.string();break;case 3:n.app=e.string();break;case 4:n.akkoVersion=e.string();break;case 5:n.sdkVersion=e.string();break;case 6:n.nativeVersion=e.string();break;case 7:n.platform=e.string();break;case 8:n.os=e.string();break;case 9:n.kind=e.string();break;case 10:n.uuid=e.string();break;case 11:n.region=e.string();break;case 12:n.userId=e.string();break;case 13:n.session=e.string();break;case 14:n.isReconnection=e.string();break;case 15:n.retryCount=e.string();break;case 16:n.buildWebSocketDuration=e.string();break;case 17:n.buildMagixDuration=e.string();break;case 18:n.createdAt=e.string();break;case 19:n.vid=e.int32();break;case 20:n.clientIP=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=A(e)||null===e?"object expected":null!=e.lts&&e.hasOwnProperty("lts")&&!(a.isInteger(e.lts)||e.lts&&a.isInteger(e.lts.low)&&a.isInteger(e.lts.high))?"lts: integer|Long expected":null!=e.team&&e.hasOwnProperty("team")&&!a.isString(e.team)?"team: string expected":null!=e.app&&e.hasOwnProperty("app")&&!a.isString(e.app)?"app: string expected":null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&!a.isString(e.akkoVersion)?"akkoVersion: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!a.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&!a.isString(e.nativeVersion)?"nativeVersion: string expected":null!=e.platform&&e.hasOwnProperty("platform")&&!a.isString(e.platform)?"platform: string expected":null!=e.os&&e.hasOwnProperty("os")&&!a.isString(e.os)?"os: string expected":null!=e.kind&&e.hasOwnProperty("kind")&&!a.isString(e.kind)?"kind: string expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!a.isString(e.uuid)?"uuid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.userId&&e.hasOwnProperty("userId")&&!a.isString(e.userId)?"userId: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.isReconnection&&e.hasOwnProperty("isReconnection")&&!a.isString(e.isReconnection)?"isReconnection: string expected":null!=e.retryCount&&e.hasOwnProperty("retryCount")&&!a.isString(e.retryCount)?"retryCount: string expected":null!=e.buildWebSocketDuration&&e.hasOwnProperty("buildWebSocketDuration")&&!a.isString(e.buildWebSocketDuration)?"buildWebSocketDuration: string expected":null!=e.buildMagixDuration&&e.hasOwnProperty("buildMagixDuration")&&!a.isString(e.buildMagixDuration)?"buildMagixDuration: string expected":null!=e.createdAt&&e.hasOwnProperty("createdAt")&&!a.isString(e.createdAt)?"createdAt: string expected":null!=e.vid&&e.hasOwnProperty("vid")&&!a.isInteger(e.vid)?"vid: integer expected":null!=e.clientIP&&e.hasOwnProperty("clientIP")&&!a.isString(e.clientIP)?"clientIP: string expected":null},e.fromObject=function(e){if(e instanceof s.WhiteBoardQualityConnection)return e;var t=new s.WhiteBoardQualityConnection;return null!=e.lts&&(a.Long?(t.lts=a.Long.fromValue(e.lts)).unsigned=!1:"string"==typeof e.lts?t.lts=parseInt(e.lts,10):"number"==typeof e.lts?t.lts=e.lts:"object"==A(e.lts)&&(t.lts=new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber())),null!=e.team&&(t.team=String(e.team)),null!=e.app&&(t.app=String(e.app)),null!=e.akkoVersion&&(t.akkoVersion=String(e.akkoVersion)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.nativeVersion&&(t.nativeVersion=String(e.nativeVersion)),null!=e.platform&&(t.platform=String(e.platform)),null!=e.os&&(t.os=String(e.os)),null!=e.kind&&(t.kind=String(e.kind)),null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.region&&(t.region=String(e.region)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.session&&(t.session=String(e.session)),null!=e.isReconnection&&(t.isReconnection=String(e.isReconnection)),null!=e.retryCount&&(t.retryCount=String(e.retryCount)),null!=e.buildWebSocketDuration&&(t.buildWebSocketDuration=String(e.buildWebSocketDuration)),null!=e.buildMagixDuration&&(t.buildMagixDuration=String(e.buildMagixDuration)),null!=e.createdAt&&(t.createdAt=String(e.createdAt)),null!=e.vid&&(t.vid=0|e.vid),null!=e.clientIP&&(t.clientIP=String(e.clientIP)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.lts=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lts=t.longs===String?"0":0;r.team="",r.app="",r.akkoVersion="",r.sdkVersion="",r.nativeVersion="",r.platform="",r.os="",r.kind="",r.uuid="",r.region="",r.userId="",r.session="",r.isReconnection="",r.retryCount="",r.buildWebSocketDuration="",r.buildMagixDuration="",r.createdAt="",r.vid=0,r.clientIP=""}return null!=e.lts&&e.hasOwnProperty("lts")&&("number"==typeof e.lts?r.lts=t.longs===String?String(e.lts):e.lts:r.lts=t.longs===String?a.Long.prototype.toString.call(e.lts):t.longs===Number?new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber():e.lts),null!=e.team&&e.hasOwnProperty("team")&&(r.team=e.team),null!=e.app&&e.hasOwnProperty("app")&&(r.app=e.app),null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&(r.akkoVersion=e.akkoVersion),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&(r.nativeVersion=e.nativeVersion),null!=e.platform&&e.hasOwnProperty("platform")&&(r.platform=e.platform),null!=e.os&&e.hasOwnProperty("os")&&(r.os=e.os),null!=e.kind&&e.hasOwnProperty("kind")&&(r.kind=e.kind),null!=e.uuid&&e.hasOwnProperty("uuid")&&(r.uuid=e.uuid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.session&&e.hasOwnProperty("session")&&(r.session=e.session),null!=e.isReconnection&&e.hasOwnProperty("isReconnection")&&(r.isReconnection=e.isReconnection),null!=e.retryCount&&e.hasOwnProperty("retryCount")&&(r.retryCount=e.retryCount),null!=e.buildWebSocketDuration&&e.hasOwnProperty("buildWebSocketDuration")&&(r.buildWebSocketDuration=e.buildWebSocketDuration),null!=e.buildMagixDuration&&e.hasOwnProperty("buildMagixDuration")&&(r.buildMagixDuration=e.buildMagixDuration),null!=e.createdAt&&e.hasOwnProperty("createdAt")&&(r.createdAt=e.createdAt),null!=e.vid&&e.hasOwnProperty("vid")&&(r.vid=e.vid),null!=e.clientIP&&e.hasOwnProperty("clientIP")&&(r.clientIP=e.clientIP),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e}(),s.WhiteBoardQualityDisconnection=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.lts=a.Long?a.Long.fromBits(0,0,!1):0,e.prototype.team="",e.prototype.app="",e.prototype.akkoVersion="",e.prototype.sdkVersion="",e.prototype.nativeVersion="",e.prototype.platform="",e.prototype.os="",e.prototype.kind="",e.prototype.uuid="",e.prototype.region="",e.prototype.userId="",e.prototype.session="",e.prototype.duration="",e.prototype.createdAt="",e.prototype.vid=0,e.prototype.isReconnection="",e.prototype.clientIP="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.team&&Object.hasOwnProperty.call(e,"team")&&t.uint32(18).string(e.team),null!=e.app&&Object.hasOwnProperty.call(e,"app")&&t.uint32(26).string(e.app),null!=e.akkoVersion&&Object.hasOwnProperty.call(e,"akkoVersion")&&t.uint32(34).string(e.akkoVersion),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(42).string(e.sdkVersion),null!=e.nativeVersion&&Object.hasOwnProperty.call(e,"nativeVersion")&&t.uint32(50).string(e.nativeVersion),null!=e.platform&&Object.hasOwnProperty.call(e,"platform")&&t.uint32(58).string(e.platform),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(66).string(e.os),null!=e.kind&&Object.hasOwnProperty.call(e,"kind")&&t.uint32(74).string(e.kind),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(82).string(e.uuid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(90).string(e.region),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(98).string(e.userId),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&t.uint32(122).string(e.duration),null!=e.createdAt&&Object.hasOwnProperty.call(e,"createdAt")&&t.uint32(130).string(e.createdAt),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(136).int32(e.vid),null!=e.isReconnection&&Object.hasOwnProperty.call(e,"isReconnection")&&t.uint32(146).string(e.isReconnection),null!=e.clientIP&&Object.hasOwnProperty.call(e,"clientIP")&&t.uint32(154).string(e.clientIP),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.WhiteBoardQualityDisconnection;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.lts=e.int64();break;case 2:n.team=e.string();break;case 3:n.app=e.string();break;case 4:n.akkoVersion=e.string();break;case 5:n.sdkVersion=e.string();break;case 6:n.nativeVersion=e.string();break;case 7:n.platform=e.string();break;case 8:n.os=e.string();break;case 9:n.kind=e.string();break;case 10:n.uuid=e.string();break;case 11:n.region=e.string();break;case 12:n.userId=e.string();break;case 13:n.session=e.string();break;case 15:n.duration=e.string();break;case 16:n.createdAt=e.string();break;case 17:n.vid=e.int32();break;case 18:n.isReconnection=e.string();break;case 19:n.clientIP=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=A(e)||null===e?"object expected":null!=e.lts&&e.hasOwnProperty("lts")&&!(a.isInteger(e.lts)||e.lts&&a.isInteger(e.lts.low)&&a.isInteger(e.lts.high))?"lts: integer|Long expected":null!=e.team&&e.hasOwnProperty("team")&&!a.isString(e.team)?"team: string expected":null!=e.app&&e.hasOwnProperty("app")&&!a.isString(e.app)?"app: string expected":null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&!a.isString(e.akkoVersion)?"akkoVersion: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!a.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&!a.isString(e.nativeVersion)?"nativeVersion: string expected":null!=e.platform&&e.hasOwnProperty("platform")&&!a.isString(e.platform)?"platform: string expected":null!=e.os&&e.hasOwnProperty("os")&&!a.isString(e.os)?"os: string expected":null!=e.kind&&e.hasOwnProperty("kind")&&!a.isString(e.kind)?"kind: string expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!a.isString(e.uuid)?"uuid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.userId&&e.hasOwnProperty("userId")&&!a.isString(e.userId)?"userId: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.duration&&e.hasOwnProperty("duration")&&!a.isString(e.duration)?"duration: string expected":null!=e.createdAt&&e.hasOwnProperty("createdAt")&&!a.isString(e.createdAt)?"createdAt: string expected":null!=e.vid&&e.hasOwnProperty("vid")&&!a.isInteger(e.vid)?"vid: integer expected":null!=e.isReconnection&&e.hasOwnProperty("isReconnection")&&!a.isString(e.isReconnection)?"isReconnection: string expected":null!=e.clientIP&&e.hasOwnProperty("clientIP")&&!a.isString(e.clientIP)?"clientIP: string expected":null},e.fromObject=function(e){if(e instanceof s.WhiteBoardQualityDisconnection)return e;var t=new s.WhiteBoardQualityDisconnection;return null!=e.lts&&(a.Long?(t.lts=a.Long.fromValue(e.lts)).unsigned=!1:"string"==typeof e.lts?t.lts=parseInt(e.lts,10):"number"==typeof e.lts?t.lts=e.lts:"object"==A(e.lts)&&(t.lts=new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber())),null!=e.team&&(t.team=String(e.team)),null!=e.app&&(t.app=String(e.app)),null!=e.akkoVersion&&(t.akkoVersion=String(e.akkoVersion)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.nativeVersion&&(t.nativeVersion=String(e.nativeVersion)),null!=e.platform&&(t.platform=String(e.platform)),null!=e.os&&(t.os=String(e.os)),null!=e.kind&&(t.kind=String(e.kind)),null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.region&&(t.region=String(e.region)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.session&&(t.session=String(e.session)),null!=e.duration&&(t.duration=String(e.duration)),null!=e.createdAt&&(t.createdAt=String(e.createdAt)),null!=e.vid&&(t.vid=0|e.vid),null!=e.isReconnection&&(t.isReconnection=String(e.isReconnection)),null!=e.clientIP&&(t.clientIP=String(e.clientIP)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.lts=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lts=t.longs===String?"0":0;r.team="",r.app="",r.akkoVersion="",r.sdkVersion="",r.nativeVersion="",r.platform="",r.os="",r.kind="",r.uuid="",r.region="",r.userId="",r.session="",r.duration="",r.createdAt="",r.vid=0,r.isReconnection="",r.clientIP=""}return null!=e.lts&&e.hasOwnProperty("lts")&&("number"==typeof e.lts?r.lts=t.longs===String?String(e.lts):e.lts:r.lts=t.longs===String?a.Long.prototype.toString.call(e.lts):t.longs===Number?new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber():e.lts),null!=e.team&&e.hasOwnProperty("team")&&(r.team=e.team),null!=e.app&&e.hasOwnProperty("app")&&(r.app=e.app),null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&(r.akkoVersion=e.akkoVersion),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&(r.nativeVersion=e.nativeVersion),null!=e.platform&&e.hasOwnProperty("platform")&&(r.platform=e.platform),null!=e.os&&e.hasOwnProperty("os")&&(r.os=e.os),null!=e.kind&&e.hasOwnProperty("kind")&&(r.kind=e.kind),null!=e.uuid&&e.hasOwnProperty("uuid")&&(r.uuid=e.uuid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.session&&e.hasOwnProperty("session")&&(r.session=e.session),null!=e.duration&&e.hasOwnProperty("duration")&&(r.duration=e.duration),null!=e.createdAt&&e.hasOwnProperty("createdAt")&&(r.createdAt=e.createdAt),null!=e.vid&&e.hasOwnProperty("vid")&&(r.vid=e.vid),null!=e.isReconnection&&e.hasOwnProperty("isReconnection")&&(r.isReconnection=e.isReconnection),null!=e.clientIP&&e.hasOwnProperty("clientIP")&&(r.clientIP=e.clientIP),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e}(),s.WhiteBoardQualitySample=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.lts=a.Long?a.Long.fromBits(0,0,!1):0,e.prototype.team="",e.prototype.app="",e.prototype.akkoVersion="",e.prototype.sdkVersion="",e.prototype.nativeVersion="",e.prototype.platform="",e.prototype.os="",e.prototype.kind="",e.prototype.uuid="",e.prototype.region="",e.prototype.userId="",e.prototype.session="",e.prototype.maxRTT="",e.prototype.minRTT="",e.prototype.averageRTT="",e.prototype.maxQueue="",e.prototype.minQueue="",e.prototype.averageQueue="",e.prototype.maxInterval="",e.prototype.minInterval="",e.prototype.averageInterval="",e.prototype.vid=0,e.prototype.createdAt="",e.prototype.clientIP="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.team&&Object.hasOwnProperty.call(e,"team")&&t.uint32(18).string(e.team),null!=e.app&&Object.hasOwnProperty.call(e,"app")&&t.uint32(26).string(e.app),null!=e.akkoVersion&&Object.hasOwnProperty.call(e,"akkoVersion")&&t.uint32(34).string(e.akkoVersion),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(42).string(e.sdkVersion),null!=e.nativeVersion&&Object.hasOwnProperty.call(e,"nativeVersion")&&t.uint32(50).string(e.nativeVersion),null!=e.platform&&Object.hasOwnProperty.call(e,"platform")&&t.uint32(58).string(e.platform),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(66).string(e.os),null!=e.kind&&Object.hasOwnProperty.call(e,"kind")&&t.uint32(74).string(e.kind),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(82).string(e.uuid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(90).string(e.region),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(98).string(e.userId),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.maxRTT&&Object.hasOwnProperty.call(e,"maxRTT")&&t.uint32(114).string(e.maxRTT),null!=e.minRTT&&Object.hasOwnProperty.call(e,"minRTT")&&t.uint32(122).string(e.minRTT),null!=e.averageRTT&&Object.hasOwnProperty.call(e,"averageRTT")&&t.uint32(130).string(e.averageRTT),null!=e.maxQueue&&Object.hasOwnProperty.call(e,"maxQueue")&&t.uint32(138).string(e.maxQueue),null!=e.minQueue&&Object.hasOwnProperty.call(e,"minQueue")&&t.uint32(146).string(e.minQueue),null!=e.averageQueue&&Object.hasOwnProperty.call(e,"averageQueue")&&t.uint32(154).string(e.averageQueue),null!=e.maxInterval&&Object.hasOwnProperty.call(e,"maxInterval")&&t.uint32(162).string(e.maxInterval),null!=e.minInterval&&Object.hasOwnProperty.call(e,"minInterval")&&t.uint32(170).string(e.minInterval),null!=e.averageInterval&&Object.hasOwnProperty.call(e,"averageInterval")&&t.uint32(178).string(e.averageInterval),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(184).int32(e.vid),null!=e.createdAt&&Object.hasOwnProperty.call(e,"createdAt")&&t.uint32(194).string(e.createdAt),null!=e.clientIP&&Object.hasOwnProperty.call(e,"clientIP")&&t.uint32(202).string(e.clientIP),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.WhiteBoardQualitySample;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.lts=e.int64();break;case 2:n.team=e.string();break;case 3:n.app=e.string();break;case 4:n.akkoVersion=e.string();break;case 5:n.sdkVersion=e.string();break;case 6:n.nativeVersion=e.string();break;case 7:n.platform=e.string();break;case 8:n.os=e.string();break;case 9:n.kind=e.string();break;case 10:n.uuid=e.string();break;case 11:n.region=e.string();break;case 12:n.userId=e.string();break;case 13:n.session=e.string();break;case 14:n.maxRTT=e.string();break;case 15:n.minRTT=e.string();break;case 16:n.averageRTT=e.string();break;case 17:n.maxQueue=e.string();break;case 18:n.minQueue=e.string();break;case 19:n.averageQueue=e.string();break;case 20:n.maxInterval=e.string();break;case 21:n.minInterval=e.string();break;case 22:n.averageInterval=e.string();break;case 23:n.vid=e.int32();break;case 24:n.createdAt=e.string();break;case 25:n.clientIP=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=A(e)||null===e?"object expected":null!=e.lts&&e.hasOwnProperty("lts")&&!(a.isInteger(e.lts)||e.lts&&a.isInteger(e.lts.low)&&a.isInteger(e.lts.high))?"lts: integer|Long expected":null!=e.team&&e.hasOwnProperty("team")&&!a.isString(e.team)?"team: string expected":null!=e.app&&e.hasOwnProperty("app")&&!a.isString(e.app)?"app: string expected":null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&!a.isString(e.akkoVersion)?"akkoVersion: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!a.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&!a.isString(e.nativeVersion)?"nativeVersion: string expected":null!=e.platform&&e.hasOwnProperty("platform")&&!a.isString(e.platform)?"platform: string expected":null!=e.os&&e.hasOwnProperty("os")&&!a.isString(e.os)?"os: string expected":null!=e.kind&&e.hasOwnProperty("kind")&&!a.isString(e.kind)?"kind: string expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!a.isString(e.uuid)?"uuid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.userId&&e.hasOwnProperty("userId")&&!a.isString(e.userId)?"userId: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.maxRTT&&e.hasOwnProperty("maxRTT")&&!a.isString(e.maxRTT)?"maxRTT: string expected":null!=e.minRTT&&e.hasOwnProperty("minRTT")&&!a.isString(e.minRTT)?"minRTT: string expected":null!=e.averageRTT&&e.hasOwnProperty("averageRTT")&&!a.isString(e.averageRTT)?"averageRTT: string expected":null!=e.maxQueue&&e.hasOwnProperty("maxQueue")&&!a.isString(e.maxQueue)?"maxQueue: string expected":null!=e.minQueue&&e.hasOwnProperty("minQueue")&&!a.isString(e.minQueue)?"minQueue: string expected":null!=e.averageQueue&&e.hasOwnProperty("averageQueue")&&!a.isString(e.averageQueue)?"averageQueue: string expected":null!=e.maxInterval&&e.hasOwnProperty("maxInterval")&&!a.isString(e.maxInterval)?"maxInterval: string expected":null!=e.minInterval&&e.hasOwnProperty("minInterval")&&!a.isString(e.minInterval)?"minInterval: string expected":null!=e.averageInterval&&e.hasOwnProperty("averageInterval")&&!a.isString(e.averageInterval)?"averageInterval: string expected":null!=e.vid&&e.hasOwnProperty("vid")&&!a.isInteger(e.vid)?"vid: integer expected":null!=e.createdAt&&e.hasOwnProperty("createdAt")&&!a.isString(e.createdAt)?"createdAt: string expected":null!=e.clientIP&&e.hasOwnProperty("clientIP")&&!a.isString(e.clientIP)?"clientIP: string expected":null},e.fromObject=function(e){if(e instanceof s.WhiteBoardQualitySample)return e;var t=new s.WhiteBoardQualitySample;return null!=e.lts&&(a.Long?(t.lts=a.Long.fromValue(e.lts)).unsigned=!1:"string"==typeof e.lts?t.lts=parseInt(e.lts,10):"number"==typeof e.lts?t.lts=e.lts:"object"==A(e.lts)&&(t.lts=new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber())),null!=e.team&&(t.team=String(e.team)),null!=e.app&&(t.app=String(e.app)),null!=e.akkoVersion&&(t.akkoVersion=String(e.akkoVersion)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.nativeVersion&&(t.nativeVersion=String(e.nativeVersion)),null!=e.platform&&(t.platform=String(e.platform)),null!=e.os&&(t.os=String(e.os)),null!=e.kind&&(t.kind=String(e.kind)),null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.region&&(t.region=String(e.region)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.session&&(t.session=String(e.session)),null!=e.maxRTT&&(t.maxRTT=String(e.maxRTT)),null!=e.minRTT&&(t.minRTT=String(e.minRTT)),null!=e.averageRTT&&(t.averageRTT=String(e.averageRTT)),null!=e.maxQueue&&(t.maxQueue=String(e.maxQueue)),null!=e.minQueue&&(t.minQueue=String(e.minQueue)),null!=e.averageQueue&&(t.averageQueue=String(e.averageQueue)),null!=e.maxInterval&&(t.maxInterval=String(e.maxInterval)),null!=e.minInterval&&(t.minInterval=String(e.minInterval)),null!=e.averageInterval&&(t.averageInterval=String(e.averageInterval)),null!=e.vid&&(t.vid=0|e.vid),null!=e.createdAt&&(t.createdAt=String(e.createdAt)),null!=e.clientIP&&(t.clientIP=String(e.clientIP)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.lts=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lts=t.longs===String?"0":0;r.team="",r.app="",r.akkoVersion="",r.sdkVersion="",r.nativeVersion="",r.platform="",r.os="",r.kind="",r.uuid="",r.region="",r.userId="",r.session="",r.maxRTT="",r.minRTT="",r.averageRTT="",r.maxQueue="",r.minQueue="",r.averageQueue="",r.maxInterval="",r.minInterval="",r.averageInterval="",r.vid=0,r.createdAt="",r.clientIP=""}return null!=e.lts&&e.hasOwnProperty("lts")&&("number"==typeof e.lts?r.lts=t.longs===String?String(e.lts):e.lts:r.lts=t.longs===String?a.Long.prototype.toString.call(e.lts):t.longs===Number?new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber():e.lts),null!=e.team&&e.hasOwnProperty("team")&&(r.team=e.team),null!=e.app&&e.hasOwnProperty("app")&&(r.app=e.app),null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&(r.akkoVersion=e.akkoVersion),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&(r.nativeVersion=e.nativeVersion),null!=e.platform&&e.hasOwnProperty("platform")&&(r.platform=e.platform),null!=e.os&&e.hasOwnProperty("os")&&(r.os=e.os),null!=e.kind&&e.hasOwnProperty("kind")&&(r.kind=e.kind),null!=e.uuid&&e.hasOwnProperty("uuid")&&(r.uuid=e.uuid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.session&&e.hasOwnProperty("session")&&(r.session=e.session),null!=e.maxRTT&&e.hasOwnProperty("maxRTT")&&(r.maxRTT=e.maxRTT),null!=e.minRTT&&e.hasOwnProperty("minRTT")&&(r.minRTT=e.minRTT),null!=e.averageRTT&&e.hasOwnProperty("averageRTT")&&(r.averageRTT=e.averageRTT),null!=e.maxQueue&&e.hasOwnProperty("maxQueue")&&(r.maxQueue=e.maxQueue),null!=e.minQueue&&e.hasOwnProperty("minQueue")&&(r.minQueue=e.minQueue),null!=e.averageQueue&&e.hasOwnProperty("averageQueue")&&(r.averageQueue=e.averageQueue),null!=e.maxInterval&&e.hasOwnProperty("maxInterval")&&(r.maxInterval=e.maxInterval),null!=e.minInterval&&e.hasOwnProperty("minInterval")&&(r.minInterval=e.minInterval),null!=e.averageInterval&&e.hasOwnProperty("averageInterval")&&(r.averageInterval=e.averageInterval),null!=e.vid&&e.hasOwnProperty("vid")&&(r.vid=e.vid),null!=e.createdAt&&e.hasOwnProperty("createdAt")&&(r.createdAt=e.createdAt),null!=e.clientIP&&e.hasOwnProperty("clientIP")&&(r.clientIP=e.clientIP),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e}(),s.WhiteBoardRealtime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.lts=a.Long?a.Long.fromBits(0,0,!1):0,e.prototype.akkoVersion="",e.prototype.app="",e.prototype.createdAt="",e.prototype.level="",e.prototype.message="",e.prototype.os="",e.prototype.platform="",e.prototype.region="",e.prototype.sdkVersion="",e.prototype.session="",e.prototype.team="",e.prototype.userId="",e.prototype.uuid="",e.prototype.vid=0,e.prototype.nativeVersion="",e.prototype.clientIP="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.akkoVersion&&Object.hasOwnProperty.call(e,"akkoVersion")&&t.uint32(18).string(e.akkoVersion),null!=e.app&&Object.hasOwnProperty.call(e,"app")&&t.uint32(26).string(e.app),null!=e.createdAt&&Object.hasOwnProperty.call(e,"createdAt")&&t.uint32(34).string(e.createdAt),null!=e.level&&Object.hasOwnProperty.call(e,"level")&&t.uint32(42).string(e.level),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(50).string(e.message),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(58).string(e.os),null!=e.platform&&Object.hasOwnProperty.call(e,"platform")&&t.uint32(66).string(e.platform),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(74).string(e.region),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(82).string(e.sdkVersion),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(90).string(e.session),null!=e.team&&Object.hasOwnProperty.call(e,"team")&&t.uint32(98).string(e.team),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(106).string(e.userId),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&t.uint32(114).string(e.uuid),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(120).int32(e.vid),null!=e.nativeVersion&&Object.hasOwnProperty.call(e,"nativeVersion")&&t.uint32(130).string(e.nativeVersion),null!=e.clientIP&&Object.hasOwnProperty.call(e,"clientIP")&&t.uint32(138).string(e.clientIP),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new s.WhiteBoardRealtime;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.lts=e.int64();break;case 2:n.akkoVersion=e.string();break;case 3:n.app=e.string();break;case 4:n.createdAt=e.string();break;case 5:n.level=e.string();break;case 6:n.message=e.string();break;case 7:n.os=e.string();break;case 8:n.platform=e.string();break;case 9:n.region=e.string();break;case 10:n.sdkVersion=e.string();break;case 11:n.session=e.string();break;case 12:n.team=e.string();break;case 13:n.userId=e.string();break;case 14:n.uuid=e.string();break;case 15:n.vid=e.int32();break;case 16:n.nativeVersion=e.string();break;case 17:n.clientIP=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=A(e)||null===e?"object expected":null!=e.lts&&e.hasOwnProperty("lts")&&!(a.isInteger(e.lts)||e.lts&&a.isInteger(e.lts.low)&&a.isInteger(e.lts.high))?"lts: integer|Long expected":null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&!a.isString(e.akkoVersion)?"akkoVersion: string expected":null!=e.app&&e.hasOwnProperty("app")&&!a.isString(e.app)?"app: string expected":null!=e.createdAt&&e.hasOwnProperty("createdAt")&&!a.isString(e.createdAt)?"createdAt: string expected":null!=e.level&&e.hasOwnProperty("level")&&!a.isString(e.level)?"level: string expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isString(e.message)?"message: string expected":null!=e.os&&e.hasOwnProperty("os")&&!a.isString(e.os)?"os: string expected":null!=e.platform&&e.hasOwnProperty("platform")&&!a.isString(e.platform)?"platform: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!a.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.team&&e.hasOwnProperty("team")&&!a.isString(e.team)?"team: string expected":null!=e.userId&&e.hasOwnProperty("userId")&&!a.isString(e.userId)?"userId: string expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&!a.isString(e.uuid)?"uuid: string expected":null!=e.vid&&e.hasOwnProperty("vid")&&!a.isInteger(e.vid)?"vid: integer expected":null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&!a.isString(e.nativeVersion)?"nativeVersion: string expected":null!=e.clientIP&&e.hasOwnProperty("clientIP")&&!a.isString(e.clientIP)?"clientIP: string expected":null},e.fromObject=function(e){if(e instanceof s.WhiteBoardRealtime)return e;var t=new s.WhiteBoardRealtime;return null!=e.lts&&(a.Long?(t.lts=a.Long.fromValue(e.lts)).unsigned=!1:"string"==typeof e.lts?t.lts=parseInt(e.lts,10):"number"==typeof e.lts?t.lts=e.lts:"object"==A(e.lts)&&(t.lts=new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber())),null!=e.akkoVersion&&(t.akkoVersion=String(e.akkoVersion)),null!=e.app&&(t.app=String(e.app)),null!=e.createdAt&&(t.createdAt=String(e.createdAt)),null!=e.level&&(t.level=String(e.level)),null!=e.message&&(t.message=String(e.message)),null!=e.os&&(t.os=String(e.os)),null!=e.platform&&(t.platform=String(e.platform)),null!=e.region&&(t.region=String(e.region)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.session&&(t.session=String(e.session)),null!=e.team&&(t.team=String(e.team)),null!=e.userId&&(t.userId=String(e.userId)),null!=e.uuid&&(t.uuid=String(e.uuid)),null!=e.vid&&(t.vid=0|e.vid),null!=e.nativeVersion&&(t.nativeVersion=String(e.nativeVersion)),null!=e.clientIP&&(t.clientIP=String(e.clientIP)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!1);r.lts=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.lts=t.longs===String?"0":0;r.akkoVersion="",r.app="",r.createdAt="",r.level="",r.message="",r.os="",r.platform="",r.region="",r.sdkVersion="",r.session="",r.team="",r.userId="",r.uuid="",r.vid=0,r.nativeVersion="",r.clientIP=""}return null!=e.lts&&e.hasOwnProperty("lts")&&("number"==typeof e.lts?r.lts=t.longs===String?String(e.lts):e.lts:r.lts=t.longs===String?a.Long.prototype.toString.call(e.lts):t.longs===Number?new a.LongBits(e.lts.low>>>0,e.lts.high>>>0).toNumber():e.lts),null!=e.akkoVersion&&e.hasOwnProperty("akkoVersion")&&(r.akkoVersion=e.akkoVersion),null!=e.app&&e.hasOwnProperty("app")&&(r.app=e.app),null!=e.createdAt&&e.hasOwnProperty("createdAt")&&(r.createdAt=e.createdAt),null!=e.level&&e.hasOwnProperty("level")&&(r.level=e.level),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),null!=e.os&&e.hasOwnProperty("os")&&(r.os=e.os),null!=e.platform&&e.hasOwnProperty("platform")&&(r.platform=e.platform),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.session&&e.hasOwnProperty("session")&&(r.session=e.session),null!=e.team&&e.hasOwnProperty("team")&&(r.team=e.team),null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.uuid&&e.hasOwnProperty("uuid")&&(r.uuid=e.uuid),null!=e.vid&&e.hasOwnProperty("vid")&&(r.vid=e.vid),null!=e.nativeVersion&&e.hasOwnProperty("nativeVersion")&&(r.nativeVersion=e.nativeVersion),null!=e.clientIP&&e.hasOwnProperty("clientIP")&&(r.clientIP=e.clientIP),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},e}(),e.exports=s},function(e,t){e.exports=r("VDtp")},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(12),o=r(52),a=r(53),s=r(4),c=r(26),u=function(){function e(e,t){var r=s.environment.log.argusOptions,n=r.reportResourceURL,i=r.vid;this.loggerHub=new o.ClientLoggerHub({vid:i,reportResourceURL:n,timestampKey:"createdAt",events:c.qualityEvents}),this.teamUUID=e,this.appUUID=t}return e.prototype.createQualityConnectionCommitter=function(e,t){var r=Object.freeze(n(n({},a.createWhiteBasicTags(this.teamUUID,this.appUUID)),{kind:c.QualityKind.Connected,uuid:e,region:t}));return i.createCommitter(this.loggerHub,"QualityConnection",r)},e.prototype.createQualityDisconnectionCommitter=function(e,t){var r=Object.freeze(n(n({},a.createWhiteBasicTags(this.teamUUID,this.appUUID)),{kind:c.QualityKind.ConnectFailed,uuid:e,region:t}));return i.createCommitter(this.loggerHub,"QualityDisconnection",r)},e.prototype.createQualitySampleCommitter=function(e,t){var r=Object.freeze(n(n({},a.createWhiteBasicTags(this.teamUUID,this.appUUID)),{kind:c.QualityKind.Sample,uuid:e,region:t}));return i.createCommitter(this.loggerHub,"QualitySample",r)},e}();t.QualityLoggerFactory=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(4),t.configsInterrupter=function(e){return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.isRoom=function(e){return e instanceof n.RoomImplement},t.isPlayer=function(e){return e instanceof n.PlayerImplement}}])),function(e){if("function"!=typeof e)throw new Error("invalid window.__netlessJavaScriptLoader");var t="link.netless/white-model-render",r=t+"/2.6.3-2.13.11.a25ade05d3c6e95af1bd4f8820b72378";try{var n=e(t),i={};Object.defineProperty(i,"__esModule",{value:!0}),function(e,t){for(var r in t)e[r]=t[r]}(i,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==A(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=67)}([function(e,t){e.exports=n("akko")},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("index"),a=o.creator,s=o.caller;r(37),r(59),r(30),r(29),r(42),r(26),r(73),r(45),r(44),r(38),r(47),r(11),r(41),r(74),r(23),r(24),r(12),r(40),r(39),r(75),r(76),r(51),r(6),r(49),r(48),r(77),r(28),r(46),r(20),r(31),r(19);var c=r(37),u=r(57),l=r(78),p=r(79),h=r(54),d=r(53),f=r(50),y=r(80),A=r(81),m=r(82),g=r(83),v=r(52),b=r(30);t.PluginComponent=b.PluginComponent;var P=r(29);t.PluginManager=P.PluginManager,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(31));var S=function(e){function t(){return e.call(this,a({currentSceneIndex:0}))||this}return i(t,e),t.prototype.createConstructors=function(){return a({selector:u.Selector,clicker:l.Clicker,laserPointer:p.LaserPointer,pencil:h.PencilAppliance,rectangle:d.RectangleAppliance,ellipse:f.EllipseAppliance,shape:v.ShapeAppliance,eraser:y.Eraser,text:A.TextAppliance,straight:m.StraightAppliance,arrow:m.ArrowAppliance,hand:g.HandAppliance})},t.prototype.createMemberState=function(e){return a({currentApplianceName:"pencil",strokeColor:e,strokeWidth:4,textSize:16,pencilOptions:s(h.PencilAppliance,"createPencilOptions",[])})},t}(o.wrapSuperClass(c.AbstractApplianceManager));o.declareClass({classId:41,clazz:S,superClass:c.AbstractApplianceManager}),t.default=o.createLibrary(S,{identifier:"com.herewhite.whiteboard",version:"2.6.3",akko:"1.4.4",formatBase64:"HwEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAABwAAAHBsdWdpbnMCAAAAAgAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAADgAAAAkAAABfcHJvdG9LZXkAAAAACgAAAGF0dHJpYnV0ZXMAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAQAAABraW5kAAAAAAYAAABsb2NrZWQAAAAABwAAAG1hbmFnZXIJAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHdpZHRoAAAAAAkAAAAAAAAAAAAAAAIAAAAHAAAAY29udGV4dAoAAAAOAAAAcHJlc3NlZE1lbWJlcnMmAAAACgAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAAALAAAAAAAAAAAAAAADAAAACgAAAGNvbXBvbmVudHMNAAAABAAAAG5hbWUAAAAAAwAAAHBwdAwAAAAMAAAAAAAAAAAAAAAEAAAABgAAAGhlaWdodAAAAAAKAAAAcHJldmlld1VSTAAAAAADAAAAc3JjAAAAAAUAAAB3aWR0aAAAAAANAAAAAAAAAA4AAAAAAAAADgAAAAAAAAAAAAAABQAAAAYAAABoZWlnaHQAAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAABQAAAHdpZHRoAAAAAA8AAAAAAAAAAAAAAAIAAAAMAAAAX2N1cnJlbnRQYXRoFwAAAA4AAAByb290U2NlbmVHcm91cBAAAAAQAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QRAAAACQAAAGdyb3Vwc01hcBMAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdBUAAAAJAAAAc2NlbmVzTWFwFgAAABEAAAAAAAAAEgAAAAAAAAASAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QRAAAACQAAAGdyb3Vwc01hcBMAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdBUAAAAJAAAAc2NlbmVzTWFwFgAAABMAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QRAAAACQAAAGdyb3Vwc01hcBMAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdBUAAAAJAAAAc2NlbmVzTWFwFgAAABUAAAAAAAAACwAAAAAAAAAWAAAACwAAAAAAAAAAAAAAFwAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAMAAAAHAAAAX2VuYWJsZQAAAAAIAAAAY29tbWl0ZXIaAAAABwAAAGNvbnRleHQZAAAAGQAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAAAaAAAAAAAAAAAAAAACAAAABAAAAHJlZG8bAAAABAAAAHVuZG8lAAAAGwAAABwAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAgAAAAIAAAAY2xlYW5QUFQAAAAABgAAAGNyZWF0ZQAAAAAGAAAAZGVsZXRlAAAAAAQAAABwYXRoHQAAAAYAAABzZXRQUFQkAAAACgAAAHVwZGF0ZVJlY3QeAAAADgAAAHVwZGF0ZVRleHRhcmVhHwAAABQAAAB1cGRhdGVUZXh0YXJlYUZvcm1hdCIAAAAdAAAAAAAAAAAAAAAAAAAAHgAAAAAAAAAAAAAABAAAAAYAAABoZWlnaHQAAAAABQAAAHdpZHRoAAAAAAEAAAB4AAAAAAEAAAB5AAAAAB8AAAAAAAAAAAAAAAUAAAAGAAAAaGVpZ2h0AAAAAAwAAABvcmlnaW5hbFRleHQAAAAABQAAAHNjYWxlAAAAAAkAAAB0ZXh0TGluZXMgAAAABQAAAHdpZHRoAAAAACAAAAAAAAAAIQAAAAAAAAAhAAAAAAAAAAAAAAAEAAAAAgAAAGR4AAAAAAIAAABkeQAAAAAEAAAAdGV4dAAAAAAKAAAAdGV4dExlbmd0aAAAAAAiAAAAAAAAAAAAAAAFAAAABAAAAGJvbGQAAAAABQAAAGNvbG9yIwAAAAYAAABpdGFsaWMAAAAACwAAAGxpbmVUaHJvdWdoAAAAAAkAAAB1bmRlcmxpbmUAAAAAIwAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAGAAAAaGVpZ2h0AAAAAAoAAABwcmV2aWV3VVJMAAAAAAMAAABzcmMAAAAABQAAAHdpZHRoAAAAACUAAAAcAAAAAAAAAAAAAAAmAAAAAAAAAAAAAAAAAAAAJwAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAAAoAAAAAAAAAAAAAAAAAAAAKQAAAAAAAAAAAAAABwAAAAoAAABhdHRyaWJ1dGVzAAAAAAYAAABoZWlnaHQAAAAABgAAAGxvY2tlZAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAFAAAAd2lkdGgAAAAAKgAAAAAAAAAAAAAAAgAAAAcAAABjb250ZXh0CgAAAA4AAABwcmVzc2VkTWVtYmVycyYAAAArAAAAAAAAAAAAAAAOAAAACQAAAF9wcm90b0tleQAAAAAKAAAAYXR0cmlidXRlcwAAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABAAAAGtpbmQAAAAABgAAAGxvY2tlZAAAAAAHAAAAbWFuYWdlcgkAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAALAAAAAAAAAAAAAAABgAAAAwAAABfZ2xvYmFsU3RhdGU8AAAAGAAAAGFkbWluT2JzZXJ2ZXJNZW1iZXJTdGF0ZTkAAAAWAAAAaW52aXNpYmxlUGx1Z2luTWFuYWdlcgEAAAAOAAAAbWVtYmVyc01hbmFnZXIvAAAADQAAAHBsdWdpbk1hbmFnZXIuAAAABgAAAHNjZW5lcy0AAAAtAAAAAAAAAAAAAAACAAAADAAAAF9jdXJyZW50UGF0aBcAAAAOAAAAcm9vdFNjZW5lR3JvdXAQAAAALgAAAAAAAAAAAAAAAgAAAAcAAABjb250ZXh0CgAAAA4AAABwcmVzc2VkTWVtYmVycyYAAAAvAAAAAAAAAAAAAAAFAAAADQAAAGJyb2FkY2FzdGVySWQAAAAACgAAAGRpcmVjdG9ySWQAAAAAEAAAAGluaXRpYXRpdmVDb2xvcnMxAAAACgAAAG1lbWJlcnNNYXAyAAAABgAAAHNjZW5lczAAAAAwAAAAAAAAAAAAAAACAAAADAAAAF9jdXJyZW50UGF0aBcAAAAOAAAAcm9vdFNjZW5lR3JvdXAQAAAAMQAAAAAAAAAjAAAAAAAAADIAAAAAAAAAMwAAAAAAAAAzAAAAAAAAAAAAAAAMAAAACwAAAF9kZXZpY2VUeXBlAAAAAAwAAABfaW5mb3JtYXRpb240AAAACQAAAF9tZW1iZXJJZAAAAAAKAAAAYXBwbGlhbmNlczYAAAAHAAAAY3Vyc29yWAAAAAAHAAAAY3Vyc29yWQAAAAALAAAAZXhlY3V0b3JIdWI1AAAADwAAAGlzQ3Vyc29ySW5TY2VuZQAAAAAJAAAAaXNQcmVzc2VkAAAAAA4AAABpc1J0Y0Nvbm5lY3RlZAAAAAALAAAAbWVtYmVyU3RhdGU5AAAACQAAAHZpZXdTdGF0ZTsAAAA0AAAAAAAAAAAAAAAEAAAABgAAAGF2YXRhcgAAAAACAAAAaWQAAAAABwAAAGlzT3duZXIAAAAACAAAAG5pY2tOYW1lAAAAADUAAAAAAAAAAAAAAAMAAAAHAAAAX2VuYWJsZQAAAAAIAAAAY29tbWl0ZXIaAAAABwAAAGNvbnRleHQZAAAANgAAADcAAAAAAAAAAAAAADcAAAAAAAAAAAAAAAEAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnQ4AAAAOAAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAADkAAAAAAAAAAAAAAAYAAAAUAAAAY3VycmVudEFwcGxpYW5jZU5hbWUAAAAADQAAAHBlbmNpbE9wdGlvbnM6AAAACQAAAHNoYXBlVHlwZQAAAAALAAAAc3Ryb2tlQ29sb3IjAAAACwAAAHN0cm9rZVdpZHRoAAAAAAgAAAB0ZXh0U2l6ZQAAAAA6AAAAAAAAAAAAAAAEAAAADQAAAGRpc2FibGVCZXppZXIAAAAADwAAAGVuYWJsZURyYXdQb2ludAAAAAAKAAAAc3BhcnNlSHVtcAAAAAALAAAAc3BhcnNlV2lkdGgAAAAAOwAAAAAAAAAAAAAABgAAAAYAAABoZWlnaHQAAAAABAAAAG1vZGUAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHBpeGVsV2lkdGgAAAAABQAAAHdpZHRoAAAAADwAAAAAAAAAAAAAAAAAAAA9AAAAAAAAAAAAAAAAAAAAPgAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAD8AAAAcAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQQAAAAAAAAAAAAAAAAAAAEIAAAAAAAAAAAAAAAAAAABDAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAEUAAAAAAAAAAAAAAAAAAABGAAAAAAAAAAAAAAAHAAAABwAAAGNlbnRlclgAAAAABwAAAGNlbnRlclkAAAAABgAAAGhlaWdodAAAAAAGAAAAbG9ja2VkAAAAAAwAAAB1bmlmb3JtU2NhbGUAAAAABAAAAHV1aWQAAAAABQAAAHdpZHRoAAAAAEcAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAASQAAAAAAAAAAAAAAAQAAAAQAAABraW5kAAAAAEoAAAAAAAAAAAAAAAQAAAARAAAAaGl0VGVzdElkZW50aWZpZXNMAAAACgAAAHRhcmdldHNNYXBLAAAAAQAAAHgAAAAAAQAAAHkAAAAASwAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAAAAABNAAAAAAAAAAAAAAAAAAAATgAAAAAAAAAAAAAAAAAAAE8AAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAACAAAABAAAAG5hbWUAAAAAAwAAAHBwdFEAAABRAAAAAAAAAAAAAAAEAAAABgAAAGhlaWdodAAAAAAKAAAAcHJldmlld1VSTAAAAAADAAAAc3JjAAAAAAUAAAB3aWR0aAAAAABSAAAAAAAAAAAAAAAAAAAAUwAAAAAAAABUAAAAAAAAAFQAAAAAAAAAAAAAAAYAAAAFAAAAY3ViaWNWAAAACAAAAGRpc3RhbmNlAAAAAAwAAABoaWRkZW5Qb2ludHMAAAAABgAAAHBvaW50MVUAAAAGAAAAcG9pbnQyVQAAAAYAAABwb2ludDNVAAAAVQAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAFYAAAAAAAAAAAAAAAAAAABXAAAAAAAAAAAAAAAAAAAAWAAAAAAAAAAAAAAAAAAAAFkAAAAAAAAAAAAAAAAAAABaAAAAAAAAAAAAAAAAAAAAWwAAAFwAAAAAAAAAAAAAAFwAAAAAAAAAAAAAAAMAAAAGAAAAaGVpZ2h0AAAAAAUAAABzY2FsZQAAAAAFAAAAd2lkdGgAAAAAXQAAAAAAAAAAAAAABQAAAAYAAABoZWlnaHQAAAAADAAAAG9yaWdpbmFsVGV4dAAAAAAFAAAAc2NhbGUAAAAACQAAAHRleHRMaW5lcyAAAAAFAAAAd2lkdGgAAAAAXgAAAAAAAAAAAAAAAAAAAF8AAAAAAAAAAAAAAAQAAAAGAAAAaGVpZ2h0AAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAUAAAB3aWR0aAAAAABgAAAAAAAAAAAAAAACAAAABAAAAHJlZG8bAAAABAAAAHVuZG8lAAAAYQAAAAAAAAAAAAAAAwAAAAcAAABfZW5hYmxlAAAAAAgAAABjb21taXRlchoAAAAHAAAAY29udGV4dBkAAABiAAAAHAAAAAAAAAAAAAAAYwAAAAAAAAAAAAAAAQAAAAoAAABjb21wb25lbnRzDQAAAGQAAAAAAAAADgAAAAAAAABlAAAAAAAAAAAAAAAMAAAACwAAAF9kZXZpY2VUeXBlAAAAAAwAAABfaW5mb3JtYXRpb240AAAACQAAAF9tZW1iZXJJZAAAAAAKAAAAYXBwbGlhbmNlczYAAAAHAAAAY3Vyc29yWAAAAAAHAAAAY3Vyc29yWQAAAAALAAAAZXhlY3V0b3JIdWI1AAAADwAAAGlzQ3Vyc29ySW5TY2VuZQAAAAAJAAAAaXNQcmVzc2VkAAAAAA4AAABpc1J0Y0Nvbm5lY3RlZAAAAAALAAAAbWVtYmVyU3RhdGU5AAAACQAAAHZpZXdTdGF0ZTsAAABmAAAAAAAAAAAAAAAAAAAAZwAAAAAAAAAAAAAAAAAAAGgAAAAAAAAAAAAAAAYAAAAKAAAAYXBwbGlhbmNlc2oAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWJrAAAACwAAAGluZm9ybWF0aW9uaQAAAAgAAABtZW1iZXJJZAAAAAALAAAAbWVtYmVyU3RhdGU5AAAAaQAAAAAAAAAAAAAABAAAAAYAAABhdmF0YXIAAAAAAgAAAGlkAAAAAAcAAABpc093bmVyAAAAAAgAAABuaWNrTmFtZQAAAABqAAAANwAAAAAAAAAAAAAAawAAAAAAAAAAAAAAAwAAAAcAAABfZW5hYmxlAAAAAAgAAABjb21taXRlchoAAAAHAAAAY29udGV4dBkAAABsAAAAAAAAAAAAAAARAAAABQAAAGNvbG9yIwAAABQAAABjdXJyZW50QXBwbGlhbmNlTmFtZQAAAAAHAAAAY3Vyc29yWAAAAAAHAAAAY3Vyc29yWQAAAAAKAAAAZGV2aWNlVHlwZQAAAAAGAAAAaGVpZ2h0AAAAAAsAAABpbmZvcm1hdGlvbm0AAAAKAAAAaXNBY3Rpdml0eQAAAAAPAAAAaXNDdXJzb3JJblNjZW5lAAAAAAkAAABpc1ByZXNzZWQAAAAADgAAAGlzUnRjQ29ubmVjdGVkAAAAAAgAAABtZW1iZXJJZAAAAAAEAAAAbW9kZQAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAcGl4ZWxXaWR0aAAAAAAFAAAAd2lkdGgAAAAAbQAAAAAAAAAAAAAABAAAAAYAAABhdmF0YXIAAAAAAgAAAGlkAAAAAAcAAABpc093bmVyAAAAAAgAAABuaWNrTmFtZQAAAABuAAAAAAAAAAAAAAAEAAAABgAAAGF2YXRhcgAAAAACAAAAaWQAAAAABwAAAGlzT3duZXIAAAAACAAAAG5pY2tOYW1lAAAAAG8AAAAAAAAAAAAAAAUAAAANAAAAYnJvYWRjYXN0ZXJJZAAAAAAKAAAAZGlyZWN0b3JJZAAAAAAQAAAAaW5pdGlhdGl2ZUNvbG9yczEAAAAKAAAAbWVtYmVyc01hcDIAAAAGAAAAc2NlbmVzMAAAAHAAAAAAAAAAAAAAAAYAAAAKAAAAYXBwbGlhbmNlc2oAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWJrAAAACwAAAGluZm9ybWF0aW9uaQAAAAgAAABtZW1iZXJJZAAAAAALAAAAbWVtYmVyU3RhdGU5AAAAcQAAAAAAAAAAAAAAAAAAAHIAAAAAAAAAAAAAAAAAAABzAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAAHQAAAAAAAAAAAAAAAAAAAB1AAAAAAAAAAAAAAAAAAAAdgAAAAAAAAAAAAAABAAAAAYAAABoZWlnaHQAAAAACgAAAHByZXZpZXdVUkwAAAAAAwAAAHNyYwAAAAAFAAAAd2lkdGgAAAAAdwAAAAAAAAAAAAAAAgAAAAQAAABuYW1lAAAAAAMAAABwcHR4AAAAeAAAAAAAAAAAAAAABAAAAAYAAABoZWlnaHQAAAAACgAAAHByZXZpZXdVUkwAAAAAAwAAAHNyYwAAAAAFAAAAd2lkdGgAAAAAeQAAAAAAAAAAAAAAAQAAAAYAAABwb2ludHN6AAAAegAAAAAAAAA+AAAAAAAAAHsAAAAAAAAAAAAAAAAAAAB8AAAAAAAAAAAAAAABAAAABgAAAHBvaW50c30AAAB9AAAAAAAAAD4AAAAAAAAAfgAAAAAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAIAAAALAAAAYmVnaW5WZWN0b3I+AAAACQAAAGVuZFZlY3Rvcj4AAACAAAAAAAAAAAAAAAACAAAABgAAAGhlaWdodAAAAAAFAAAAd2lkdGgAAAAAgQAAAAAAAAAAAAAACgAAAAUAAABhcnJvd6oAAAAHAAAAZWxsaXBzZZ0AAAAGAAAAZXJhc2VyoQAAAAQAAABoYW5kqwAAAAwAAABsYXNlclBvaW50ZXKLAAAABgAAAHBlbmNpbI4AAAAJAAAAcmVjdGFuZ2xlmQAAAAgAAABzZWxlY3RvcoIAAAAIAAAAc3RyYWlnaHSlAAAABAAAAHRleHSjAAAAggAAAAAAAAAAAAAACwAAAA8AAABiZWdpblByZXNzUG9pbnSFAAAABwAAAGNvbnRleHSEAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAAHAAAAGRyYWdnZWRDb21wb25lbnRPcmlnaW5Qb2ludHOGAAAADgAAAGRyYWdnaW5nVGFyZ2V0AAAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludIMAAAAMAAAAaXNTaGlmdFByZXNzAAAAAA4AAABsYXRlc3RPcGVyYXRlWAAAAAAOAAAAbGF0ZXN0T3BlcmF0ZVkAAAAADAAAAHByZXNzZWRQb2ludIkAAAANAAAAc2VsZWN0ZWRHcm91cIcAAACDAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAhAAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAACFAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAhgAAAFUAAAAAAAAAAAAAAIcAAAAAAAAAAAAAAAgAAAAKAAAAYmVnaW5Qb2ludFUAAAAPAAAAYmVsb25nc1RvVXNlcklkAAAAAAcAAABjb250ZXh0iAAAAAYAAABoZWlnaHQAAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAABQAAAHdpZHRoAAAAAIgAAAAAAAAAAAAAAAQAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWIYAAAABQAAAHNjZW5lCwAAAAYAAABzY2VuZXMPAAAAiQAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAIoAAAAAAAAASgAAAAAAAACLAAAAAAAAAAAAAAAEAAAABwAAAGNvbnRleHSMAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50jQAAAAwAAABwcmVzc2VkUG9pbnSJAAAAjAAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAACNAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAjgAAAAAAAAAAAAAABgAAAAcAAABjb250ZXh0jwAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludI0AAAAYAAAAcGFpbnRpbmdCZXppZXJDdXJ2ZVNoYXBllQAAABIAAABwYWludGluZ0N1cnZlU2hhcGWQAAAADAAAAHByZXNzZWRQb2ludIkAAACPAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAAJAAAAAAAAAAAAAAABMAAAAHAAAAX2hlaWdodAAAAAAJAAAAX3Byb3RvS2V5AAAAAAYAAABfd2lkdGgAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAABEAAABpbml0aWFsaXplZEhlaWdodAAAAAAQAAAAaW5pdGlhbGl6ZWRXaWR0aAAAAAAKAAAAaXNQYWludGluZwAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAYAAABwb2ludHORAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAADAAAAHNwYXJzZVBvaW50c5IAAAAFAAAAc3RhdGU5AAAABQAAAHdpZHRoAAAAAJEAAAAAAAAAVQAAAAAAAACSAAAAAAAAAAAAAAAFAAAADAAAAF9wdXNoZWRDb3VudAAAAAANAAAAaHVtcFRocmVzaG9sZAAAAAAGAAAAcGxvdWdolAAAAAYAAABwb2ludHOTAAAADgAAAHdpZHRoVGhyZXNob2xkAAAAAJMAAAAAAAAAVQAAAAAAAACUAAAAAAAAAAAAAAAGAAAABQAAAGJlZ2luAAAAAAMAAABlbmQAAAAABAAAAGVuZFgAAAAABAAAAGVuZFkAAAAABQAAAHVuaXRYAAAAAAUAAAB1bml0WQAAAACVAAAAAAAAAAAAAAAWAAAABwAAAF9oZWlnaHQAAAAACAAAAF9vcmlnaW5YAAAAAAgAAABfb3JpZ2luWQAAAAAJAAAAX3Byb3RvS2V5AAAAAAYAAABfd2lkdGgAAAAABwAAAGNvbnRleHQnAAAADwAAAGN1cnJlbnRCb3VuZGFyeZcAAAAGAAAAY3VydmVzlgAAAAsAAABleHRyYVN0ZXVwcwAAAAANAAAAZml4ZWRCb3VuZGFyeZgAAAAJAAAAaGVhZFBvaW50VQAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAPAAAAaW5pdGlhbGl6ZWRTaXplgAAAAAYAAABsb2NrZWQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlOQAAAAUAAAB3aWR0aAAAAACWAAAAAAAAAFQAAAAAAAAAlwAAAAAAAAAAAAAABAAAAAYAAABib3R0b20AAAAABAAAAGxlZnQAAAAABQAAAHJpZ2h0AAAAAAMAAAB0b3AAAAAAmAAAAAAAAAAAAAAABAAAAAYAAABib3R0b20AAAAABAAAAGxlZnQAAAAABQAAAHJpZ2h0AAAAAAMAAAB0b3AAAAAAmQAAAAAAAAAAAAAACQAAAAoAAABiZWdpblBvaW50nAAAAAcAAABjb250ZXh0mgAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludI0AAAAMAAAAaXNTaGlmdFByZXNzAAAAAAsAAABsYXRlc3REcmFnWAAAAAALAAAAbGF0ZXN0RHJhZ1kAAAAAFgAAAHBhaW50aW5nUmVjdGFuZ2xlU2hhcGWbAAAADAAAAHByZXNzZWRQb2ludIkAAACaAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAAJsAAAAAAAAAAAAAAA0AAAAJAAAAX3Byb3RvS2V5AAAAAAcAAABjb250ZXh0JwAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAKAAAAaXNQYWludGluZwAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAABzdGF0ZTkAAAAFAAAAd2lkdGgAAAAAnAAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAJ0AAAAAAAAAAAAAAAkAAAAKAAAAYmVnaW5Qb2ludKAAAAAHAAAAY29udGV4dJ4AAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnSNAAAADAAAAGlzU2hpZnRQcmVzcwAAAAALAAAAbGF0ZXN0RHJhZ1gAAAAACwAAAGxhdGVzdERyYWdZAAAAABQAAABwYWludGluZ0VsbGlwc2VTaGFwZZ8AAAAMAAAAcHJlc3NlZFBvaW50iQAAAJ4AAAAAAAAAAAAAAAQAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWIYAAAABQAAAHNjZW5lCwAAAAYAAABzY2VuZXMPAAAAnwAAAAAAAAAAAAAADQAAAAkAAABfcHJvdG9LZXkAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAoAAABpc1BhaW50aW5nAAAAAAYAAABsb2NrZWQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlOQAAAAUAAAB3aWR0aAAAAACgAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAoQAAAAAAAAAAAAAABAAAAAcAAABjb250ZXh0ogAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludI0AAAAMAAAAcHJlc3NlZFBvaW50iQAAAKIAAAAAAAAAAAAAAAQAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWIYAAAABQAAAHNjZW5lCwAAAAYAAABzY2VuZXMPAAAAowAAAAAAAAAAAAAABAAAAAcAAABjb250ZXh0pAAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludI0AAAAMAAAAcHJlc3NlZFBvaW50iQAAAKQAAAAAAAAAAAAAAAQAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWIYAAAABQAAAHNjZW5lCwAAAAYAAABzY2VuZXMPAAAApQAAAAAAAAAAAAAABwAAAAoAAABiZWdpblBvaW50qQAAAAcAAABjb250ZXh0pgAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludI0AAAAEAAAAa2luZAAAAAASAAAAcGFpdGluZ1ZlY3RvclNoYXBlpwAAAAwAAABwcmVzc2VkUG9pbnSJAAAApgAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAACnAAAAAAAAAAAAAAAQAAAACgAAAF9kaXJlY3Rpb24AAAAACQAAAF9wcm90b0tleQAAAAALAAAAYW5jaG9yUG9pbnSoAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAoAAABpc1BhaW50aW5nAAAAAAQAAABraW5kAAAAAAYAAABsb2NrZWQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlOQAAAAUAAAB3aWR0aAAAAACoAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAqQAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAKoAAAAAAAAAAAAAAAcAAAAKAAAAYmVnaW5Qb2ludKkAAAAHAAAAY29udGV4dKYAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnSNAAAABAAAAGtpbmQAAAAAEgAAAHBhaXRpbmdWZWN0b3JTaGFwZacAAAAMAAAAcHJlc3NlZFBvaW50iQAAAKsAAAAAAAAAAAAAAAQAAAAHAAAAY29udGV4dKwAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnSNAAAADAAAAHByZXNzZWRQb2ludIkAAACsAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAAK0AAAAAAAAAAAAAAAIAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAMAAAAcHJlc3NlZFBvaW50iQAAAK4AAAAAAAAAAAAAAAUAAAANAAAAYmVnaW5IaXRQb2ludFUAAAAKAAAAZGVsdGFQb2ludFUAAAAVAAAAb3JpZW50YXRpb25Vbml0VmVjdG9ysAAAAA4AAABzdGFydFJlY3RhbmdsZa8AAAAIAAAAdGFyZ2V0SWQAAAAArwAAAAAAAAAAAAAABAAAAAYAAABoZWlnaHQAAAAABQAAAHdpZHRoAAAAAAEAAAB4AAAAAAEAAAB5AAAAALAAAAAAAAAAAAAAAAIAAAABAAAAeAAAAAABAAAAeQAAAACxAAAAAAAAAAAAAAAKAAAACQAAAF9pc0xvY2tlZAAAAAAPAAAAYmVsb25nc1RvVXNlcklkAAAAAAcAAABjb250ZXh0swAAAA8AAABkcmFnZ2luZ0NvbnRleHSyAAAAFQAAAGluY2x1ZGVDb21wb25lbnROb2Rlc7QAAAAaAAAAaXNPbmx5SGFzVW5pZm9ybVNjYWxlU2hhcGUAAAAADAAAAGlzU2hpZnRQcmVzcwAAAAAMAAAAb3BlcmF0ZVBvaW50AAAAAAkAAAByZWN0YW5nbGWvAAAAFgAAAHJlY3RhbmdsZVdpdGhIaXRNYXJnaW6vAAAAsgAAAAAAAAAAAAAABQAAAA0AAABiZWdpbkhpdFBvaW50VQAAAAoAAABkZWx0YVBvaW50VQAAABUAAABvcmllbnRhdGlvblVuaXRWZWN0b3KwAAAADgAAAHN0YXJ0UmVjdGFuZ2xlrwAAAAgAAAB0YXJnZXRJZAAAAACzAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAALQAAAAAAAAAtQAAAAAAAAC1AAAAAAAAAAAAAAAGAAAACQAAAGNvbXBvbmVudLYAAAACAAAAZHgAAAAAAgAAAGR5AAAAAAYAAABoZWlnaHQAAAAACgAAAG9yaWdpblJlY3SvAAAABQAAAHdpZHRoAAAAALYAAAAAAAAAAAAAAAsAAAAJAAAAX3Byb3RvS2V5AAAAAAcAAABjb250ZXh0JwAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAAB3aWR0aAAAAAC3AAAAAAAAAAAAAAADAAAABwAAAF9lbmFibGUAAAAACAAAAGNvbW1pdGVyGgAAAAcAAABjb250ZXh0GQAAALgAAAAAAAAAuQAAAAAAAAC5AAAAAAAAAAAAAAALAAAACQAAAF9wcm90b0tleQAAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABgAAAGxvY2tlZAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAAugAAAAAAAAAAAAAAAAAAALsAAAAAAAAAAAAAAAsAAAAJAAAAX3Byb3RvS2V5AAAAAAcAAABjb250ZXh0JwAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAAB3aWR0aAAAAAC8AAAAAAAAAL0AAAAAAAAAvQAAAAAAAAAAAAAACwAAAAkAAABfcHJvdG9LZXkAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAYAAABsb2NrZWQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHdpZHRoAAAAAL4AAAAAAAAAAAAAAAYAAAAJAAAAY29tcG9uZW50tgAAAAIAAABkeAAAAAACAAAAZHkAAAAABgAAAGhlaWdodAAAAAAKAAAAb3JpZ2luUmVjdK8AAAAFAAAAd2lkdGgAAAAAvwAAAAAAAAAAAAAACAAAAAoAAABiZWdpblBvaW50oAAAAAcAAABjb250ZXh0ngAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAAAwAAABpc1NoaWZ0UHJlc3MAAAAACwAAAGxhdGVzdERyYWdYAAAAAAsAAABsYXRlc3REcmFnWQAAAAAUAAAAcGFpbnRpbmdFbGxpcHNlU2hhcGWfAAAADAAAAHByZXNzZWRQb2ludIkAAADAAAAAAAAAAAAAAAAKAAAACQAAAF9wcm90b0tleQAAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAACgAAAGlzUGFpbnRpbmcAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlOQAAAAUAAAB3aWR0aAAAAADBAAAAAAAAAAAAAAADAAAABwAAAGNvbnRleHSiAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAADAAAAHByZXNzZWRQb2ludIkAAADCAAAAAAAAAAAAAAADAAAABwAAAGNvbnRleHSsAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAADAAAAHByZXNzZWRQb2ludIkAAADDAAAAAAAAAAAAAAANAAAACQAAAF9wcm90b0tleQAAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAACQAAAGltYWdlU2l6ZYAAAAAIAAAAaW1hZ2VTcmMAAAAABgAAAGxvY2tlZAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAMAAAAdW5pZm9ybVNjYWxlAAAAAAQAAAB1dWlkAAAAAAUAAAB3aWR0aAAAAADEAAAAAAAAAAAAAAADAAAABwAAAGNvbnRleHSMAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAADAAAAHByZXNzZWRQb2ludIkAAADFAAAAAAAAAAAAAAAOAAAABwAAAF9oZWlnaHQAAAAACQAAAF9wcm90b0tleQAAAAAGAAAAX3dpZHRoAAAAAAcAAABjb250ZXh0JwAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAAEQAAAGluaXRpYWxpemVkSGVpZ2h0AAAAABAAAABpbml0aWFsaXplZFdpZHRoAAAAAAoAAABpc1BhaW50aW5nAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAYAAABwb2ludHORAAAACgAAAHNlbGVjdGVkQnkAAAAADAAAAHNwYXJzZVBvaW50c5IAAAAFAAAAc3RhdGU5AAAAxgAAAAAAAAAAAAAABQAAAAcAAABjb250ZXh0jwAAABAAAABkcmFnRXZlbnRzQnVmZmVyigAAABgAAABwYWludGluZ0JlemllckN1cnZlU2hhcGWVAAAAEgAAAHBhaW50aW5nQ3VydmVTaGFwZZAAAAAMAAAAcHJlc3NlZFBvaW50iQAAAMcAAAAAAAAAAAAAABMAAAAHAAAAX2hlaWdodAAAAAAJAAAAX3Byb3RvS2V5AAAAAAYAAABfd2lkdGgAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAABEAAABpbml0aWFsaXplZEhlaWdodAAAAAAQAAAAaW5pdGlhbGl6ZWRXaWR0aAAAAAAKAAAAaXNQYWludGluZwAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAYAAABwb2ludHORAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAADAAAAHNwYXJzZVBvaW50c5IAAAAFAAAAc3RhdGU5AAAABQAAAHdpZHRoAAAAAMgAAAAAAAAAAAAAABYAAAAHAAAAX2hlaWdodAAAAAAIAAAAX29yaWdpblgAAAAACAAAAF9vcmlnaW5ZAAAAAAkAAABfcHJvdG9LZXkAAAAABgAAAF93aWR0aAAAAAAHAAAAY29udGV4dCcAAAAPAAAAY3VycmVudEJvdW5kYXJ5lwAAAAYAAABjdXJ2ZXOWAAAACwAAAGV4dHJhU3RldXBzAAAAAA0AAABmaXhlZEJvdW5kYXJ5mAAAAAkAAABoZWFkUG9pbnRVAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAA8AAABpbml0aWFsaXplZFNpemWAAAAABgAAAGxvY2tlZAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAc3RhdGU5AAAABQAAAHdpZHRoAAAAAMkAAAAAAAAAAAAAABMAAAAHAAAAX2hlaWdodAAAAAAJAAAAX3Byb3RvS2V5AAAAAAYAAABfd2lkdGgAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAABEAAABpbml0aWFsaXplZEhlaWdodAAAAAAQAAAAaW5pdGlhbGl6ZWRXaWR0aAAAAAAKAAAAaXNQYWludGluZwAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAYAAABwb2ludHORAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAADAAAAHNwYXJzZVBvaW50c5IAAAAFAAAAc3RhdGU5AAAABQAAAHdpZHRoAAAAAMoAAAAAAAAAVAAAAAAAAADLAAAAAAAAAAAAAAAIAAAACgAAAGJlZ2luUG9pbnScAAAABwAAAGNvbnRleHSaAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAADAAAAGlzU2hpZnRQcmVzcwAAAAALAAAAbGF0ZXN0RHJhZ1gAAAAACwAAAGxhdGVzdERyYWdZAAAAABYAAABwYWludGluZ1JlY3RhbmdsZVNoYXBlmwAAAAwAAABwcmVzc2VkUG9pbnSJAAAAzAAAAAAAAAAAAAAACgAAAAkAAABfcHJvdG9LZXkAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAAAoAAABpc1BhaW50aW5nAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAABzdGF0ZTkAAAAFAAAAd2lkdGgAAAAAzQAAAAAAAAAAAAAABwAAAAoAAABiZWdpblBvaW50VQAAAA8AAABiZWxvbmdzVG9Vc2VySWQAAAAABwAAAGNvbnRleHSIAAAABgAAAGhlaWdodAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAFAAAAd2lkdGgAAAAAzgAAAAAAAAAAAAAACwAAAA8AAABiZWdpblByZXNzUG9pbnSFAAAABwAAAGNvbnRleHSEAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAAHAAAAGRyYWdnZWRDb21wb25lbnRPcmlnaW5Qb2ludHOGAAAADgAAAGRyYWdnaW5nVGFyZ2V0AAAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludIMAAAAMAAAAaXNTaGlmdFByZXNzAAAAAA4AAABsYXRlc3RPcGVyYXRlWAAAAAAOAAAAbGF0ZXN0T3BlcmF0ZVkAAAAADAAAAHByZXNzZWRQb2ludIkAAAANAAAAc2VsZWN0ZWRHcm91cIcAAADPAAAAAAAAANAAAAAAAAAA0AAAAAAAAAAAAAAACwAAAAkAAABfcHJvdG9LZXkAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAYAAABsb2NrZWQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHdpZHRoAAAAANEAAAAAAAAAAAAAAAAAAADSAAAAAAAAAAAAAAAAAAAA0wAAAAAAAAAAAAAACwAAAAkAAABfcHJvdG9LZXkAAAAABwAAAGNvbnRleHQnAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzKAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAYAAABsb2NrZWQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHdpZHRoAAAAANQAAAAAAAAAAAAAAAwAAAAJAAAAX3Byb3RvS2V5AAAAAAcAAABjb250ZXh0JwAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAAKAAAAaXNQYWludGluZwAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAJAAAAc2hhcGVUeXBlAAAAAAsAAABzdHJva2VDb2xvciMAAAALAAAAc3Ryb2tlV2lkdGgAAAAABQAAAHdpZHRoAAAAANUAAAAAAAAAAAAAAAgAAAAKAAAAYmVnaW5Qb2ludNgAAAAHAAAAY29udGV4dNYAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAMAAAAaXNTaGlmdFByZXNzAAAAAAsAAABsYXRlc3REcmFnWAAAAAALAAAAbGF0ZXN0RHJhZ1kAAAAADQAAAHBhaW50aW5nU2hhcGXXAAAADAAAAHByZXNzZWRQb2ludIkAAADWAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAANcAAAAAAAAAAAAAAA8AAAAJAAAAX3Byb3RvS2V5AAAAAAcAAABjb250ZXh0JwAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAKAAAAaXNQYWludGluZwAAAAAGAAAAbG9ja2VkAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAkAAABzaGFwZVR5cGUAAAAACwAAAHN0cm9rZUNvbG9yIwAAAAsAAABzdHJva2VXaWR0aAAAAAAFAAAAd2lkdGgAAAAA2AAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAANkAAAAAAAAAAAAAAAMAAAAHAAAAY29udGV4dKQAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAMAAAAcHJlc3NlZFBvaW50iQAAANoAAAAAAAAAAAAAAAIAAAAJAAAAcmVjdGFuZ2xlrwAAAAsAAAB0ZXh0YXJlYUJveF0AAADbAAAAAAAAAAAAAAAOAAAACQAAAF9lZGl0ZWRCeQAAAAAHAAAAX2Zvcm1hdN0AAAATAAAAX2lzV2FpdGluZ0ZpcnN0VGV4dAAAAAAJAAAAX3Byb3RvS2V5AAAAAAcAAABjb250ZXh0JwAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAARAAAAc3RhdGVCZWZvcmVFZGl0ZWTcAAAACAAAAHRleHRTaXplAAAAAAsAAAB0ZXh0YXJlYUJveF0AAAAFAAAAd2lkdGgAAAAA3AAAAAAAAAAAAAAAAgAAAAkAAAByZWN0YW5nbGWvAAAACwAAAHRleHRhcmVhQm94XQAAAN0AAAAAAAAAAAAAAAUAAAAEAAAAYm9sZAAAAAAFAAAAY29sb3IjAAAABgAAAGl0YWxpYwAAAAALAAAAbGluZVRocm91Z2gAAAAACQAAAHVuZGVybGluZQAAAADeAAAAAAAAAAAAAAAHAAAACgAAAGJlZ2luUG9pbnSpAAAABwAAAGNvbnRleHSmAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50jQAAAAQAAABraW5kAAAAABIAAABwYWl0aW5nVmVjdG9yU2hhcGWnAAAADAAAAHByZXNzZWRQb2ludIkAAADfAAAAAAAAAAAAAAAHAAAACgAAAGJlZ2luUG9pbnSpAAAABwAAAGNvbnRleHSmAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50jQAAAAQAAABraW5kAAAAABIAAABwYWl0aW5nVmVjdG9yU2hhcGWnAAAADAAAAHByZXNzZWRQb2ludIkAAADgAAAAAAAAAAAAAAAGAAAACgAAAGJlZ2luUG9pbnSpAAAABwAAAGNvbnRleHSmAAAAEAAAAGRyYWdFdmVudHNCdWZmZXKKAAAABAAAAGtpbmQAAAAAEgAAAHBhaXRpbmdWZWN0b3JTaGFwZacAAAAMAAAAcHJlc3NlZFBvaW50iQAAAOEAAAAAAAAAAAAAAA0AAAAKAAAAX2RpcmVjdGlvbgAAAAAJAAAAX3Byb3RvS2V5AAAAAAsAAABhbmNob3JQb2ludKgAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAACgAAAGlzUGFpbnRpbmcAAAAABAAAAGtpbmQAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlOQAAAAUAAAB3aWR0aAAAAADiAAAAAAAAAAAAAAALAAAACQAAAF9wcm90b0tleQAAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABgAAAGxvY2tlZAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAA4wAAAAAAAAAAAAAAAAAAAOQAAAAAAAAAAAAAAAQAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWIYAAAABQAAAHNjZW5lCwAAAAYAAABzY2VuZXMPAAAA5QAAAAAAAAAAAAAAAwAAAAYAAABjdXJ2ZXPmAAAACwAAAGV4dHJhU3RldXBzAAAAAAkAAABoZWFkUG9pbnRVAAAA5gAAAAAAAABUAAAAAAAAAOcAAAAAAAAAAAAAAA8AAAAHAAAAX2hlaWdodAAAAAAIAAAAX29yaWdpblgAAAAACAAAAF9vcmlnaW5ZAAAAAAkAAABfcHJvdG9LZXkAAAAABgAAAF93aWR0aAAAAAAHAAAAY29udGV4dCcAAAAPAAAAY3VycmVudEJvdW5kYXJ5lwAAAAYAAABjdXJ2ZXOWAAAACwAAAGV4dHJhU3RldXBzAAAAAA0AAABmaXhlZEJvdW5kYXJ5mAAAAAkAAABoZWFkUG9pbnRVAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkcygAAAAPAAAAaW5pdGlhbGl6ZWRTaXplgAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAABzdGF0ZTkAAADoAAAAAAAAAAAAAAAEAAAABgAAAGJvdHRvbQAAAAAEAAAAbGVmdAAAAAAFAAAAcmlnaHQAAAAAAwAAAHRvcAAAAADpAAAAAAAAAFQAAAAAAAAA6gAAAAAAAAAAAAAABgAAAAUAAABiZWdpbgAAAAADAAAAZW5kAAAAAAQAAABlbmRYAAAAAAQAAABlbmRZAAAAAAUAAAB1bml0WAAAAAAFAAAAdW5pdFkAAAAA6wAAAAAAAAAAAAAABQAAAAwAAABfcHVzaGVkQ291bnQAAAAADQAAAGh1bXBUaHJlc2hvbGQAAAAABgAAAHBsb3VnaJQAAAAGAAAAcG9pbnRzkwAAAA4AAAB3aWR0aFRocmVzaG9sZAAAAADsAAAAAAAAAFUAAAAAAAAA7QAAAAAAAAAAAAAAAQAAAAoAAABjb21wb25lbnRz7gAAAO4AAAAAAAAA7wAAAAAAAADvAAAAAAAAAAAAAAALAAAACQAAAF9wcm90b0tleQAAAAAHAAAAY29udGV4dCcAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHMoAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABgAAAGxvY2tlZAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAA8AAAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAADxAAAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAAPIAAAAAAAAAAAAAAAMAAAAHAAAAY29udGV4dPMAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRz9AAAAAoAAABzZWxlY3RlZEJ5AAAAAPMAAAAAAAAAAAAAAAQAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAZXhlY3V0b3JIdWIYAAAABQAAAHNjZW5lCwAAAAYAAABzY2VuZXMPAAAA9AAAAAAAAAAAAAAAAAAAAPUAAAAAAAAAAAAAAAMAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlcooAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnSNAAAADAAAAHByZXNzZWRQb2ludIkAAAD2AAAAAAAAAAAAAAAAAAAA9wAAAAAAAAAAAAAAAwAAAAUAAABjb2xvciMAAAAJAAAAaGlnaGxpZ2h0AAAAAAoAAABzZWxlY3RlZEJ5AAAAAPgAAAAAAAAAAAAAAAQAAAAHAAAAYmVsb25ncwAAAAAFAAAAY29sb3IjAAAACgAAAGlzRHJhZ2dpbmcAAAAADgAAAGlzVW5pZm9ybVNjYWxlAAAAAPkAAAAAAAAAAAAAAAIAAAAHAAAAYmVsb25ncwAAAAAFAAAAY29sb3IjAAAA+gAAAAAAAAAAAAAABgAAAAUAAABjb2xvciMAAAAGAAAAbWFyZ2luAAAAAAwAAABvcmlnaW5hbFRleHQAAAAABQAAAHNjYWxlAAAAAAkAAAB0ZXh0Q29sb3IjAAAACAAAAHRleHRTaXplAAAAAPsAAAAAAAAAAAAAAAUAAAAFAAAAY29sb3IjAAAACAAAAGVkaXRvcklkAAAAAAsAAABpbmZvcm1hdGlvbvwAAAAGAAAAbWFyZ2luAAAAAAgAAAB0ZXh0U2l6ZQAAAAD8AAAAAAAAAAAAAAAEAAAABgAAAGF2YXRhcgAAAAACAAAAaWQAAAAABwAAAGlzT3duZXIAAAAACAAAAG5pY2tOYW1lAAAAAP0AAAAAAAAAAAAAAAUAAAAIAAAAZWRpdGFibGX3AAAABgAAAGVkaXRvcvgAAAAGAAAAbXlUZXh0+gAAAAkAAABvdGhlclRleHT7AAAADQAAAHNlbGVjdGVkR3JvdXD5AAAA/gAAAAAAAAAAAAAABgAAAAwAAABfZ2xvYmFsU3RhdGU8AAAAGAAAAGFkbWluT2JzZXJ2ZXJNZW1iZXJTdGF0ZTkAAAAWAAAAaW52aXNpYmxlUGx1Z2luTWFuYWdlcgEAAAAOAAAAbWVtYmVyc01hbmFnZXIvAAAADQAAAHBsdWdpbk1hbmFnZXIuAAAABgAAAHNjZW5lcy0AAAD/AAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QRAAAACQAAAGdyb3Vwc01hcBMAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdBUAAAAJAAAAc2NlbmVzTWFwFgAAAAABAAAAAAAAAAAAAAIAAAAMAAAAX2N1cnJlbnRQYXRoFwAAAA4AAAByb290U2NlbmVHcm91cBAAAAABAQAAAAAAAAAAAAAAAAAAAgEAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAAAAEAQAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QRAAAACQAAAGdyb3Vwc01hcBMAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdBUAAAAJAAAAc2NlbmVzTWFwFgAAAAUBAAAAAAAAAAAAAAAAAAAGAQAAAAAAAAcBAAAAAAAABwEAAAAAAAAAAAAAAAAAAAgBAAAAAAAAAAAAAAUAAAAKAAAAZ3JvdXBzTGlzdBEAAAAJAAAAZ3JvdXBzTWFwEwAAAAQAAABuYW1lAAAAAAoAAABzY2VuZXNMaXN0FQAAAAkAAABzY2VuZXNNYXAWAAAACQEAAAAAAAAAAAAAAAAAAAoBAAAAAAAAAAAAAAUAAAAKAAAAZ3JvdXBzTGlzdBEAAAAJAAAAZ3JvdXBzTWFwEwAAAAQAAABuYW1lAAAAAAoAAABzY2VuZXNMaXN0FQAAAAkAAABzY2VuZXNNYXAWAAAACwEAAAAAAAAAAAAAAAAAAAwBAAAAAAAAAAAAAAAAAAANAQAAAAAAAAAAAAAAAAAADgEAAAAAAAAAAAAAAAAAAA8BAAAAAAAAAAAAAAUAAAAKAAAAZ3JvdXBzTGlzdBEAAAAJAAAAZ3JvdXBzTWFwEwAAAAQAAABuYW1lAAAAAAoAAABzY2VuZXNMaXN0FQAAAAkAAABzY2VuZXNNYXAWAAAAEAEAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAASAQAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QRAAAACQAAAGdyb3Vwc01hcBMAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdBUAAAAJAAAAc2NlbmVzTWFwFgAAABMBAAAAAAAAAAAAAAAAAAAUAQAAAAAAAAAAAAAAAAAAFQEAAAAAAAAAAAAAAAAAABYBAAAAAAAAAAAAAAAAAAAXAQAAAAAAAAAAAAAAAAAAGAEAAAAAAAAAAAAAAAAAABkBAAAAAAAAAAAAAAAAAAAaAQAAAAAAAAAAAAAEAAAABAAAAF9zcmMAAAAABgAAAGhlaWdodAAAAAAKAAAAcHJldmlld1VSTAAAAAAFAAAAd2lkdGgAAAAAGwEAAAAAAAAAAAAABAAAAAoAAABkZXZpY2VUeXBlAAAAAAsAAABleGVjdXRvckh1YhgAAAAFAAAAc2NlbmULAAAABgAAAHNjZW5lcw8AAAAcAQAAAAAAAAAAAAAEAAAACgAAAGRldmljZVR5cGUAAAAACwAAAGV4ZWN1dG9ySHViGAAAAAUAAABzY2VuZQsAAAAGAAAAc2NlbmVzDwAAAB0BAAAAAAAAAAAAAAAAAAAeAQAAAAAAAAAAAAAAAAAA",formatHash:"7f039bd19ffb5c8e8be5f5dfd80f7a8a",classes:{0:{objectFormatId:1,members:[{name:"plugins",mode:"value",type:"property",isPublic:!1},{name:"getKinds",type:"method",isPublic:!0,parameters:[]},{name:"hasKind",type:"method",isPublic:!0,parameters:[0]},{name:"put",type:"method",isPublic:!0,parameters:[0,5]},{name:"remove",type:"method",isPublic:!0,parameters:[0]},{name:"getAttributes",type:"method",isPublic:!0,parameters:[0,4]},{name:"updateAttributes",type:"method",isPublic:!0,parameters:[0,7]},{name:"updateAttributesWithKeys",type:"method",isPublic:!0,parameters:[0,6,0]}]},1:{objectFormatId:8,members:[{name:"hitTestingBoxMargin",mode:"value",type:"property",isPublic:!0},{name:"kind",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"selectable",mode:"value",type:"property",isPublic:!0},{name:"locked",mode:"value",type:"property",isPublic:!0},{name:"attributes",mode:"value",type:"property",isPublic:!0},{name:"manager",mode:"value",type:"property",isPublic:!1},{name:"isPressed",mode:"readonly",type:"property",isPublic:!0}]},2:{objectFormatId:42,members:[{name:"context",mode:"value",type:"property",isPublic:!0},{name:"pressedMembers",mode:"value",type:"property",isPublic:!1},{name:"isPressed",mode:"accessible",type:"property",isPublic:!0},{name:"isPressed",mode:"accessible",type:"property",isPublic:!0},{name:"insert",type:"method",isPublic:!0,parameters:[0,41]},{name:"get",type:"method",isPublic:!0,parameters:[0]},{name:"list",type:"method",isPublic:!0,parameters:[]},{name:"remove",type:"method",isPublic:!0,parameters:[0]},{name:"update",type:"method",isPublic:!0,parameters:[0,41]},{name:"updatePlugin",type:"method",isPublic:!1,parameters:[43,41]}]},3:{objectFormatId:44,members:[{name:"scenes",mode:"value",type:"property",isPublic:!0},{name:"pluginManager",mode:"value",type:"property",isPublic:!1},{name:"invisiblePluginManager",mode:"value",type:"property",isPublic:!1},{name:"membersManager",mode:"value",type:"property",isPublic:!1},{name:"adminObserverMemberState",mode:"value",type:"property",isPublic:!1},{name:"_globalState",mode:"value",type:"property",isPublic:!1},{name:"deviceType",mode:"readonly",type:"property",isPublic:!0},{name:"scene",mode:"readonly",type:"property",isPublic:!0},{name:"executorHub",mode:"readonly",type:"property",isPublic:!0},{name:"enableExecute",mode:"readonly",type:"property",isPublic:!0},{name:"createConstructors",type:"method",isPublic:!1,parameters:[]},{name:"createMemberState",type:"method",isPublic:!1,parameters:[35]},{name:"createAppliances",type:"method",isPublic:!1,parameters:[]},{name:"onMemberEnterRoom",type:"method",isPublic:!1,parameters:[0,0]},{name:"onMemberLeaveRoom",type:"method",isPublic:!1,parameters:[]},{name:"onOthersEvent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"changeScene",type:"method",isPublic:!0,parameters:[61]},{name:"putScenes",type:"method",isPublic:!0,parameters:[78,79,0]},{name:"removeScenes",type:"method",isPublic:!0,parameters:[82]},{name:"moveScene",type:"method",isPublic:!0,parameters:[71,72]},{name:"insertImage",type:"method",isPublic:!0,parameters:[70]},{name:"lockImage",type:"method",isPublic:!0,parameters:[0,0]},{name:"lockImages",type:"method",isPublic:!0,parameters:[0]},{name:"completeImageUpload",type:"method",isPublic:!0,parameters:[0,0]},{name:"setImageLock",type:"method",isPublic:!0,parameters:[0,0]},{name:"getImageWith",type:"method",isPublic:!1,parameters:[0]},{name:"setGlobalState",type:"method",isPublic:!0,parameters:[0]},{name:"updateGlobalState",type:"method",isPublic:!0,parameters:[89,0]},{name:"setMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"setMemberStateWithCommitter",type:"method",isPublic:!0,parameters:[0]},{name:"updateMemberState",type:"method",isPublic:!0,parameters:[90,0]},{name:"setViewState",type:"method",isPublic:!0,parameters:[0]},{name:"updateTextareaFormat",type:"method",isPublic:!0,parameters:[0,91]},{name:"updateTextareaScale",type:"method",isPublic:!0,parameters:[0]},{name:"updateTextareaFontSize",type:"method",isPublic:!0,parameters:[0]},{name:"updateTextarea",type:"method",isPublic:!0,parameters:[93,0]},{name:"hasEditingTextarea",type:"method",isPublic:!0,parameters:[]},{name:"releaseAllTextarea",type:"method",isPublic:!0,parameters:[]},{name:"getScene",type:"method",isPublic:!0,parameters:[69]},{name:"getCurrentScenePath",type:"method",isPublic:!0,parameters:[]},{name:"getAllScenePaths",type:"method",isPublic:!0,parameters:[]},{name:"getSceneNames",type:"method",isPublic:!0,parameters:[68]},{name:"getSceneGroupNames",type:"method",isPublic:!0,parameters:[67]},{name:"getInformationWithMemberId",type:"method",isPublic:!0,parameters:[0]},{name:"getAppliance",type:"method",isPublic:!0,parameters:[0,0]},{name:"getMemberState",type:"method",isPublic:!0,parameters:[0,66]},{name:"getViewState",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberIdWithUserId",type:"method",isPublic:!0,parameters:[0]},{name:"getBroadcasterId",type:"method",isPublic:!0,parameters:[]},{name:"getGlobalState",type:"method",isPublic:!0,parameters:[65]},{name:"getMemberDisplayers",type:"method",isPublic:!0,parameters:[]},{name:"setEnableExecute",type:"method",isPublic:!0,parameters:[0]},{name:"execute",type:"method",isPublic:!0,parameters:[63]},{name:"onMouseDown",type:"method",isPublic:!0,parameters:[74]},{name:"onMouseMove",type:"method",isPublic:!0,parameters:[74]},{name:"onMouseUp",type:"method",isPublic:!0,parameters:[74]},{name:"onMouseLeave",type:"method",isPublic:!0,parameters:[74]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[73]},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[73]},{name:"delete",type:"method",isPublic:!0,parameters:[]},{name:"duplicate",type:"method",isPublic:!0,parameters:[0,0]},{name:"copy",type:"method",isPublic:!0,parameters:[]},{name:"paste",type:"method",isPublic:!0,parameters:[0,0,0]},{name:"createBezierCurve",type:"method",isPublic:!0,parameters:[62]},{name:"updateBezierCurveTail",type:"method",isPublic:!0,parameters:[84,0]},{name:"splitBezierCurveTail",type:"method",isPublic:!0,parameters:[83,0]},{name:"addBezierCurveExtraSteups",type:"method",isPublic:!0,parameters:[]},{name:"completePencilPainting",type:"method",isPublic:!0,parameters:[0,0]},{name:"cancelPencilPainting",type:"method",isPublic:!0,parameters:[0,0]},{name:"cleanCurrentScene",type:"method",isPublic:!0,parameters:[0]},{name:"getPlugin",type:"method",isPublic:!0,parameters:[0]},{name:"listPlugins",type:"method",isPublic:!0,parameters:[]},{name:"getInvisiblePluginKinds",type:"method",isPublic:!0,parameters:[]},{name:"hasInvisibilePluginKind",type:"method",isPublic:!0,parameters:[0]},{name:"insertPlugin",type:"method",isPublic:!0,parameters:[0,41]},{name:"removePlugin",type:"method",isPublic:!0,parameters:[0]},{name:"updatePlugin",type:"method",isPublic:!0,parameters:[0,41]},{name:"putInvisiblePlugin",type:"method",isPublic:!0,parameters:[0,77]},{name:"removeInvisiblePlugin",type:"method",isPublic:!0,parameters:[0]},{name:"getAttributesWithInvisiblePlugin",type:"method",isPublic:!0,parameters:[0,64]},{name:"updateAttributesInvisiblePlugin",type:"method",isPublic:!0,parameters:[0,88]},{name:"updateAttributesInvisiblePluginWithKeys",type:"method",isPublic:!0,parameters:[0,87,0]},{name:"moveSelectedComponentsToTop",type:"method",isPublic:!0,parameters:[]},{name:"moveSelectedComponentsToBottom",type:"method",isPublic:!0,parameters:[]},{name:"getPluginManager",type:"method",isPublic:!1,parameters:[]},{name:"getInvisiblePluginManager",type:"method",isPublic:!1,parameters:[]},{name:"takeCommit",type:"method",isPublic:!1,parameters:[]}]},4:{objectFormatId:97,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"commiter",mode:"value",type:"property",isPublic:!1},{name:"_enable",mode:"value",type:"property",isPublic:!1},{name:"enable",mode:"accessible",type:"property",isPublic:!0},{name:"enable",mode:"accessible",type:"property",isPublic:!0},{name:"commit",type:"method",isPublic:!0,parameters:[0,28,28]},{name:"takeCommit",type:"method",isPublic:!0,parameters:[]},{name:"execute",type:"method",isPublic:!0,parameters:[98]},{name:"executeOne",type:"method",isPublic:!1,parameters:[0,28]},{name:"findComponent",type:"method",isPublic:!1,parameters:[0,11]}]},5:{objectFormatId:14,members:[{name:"hitTestingBoxMargin",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"key",mode:"readonly",type:"property",isPublic:!0},{name:"identifier",mode:"readonly",type:"property",isPublic:!0},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"rectHitTest",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"rectangleTester",type:"method",isPublic:!1,parameters:[0]}]},6:{objectFormatId:99,members:[{name:"components",mode:"value",type:"property",isPublic:!0},{name:"componentsLength",mode:"readonly",type:"property",isPublic:!0},{name:"componentAt",type:"method",isPublic:!0,parameters:[0]},{name:"addComponent",type:"method",isPublic:!0,parameters:[14]},{name:"addComponentAt",type:"method",isPublic:!0,parameters:[14,0]},{name:"indexOfComponent",type:"method",isPublic:!0,parameters:[14]},{name:"removeComponent",type:"method",isPublic:!0,parameters:[14]},{name:"forEachComponents",type:"method",isPublic:!0,parameters:[0]},{name:"componentsWithFilter",type:"method",isPublic:!0,parameters:[0]},{name:"findComponentFromBottom",type:"method",isPublic:!0,parameters:[0]},{name:"findComponentFromTop",type:"method",isPublic:!0,parameters:[0]},{name:"removeComponentAt",type:"method",isPublic:!0,parameters:[0]},{name:"moveComponentsToIndex",type:"method",isPublic:!0,parameters:[100,0]}]},7:{objectFormatId:101,members:[{name:"isRtcConnected",mode:"value",type:"property",isPublic:!0},{name:"_memberId",mode:"value",type:"property",isPublic:!1},{name:"_deviceType",mode:"value",type:"property",isPublic:!1},{name:"_information",mode:"value",type:"property",isPublic:!1},{name:"executorHub",mode:"value",type:"property",isPublic:!1},{name:"appliances",mode:"value",type:"property",isPublic:!1},{name:"cursorX",mode:"value",type:"property",isPublic:!1},{name:"cursorY",mode:"value",type:"property",isPublic:!1},{name:"memberState",mode:"value",type:"property",isPublic:!1},{name:"viewState",mode:"value",type:"property",isPublic:!1},{name:"isPressed",mode:"value",type:"property",isPublic:!1},{name:"isCursorInScene",mode:"value",type:"property",isPublic:!1},{name:"information",mode:"readonly",type:"property",isPublic:!0},{name:"memberId",mode:"readonly",type:"property",isPublic:!0},{name:"deviceType",mode:"readonly",type:"property",isPublic:!0},{name:"displayer",mode:"readonly",type:"property",isPublic:!0},{name:"currentAppliance",mode:"readonly",type:"property",isPublic:!0},{name:"isCursorOutOfBounds",type:"method",isPublic:!1,parameters:[]},{name:"getAppliance",type:"method",isPublic:!0,parameters:[0]},{name:"setViewMode",type:"method",isPublic:!0,parameters:[0]},{name:"notifyAllThatSceneChanged",type:"method",isPublic:!0,parameters:[102]},{name:"getMemberState",type:"method",isPublic:!0,parameters:[]},{name:"getExecutorHub",type:"method",isPublic:!0,parameters:[]},{name:"getViewState",type:"method",isPublic:!0,parameters:[]},{name:"setCursor",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"changeToFollower",type:"method",isPublic:!0,parameters:[95]},{name:"setMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"updateMemberState",type:"method",isPublic:!0,parameters:[103,0]},{name:"setViewState",type:"method",isPublic:!0,parameters:[0]},{name:"dispatchMagixEvent",type:"method",isPublic:!0,parameters:[0,0]},{name:"destroy",type:"method",isPublic:!0,parameters:[]}]},8:{objectFormatId:111,members:[{name:"scenes",mode:"value",type:"property",isPublic:!1},{name:"initiativeColors",mode:"value",type:"property",isPublic:!1},{name:"membersMap",mode:"value",type:"property",isPublic:!1},{name:"directorId",mode:"value",type:"property",isPublic:!1},{name:"broadcasterId",mode:"value",type:"property",isPublic:!1},{name:"isMemberExits",type:"method",isPublic:!0,parameters:[0]},{name:"getBroadcasterId",type:"method",isPublic:!0,parameters:[]},{name:"findMemberIdWithUserId",type:"method",isPublic:!0,parameters:[0]},{name:"getInformationWithMemberId",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberDisplayers",type:"method",isPublic:!0,parameters:[]},{name:"memberEnter",type:"method",isPublic:!0,parameters:[112]},{name:"enterMemberViewState",type:"method",isPublic:!1,parameters:[]},{name:"memberLeave",type:"method",isPublic:!0,parameters:[0]},{name:"updateDirector",type:"method",isPublic:!1,parameters:[]},{name:"getDeviceType",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"getExecutorHub",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberIdWithUserId",type:"method",isPublic:!0,parameters:[0]},{name:"getViewState",type:"method",isPublic:!0,parameters:[0]},{name:"getDefaultViewState",type:"method",isPublic:!1,parameters:[]},{name:"setMemberState",type:"method",isPublic:!0,parameters:[0,0]},{name:"updateMemberState",type:"method",isPublic:!0,parameters:[0,114,0]},{name:"setViewState",type:"method",isPublic:!0,parameters:[0,0]},{name:"setCursor",type:"method",isPublic:!0,parameters:[0,0,0,0,0]},{name:"setRtcState",type:"method",isPublic:!0,parameters:[0,0]},{name:"dispatchMagixEvent",type:"method",isPublic:!0,parameters:[0,0,0]},{name:"notifyAllThatSceneChanged",type:"method",isPublic:!0,parameters:[113]},{name:"getAppliance",type:"method",isPublic:!0,parameters:[0,0]},{name:"currentAppliance",type:"method",isPublic:!0,parameters:[0]},{name:"cancelBroadcaster",type:"method",isPublic:!1,parameters:[]},{name:"becomeNewBroadcast",type:"method",isPublic:!1,parameters:[0]},{name:"broadcastViewToAllRoom",type:"method",isPublic:!1,parameters:[]},{name:"initiativeColor",type:"method",isPublic:!0,parameters:[]},{name:"anyMemberHasColor",type:"method",isPublic:!1,parameters:[35]},{name:"isColorEquals",type:"method",isPublic:!1,parameters:[35,35]},{name:"compareDirector",type:"method",isPublic:!1,parameters:[0,0]}]},9:{objectFormatId:121,members:[{name:"points",mode:"value",type:"property",isPublic:!1},{name:"pushPoint",type:"method",isPublic:!0,parameters:[62]},{name:"pointHitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"rectHitTest",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"findCrossPoint",type:"method",isPublic:!1,parameters:[62,62,62,62]},{name:"isCrossPointBetweenSegment",type:"method",isPublic:!1,parameters:[62,62,62]}]},10:{objectFormatId:123,members:[{name:"pointHitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"rectHitTest",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"checkCrossVertical",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"checkCrossHorizontal",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"checkCrossGeometrical",type:"method",isPublic:!1,parameters:[0,0,0]}]},11:{objectFormatId:124,members:[{name:"points",mode:"value",type:"property",isPublic:!1},{name:"pushPoint",type:"method",isPublic:!0,parameters:[62]},{name:"hitTest",type:"method",isPublic:!0,parameters:[0,0,0]},{name:"hitAnySegments",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"hitAnyNodeCircles",type:"method",isPublic:!1,parameters:[0,0,0]}]},12:{objectFormatId:126,members:[{name:"testPoint",type:"method",isPublic:!0,parameters:[0,0,0,0,0,0]},{name:"iterate",type:"method",isPublic:!0,parameters:[0,0,0,0,0]},{name:"allPoints",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"testRect",type:"method",isPublic:!0,parameters:[0,0,0,0,0,0,0,0]},{name:"testSegment",type:"method",isPublic:!1,parameters:[0,0,0,0]}]},13:{objectFormatId:127,members:[{name:"beginVector",mode:"value",type:"property",isPublic:!1},{name:"endVector",mode:"value",type:"property",isPublic:!1},{name:"hitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"radiusIncrement",type:"method",isPublic:!1,parameters:[0,0]}]},14:{objectFormatId:173,members:[{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0}]},15:{objectFormatId:177,members:[{name:"belongsToUserId",mode:"value",type:"property",isPublic:!0},{name:"isShiftPress",mode:"value",type:"property",isPublic:!0},{name:"draggingContext",mode:"value",type:"property",isPublic:!0},{name:"context",mode:"value",type:"property",isPublic:!0},{name:"rectangle",mode:"value",type:"property",isPublic:!1},{name:"rectangleWithHitMargin",mode:"value",type:"property",isPublic:!1},{name:"operatePoint",mode:"value",type:"property",isPublic:!1},{name:"_isLocked",mode:"value",type:"property",isPublic:!1},{name:"isOnlyHasUniformScaleShape",mode:"value",type:"property",isPublic:!1},{name:"includeComponentNodes",mode:"value",type:"property",isPublic:!1},{name:"isLocked",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"originX",mode:"readonly",type:"property",isPublic:!0},{name:"originY",mode:"readonly",type:"property",isPublic:!0},{name:"width",mode:"readonly",type:"property",isPublic:!0},{name:"height",mode:"readonly",type:"property",isPublic:!0},{name:"isUniformScale",mode:"readonly",type:"property",isPublic:!0},{name:"includeComponents",mode:"readonly",type:"property",isPublic:!0},{name:"tryToStartEdit",type:"method",isPublic:!0,parameters:[0,0,75]},{name:"hitTest",type:"method",isPublic:!0,parameters:[0,0,186]},{name:"findOperationPointWithTargetId",type:"method",isPublic:!1,parameters:[0]},{name:"dragToPoint",type:"method",isPublic:!0,parameters:[0,0]},{name:"findDraggingTargetPoint",type:"method",isPublic:!1,parameters:[0,0]},{name:"updateRectangleWithDraggingTargetPoint",type:"method",isPublic:!1,parameters:[85]},{name:"refreshIncludesComponentsPositionAndSize",type:"method",isPublic:!1,parameters:[]},{name:"completeEdit",type:"method",isPublic:!0,parameters:[]},{name:"commitUpdateRectangle",type:"method",isPublic:!0,parameters:[183]},{name:"refreshRectangleByIncludesComponents",type:"method",isPublic:!0,parameters:[]},{name:"refreshWithIncludesComponents",type:"method",isPublic:!0,parameters:[188]},{name:"findLockedComponent",type:"method",isPublic:!1,parameters:[184]},{name:"refreshRectangleWithHitMargin",type:"method",isPublic:!1,parameters:[]},{name:"findRectangleIncludePoints",type:"method",isPublic:!1,parameters:[0]},{name:"isEnableProportionalScaling",type:"method",isPublic:!1,parameters:[187]}]},16:{objectFormatId:191,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingEllipseShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestDragX",mode:"value",type:"property",isPublic:!1},{name:"latestDragY",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[73]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[73]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[74]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"refreshPaintingEllipseShape",type:"method",isPublic:!1,parameters:[]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},17:{objectFormatId:192,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"state",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!1},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"outerEllipseTester",type:"method",isPublic:!1,parameters:[0]},{name:"innerEllipseTester",type:"method",isPublic:!1,parameters:[0]}]},18:{objectFormatId:193,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onHover",type:"method",isPublic:!1,parameters:[74]},{name:"onClick",type:"method",isPublic:!1,parameters:[74]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"removeHitComponents",type:"method",isPublic:!1,parameters:[74]}]},19:{objectFormatId:194,members:[{name:"context",mode:"value",type:"property",isPublic:!0},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0}]},20:{objectFormatId:195,members:[{name:"uuid",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"imageSrc",mode:"value",type:"property",isPublic:!0},{name:"locked",mode:"value",type:"property",isPublic:!0},{name:"uniformScale",mode:"value",type:"property",isPublic:!0},{name:"imageSize",mode:"value",type:"property",isPublic:!1},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"setImageSrc",type:"method",isPublic:!0,parameters:[0]},{name:"adjustToKeepUniformScale",type:"method",isPublic:!0,parameters:[]}]},21:{objectFormatId:196,members:[{name:"context",mode:"value",type:"property",isPublic:!0},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0}]},22:{objectFormatId:197,members:[{name:"state",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!1},{name:"_width",mode:"value",type:"property",isPublic:!1},{name:"_height",mode:"value",type:"property",isPublic:!1},{name:"initializedWidth",mode:"value",type:"property",isPublic:!1},{name:"initializedHeight",mode:"value",type:"property",isPublic:!1},{name:"points",mode:"value",type:"property",isPublic:!1},{name:"sparsePoints",mode:"value",type:"property",isPublic:!1},{name:"width",mode:"accessible",type:"property",isPublic:!0},{name:"height",mode:"accessible",type:"property",isPublic:!0},{name:"width",mode:"accessible",type:"property",isPublic:!0},{name:"height",mode:"accessible",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"pushPoint",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"displayPoints",type:"method",isPublic:!0,parameters:[]},{name:"enableBezier",type:"method",isPublic:!0,parameters:[]}]},23:{objectFormatId:198,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingCurveShape",mode:"value",type:"property",isPublic:!1},{name:"paintingBezierCurveShape",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onClick",type:"method",isPublic:!1,parameters:[74]},{name:"pushPointToCurveShape",type:"method",isPublic:!1,parameters:[201,0,0]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[]},{name:"commitCreateLegacyShape",type:"method",isPublic:!1,parameters:[199]},{name:"commitCreateShape",type:"method",isPublic:!1,parameters:[200]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]},{name:"createBezierCurve",type:"method",isPublic:!0,parameters:[85]},{name:"updateBezierCurveTail",type:"method",isPublic:!0,parameters:[84,0]},{name:"splitBezierCurveTail",type:"method",isPublic:!0,parameters:[202,0]},{name:"addBezierCurveExtraSteups",type:"method",isPublic:!0,parameters:[]},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"cancelPainting",type:"method",isPublic:!0,parameters:[]},{name:"createPencilOptions",type:"method",isPublic:!0,parameters:[]}]},24:{objectFormatId:203,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingRectangleShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestDragX",mode:"value",type:"property",isPublic:!1},{name:"latestDragY",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[73]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[73]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[74]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"refreshPaintingRectangleShape",type:"method",isPublic:!1,parameters:[]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},25:{objectFormatId:204,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"state",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!1},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"innerRectangleTester",type:"method",isPublic:!1,parameters:[0]}]},26:{objectFormatId:205,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"context",mode:"value",type:"property",isPublic:!0},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"belongsToUserId",mode:"value",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"updateEndPoint",type:"method",isPublic:!0,parameters:[0,0]},{name:"refreshWithPoints",type:"method",isPublic:!0,parameters:[0]}]},27:{objectFormatId:206,members:[{name:"context",mode:"value",type:"property",isPublic:!0},{name:"fixedCursorInScenePoint",mode:"value",type:"property",isPublic:!0},{name:"beginPressPoint",mode:"value",type:"property",isPublic:!1},{name:"draggingTarget",mode:"value",type:"property",isPublic:!1},{name:"draggedComponentOriginPoints",mode:"value",type:"property",isPublic:!1},{name:"selectedGroup",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestOperateX",mode:"value",type:"property",isPublic:!1},{name:"latestOperateY",mode:"value",type:"property",isPublic:!1},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[73]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[73]},{name:"onMemberStateChanged",type:"method",isPublic:!0,parameters:[57,57]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[209]},{name:"delete",type:"method",isPublic:!0,parameters:[]},{name:"copy",type:"method",isPublic:!0,parameters:[]},{name:"duplicate",type:"method",isPublic:!0,parameters:[0,0]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]},{name:"cleanAllSelectingInformation",type:"method",isPublic:!1,parameters:[]},{name:"makeSureItsDraggingEvent",type:"method",isPublic:!1,parameters:[74]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[74]},{name:"commitUpdateRectangle",type:"method",isPublic:!1,parameters:[]},{name:"startDragWithSelectedMode",type:"method",isPublic:!1,parameters:[]},{name:"startDragWithHighlightMode",type:"method",isPublic:!1,parameters:[211]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"refreshMyEditorRectangleSpaceDragToPoint",type:"method",isPublic:!1,parameters:[]},{name:"dragComponents",type:"method",isPublic:!1,parameters:[0,0,207]},{name:"onHover",type:"method",isPublic:!1,parameters:[74]},{name:"onClick",type:"method",isPublic:!1,parameters:[74]},{name:"setComponentHighlight",type:"method",isPublic:!1,parameters:[210]},{name:"cleanSelectedComponents",type:"method",isPublic:!1,parameters:[]},{name:"findMyEditorRectangleSpace",type:"method",isPublic:!1,parameters:[]},{name:"refreshMyEditorRectangleSpace",type:"method",isPublic:!0,parameters:[]},{name:"refreshAllUsersEditorRectangleSpace",type:"method",isPublic:!0,parameters:[]},{name:"moveSelectedComponentsToTop",type:"method",isPublic:!0,parameters:[]},{name:"moveSelectedComponentsToBottom",type:"method",isPublic:!0,parameters:[]},{name:"allSelectedComponents",type:"method",isPublic:!1,parameters:[]}]},28:{objectFormatId:212,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"strokeColor",mode:"value",type:"property",isPublic:!0},{name:"strokeWidth",mode:"value",type:"property",isPublic:!0},{name:"shapeType",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!1},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"completePainting",type:"method",isPublic:!0,parameters:[]}]},29:{objectFormatId:213,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestDragX",mode:"value",type:"property",isPublic:!1},{name:"latestDragY",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[73]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[73]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[74]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"refreshPaintingShape",type:"method",isPublic:!1,parameters:[]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},30:{objectFormatId:217,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onMemberStateChanged",type:"method",isPublic:!0,parameters:[57,57]},{name:"onClick",type:"method",isPublic:!0,parameters:[74]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},31:{objectFormatId:219,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"textSize",mode:"value",type:"property",isPublic:!0},{name:"textareaBox",mode:"value",type:"property",isPublic:!0},{name:"stateBeforeEdited",mode:"value",type:"property",isPublic:!1},{name:"_editedBy",mode:"value",type:"property",isPublic:!1},{name:"_isWaitingFirstText",mode:"value",type:"property",isPublic:!1},{name:"_format",mode:"value",type:"property",isPublic:!1},{name:"editedBy",mode:"readonly",type:"property",isPublic:!0},{name:"isWaitingFirstText",mode:"readonly",type:"property",isPublic:!0},{name:"isTextEmpty",mode:"readonly",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"format",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"currentScale",mode:"readonly",type:"property",isPublic:!0},{name:"editByUserId",type:"method",isPublic:!0,parameters:[0]},{name:"undoPreviousEdit",type:"method",isPublic:!0,parameters:[]},{name:"updateScale",type:"method",isPublic:!0,parameters:[0]},{name:"updateFormat",type:"method",isPublic:!0,parameters:[0,92]},{name:"completeEdit",type:"method",isPublic:!0,parameters:[]},{name:"setTextareaBox",type:"method",isPublic:!0,parameters:[93]},{name:"recoverTextareaBox",type:"method",isPublic:!0,parameters:[93]},{name:"recoverFormat",type:"method",isPublic:!0,parameters:[221]},{name:"adjustToKeepUniformScale",type:"method",isPublic:!0,parameters:[]},{name:"copyTextareaBox",type:"method",isPublic:!1,parameters:[93]}]},32:{objectFormatId:222,members:[]},33:{objectFormatId:223,members:[]},34:{objectFormatId:224,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"kind",mode:"value",type:"property",isPublic:!1},{name:"paitingVectorShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[74]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},35:{objectFormatId:225,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"kind",mode:"value",type:"property",isPublic:!0},{name:"state",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!1},{name:"anchorPoint",mode:"value",type:"property",isPublic:!1},{name:"_direction",mode:"value",type:"property",isPublic:!1},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"direction",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"setEndPoint",type:"method",isPublic:!0,parameters:[85]},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"getBeginPoint",type:"method",isPublic:!1,parameters:[]},{name:"getEndPoint",type:"method",isPublic:!1,parameters:[]}]},36:{objectFormatId:226,members:[{name:"locked",mode:"value",type:"property",isPublic:!0},{name:"selectable",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"context",mode:"value",type:"property",isPublic:!0},{name:"selectedBy",mode:"value",type:"property",isPublic:!0},{name:"_protoKey",mode:"value",type:"property",isPublic:!1},{name:"highlightAuthorIds",mode:"value",type:"property",isPublic:!1},{name:"protoKey",mode:"accessible",type:"property",isPublic:!0},{name:"protoKey",mode:"accessible",type:"property",isPublic:!0},{name:"isHighlightBy",type:"method",isPublic:!0,parameters:[0]},{name:"setHighlightBy",type:"method",isPublic:!0,parameters:[0,0]},{name:"snapshot",type:"method",isPublic:!0,parameters:[]},{name:"recover",type:"method",isPublic:!0,parameters:[228,0]},{name:"keepUniformScale",type:"method",isPublic:!1,parameters:[128]},{name:"authorsPropertySetValue",type:"method",isPublic:!1,parameters:[227,0,0]}]},37:{objectFormatId:231,members:[{name:"state",mode:"value",type:"property",isPublic:!0},{name:"headPoint",mode:"value",type:"property",isPublic:!1},{name:"curves",mode:"value",type:"property",isPublic:!1},{name:"currentBoundary",mode:"value",type:"property",isPublic:!1},{name:"fixedBoundary",mode:"value",type:"property",isPublic:!1},{name:"extraSteups",mode:"value",type:"property",isPublic:!1},{name:"initializedSize",mode:"value",type:"property",isPublic:!1},{name:"_originX",mode:"value",type:"property",isPublic:!1},{name:"_originY",mode:"value",type:"property",isPublic:!1},{name:"_width",mode:"value",type:"property",isPublic:!1},{name:"_height",mode:"value",type:"property",isPublic:!1},{name:"originX",mode:"accessible",type:"property",isPublic:!0},{name:"originY",mode:"accessible",type:"property",isPublic:!0},{name:"width",mode:"accessible",type:"property",isPublic:!0},{name:"height",mode:"accessible",type:"property",isPublic:!0},{name:"originX",mode:"accessible",type:"property",isPublic:!0},{name:"originY",mode:"accessible",type:"property",isPublic:!0},{name:"width",mode:"accessible",type:"property",isPublic:!0},{name:"height",mode:"accessible",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"locked",mode:"readonly",type:"property",isPublic:!0},{name:"isLikePoint",type:"method",isPublic:!0,parameters:[]},{name:"addExtraSteups",type:"method",isPublic:!0,parameters:[]},{name:"updateTail",type:"method",isPublic:!0,parameters:[84,0]},{name:"splitTail",type:"method",isPublic:!0,parameters:[233,0]},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"refreshTailCurve",type:"method",isPublic:!1,parameters:[84]},{name:"receiveCurve",type:"method",isPublic:!1,parameters:[232,84]},{name:"receivePoint",type:"method",isPublic:!1,parameters:[232,85]},{name:"displayer",type:"method",isPublic:!0,parameters:[]},{name:"translatePoint",type:"method",isPublic:!1,parameters:[85,0,0]},{name:"scalePoint",type:"method",isPublic:!1,parameters:[85,0,0]}]},38:{objectFormatId:235,members:[{name:"widthThreshold",mode:"value",type:"property",isPublic:!0},{name:"humpThreshold",mode:"value",type:"property",isPublic:!0},{name:"points",mode:"value",type:"property",isPublic:!1},{name:"plough",mode:"value",type:"property",isPublic:!1},{name:"_pushedCount",mode:"value",type:"property",isPublic:!1},{name:"is2DGraphic",mode:"readonly",type:"property",isPublic:!0},{name:"pushedCount",mode:"readonly",type:"property",isPublic:!0},{name:"displayPoints",type:"method",isPublic:!0,parameters:[]},{name:"complete",type:"method",isPublic:!0,parameters:[]},{name:"pushPoint",type:"method",isPublic:!0,parameters:[0,0]},{name:"createPlough",type:"method",isPublic:!1,parameters:[0,0]},{name:"appendToPlough",type:"method",isPublic:!1,parameters:[0,0]},{name:"fillPloughPoints",type:"method",isPublic:!1,parameters:[236]}]},39:{objectFormatId:237,members:[{name:"components",mode:"value",type:"property",isPublic:!0},{name:"snapshot",type:"method",isPublic:!0,parameters:[]},{name:"recover",type:"method",isPublic:!0,parameters:[241,0]},{name:"injectToScene",type:"method",isPublic:!0,parameters:[240,0,0]}]},40:{objectFormatId:245,members:[{name:"pressedPoint",mode:"value",type:"property",isPublic:!0},{name:"dragEventsBuffer",mode:"value",type:"property",isPublic:!0},{name:"fixedCursorInScenePoint",mode:"value",type:"property",isPublic:!0},{name:"isDragging",mode:"readonly",type:"property",isPublic:!0},{name:"needBufferDragEvent",mode:"readonly",type:"property",isPublic:!1},{name:"isPressDown",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[73]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[73]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]},{name:"onMouseLeave",type:"method",isPublic:!0,parameters:[74]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[74]},{name:"onDrag",type:"method",isPublic:!1,parameters:[74]},{name:"onHover",type:"method",isPublic:!1,parameters:[74]},{name:"onClick",type:"method",isPublic:!1,parameters:[74]},{name:"makeSureItsDraggingEvent",type:"method",isPublic:!1,parameters:[74]},{name:"onMemberStateChanged",type:"method",isPublic:!0,parameters:[57,57]},{name:"onMagixEvent",type:"method",isPublic:!0,parameters:[0,0]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[246]},{name:"onPressedAndDrag",type:"method",isPublic:!1,parameters:[74]},{name:"onMouseDown",type:"method",isPublic:!0,parameters:[74]},{name:"onMouseMove",type:"method",isPublic:!0,parameters:[74]},{name:"onMouseUp",type:"method",isPublic:!0,parameters:[74]},{name:"checkShouldChangeGestureToDrag",type:"method",isPublic:!1,parameters:[74]},{name:"shouldChangeGestureToDrag",type:"method",isPublic:!1,parameters:[0,0]},{name:"invokeCallback",type:"method",isPublic:!1,parameters:[0,74]}]},41:{objectFormatId:254,members:[{name:"createConstructors",type:"method",isPublic:!1,parameters:[]},{name:"createMemberState",type:"method",isPublic:!1,parameters:[35]}]},42:{objectFormatId:256,members:[{name:"rootSceneGroup",mode:"value",type:"property",isPublic:!1},{name:"_currentPath",mode:"value",type:"property",isPublic:!1},{name:"currentSceneCache",mode:"value",type:"property",isPublic:!1},{name:"currentPath",mode:"accessible",type:"property",isPublic:!0},{name:"currentPath",mode:"accessible",type:"property",isPublic:!0},{name:"currentScene",mode:"readonly",type:"property",isPublic:!0},{name:"getScene",type:"method",isPublic:!0,parameters:[270]},{name:"listScenes",type:"method",isPublic:!0,parameters:[276]},{name:"listSceneGroups",type:"method",isPublic:!0,parameters:[275]},{name:"listAllScenes",type:"method",isPublic:!0,parameters:[]},{name:"collectScenes",type:"method",isPublic:!1,parameters:[260,261,262]},{name:"putScene",type:"method",isPublic:!0,parameters:[280,11,0]},{name:"removePath",type:"method",isPublic:!0,parameters:[281]},{name:"moveScene",type:"method",isPublic:!0,parameters:[278,279,0]},{name:"cleanIfSceneGroupEmpty",type:"method",isPublic:!1,parameters:[259]},{name:"isSceneGroupEmpty",type:"method",isPublic:!1,parameters:[274]},{name:"findSceneOrGroup",type:"method",isPublic:!0,parameters:[269]},{name:"findSceneGroup",type:"method",isPublic:!1,parameters:[268]},{name:"makeSceneGroup",type:"method",isPublic:!1,parameters:[277]},{name:"insertScene",type:"method",isPublic:!1,parameters:[271,11,0]},{name:"createRootSceneGroup",type:"method",isPublic:!1,parameters:[]},{name:"findNextScenePathInTree",type:"method",isPublic:!1,parameters:[267]},{name:"findNextPathStackInTree",type:"method",isPublic:!1,parameters:[265,266]},{name:"findNextName",type:"method",isPublic:!1,parameters:[264,0]},{name:"createSceneGroup",type:"method",isPublic:!1,parameters:[0]},{name:"isPathEquals",type:"method",isPublic:!0,parameters:[272,273]},{name:"checkPathIncludesPrefix",type:"method",isPublic:!1,parameters:[257,258]}]},43:{objectFormatId:282,members:[{name:"_src",mode:"value",type:"property",isPublic:!1},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"previewURL",mode:"value",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"originX",mode:"readonly",type:"property",isPublic:!0},{name:"originY",mode:"readonly",type:"property",isPublic:!0},{name:"src",mode:"readonly",type:"property",isPublic:!0}]},44:{objectFormatId:11,members:[{name:"ppt",mode:"value",type:"property",isPublic:!0},{name:"name",mode:"value",type:"property",isPublic:!0},{name:"componentsCount",mode:"readonly",type:"property",isPublic:!0},{name:"editableWithHitIdentifies",type:"method",isPublic:!0,parameters:[285]},{name:"editablesWithHitIdentifies",type:"method",isPublic:!0,parameters:[286]},{name:"shellRectangle",type:"method",isPublic:!0,parameters:[]},{name:"cleanComponents",type:"method",isPublic:!0,parameters:[283]},{name:"cleanPPT",type:"method",isPublic:!0,parameters:[284]},{name:"recoverPPT",type:"method",isPublic:!0,parameters:[118]},{name:"cleanBackgroundImage",type:"method",isPublic:!1,parameters:[]}]}}}),o=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(68);t.register=new n.RegisterImplement},function(e,t){e.exports=n("react")},function(e,t){e.exports=n("boundless")},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.creator,s=o.setter,c=o.caller,u=o.getter,l=o.remover,p=r(0),h=r(11),d=function(e){function t(t){var r=e.call(this)||this;return r.highlightAuthorIds=a([]),s(r,"context",t),s(r,"_protoKey",c(p,"findIdentifierWith",[r])),r}return i(t,e),Object.defineProperty(t.prototype,"protoKey",{get:function(){return u(this,"_protoKey")||s(this,"_protoKey",c(p,"findIdentifierWith",[this])),u(this,"_protoKey")},set:function(e){s(this,"_protoKey",e)},enumerable:!0,configurable:!0}),t.prototype.isHighlightBy=function(e){return-1!==c(u(this,"highlightAuthorIds"),"indexOf",[e])},t.prototype.setHighlightBy=function(e,t){c(this,"authorsPropertySetValue",[u(this,"highlightAuthorIds"),e,t])},t.prototype.snapshot=function(){var e=u(this,"context"),t=u(this,"selectedBy"),r=u(this,"highlightAuthorIds");l(this,"context"),s(this,"selectedBy",void 0),s(this,"highlightAuthorIds",a([]));var n=c(c(p,"getSnapshot",[]),"createSnapshot",[this,!1]);return s(this,"context",e),s(this,"selectedBy",t),s(this,"highlightAuthorIds",r),n},t.recover=function(e,t){var r=c(c(p,"getSnapshot",[]),"recoverWithSnapshot",[t]);return s(r,"context",e),r},t.prototype.keepUniformScale=function(e){if(0!==u(this,"width")&&0!==u(this,"height")){var t=u(this,"width")/u(e,"width"),r=u(this,"height")/u(e,"height"),n=c(Math,"min",[t,r]),i=u(e,"width")*n,o=u(e,"height")*n;s(this,"originX",u(this,"originX")+(u(this,"width")-i)/2),s(this,"originY",u(this,"originY")+(u(this,"height")-o)/2),s(this,"width",i),s(this,"height",o)}},t.prototype.authorsPropertySetValue=function(e,t,r){var n=c(e,"indexOf",[r]);t?-1===n&&c(e,"push",[r]):-1!==n&&c(e,"splice",[n,1])},t}(o.wrapSuperClass(h.ApplianceComponent));t.Editable=d,o.declareClass({classId:36,clazz:d,superClass:h.ApplianceComponent,memberDecorators:{isHighlightBy:[p.noEffects]}}),o=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(51);t.Gesture=n.Gesture,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(32))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(3)),s=r(4),c=r(0);t.createEditableComponent=function(){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return function(e){var t=e.payload;if(!c.isAkkoWrappedObjectAccessible(t))return null;var r=t.context.getMemberState(t.selectedBy);if(!r)return null;var n=r.strokeColor,i=n[0],o=n[1],u=n[2];return a.createElement(s.CNode,{key:e.id,className:"highlight-box",style:{borderColor:"rgb("+i+","+o+","+u+")"},context:e.cnode})}(this.props)},t}(a.Component)}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(60);t.inCircle=i.inCircle,n(r(61)),n(r(84)),n(r(85))},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),o=r(4),a=function(){function e(e,t){this.reactionDisposer=null,this.isDirty=!1,this.component=e,this._context=t}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this.component.payload},enumerable:!0,configurable:!0}),e.prototype.getState=function(){return this.isDirty?o.CanvasRenderState.Changed:o.CanvasRenderState.Unchanged},e.prototype.updatePayload=function(e){},e.prototype.updateContext=function(e){this._context=e},e.prototype.remove=function(){this.reactionDisposer&&(this.reactionDisposer(),this.reactionDisposer=null)},e.prototype.paint=function(e){var t=this;this.reactionDisposer&&this.reactionDisposer();var r=!0;this.reactionDisposer=i.autorun((function(){r?(t.paintContent(e),t.isDirty=!1,r=!1):(t.reactionDisposer&&(t.reactionDisposer(),t.reactionDisposer=null),e.touch(),t.isDirty=!0)}))},n([i.observable],e.prototype,"_context",void 0),n([i.action],e.prototype,"updateContext",null),e}();t.AbstractCanvasRender=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0).__context("module"),c=s.creator,u=s.setter,l=s.getter,p=s.caller,h=s.unwrapper,d=r(0),f=r(5),y=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.originX=0,i.originY=0,i.width=0,i.height=0,i.textSize=16,i.textareaBox=c({scale:1,width:0,height:0,originalText:"",textLines:c([])}),i.stateBeforeEdited=void 0,i._editedBy=void 0,i._isWaitingFirstText=!0,u(i,"originX",r),u(i,"originY",n),u(i,"_format",c({color:l(p(t,"getMemberState",[]),"strokeColor"),bold:!1,italic:!1,underline:!1,lineThrough:!1})),i}return i(t,e),Object.defineProperty(t.prototype,"editedBy",{get:function(){return l(this,"_editedBy")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWaitingFirstText",{get:function(){return l(this,"_isWaitingFirstText")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTextEmpty",{get:function(){return""===l(l(this,"textareaBox"),"originalText")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return l(this,"_editedBy")!==p(d,"getAuthorId",[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){var e=l(this,"_format");if(!e){var t=l(this,"textColor");t||(t=c([0,0,0])),e=c({color:t,bold:!1,italic:!1,underline:!1,lineThrough:!1})}return e},enumerable:!0,configurable:!0}),t.prototype.editByUserId=function(e){u(this,"_editedBy",e),u(this,"stateBeforeEdited",c({textareaBox:p(t,"copyTextareaBox",[l(this,"textareaBox")]),rectangle:c({x:l(this,"originX"),y:l(this,"originY"),width:l(this,"width"),height:l(this,"height")})}))},t.prototype.undoPreviousEdit=function(){if(l(this,"stateBeforeEdited")){var e=l(this,"stateBeforeEdited"),t=l(e,"textareaBox"),r=l(e,"rectangle");u(this,"textareaBox",t),u(this,"originX",l(r,"x")),u(this,"originY",l(r,"y")),u(this,"width",l(r,"width")),u(this,"height",l(r,"height")),u(this,"stateBeforeEdited",void 0)}},t.prototype.updateScale=function(e){var t=l(this,"textareaBox"),r=l(t,"width"),n=l(t,"height");if(e!==l(t,"scale")){u(this,"textareaBox",c(o({},h(l(this,"textareaBox")),{scale:e})));var i=c({x:l(this,"originX"),y:l(this,"originY"),width:l(this,"width"),height:l(this,"height")});0!==r&&0!==n&&(u(this,"width",r*e),u(this,"height",n*e));var a=c({x:l(this,"originX"),y:l(this,"originY"),width:l(this,"width"),height:l(this,"height")}),s=l(l(this,"context"),"executorHub");if(s&&l(s,"enable")){var d=c({updateRect:a}),f=c({updateRect:i});p(s,"commit",[l(this,"protoKey"),d,f])}}},t.prototype.updateFormat=function(e,t){var r=l(t,"scale"),n=l(t,"width"),i=l(t,"height"),a=c({x:l(this,"originX"),y:l(this,"originY"),width:l(this,"width"),height:l(this,"height")}),s=c({x:l(this,"originX"),y:l(this,"originY"),width:n*r,height:i*r}),d=!1;l(a,"width")===l(s,"width")&&l(a,"height")===l(s,"height")||(u(this,"textareaBox",c(o({},h(l(this,"textareaBox")),{width:n,height:i}))),u(this,"width",l(s,"width")),u(this,"height",l(s,"height")),d=!0);var f=l(l(this,"context"),"executorHub"),y=l(this,"format"),A=u(this,"_format",c(o({},h(y),h(e))));if(f&&l(f,"enable")&&!l(this,"_isWaitingFirstText")){var m=c({updateTextareaFormat:A}),g=c({updateTextareaFormat:y});d&&(u(m,"updateRect",s),u(g,"updateRect",a)),p(f,"commit",[l(this,"protoKey"),m,g])}},t.prototype.completeEdit=function(){var e=l(l(this,"context"),"executorHub");if(e&&l(e,"enable")&&l(this,"stateBeforeEdited")&&l(l(l(this,"stateBeforeEdited"),"textareaBox"),"originalText")!==l(l(this,"textareaBox"),"originalText"))if(l(this,"_isWaitingFirstText")){var r=c({create:p(this,"snapshot",[])});p(e,"commit",[l(this,"protoKey"),r,c({delete:!0})])}else{r=c({updateTextarea:p(t,"copyTextareaBox",[l(this,"textareaBox")]),updateRect:c({x:l(this,"originX"),y:l(this,"originY"),width:l(this,"width"),height:l(this,"height")})});var n=c({updateTextarea:l(l(this,"stateBeforeEdited"),"textareaBox"),updateRect:l(l(this,"stateBeforeEdited"),"rectangle")});p(e,"commit",[l(this,"protoKey"),r,n])}u(this,"_isWaitingFirstText",!1),u(this,"_editedBy",void 0),u(this,"stateBeforeEdited",void 0)},Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return l(this,"textSize")/4},enumerable:!0,configurable:!0}),t.prototype.setTextareaBox=function(e){u(this,"textareaBox",e),u(this,"width",l(e,"width")*l(e,"scale")),u(this,"height",l(e,"height")*l(e,"scale"))},t.prototype.recoverTextareaBox=function(e){u(this,"textareaBox",e)},t.prototype.recoverFormat=function(e){u(this,"_format",e)},t.prototype.adjustToKeepUniformScale=function(){p(this,"keepUniformScale",[l(this,"textareaBox")])},Object.defineProperty(t.prototype,"currentScale",{get:function(){if(0===l(l(this,"textareaBox"),"width")||0===l(l(this,"textareaBox"),"height"))return 1;var e=l(this,"width")/l(l(this,"textareaBox"),"width"),t=l(this,"height")/l(l(this,"textareaBox"),"height");return p(Math,"min",[e,t])},enumerable:!0,configurable:!0}),t.copyTextareaBox=function(e){for(var t=c([]),r=0,n=h(l(e,"textLines"));r<n.length;r++){var i=n[r];p(t,"push",[c(o({},h(i)))])}return c(o({},h(e),{textLines:t}))},a([d.noEffects],t.prototype,"editedBy",null),a([d.noEffects],t.prototype,"isWaitingFirstText",null),a([d.noEffects],t.prototype,"isTextEmpty",null),a([d.noEffects],t.prototype,"locked",null),a([d.noEffects],t.prototype,"format",null),a([d.noEffects],t.prototype,"hitTestingBoxMargin",null),a([d.noEffects],t.prototype,"currentScale",null),t}(s.wrapSuperClass(f.Editable));t.TextareaShape=y,s.declareClass({classId:31,clazz:y,superClass:f.Editable,memberDecorators:{editedBy:[d.noEffects],isWaitingFirstText:[d.noEffects],isTextEmpty:[d.noEffects],locked:[d.noEffects],format:[d.noEffects],hitTestingBoxMargin:[d.noEffects],currentScale:[d.noEffects]}}),s=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(38))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(23);t.inCircle=i.inCircle;var o=r(17);t.RectangleTestingResult=o.RectangleTestingResult,n(r(24)),n(r(39)),n(r(40))},function(e,t,r){"use strict";var n;function i(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function o(e,t,r,i,o,a){return e<r?t<i?n.LT:t<=a?n.LM:n.LB:e<=o?t<i?n.MT:t<=a?n.MM:n.MB:t<i?n.RT:t<=a?n.RM:n.RB}function a(e,t,r){return e<=t&&t<=r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LT=0]="LT",e[e.MT=1]="MT",e[e.RT=2]="RT",e[e.LM=3]="LM",e[e.MM=4]="MM",e[e.RM=5]="RM",e[e.LB=6]="LB",e[e.MB=7]="MB",e[e.RB=8]="RB"}(n||(n={})),t.isZero=function(e){return Math.abs(e)<1e-6},t.verticalVector=function(e){var t=e.x;return{x:-e.y,y:t}},t.unitVector=function(e){var t=i(e);return e.x/=t,e.y/=t,e},t.distance=i,t.isSegementCrossRectangle=function(e,t,r,i,s,c,u,l){var p=o(e,t,s,c,u,l),h=o(r,i,s,c,u,l);switch(p){case n.MM:return!0;case n.LT:switch(h){case n.LT:case n.LM:case n.MT:case n.LB:case n.RT:return!1;case n.MM:return!0}break;case n.LM:switch(h){case n.LM:case n.LT:case n.LB:return!1;case n.MM:case n.RM:return!0}break;case n.LB:switch(h){case n.LB:case n.LM:case n.MB:case n.LT:case n.RB:return!1;case n.MM:return!0}break;case n.MB:switch(h){case n.MB:case n.LB:case n.RB:return!1;case n.MM:case n.MT:return!0}break;case n.RB:switch(h){case n.RB:case n.MB:case n.RM:case n.LB:case n.RT:return!1;case n.MM:return!0}break;case n.RM:switch(h){case n.RM:case n.RT:case n.RB:return!1;case n.MM:case n.LM:return!0}break;case n.RT:switch(h){case n.RT:case n.MT:case n.RM:case n.LT:case n.RB:return!1;case n.MM:return!0}break;case n.MT:switch(h){case n.MT:case n.LT:case n.RT:return!1;case n.MM:case n.MB:return!0}}return function(e,t,r,n,i,o,s,c){var u=r-e,l=n-t;if(0===u){var p=Math.min(t,n),h=Math.max(t,n);return a(p,o,h)||a(p,c,h)}if(0===l){var d=Math.min(e,r),f=Math.max(e,r);return a(d,i,f)||a(d,s,f)}var y=u/l,A=-y*t+e;if(a(i,y*o+A,s))return!0;if(a(i,y*c+A,s))return!0;var m=l/u,g=-m*e+t;return!!a(o,m*i+g,c)||!!a(o,m*s+g,c)}(e,t,r,i,s,c,u,l)},t.findCrossPoint=function(e,t,r,n){var i=t.y-e.y,o=e.x-t.x,a=e.x*(e.y-t.y)-e.y*(e.x-t.x),s=n.y-r.y,c=r.x-n.x,u=r.x*(r.y-n.y)-r.y*(r.x-n.x),l=i*c-s*o,p=null;return 0!==l&&(p={x:(o*u-c*a)/l,y:(s*a-i*u)/l}),p},t.isOnRay=function(e,t,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0}},function(e,t){e.exports=n("mobx")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(36),r(70),r(86),r(87),r(88),r(89),r(94),r(7),r(102),r(103),r(106),r(107),r(108),r(109),r(116),r(117),r(118),r(119),r(120),r(125),r(126),r(127),r(128),r(129),r(130),r(131);var n=r(2);t.register=n.register;var i=r(136);t.EnginesHub=i.EnginesHub;var o=r(36);t.floatBarDefinition=o.floatBarDefinition},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.caller,o=n.getter,a=n.unwrapper,s=n.creator,c=r(0),u=r(10);function l(e,t){if(o(t,"isTextEmpty")){var r=o(o(t,"context"),"executorHub");r&&o(r,"enable")&&!o(t,"isWaitingFirstText")&&(i(t,"undoPreviousEdit",[]),i(r,"commit",[o(t,"protoKey"),s({delete:!0}),s({create:i(t,"snapshot",[])})])),i(e,"removeComponent",[t])}else i(t,"completeEdit",[])}function p(e,t){return i(e,"findComponentFromTop",[function(e){return a(e)instanceof u.TextareaShape&&o(e,"editedBy")===t}])}t.updateTextarea=function(e,t,r){var n;(n=r?i(e,"findComponentFromTop",[function(e){return o(e,"identifier")===r}]):p(e,i(c,"getAuthorId",[])))&&i(n,"setTextareaBox",[t])},t.hasEditingTextarea=function(e){for(var t=i(c,"getAuthorId",[]),r=0,n=a(o(e,"components"));r<n.length;r++){var s=n[r];if(a(s)instanceof u.TextareaShape&&(o(s,"selectedBy")===t||o(s,"editedBy")===t))return!0}return!1},t.setTextareaFormat=function(e,t,r){for(var n=i(c,"getAuthorId",[]),s=0,l=a(o(e,"components"));s<l.length;s++){var p=l[s];if(a(p)instanceof u.TextareaShape&&(o(p,"selectedBy")===n||o(p,"editedBy")===n)){var h=o(r,o(p,"identifier"));h&&i(p,"updateFormat",[t,h])}}},t.setTextareaScale=function(e,t){for(var r=i(c,"getAuthorId",[]),n=0,s=a(o(e,"components"));n<s.length;n++){var l=s[n];a(l)instanceof u.TextareaShape&&(o(l,"selectedBy")===r||o(l,"editedBy")===r)&&i(l,"updateScale",[t])}},t.setTextareaFontSize=function(e,t){for(var r=i(c,"getAuthorId",[]),n=0,s=a(o(e,"components"));n<s.length;n++){var l=s[n];if(a(l)instanceof u.TextareaShape&&(o(l,"selectedBy")===r||o(l,"editedBy")===r)){var p=t/o(l,"textSize");i(l,"updateScale",[p])}}},t.releaseAllTextarea=function(e){i(e,"forEachComponents",[function(t){a(t)instanceof u.TextareaShape&&l(e,t)}])},t.releaseTextareaEditedBy=function(e,t){var r=p(e,t);r&&l(e,r)},t.textareaEditedBy=p,n=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Disjoint=0]="Disjoint",e[e.Cross=1]="Cross",e[e.IncludeRectangle=2]="IncludeRectangle",e[e.IncludeByRectangle=3]="IncludeByRectangle"}(t.RectangleTestingResult||(t.RectangleTestingResult={}))},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0).__context("module"),o=i.caller,a=i.getter,s=i.creator,c=i.setter,u=i.unwrapper;t.linearDistance=function(e,t){return o(Math,"abs",[a(e,"x")-a(t,"x")])+o(Math,"abs",[a(e,"y")-a(t,"y")])},t.distance=function(e,t){var r=a(e,"x")-a(t,"x"),n=a(e,"y")-a(t,"y");return o(Math,"sqrt",[r*r+n*n])},t.verticalVector=function(e){var t=a(e,"x"),r=a(e,"y");return s({x:-r,y:t})},t.dotProduct=function(e,t){return a(e,"x")*a(t,"x")+a(e,"y")*a(t,"y")},t.isZero=function(e){return o(Math,"abs",[e])<1e-6},t.unitVector=function(e){var t=o(Math,"sqrt",[a(e,"x")*a(e,"x")+a(e,"y")*a(e,"y")]);return c(e,"x",a(e,"x")/t),c(e,"y",a(e,"y")/t),e},t.plus=function(e,t){return s({x:a(e,"x")+a(t,"x"),y:a(e,"y")+a(t,"y")})},t.multiply=function(e,t){return s({x:e*a(t,"x"),y:e*a(t,"y")})},t.triangleArea=function(e,t,r){var n=0;return n+=(a(t,"y")+a(e,"y"))*(a(t,"x")-a(e,"x")),n+=(a(r,"y")+a(t,"y"))*(a(r,"x")-a(t,"x")),n+=(a(e,"y")+a(r,"y"))*(a(e,"x")-a(r,"x")),o(Math,"abs",[n])/2},t.projectionPoint=function(e,t,r){return(a(r,"x")-a(e,"x"))*a(t,"x")+(a(r,"y")-a(e,"y"))*a(t,"y")},t.pointByProject=function(e,t,r){var i=s(n({},u(t)));return c(i,"x",a(i,"x")*r),c(i,"y",a(i,"y")*r),c(i,"x",a(i,"x")+a(e,"x")),c(i,"y",a(i,"y")+a(e,"y")),i},t.meansOverlap=function(e){var t=a(e,"x"),r=a(e,"y");return o(Number,"isNaN",[t])&&o(Number,"isNaN",[r])},i=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.getter,o=n.setter,a=n.creator,s=n.unwrapper,c=n.remover;function u(e,t,r){void 0===r?c(e,t):o(e,t,r)}t.updateTree=function(e,t,r){if("string"==typeof t)u(e,t,r);else for(var n=i(t,"length"),s=e,c=0;c<n;++c){var l=i(t,c);c<n-1?"object"==A(s=i(s,l))&&null!==s||o(s,l,s=a({})):u(s,l,r)}},t.getTreeValue=function(e,t){if(void 0===t)return e;if("string"==typeof t)return i(e,t);for(var r=e,n=0,o=s(t);n<o.length;n++){var a=o[n];if("object"!=A(r)||null===r){r=void 0;break}r=i(r,a)}return r},n=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.wrapper,u=a.getter,l=a.caller,p=a.creator,h=a.unwrapper,d=r(0),f=r(5),y=r(47),m=r(11),g=function(e){function t(t,r){var n=e.call(this)||this;if(s(n,"name",""+t),r){var i=c(new v(u(r,"src"),u(r,"width"),u(r,"height"),u(r,"previewURL")));l(n,"addComponentAt",[i,0]),s(n,"ppt",r)}return n}return i(t,e),t.prototype.editableWithHitIdentifies=function(e){var t=u(e,0);return void 0===t?void 0:l(this,"findComponentFromTop",[function(e){return t===u(e,"identifier")}])},t.prototype.editablesWithHitIdentifies=function(e){for(var t=p([]),r=function(e){var r=l(n,"findComponentFromTop",[function(t){return e===u(t,"identifier")}]);r&&l(t,"push",[r])},n=this,i=0,o=h(e);i<o.length;i++)r(o[i]);return t},Object.defineProperty(t.prototype,"componentsCount",{get:function(){return u(u(this,"components"),"length")},enumerable:!0,configurable:!0}),t.prototype.shellRectangle=function(){if(0===u(u(this,"components"),"length"))return p({originX:0,originY:0,width:0,height:0});for(var e=u(Number,"MAX_SAFE_INTEGER"),t=u(Number,"MAX_SAFE_INTEGER"),r=u(Number,"MIN_SAFE_INTEGER"),n=u(Number,"MIN_SAFE_INTEGER"),i=0,o=h(u(this,"components"));i<o.length;i++){var a=o[i],s=u(a,"originX"),c=u(a,"originY"),d=u(a,"width"),y=u(a,"height"),A=h(a)instanceof f.Editable?u(a,"hitTestingBoxMargin"):0;e=l(Math,"min",[e,s-A]),t=l(Math,"min",[t,c-A]),r=l(Math,"max",[r,s+d+A]),n=l(Math,"max",[n,c+y+A])}return p({originX:e,originY:t,width:r-e,height:n-t})},t.prototype.cleanComponents=function(e){for(var t=u(e,"executorHub"),r=0;r<u(u(this,"components"),"length");++r){var n=u(u(this,"components"),r);h(n)instanceof f.Editable&&(l(u(this,"components"),"splice",[r,1]),r--,t&&u(t,"enable")&&l(t,"commit",[u(n,"protoKey"),p({delete:!0}),p({create:l(n,"snapshot",[])})]))}l(l(e,"getAppliance",["selector"]),"refreshAllUsersEditorRectangleSpace",[])},t.prototype.cleanPPT=function(e){if(u(this,"ppt")){l(this,"cleanBackgroundImage",[]);var t=u(e,"executorHub");t&&u(t,"enable")&&l(t,"commit",[l(d,"findIdentifierWith",[this]),p({cleanPPT:!0}),p({setPPT:u(this,"ppt")})]),s(this,"ppt",void 0)}},t.prototype.recoverPPT=function(e){var t=c(new v(u(e,"src"),u(e,"width"),u(e,"height"),u(e,"previewURL")));l(this,"cleanBackgroundImage",[]),l(this,"addComponentAt",[t,0]),s(this,"ppt",e)},t.prototype.cleanBackgroundImage=function(){for(var e=0;e<u(u(this,"components"),"length");++e){var t=u(u(this,"components"),e);if(h(t)instanceof v){l(u(this,"components"),"splice",[e,1]);break}}},t}(a.wrapSuperClass(y.ApplianceComponentContainer));t.SceneNode=g;var v=function(e){function t(t,r,n,i){var o=e.call(this)||this;return s(o,"_src",t),s(o,"width",r),s(o,"height",n),s(o,"previewURL",i),o}return i(t,e),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originX",{get:function(){return-u(this,"width")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originY",{get:function(){return-u(this,"height")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return u(this,"_src")},enumerable:!0,configurable:!0}),o([d.noEffects],t.prototype,"hitTestingBoxMargin",null),o([d.noEffects],t.prototype,"originX",null),o([d.noEffects],t.prototype,"originY",null),o([d.noEffects],t.prototype,"src",null),t}(a.wrapSuperClass(m.ApplianceComponent));t.BackgroundImage=v,a.declareClass({classId:44,clazz:g,superClass:y.ApplianceComponentContainer}),a.declareClass({classId:43,clazz:v,superClass:m.ApplianceComponent,memberDecorators:{hitTestingBoxMargin:[d.noEffects],originX:[d.noEffects],originY:[d.noEffects],src:[d.noEffects]}}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(4);!function(e){e[e.Background=0]="Background",e[e.Graphics=1]="Graphics",e[e.HtmlGraphics=2]="HtmlGraphics",e[e.Plugin=3]="Plugin",e[e.Component=4]="Component",e[e.MouseCursor=5]="MouseCursor"}(n=t.WhiteLayouts||(t.WhiteLayouts={})),function(e){e.SVG="svg",e.Canvas="canvas"}(i=t.RenderEngine||(t.RenderEngine={})),function(e){e.Triangle="triangle",e.Rhombus="rhombus",e.Pentagram="pentagram",e.SpeechBalloon="speechBalloon"}(t.ShapeType||(t.ShapeType={})),t.createLayoutDescriptions=function(e){var t,r;switch(void 0===e&&(e=i.SVG),e){case i.SVG:t=o.LayoutKind.SVG,r=o.LayoutRenderMode.AbsoluteSize;break;case i.Canvas:t=o.LayoutKind.CANVAS,r=o.LayoutRenderMode.RelativeSize}return[{layout:n.Background,kind:o.LayoutKind.HTML,renderMode:o.LayoutRenderMode.AbsoluteSize,className:"background"},{layout:n.Graphics,kind:t,renderMode:r,className:"graphics"},{layout:n.HtmlGraphics,kind:o.LayoutKind.HTML,renderMode:o.LayoutRenderMode.AbsoluteSize,className:"graphics"},{layout:n.Plugin,kind:o.LayoutKind.HTML,renderMode:o.LayoutRenderMode.RelativeSize,className:"component"},{layout:n.Component,kind:o.LayoutKind.HTML,renderMode:o.LayoutRenderMode.RelativeSize,className:"component"},{layout:n.MouseCursor,kind:o.LayoutKind.HTML,renderMode:o.LayoutRenderMode.Screen,className:"component"}]}},function(e,t){e.exports=n("netless-ppt")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.getter;t.inCircle=function(e,t,r,n){var o=r-i(e,"x"),a=n-i(e,"y");return o*o+a*a<=t*t},n=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.creator,s=o.caller,c=o.getter,u=o.unwrapper,l=r(18),p=r(17),h=r(25),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.points=a([]),t}return i(t,e),t.prototype.pushPoint=function(e){s(c(this,"points"),"push",[e])},t.prototype.pointHitTest=function(e,t){for(var r=0;r<c(c(this,"points"),"length");++r){var n=c(c(this,"points"),r),i=c(c(this,"points"),(r+1)%c(c(this,"points"),"length")),o=a({x:c(i,"x")-c(n,"x"),y:c(i,"y")-c(n,"y")});if(0!==c(o,"x")||0!==c(o,"y")){var u=s(l,"verticalVector",[o]),p=a({x:e-c(n,"x"),y:t-c(n,"y")});if(s(l,"dotProduct",[u,p])<0)return!1}}return!0},t.prototype.rectHitTest=function(e,t,r,n){var i=this,o=!1,a=!1;if(s(h.RectangleTester,"iterate",[e,t,r,n,function(e,t){s(i,"pointHitTest",[e,t])?o=!0:a=!0}]),o&&a)return c(p.RectangleTestingResult,"Cross");if(o)return c(p.RectangleTestingResult,"IncludeRectangle");if(a){for(var l=0;l<c(c(this,"points"),"length");++l)for(var d=c(c(this,"points"),l),f=c(c(this,"points"),(l+1)%c(c(this,"points"),"length")),y=s(h.RectangleTester,"allPoints",[e,t,r,n]),A=0;A<c(y,"length");++A){var m=c(y,A),g=c(y,(A+1)%c(y,"length"));if(s(this,"findCrossPoint",[d,f,m,g]))return c(p.RectangleTestingResult,"Cross")}for(var v=0,b=u(c(this,"points"));v<b.length;v++){var P=b[v];if(s(h.RectangleTester,"testPoint",[e,t,r,n,c(P,"x"),c(P,"y")]))return c(p.RectangleTestingResult,"IncludeByRectangle")}}return c(p.RectangleTestingResult,"Disjoint")},t.prototype.findCrossPoint=function(e,t,r,n){var i=c(t,"y")-c(e,"y"),o=c(e,"x")-c(t,"x"),u=c(e,"x")*(c(e,"y")-c(t,"y"))-c(e,"y")*(c(e,"x")-c(t,"x")),l=c(n,"y")-c(r,"y"),p=c(r,"x")-c(n,"x"),h=c(r,"x")*(c(r,"y")-c(n,"y"))-c(r,"y")*(c(r,"x")-c(n,"x")),d=i*p-l*o,f=(o*h-p*u)/d,y=(l*u-i*h)/d;if(s(Math,"abs",[f])===1/0||s(Math,"abs",[y])===1/0)return!1;if(s(Number,"isNaN",[f])||s(Number,"isNaN",[y]))return!1;var A=a({x:f,y:y});return!(!s(this,"isCrossPointBetweenSegment",[A,e,t])||!s(this,"isCrossPointBetweenSegment",[A,r,n]))},t.prototype.isCrossPointBetweenSegment=function(e,t,r){var n=(c(e,"x")-c(t,"x"))*(c(e,"x")-c(r,"x")),i=(c(e,"y")-c(t,"y"))*(c(e,"y")-c(r,"y")),o=s(Math,"abs",[n])<.01,a=s(Math,"abs",[i])<.01;return o&&a?n<=0&&i<=0:(n<=0||o)&&(i<=0||a)},t}(o.baseClass());t.ConvexPolygonTester=d,o.declareClass({classId:9,clazz:d}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.creator,s=o.caller,c=o.getter,u=r(17),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.testPoint=function(e,t,r,n,i,o){return i>=e&&i<=e+r&&o>=t&&o<=t+n},t.iterate=function(e,t,r,n,i){i(e,t),i(e+r,t),i(e+r,t+n),i(e,t+n)},t.allPoints=function(e,t,r,n){return a([a({x:e,y:t}),a({x:e+r,y:t}),a({x:e+r,y:t+n}),a({x:e,y:t+n})])},t.testRect=function(e,t,r,n,i,o,a,l){var p=s(this,"testSegment",[e,e+r,i,i+a]),h=s(this,"testSegment",[t,t+n,o,o+l]);return p===c(u.RectangleTestingResult,"Disjoint")||h===c(u.RectangleTestingResult,"Disjoint")?c(u.RectangleTestingResult,"Disjoint"):p===c(u.RectangleTestingResult,"Cross")||h===c(u.RectangleTestingResult,"Cross")?c(u.RectangleTestingResult,"Cross"):p===c(u.RectangleTestingResult,"IncludeRectangle")&&h===c(u.RectangleTestingResult,"IncludeRectangle")?c(u.RectangleTestingResult,"IncludeRectangle"):p===c(u.RectangleTestingResult,"IncludeByRectangle")&&h===c(u.RectangleTestingResult,"IncludeByRectangle")?c(u.RectangleTestingResult,"IncludeByRectangle"):c(u.RectangleTestingResult,"Cross")},t.testSegment=function(e,t,r,n){var i=e>r;if(i){var o=e,a=t;e=r,r=o,t=n,n=a}return c(u.RectangleTestingResult,t<r?"Disjoint":t<n?"Cross":i?"IncludeByRectangle":"IncludeRectangle")},t}(o.baseClass());t.RectangleTester=l,o.declareClass({classId:12,clazz:l}),o=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(42)),function(e){e.Desktop="desktop",e.Touch="touch",e.Surface="surface"}(t.DeviceType||(t.DeviceType={})),function(e){e.Triangle="triangle",e.Rhombus="rhombus",e.Pentagram="pentagram",e.SpeechBalloon="speechBalloon"}(t.ShapeType||(t.ShapeType={})),function(e){e.Freedom="freedom",e.Follower="follower",e.Broadcaster="broadcaster"}(t.ViewMode||(t.ViewMode={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.creator,l=a.caller,p=r(0),h=r(5),d=function(e){function t(t,r){var n=e.call(this,t)||this;return n.originX=0,n.originY=0,n.width=0,n.height=0,n.locked=!1,n.uniformScale=!1,s(n,"uuid",c(r,"uuid")),s(n,"originX",c(r,"centerX")-c(r,"width")/2),s(n,"originY",c(r,"centerY")-c(r,"height")/2),s(n,"width",c(r,"width")),s(n,"height",c(r,"height")),s(n,"locked",c(r,"locked")),s(n,"uniformScale",!!c(r,"uniformScale")),s(n,"imageSize",u({width:c(r,"width"),height:c(r,"height")})),n}return i(t,e),t.prototype.setImageSrc=function(e){s(this,"imageSrc",e)},Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.adjustToKeepUniformScale=function(){c(this,"imageSize")&&l(this,"keepUniformScale",[c(this,"imageSize")])},o([p.noEffects],t.prototype,"hitTestingBoxMargin",null),t}(a.wrapSuperClass(h.Editable));t.ImageShape=d,a.declareClass({classId:20,clazz:d,superClass:h.Editable,memberDecorators:{hitTestingBoxMargin:[p.noEffects]}}),a=null},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(46)),n(r(20))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.creator,s=o.setter,c=o.getter,u=o.remover,l=o.wrapper,p=o.caller,h=o.unwrapper,d=r(0),f=r(30),y=function(e){function t(t){var r=e.call(this)||this;return r.pressedMembers=a({}),s(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"isPressed",{get:function(){return!!c(c(this,"pressedMembers"),d.getAuthorId())},set:function(e){e?s(c(this,"pressedMembers"),d.getAuthorId(),!0):u(c(this,"pressedMembers"),d.getAuthorId())},enumerable:!0,configurable:!0}),t.prototype.insert=function(e,t){var r=l(new f.PluginComponent(this,e));t&&p(this,"updatePlugin",[r,t]);var n=c(c(this,"context"),"executorHub");if(n&&c(n,"enable")){var i=a({create:p(r,"snapshot",[])});p(n,"commit",[c(r,"protoKey"),i,a({delete:!0})])}return p(c(c(this,"context"),"scene"),"addComponent",[r]),r},t.prototype.get=function(e){return p(c(c(this,"context"),"scene"),"findComponentFromTop",[function(t){return h(t)instanceof f.PluginComponent&&c(t,"key")===e}])},t.prototype.list=function(){for(var e=a([]),t=0,r=h(c(c(c(this,"context"),"scene"),"components"));t<r.length;t++){var n=r[t];h(n)instanceof f.PluginComponent&&p(e,"push",[n])}return e},t.prototype.remove=function(e){for(var t=c(c(this,"context"),"scene"),r=c(t,"components"),n=0;n<c(r,"length");++n){var i=c(r,n);if(c(i,"key")===e&&h(i)instanceof f.PluginComponent){var o=c(c(this,"context"),"executorHub");return o&&c(o,"enable")&&p(o,"commit",[c(i,"protoKey"),a({delete:!0}),a({create:p(i,"snapshot",[])})]),p(t,"removeComponentAt",[n]),i}}},t.prototype.update=function(e,t){var r=p(this,"get",[e]);return r&&p(this,"updatePlugin",[r,t]),r},t.prototype.updatePlugin=function(e,t){void 0!==c(t,"originX")&&s(e,"originX",c(t,"originX")),void 0!==c(t,"originY")&&s(e,"originY",c(t,"originY")),void 0!==c(t,"width")&&s(e,"width",c(t,"width")),void 0!==c(t,"height")&&s(e,"height",c(t,"height")),void 0!==c(t,"selectable")&&s(e,"selectable",c(t,"selectable")),void 0!==c(t,"attributes")&&s(e,"attributes",c(t,"attributes")),void 0!==c(t,"locked")&&s(e,"locked",c(t,"locked"))},t}(o.baseClass());t.PluginManager=y,o.declareClass({classId:2,clazz:y}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.getter,c=a.setter,u=r(0),l=r(31),p=function(e){function t(t,r){var n=e.call(this,s(t,"context"))||this;return n.hitTestingBoxMargin=0,n.originX=0,n.originY=0,n.width=0,n.height=0,n.selectable=!0,n.locked=!1,n.attributes=void 0,c(n,"manager",t),c(n,"kind",r),n}return i(t,e),Object.defineProperty(t.prototype,"isPressed",{get:function(){return s(s(this,"manager"),"isPressed")},enumerable:!0,configurable:!0}),o([u.noEffects],t.prototype,"isPressed",null),t}(a.wrapSuperClass(l.Editable));t.PluginComponent=p,a.declareClass({classId:1,clazz:p,superClass:l.Editable,memberDecorators:{isPressed:[u.noEffects]}}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(48));var n=r(28);t.SceneNode=n.SceneNode;var i=r(26);t.DeviceType=i.DeviceType,t.ViewMode=i.ViewMode;var o=r(11);t.ApplianceComponent=o.ApplianceComponent;var a=r(5);t.Editable=a.Editable;var s=r(50);t.EllipseShape=s.EllipseShape;var c=r(52);t.Shape=c.Shape;var u=r(53);t.RectangleShape=u.RectangleShape;var l=r(54);t.CurveShape=l.CurveShape;var p=r(55);t.BezierCurveShape=p.BezierCurveShape;var h=r(56);t.EditorRectangleSpace=h.EditorRectangleSpace;var d=r(57);t.SelectedGroupRectangleSpace=d.SelectedGroupRectangleSpace;var f=r(27);t.ImageShape=f.ImageShape;var y=r(10);t.TextareaShape=y.TextareaShape;var A=r(58);t.VectorShape=A.VectorShape,t.VectorKind=A.VectorKind,t.VectorDirection=A.VectorDirection;var m=r(20);t.BackgroundImage=m.BackgroundImage},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.caller,o=n.unwrapper,a=n.creator,s=n.getter,c=r(5),u=r(12);function l(e,t){return e<=1&&t<=1}t.willIgnoreSelectingBox=l,t.setHighlightNothing=function(e,t){i(e,"forEachComponents",[function(e){o(e)instanceof c.Editable&&i(e,"setHighlightBy",[!1,t])}])},t.findHighlightComponent=function(e,t){return i(e,"findComponentFromTop",[function(e){return o(e)instanceof c.Editable&&i(e,"isHighlightBy",[t])}])},t.searchEditableComponentsByRectangle=function(e,t,r,n,p){if(l(n,p))return a([]);var h=a([]);return i(e,"forEachComponents",[function(e){o(e)instanceof c.Editable&&s(e,"selectable")&&!s(e,"locked")&&i(e,"rectHitTest",[t,r,n,p])!==s(u.RectangleTestingResult,"Disjoint")&&i(h,"push",[e])}]),h},n=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unitPentagramPoints=[{x:145.12590685774623,y:79.47620126437747},{x:229.24914066468054,y:81.19050316094368},{x:162.19965626587222,y:132.02379873562253},{x:186.56476714436556,y:212.55949683905635},{x:117.5,y:164.5},{x:48.435232855634396,y:212.5594968390563},{x:72.80034373412778,y:132.02379873562253},{x:5.750859335319461,y:81.19050316094368},{x:89.87409314225377,y:79.47620126437747},{x:117.5,y:0}].map((function(e){return{x:e.x/231,y:e.y/214}}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r,n){var i=t.x,o=t.y,a=n[0],s=a.x,c=a.y,u=(1-e)*(1-e)*i+2*e*(1-e)*s+e*e*r.x,l=(1-e)*(1-e)*o+2*e*(1-e)*c+e*e*r.y;return Object.freeze({x:u,y:l})};t.getBezierPoints=function(e,t,r){void 0===e&&(e=100);for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=null,s=[];if(1!==i.length)throw Error("Please ensure that the number of control points of the Bezier curve is correct");a=n,s.push(t);for(var c=0;c<e;c++)s.push(a(c/e,t,r,i));return s.push(r),s}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(95)),n(r(101)),n(r(63))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var c=s(r(3)),u=r(4),l=r(2);t.floatBarDefinition=u.createComponentDefinition({name:"FloatBar",hitTest:!1});var p=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r.willInterruptEvent=function(e,t){var r=e.context.floatBarClass;return!(!r||!r.willInterruptEvent)&&r.willInterruptEvent(e,t)},r.prototype.render=function(){var e=this.props.context.floatBarClass;return e&&this.isTargetOnScreen()?c.createElement(e,o({},this.props.payload,{cnode:this.props.cnode})):null},r.prototype.isTargetOnScreen=function(){var e=this.props.payload,t=e.rectangle,r=e.screenSize,n=t.originX;if(n+t.width<=0||n>=r.width)return!1;var i=t.originY;return!(i+t.height<=0||i>=r.height)},a([l.register.floatBarEngine.bind(t.floatBarDefinition)],r)}(c.Component);t.FloatBarEditorRectangleSpaceComponent=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0).__context("module"),c=s.setter,u=s.wrapper,l=s.getter,p=s.caller,h=s.creator,d=s.unwrapper,f=s.remover,y=r(0),m=r(16),g=r(41),v=r(27),b=r(43),P=r(16),S=r(44),w=r(28),x=r(29),O=r(59),k=r(19),M=function(e){function t(t){var r=e.call(this)||this;return c(r,"_globalState",t),c(r,"scenes",u(new w.SceneManager)),c(r,"pluginManager",u(new x.PluginManager(r))),c(r,"invisiblePluginManager",u(new O.InvisiblePluginManager)),c(r,"membersManager",u(new g.MembersManager(l(r,"scenes")))),c(r,"adminObserverMemberState",p(r,"createMemberState",[h([0,0,0])])),r}return i(t,e),Object.defineProperty(t.prototype,"deviceType",{get:function(){return p(l(this,"membersManager"),"getDeviceType",[p(y,"getAuthorId",[])])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return l(l(this,"scenes"),"currentScene")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"executorHub",{get:function(){return p(l(this,"membersManager"),"getExecutorHub",[p(y,"getAuthorId",[])])},enumerable:!0,configurable:!0}),t.prototype.createAppliances=function(){var e=h({}),t=p(this,"createConstructors",[]);for(var r in d(t)){var n=l(t,r);c(e,r,u(new n(this)))}return e},t.prototype.onMemberEnterRoom=function(e,t){var r=p(y,"getAuthorId",[]),n=p(l(this,"membersManager"),"initiativeColor",[]),i=p(y,"getUser",[r]),o=h({id:l(i,"userId"),session:l(i,"session"),payload:l(i,"payload")});p(l(this,"membersManager"),"memberEnter",[h({memberId:r,deviceType:t,information:o,appliances:p(this,"createAppliances",[]),memberState:p(this,"createMemberState",[n]),executorHub:u(new S.ExecutorHub(this))})])},t.prototype.onMemberLeaveRoom=function(){var e=p(y,"getAuthorId",[]);p(l(this,"membersManager"),"memberLeave",[e]),c(p(this,"getPluginManager",[]),"isPressed",!1)},t.prototype.onOthersEvent=function(e,t,r){var n=p(y,"getAuthorId",[]);r!==l(l(y,"EventScope"),"System")&&p(l(this,"membersManager"),"isMemberExits",[n])&&p(l(this,"membersManager"),"dispatchMagixEvent",[n,e,t])},t.prototype.changeScene=function(e){var t=l(l(this,"scenes"),"currentPath");c(l(this,"scenes"),"currentPath",e),p(l(this,"scenes"),"isPathEquals",[t,l(l(this,"scenes"),"currentPath")])||p(l(this,"membersManager"),"notifyAllThatSceneChanged",[t])},t.prototype.putScenes=function(e,t,r){for(var n=0;n<l(t,"length");++n){var i=l(t,n),o=u(new w.SceneNode(l(i,"name"),l(i,"ppt"))),a=void 0===r||r<0?void 0:r+n;p(l(this,"scenes"),"putScene",[e,o,a])}},t.prototype.removeScenes=function(e){var t=l(l(this,"scenes"),"currentPath");p(l(this,"scenes"),"removePath",[e]),p(l(this,"scenes"),"isPathEquals",[t,l(l(this,"scenes"),"currentPath")])||p(l(this,"membersManager"),"notifyAllThatSceneChanged",[t])},t.prototype.moveScene=function(e,t){var r=l(l(this,"scenes"),"currentPath");p(l(this,"scenes"),"moveScene",[e,t]),p(l(this,"scenes"),"isPathEquals",[r,l(l(this,"scenes"),"currentPath")])||p(l(this,"membersManager"),"notifyAllThatSceneChanged",[r])},t.prototype.insertImage=function(e){var t=u(new v.ImageShape(this,e)),r=l(this,"executorHub");if(r&&l(r,"enable")){var n=h({create:p(t,"snapshot",[])});p(r,"commit",[l(t,"protoKey"),n,h({delete:!0})])}p(l(this,"scene"),"addComponent",[t])},t.prototype.lockImage=function(e,t){c(p(this,"getImageWith",[e]),"locked",t),p(p(this,"getAppliance",["selector"]),"refreshAllUsersEditorRectangleSpace",[])},t.prototype.lockImages=function(e){p(l(this,"scene"),"forEachComponents",[function(t){var r=p(y,"getAuthorId",[]);d(t)instanceof v.ImageShape&&l(t,"selectedBy")===r&&c(t,"locked",e)}]),p(p(this,"getAppliance",["selector"]),"refreshAllUsersEditorRectangleSpace",[])},t.prototype.completeImageUpload=function(e,t){p(p(this,"getImageWith",[e]),"setImageSrc",[t])},t.prototype.setImageLock=function(e,t){c(p(this,"getImageWith",[e]),"locked",t)},t.prototype.getImageWith=function(e){var t=p(l(this,"scene"),"findComponentFromTop",[function(t){return d(t)instanceof v.ImageShape&&l(t,"uuid")===e}]);if(!t)throw u(new Error("uuid "+e+" not found"));return t},t.prototype.setGlobalState=function(e){var t=h(o({},d(l(this,"_globalState"))));for(var r in d(e)){var n=l(e,r);void 0===n?f(t,r):c(t,r,n)}return c(this,"_globalState",t),l(this,"_globalState")},t.prototype.updateGlobalState=function(e,t){var r=h(o({},d(l(this,"_globalState"))));return k.updateTree(r,e,t),c(this,"_globalState",r),p(this,"takeCommit",[])},t.prototype.setMemberState=function(e){return p(l(this,"membersManager"),"setMemberState",[p(y,"getAuthorId",[]),e])},t.prototype.setMemberStateWithCommitter=function(e){var t=p(l(this,"membersManager"),"setMemberState",[p(y,"getAuthorId",[]),e]),r=p(this,"takeCommit",[]);return h({memberState:t,committer:r})},t.prototype.updateMemberState=function(e,t){return p(l(this,"membersManager"),"updateMemberState",[p(y,"getAuthorId",[]),e,t]),p(this,"takeCommit",[])},t.prototype.setViewState=function(e){return p(l(this,"membersManager"),"setViewState",[p(y,"getAuthorId",[]),e])},t.prototype.updateTextareaFormat=function(e,t){return P.setTextareaFormat(l(this,"scene"),e,t),p(p(this,"getAppliance",["selector"]),"refreshMyEditorRectangleSpace",[]),p(this,"takeCommit",[])},t.prototype.updateTextareaScale=function(e){return p(m,"setTextareaScale",[l(this,"scene"),e]),p(p(this,"getAppliance",["selector"]),"refreshMyEditorRectangleSpace",[]),p(this,"takeCommit",[])},t.prototype.updateTextareaFontSize=function(e){return P.setTextareaFontSize(l(this,"scene"),e),p(p(this,"getAppliance",["selector"]),"refreshMyEditorRectangleSpace",[]),p(this,"takeCommit",[])},t.prototype.updateTextarea=function(e,t){p(m,"updateTextarea",[l(this,"scene"),e,t])},t.prototype.hasEditingTextarea=function(){return p(m,"hasEditingTextarea",[l(this,"scene")])},t.prototype.releaseAllTextarea=function(){return p(m,"releaseAllTextarea",[l(this,"scene")]),p(this,"takeCommit",[])},t.prototype.getScene=function(e){var t=void 0===e?l(l(this,"scenes"),"currentScene"):p(l(this,"scenes"),"getScene",[e]);if(t)return h({name:l(t,"name"),ppt:l(t,"ppt")})},t.prototype.getCurrentScenePath=function(){return l(l(this,"scenes"),"currentPath")},t.prototype.getAllScenePaths=function(){return p(l(this,"scenes"),"listAllScenes",[])},t.prototype.getSceneNames=function(e){return p(l(this,"scenes"),"listScenes",[e])},t.prototype.getSceneGroupNames=function(e){return p(l(this,"scenes"),"listSceneGroups",[e])},t.prototype.getInformationWithMemberId=function(e){return p(l(this,"membersManager"),"getInformationWithMemberId",[e])},t.prototype.getAppliance=function(e,t){return void 0===t&&(t=p(y,"getAuthorId",[])),p(l(this,"membersManager"),"getAppliance",[e,t])},t.prototype.getMemberState=function(e,t){var r;return void 0===e&&(e=p(y,"getAuthorId",[])),(r=e===l(y,"AdminObserverId")?l(this,"adminObserverMemberState"):p(l(this,"membersManager"),"getMemberState",[e]))&&k.getTreeValue(r,t)},t.prototype.getViewState=function(e){return void 0===e&&(e=p(y,"getAuthorId",[])),p(l(this,"membersManager"),"getViewState",[e])},t.prototype.getMemberIdWithUserId=function(e){return p(l(this,"membersManager"),"getMemberIdWithUserId",[e])},t.prototype.getBroadcasterId=function(){return p(l(this,"membersManager"),"getBroadcasterId",[])},t.prototype.getGlobalState=function(e){return k.getTreeValue(l(this,"_globalState"),e)},t.prototype.getMemberDisplayers=function(){return p(l(this,"membersManager"),"getMemberDisplayers",[])},Object.defineProperty(t.prototype,"enableExecute",{get:function(){var e=p(l(this,"membersManager"),"getExecutorHub",[p(y,"getAuthorId",[])]);return!!e&&l(e,"enable")},enumerable:!0,configurable:!0}),t.prototype.setEnableExecute=function(e){var t=p(l(this,"membersManager"),"getExecutorHub",[p(y,"getAuthorId",[])]);t&&c(t,"enable",e)},t.prototype.execute=function(e){var t=p(l(this,"membersManager"),"getExecutorHub",[p(y,"getAuthorId",[])]);t&&(p(t,"execute",[e]),p(this,"takeCommit",[]))},t.prototype.onMouseDown=function(e){var t=p(y,"getAuthorId",[]),r=p(l(this,"membersManager"),"currentAppliance",[t]);return r&&(p(r,"onMouseDown",[e]),p(l(this,"membersManager"),"setCursor",[t,l(e,"x"),l(e,"y"),!0,!0])),c(p(this,"getPluginManager",[]),"isPressed",!0),p(this,"takeCommit",[])},t.prototype.onMouseMove=function(e){var t=p(y,"getAuthorId",[]),r=p(l(this,"membersManager"),"currentAppliance",[t]);return r&&(p(r,"onMouseMove",[e]),p(l(this,"membersManager"),"setCursor",[t,l(e,"x"),l(e,"y"),!0])),p(this,"takeCommit",[])},t.prototype.onMouseUp=function(e){var t=p(y,"getAuthorId",[]),r=p(l(this,"membersManager"),"currentAppliance",[t]);return r&&(p(r,"onMouseUp",[e]),p(l(this,"membersManager"),"setCursor",[t,l(e,"x"),l(e,"y"),!0,!1])),c(p(this,"getPluginManager",[]),"isPressed",!1),p(this,"takeCommit",[])},t.prototype.onMouseLeave=function(e){var t=p(y,"getAuthorId",[]),r=p(l(this,"membersManager"),"currentAppliance",[t]);return r&&(p(r,"onMouseLeave",[e]),p(l(this,"membersManager"),"setCursor",[t,l(e,"x"),l(e,"y"),!1])),p(this,"takeCommit",[])},t.prototype.onKeyDown=function(e){var t=p(y,"getAuthorId",[]),r=p(l(this,"membersManager"),"currentAppliance",[t]);return r&&p(r,"onKeyDown",[e]),p(this,"takeCommit",[])},t.prototype.onKeyUp=function(e){var t=p(y,"getAuthorId",[]),r=p(l(this,"membersManager"),"currentAppliance",[t]);return r&&p(r,"onKeyUp",[e]),p(this,"takeCommit",[])},t.prototype.delete=function(){return p(p(this,"getAppliance",["selector"]),"delete",[]),p(this,"takeCommit",[])},t.prototype.duplicate=function(e,t){var r=p(this,"getViewState",[]),n=l(r,"originX"),i=l(r,"originY"),o=l(r,"width"),a=l(r,"height"),s=l(r,"pixelWidth"),c=n+o/2+s*e,u=i+a/2+s*t;return p(p(this,"getAppliance",["selector"]),"duplicate",[c,u]),p(this,"takeCommit",[])},t.prototype.copy=function(){var e=p(p(this,"getAppliance",["selector"]),"copy",[]);return e?p(e,"snapshot",[]):null},t.prototype.paste=function(e,t,r){var n=p(this,"getViewState",[]),i=l(n,"originX"),o=l(n,"originY"),a=l(n,"width"),s=l(n,"height"),c=l(n,"pixelWidth"),u=i+a/2+c*t,h=o+s/2+c*r;return p(p(b.CopyBuffer,"recover",[this,e]),"injectToScene",[this,u,h]),p(this,"takeCommit",[])},t.prototype.createBezierCurve=function(e){var t=p(this,"getAppliance",["pencil"]),r=null;return t&&(r=p(t,"createBezierCurve",[e]),p(l(this,"membersManager"),"setCursor",[p(y,"getAuthorId",[]),l(e,"x"),l(e,"y"),!0,!0])),r},t.prototype.updateBezierCurveTail=function(e,t){var r=p(this,"getAppliance",["pencil"]);r&&(p(r,"updateBezierCurveTail",[e,t]),p(l(this,"membersManager"),"setCursor",[p(y,"getAuthorId",[]),l(l(e,"point3"),"x"),l(l(e,"point3"),"y"),!0]))},t.prototype.splitBezierCurveTail=function(e,t){var r=p(this,"getAppliance",["pencil"]);if(r){var n=p(y,"getAuthorId",[]),i=l(l(e,l(e,"length")-1),"point3");p(r,"splitBezierCurveTail",[e,t]),p(l(this,"membersManager"),"setCursor",[n,l(i,"x"),l(i,"y"),!0])}},t.prototype.addBezierCurveExtraSteups=function(){var e=p(this,"getAppliance",["pencil"]);e&&p(e,"addBezierCurveExtraSteups",[])},t.prototype.completePencilPainting=function(e,t){var r=p(this,"getAppliance",["pencil"]);return r&&(p(r,"completePainting",[]),p(l(this,"membersManager"),"setCursor",[p(y,"getAuthorId",[]),e,t,!0,!1])),p(this,"takeCommit",[])},t.prototype.cancelPencilPainting=function(e,t){var r=p(this,"getAppliance",["pencil"]);r&&(p(r,"cancelPainting",[]),p(l(this,"membersManager"),"setCursor",[p(y,"getAuthorId",[]),e,t,!0,!1]))},t.prototype.cleanCurrentScene=function(e){return p(l(this,"scene"),"cleanComponents",[this]),e||p(l(this,"scene"),"cleanPPT",[this]),p(this,"takeCommit",[])},t.prototype.getPlugin=function(e){return p(p(this,"getPluginManager",[]),"get",[e])},t.prototype.listPlugins=function(){return p(p(this,"getPluginManager",[]),"list",[])},t.prototype.getInvisiblePluginKinds=function(){return p(p(this,"getInvisiblePluginManager",[]),"getKinds",[])},t.prototype.hasInvisibilePluginKind=function(e){return p(p(this,"getInvisiblePluginManager",[]),"hasKind",[e])},t.prototype.insertPlugin=function(e,t){return p(p(this,"getPluginManager",[]),"insert",[e,t])},t.prototype.removePlugin=function(e){var t=p(p(this,"getPluginManager",[]),"remove",[e]);return p(p(this,"getAppliance",["selector"]),"refreshAllUsersEditorRectangleSpace",[]),t},t.prototype.updatePlugin=function(e,t){return p(p(this,"getPluginManager",[]),"update",[e,t])},t.prototype.putInvisiblePlugin=function(e,t){p(p(this,"getInvisiblePluginManager",[]),"put",[e,t])},t.prototype.removeInvisiblePlugin=function(e){p(p(this,"getInvisiblePluginManager",[]),"remove",[e])},t.prototype.getAttributesWithInvisiblePlugin=function(e,t){return p(p(this,"getInvisiblePluginManager",[]),"getAttributes",[e,t])},t.prototype.updateAttributesInvisiblePlugin=function(e,t){p(p(this,"getInvisiblePluginManager",[]),"updateAttributes",[e,t])},t.prototype.updateAttributesInvisiblePluginWithKeys=function(e,t,r){p(p(this,"getInvisiblePluginManager",[]),"updateAttributesWithKeys",[e,t,r])},t.prototype.moveSelectedComponentsToTop=function(){p(p(this,"getAppliance",["selector"]),"moveSelectedComponentsToTop",[])},t.prototype.moveSelectedComponentsToBottom=function(){p(p(this,"getAppliance",["selector"]),"moveSelectedComponentsToBottom",[])},t.prototype.getPluginManager=function(){if(!l(this,"pluginManager")){if(p(y,"getEnvironment",[])===l(l(y,"Environment"),"NoEffects"))return u(new x.PluginManager(this));c(this,"pluginManager",u(new x.PluginManager(this)))}return l(this,"pluginManager")},t.prototype.getInvisiblePluginManager=function(){if(!l(this,"invisiblePluginManager")){if(p(y,"getEnvironment",[])===l(l(y,"Environment"),"NoEffects"))return u(new O.InvisiblePluginManager);c(this,"invisiblePluginManager",u(new O.InvisiblePluginManager))}return l(this,"invisiblePluginManager")},t.prototype.takeCommit=function(){var e=p(l(this,"membersManager"),"getExecutorHub",[p(y,"getAuthorId",[])]);return e?p(e,"takeCommit",[]):null},a([y.noEffects],t.prototype,"scene",null),a([y.noEffects],t.prototype,"enableExecute",null),t}(s.baseClass());t.AbstractApplianceManager=M,s.declareClass({classId:3,clazz:M,memberDecorators:{scene:[y.noEffects],enableExecute:[y.noEffects],onMemberEnterRoom:[y.event("Enter")],onMemberLeaveRoom:[y.event("Leave")],onOthersEvent:[y.event(/./i)],hasEditingTextarea:[y.noEffects],getScene:[y.noEffects],getCurrentScenePath:[y.noEffects],getAllScenePaths:[y.noEffects],getSceneNames:[y.noEffects],getSceneGroupNames:[y.noEffects],getInformationWithMemberId:[y.noEffects],getMemberState:[y.noEffects],getViewState:[y.noEffects],getMemberIdWithUserId:[y.noEffects],getBroadcasterId:[y.noEffects],getGlobalState:[y.noEffects],getMemberDisplayers:[y.noEffects],getPlugin:[y.noEffects],listPlugins:[y.noEffects],getInvisiblePluginKinds:[y.noEffects],hasInvisibilePluginKind:[y.noEffects],getAttributesWithInvisiblePlugin:[y.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.getter,c=a.caller,u=a.wrapper,l=a.creator,p=r(0),h=r(12),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return p.findIdentifierWith(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return p.findIdentifierWith(this)},enumerable:!0,configurable:!0}),t.prototype.rectHitTestContent=function(e,t,r,n,i,o){return e},t.prototype.rectHitTest=function(e,t,r,n){var i=s(this,"hitTestingBoxMargin"),o=c(this,"rectangleTester",[i]),a=c(o,"rectHitTest",[e,t,r,n]);if(a===s(h.RectangleTestingResult,"Disjoint")||a===s(h.RectangleTestingResult,"IncludeByRectangle"))return a;var u=e-s(this,"originX"),l=t-s(this,"originY"),p=e+r-s(this,"originX"),d=t+n-s(this,"originY"),f=c(Math,"min",[u,p]),y=c(Math,"min",[l,d]),A=c(Math,"abs",[u-p]),m=c(Math,"abs",[l-d]);return c(this,"rectHitTestContent",[a,f,y,A,m,i])},t.prototype.rectangleTester=function(e){var t=u(new h.ConvexPolygonTester),r=s(this,"originX")-e,n=s(this,"originY")-e,i=s(this,"width")+2*e,o=s(this,"height")+2*e;return c(t,"pushPoint",[l({x:r,y:n})]),c(t,"pushPoint",[l({x:r+i,y:n})]),c(t,"pushPoint",[l({x:r+i,y:n+o})]),c(t,"pushPoint",[l({x:r,y:n+o})]),t},o([p.noEffects],t.prototype,"key",null),o([p.noEffects],t.prototype,"identifier",null),t}(a.baseClass());t.ApplianceComponent=d,a.declareClass({classId:5,clazz:d,memberDecorators:{key:[p.noEffects],identifier:[p.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=o.creator,c=o.getter,u=o.caller,l=r(18),p=function(e){function t(t,r,n){var i=e.call(this)||this;return i.originPoint=n,a(i,"beginVector",s({x:c(t,"x")-c(n,"x"),y:c(t,"y")-c(n,"y")})),a(i,"endVector",s({x:c(r,"x")-c(n,"x"),y:c(r,"y")-c(n,"y")})),i}return i(t,e),t.prototype.hitTest=function(e,t){var r=s({x:e-c(c(this,"originPoint"),"x"),y:t-c(c(this,"originPoint"),"y")}),n=u(Math,"atan2",[c(c(this,"beginVector"),"y"),c(c(this,"beginVector"),"x")]),i=u(Math,"atan2",[c(c(this,"endVector"),"y"),c(c(this,"endVector"),"x")]),o=u(Math,"atan2",[c(r,"y"),c(r,"x")]),a=u(this,"radiusIncrement",[o,n]),p=u(this,"radiusIncrement",[i,n]);if(a>p)return!1;var h=s({x:0,y:0}),d=u(l,"distance",[s({x:e,y:t}),c(this,"originPoint")]),f=u(l,"distance",[c(this,"beginVector"),h]);return d<=f+a/p*(u(l,"distance",[c(this,"endVector"),h])-f)},t.prototype.radiusIncrement=function(e,t){var r=t-e;return r>=2*c(Math,"PI")?r-=2*c(Math,"PI"):r<0&&(r+=2*c(Math,"PI")),r},t}(o.baseClass());t.SectorTester=p,o.declareClass({classId:13,clazz:p}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.creator,s=o.caller,c=o.getter,u=o.wrapper,l=r(18),p=r(24),h=r(23),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.points=a([]),t}return i(t,e),t.prototype.pushPoint=function(e){s(c(this,"points"),"push",[e])},t.prototype.hitTest=function(e,t,r){return s(this,"hitAnySegments",[e,t,r])||s(this,"hitAnyNodeCircles",[e,t,r])},t.prototype.hitAnySegments=function(e,t,r){for(var n=e/2,i=1;i<c(c(this,"points"),"length");++i){var o=c(c(this,"points"),i-1),h=c(c(this,"points"),i),d=a({x:c(h,"x")-c(o,"x"),y:c(h,"y")-c(o,"y")});if(!s(l,"isZero",[c(d,"x")])||!s(l,"isZero",[c(d,"y")])){var f=s(l,"unitVector",[s(l,"verticalVector",[d])]),y=u(new p.ConvexPolygonTester),A=s(l,"multiply",[-n,f]),m=s(l,"multiply",[n,f]);if(s(y,"pushPoint",[s(l,"plus",[o,m])]),s(y,"pushPoint",[s(l,"plus",[o,A])]),s(y,"pushPoint",[s(l,"plus",[h,A])]),s(y,"pushPoint",[s(l,"plus",[h,m])]),s(y,"pointHitTest",[t,r]))return!0}}return!1},t.prototype.hitAnyNodeCircles=function(e,t,r){for(var n=0;n<c(c(this,"points"),"length");++n){var i=c(c(this,"points"),n);if(h.inCircle(i,e/2,t,r))return!0}return!1},t}(o.baseClass());t.PolylineTester=d,o.declareClass({classId:11,clazz:d}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.creator,l=a.unwrapper,p=a.caller,h=a.wrapper,d=a.remover,f=r(19),y=r(26),A=function(e){function t(t,r,n,i,o,a,c){var u=e.call(this)||this;return u.isRtcConnected=!1,u.cursorX=0,u.cursorY=0,u.isPressed=!1,u.isCursorInScene=!1,s(u,"_memberId",t),s(u,"_deviceType",r),s(u,"appliances",n),s(u,"memberState",i),s(u,"viewState",o),s(u,"_information",c),s(u,"executorHub",a),u}return i(t,e),Object.defineProperty(t.prototype,"information",{get:function(){return c(this,"_information")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"memberId",{get:function(){return c(this,"_memberId")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceType",{get:function(){return c(this,"_deviceType")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayer",{get:function(){var e=c(this,"cursorX"),t=c(this,"cursorY"),r=c(c(this,"currentAppliance"),"fixedCursorInScenePoint");if(r){var n=c(r,"x"),i=c(r,"y"),a=c(this,"viewState"),s=c(a,"originX"),p=c(a,"originY"),h=c(a,"width"),d=c(a,"height");e=0===h?.5:(n-s)/h,t=0===d?.5:(i-p)/d}return u(o({},l(c(this,"viewState")),{cursorX:e,cursorY:t,memberId:c(this,"_memberId"),deviceType:c(this,"_deviceType"),isRtcConnected:c(this,"isRtcConnected"),isPressed:c(this,"isPressed"),isActivity:!!r||c(this,"isPressed"),isCursorInScene:!!r||c(this,"isCursorInScene"),currentApplianceName:c(c(this,"memberState"),"currentApplianceName"),color:c(c(this,"memberState"),"strokeColor"),information:c(this,"_information")}))},enumerable:!0,configurable:!0}),t.prototype.isCursorOutOfBounds=function(){return c(this,"cursorX")>1||c(this,"cursorX")<0||c(this,"cursorY")>1||c(this,"cursorY")<0},Object.defineProperty(t.prototype,"currentAppliance",{get:function(){var e=c(c(this,"memberState"),"currentApplianceName");return c(c(this,"appliances"),e)||c(c(this,"appliances"),"pencil")},enumerable:!0,configurable:!0}),t.prototype.getAppliance=function(e){return c(c(this,"appliances"),e)},t.prototype.setViewMode=function(e){s(c(this,"viewState"),"mode",e)},t.prototype.notifyAllThatSceneChanged=function(e){for(var t in l(c(this,"appliances")))p(c(c(this,"appliances"),t),"onSceneChanged",[e])},t.prototype.getMemberState=function(){return c(this,"memberState")},t.prototype.getExecutorHub=function(){return c(this,"executorHub")},t.prototype.getViewState=function(){return c(this,"viewState")},t.prototype.setCursor=function(e,t,r,n){var i=c(this,"viewState"),o=c(i,"originX"),a=c(i,"originY"),u=c(i,"width"),l=c(i,"height");s(this,"cursorX",0===u?.5:(e-o)/u),s(this,"cursorY",0===l?.5:(t-a)/l),void 0!==r&&s(this,"isCursorInScene",r),void 0!==n&&s(this,"isPressed",n)},t.prototype.changeToFollower=function(e){var t=c(this,"viewState");if(s(this,"viewState",u(o({},l(t),l(e),{mode:c(y.ViewMode,"Follower")}))),0!==c(t,"width")&&0!==c(t,"height")){var r=c(e,"width")/c(t,"width"),n=c(e,"height")/c(t,"height"),i=p(Math,"max",[r,n]),a=(c(t,"width")*i-c(e,"width"))/2,h=(c(t,"height")*i-c(e,"height"))/2;s(this,"cursorX",c(this,"cursorX")-a/c(e,"width")),s(this,"cursorY",c(this,"cursorY")-h/c(e,"height"))}},t.prototype.setMemberState=function(e){var t=c(this,"memberState"),r=c(e,"currentApplianceName");if(r&&!c(c(this,"appliances"),r))throw h(new Error("invalid appliance: "+r));var n=u(o({},l(t)));for(var i in l(e)){var a=c(e,i);void 0===a?d(n,i):s(n,i,a)}for(var f in s(this,"memberState",n),l(c(this,"appliances")))p(c(c(this,"appliances"),f),"onMemberStateChanged",[c(this,"memberState"),t]);return c(this,"memberState")},t.prototype.updateMemberState=function(e,t){var r=c(this,"memberState");if("currentApplianceName"===e&&!c(c(this,"appliances"),t))throw h(new Error("invalid appliance: "+t));var n=u(o({},l(r)));for(var i in f.updateTree(n,e,t),s(this,"memberState",n),l(c(this,"appliances")))p(c(c(this,"appliances"),i),"onMemberStateChanged",[c(this,"memberState"),r])},t.prototype.setViewState=function(e){var t=c(this,"viewState");return s(this,"viewState",u(o({},l(t),l(e)))),c(this,"viewState")},t.prototype.dispatchMagixEvent=function(e,t){for(var r in l(c(this,"appliances")))p(c(c(this,"appliances"),r),"onMagixEvent",[e,t])},t.prototype.destroy=function(){for(var e in l(c(this,"appliances")))p(c(c(this,"appliances"),e),"onDestroy",[])},t}(a.baseClass()),m=function(e){function t(t){var r=e.call(this)||this;return r.initiativeColors=y.getInitiativeColors(),r.membersMap=u({}),s(r,"scenes",t),r}return i(t,e),t.prototype.isMemberExits=function(e){return!!c(c(this,"membersMap"),e)},t.prototype.getBroadcasterId=function(){return c(this,"broadcasterId")},t.prototype.findMemberIdWithUserId=function(e){for(var t in l(c(this,"membersMap"))){var r=c(c(this,"membersMap"),t);if(e===(c(r,"information")&&c(c(r,"information"),"id")))return parseInt(t)}},t.prototype.getInformationWithMemberId=function(e){return c(c(this,"membersMap"),e)&&c(c(c(this,"membersMap"),e),"information")},t.prototype.getMemberDisplayers=function(){var e=u([]);for(var t in l(c(this,"membersMap"))){var r=c(c(this,"membersMap"),t);p(e,"push",[c(r,"displayer")])}return e},t.prototype.memberEnter=function(e){var t=c(e,"memberId"),r=c(e,"deviceType"),n=c(e,"information"),i=c(e,"appliances"),o=c(e,"memberState"),a=c(e,"executorHub");s(c(this,"membersMap"),t,h(new A(t,r,i,o,p(this,"enterMemberViewState",[]),a,n))),p(this,"compareDirector",[t,c(this,"directorId")])<0&&s(this,"directorId",t)},t.prototype.enterMemberViewState=function(){if(void 0===c(this,"broadcasterId"))return p(this,"getDefaultViewState",[]);var e=p(c(c(this,"membersMap"),c(this,"broadcasterId")),"getViewState",[]);return u({mode:c(y.ViewMode,"Follower"),pixelWidth:c(e,"pixelWidth"),originX:c(e,"originX"),originY:c(e,"originY"),width:c(e,"width"),height:c(e,"height")})},t.prototype.memberLeave=function(e){var t=c(c(this,"membersMap"),e);t&&(p(t,"destroy",[]),d(c(this,"membersMap"),e),c(this,"broadcasterId")===e&&p(this,"cancelBroadcaster",[]),p(this,"updateDirector",[]))},t.prototype.updateDirector=function(){var e=u([]);for(var t in l(c(this,"membersMap")))p(e,"push",[parseInt(t)]);0===c(e,"length")?s(this,"directorId",void 0):(p(e,"sort",[p(c(this,"compareDirector"),"bind",[this])]),s(this,"directorId",c(e,0)))},t.prototype.getDeviceType=function(e){return c(c(c(this,"membersMap"),e),"deviceType")},t.prototype.getMemberState=function(e){var t=c(c(this,"membersMap"),e);return t?p(t,"getMemberState",[]):void 0},t.prototype.getExecutorHub=function(e){return c(c(this,"membersMap"),e)?p(c(c(this,"membersMap"),e),"getExecutorHub",[]):void 0},t.prototype.getMemberIdWithUserId=function(e){for(var t in l(c(this,"membersMap"))){var r=c(c(this,"membersMap"),t);if(c(r,"information")&&c(c(r,"information"),"id")===e)return c(r,"memberId")}},t.prototype.getViewState=function(e){var t=c(c(this,"membersMap"),e);if(t)return p(t,"getViewState",[]);if(void 0!==c(this,"directorId")){var r,n=p(c(c(this,"membersMap"),c(this,"directorId")),"getViewState",[]);return r=c(n,"mode")===c(y.ViewMode,"Broadcaster")?c(y.ViewMode,"Follower"):c(y.ViewMode,"Freedom"),u(o({},l(n),{mode:r}))}return p(this,"getDefaultViewState",[])},t.prototype.getDefaultViewState=function(){var e=0,t=0,r=0,n=0;if(c(this,"scenes")){var i=c(c(c(this,"scenes"),"currentScene"),"ppt");i&&(e=-(r=c(i,"width"))/2,t=-(n=c(i,"height"))/2)}return u({originX:e,originY:t,width:r,height:n,mode:c(y.ViewMode,"Freedom"),pixelWidth:1})},t.prototype.setMemberState=function(e,t){return p(c(c(this,"membersMap"),e),"setMemberState",[t])},t.prototype.updateMemberState=function(e,t,r){p(c(c(this,"membersMap"),e),"updateMemberState",[t,r])},t.prototype.setViewState=function(e,t){var r=c(t,"mode");if(r!==c(y.ViewMode,"Follower")||void 0!==c(this,"broadcasterId")&&c(this,"broadcasterId")!==e||(d(t,"mode"),r=void 0),r===c(y.ViewMode,"Follower")){var n=p(c(c(this,"membersMap"),c(this,"broadcasterId")),"getViewState",[]);t=u(o({},l(t),{originX:c(n,"originX"),originY:c(n,"originY"),width:c(n,"width"),height:c(n,"height")}))}var i=p(c(c(this,"membersMap"),e),"setViewState",[t]);return r===c(y.ViewMode,"Freedom")?c(this,"broadcasterId")===e&&p(this,"cancelBroadcaster",[]):r===c(y.ViewMode,"Broadcaster")?p(this,"becomeNewBroadcast",[e]):c(i,"mode")===c(y.ViewMode,"Broadcaster")&&p(this,"broadcastViewToAllRoom",[]),i},t.prototype.setCursor=function(e,t,r,n,i){p(c(c(this,"membersMap"),e),"setCursor",[t,r,n,i])},t.prototype.setRtcState=function(e,t){s(c(c(this,"membersMap"),e),"isRtcConnected",t)},t.prototype.dispatchMagixEvent=function(e,t,r){p(c(c(this,"membersMap"),e),"dispatchMagixEvent",[t,r])},t.prototype.notifyAllThatSceneChanged=function(e){for(var t in l(c(this,"membersMap")))p(c(c(this,"membersMap"),t),"notifyAllThatSceneChanged",[e])},t.prototype.getAppliance=function(e,t){var r=c(c(this,"membersMap"),t);return r?p(r,"getAppliance",[e]):void 0},t.prototype.currentAppliance=function(e){return c(c(c(this,"membersMap"),e),"currentAppliance")},t.prototype.cancelBroadcaster=function(){for(var e in l(c(this,"membersMap")))parseInt(e)!==c(this,"broadcasterId")&&p(c(c(this,"membersMap"),e),"setViewMode",[c(y.ViewMode,"Freedom")]);s(this,"broadcasterId",void 0)},t.prototype.becomeNewBroadcast=function(e){var t=p(c(c(this,"membersMap"),e),"getViewState",[]),r=c(t,"originX"),n=c(t,"originY"),i=c(t,"width"),o=c(t,"height"),a=u({originX:r,originY:n,width:i,height:o});for(var h in l(c(this,"membersMap")))parseInt(h)!==e&&p(c(c(this,"membersMap"),h),"changeToFollower",[a]);s(this,"broadcasterId",e),s(this,"directorId",e)},t.prototype.broadcastViewToAllRoom=function(){var e=p(c(c(this,"membersMap"),c(this,"broadcasterId")),"getViewState",[]),t=c(e,"originX"),r=c(e,"originY"),n=c(e,"width"),i=c(e,"height"),o=u({originX:t,originY:r,width:n,height:i});for(var a in l(c(this,"membersMap"))){var s=c(c(this,"membersMap"),a);c(p(s,"getViewState",[]),"mode")===c(y.ViewMode,"Follower")&&p(s,"setViewState",[o])}},t.prototype.initiativeColor=function(){for(var e=0,t=l(c(this,"initiativeColors"));e<t.length;e++){var r=t[e];if(!p(this,"anyMemberHasColor",[r]))return r}var n=0;for(var i in l(c(this,"membersMap")))n++;var o=n%c(c(this,"initiativeColors"),"length");return c(c(this,"initiativeColors"),o)},t.prototype.anyMemberHasColor=function(e){for(var r in l(c(this,"membersMap")))if(p(t,"isColorEquals",[e,c(p(c(c(this,"membersMap"),r),"getMemberState",[]),"strokeColor")]))return!0;return!1},t.isColorEquals=function(e,t){return c(e,0)===c(t,0)&&c(e,1)===c(t,1)&&c(e,2)===c(t,2)},t.prototype.compareDirector=function(e,t){if(e===t)return 0;if(void 0===e&&void 0!==t)return 1;if(void 0!==e&&void 0===t)return-1;if(e===c(this,"broadcasterId"))return-1;if(t===c(this,"broadcasterId"))return 1;var r=c(c(this,"membersMap"),e),n=c(c(this,"membersMap"),t);if(c(r,"information")&&!c(n,"information"))return-1;if(!c(r,"information")&&c(n,"information"))return 1;if(!c(r,"information")&&!c(n,"information"))return c(r,"memberId")-c(n,"memberId");var i=c(r,"information"),o=c(n,"information");if(c(i,"isOwner")&&!c(o,"isOwner"))return-1;if(!c(i,"isOwner")&&c(o,"isOwner"))return 1;var a=c(i,"id"),s=c(o,"id");return a===s?c(r,"memberId")-c(n,"memberId"):a-s},t}(a.baseClass());t.MembersManager=m,a.declareClass({classId:7,clazz:A}),a.declareClass({classId:8,clazz:m}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.creator;t.getInitiativeColors=function(){return i([i([236,52,85]),i([0,91,246]),i([245,173,70]),i([104,171,93]),i([158,81,182])])},n=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=o.creator,c=o.caller,u=o.getter,l=o.remover,p=o.unwrapper,h=r(0),d=function(e){function t(t){var r=e.call(this)||this;return a(r,"components",t),r}return i(t,e),t.prototype.snapshot=function(){for(var e=s([]),t=0,r=p(u(this,"components"));t<r.length;t++){var n=r[t];c(e,"push",[s({context:u(n,"context"),selectedBy:u(n,"selectedBy"),highlightAuthorIds:u(n,"highlightAuthorIds")})]),l(n,"context"),a(n,"highlightAuthorIds",s([])),a(n,"selectedBy",void 0)}for(var i=c(h.getSnapshot(),"createSnapshot",[this,!0]),o=0;o<u(u(this,"components"),"length");++o){n=u(u(this,"components"),o);var d=u(e,o);a(n,"context",u(d,"context")),a(n,"highlightAuthorIds",u(d,"highlightAuthorIds")),a(n,"selectedBy",u(d,"selectedBy"))}return i},t.recover=function(e,t){for(var r=c(h.getSnapshot(),"recoverWithSnapshot",[t]),n=0,i=p(u(r,"components"));n<i.length;n++){var o=i[n];a(o,"context",e),a(o,"protoKey",h.findIdentifierWith(o))}return r},t.prototype.injectToScene=function(e,t,r){for(var n=u(Number,"MAX_SAFE_INTEGER"),i=u(Number,"MAX_SAFE_INTEGER"),o=u(Number,"MIN_SAFE_INTEGER"),l=u(Number,"MIN_SAFE_INTEGER"),h=0,d=p(u(this,"components"));h<d.length;h++){var f=d[h];n=c(Math,"min",[u(f,"originX")]),i=c(Math,"min",[u(f,"originY")]),o=c(Math,"max",[u(f,"originX")+u(f,"width")]),l=c(Math,"max",[u(f,"originY")+u(f,"height")])}for(var y=u(e,"executorHub"),A=t-(n+o)/2,m=r-(i+l)/2,g=0,v=p(u(this,"components"));g<v.length;g++){if(f=v[g],a(f,"originX",u(f,"originX")+A),a(f,"originY",u(f,"originY")+m),y&&u(y,"enable")){var b=s({create:c(f,"snapshot",[])});c(y,"commit",[u(f,"protoKey"),b,s({delete:!0})])}c(u(e,"scene"),"addComponent",[f])}},t}(o.baseClass());t.CopyBuffer=d,o.declareClass({classId:39,clazz:d}),o=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(45))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=o.getter,c=o.wrapper,u=o.creator,l=o.caller,p=o.unwrapper,h=r(5),d=r(10),f=function(e){function t(t){var r=e.call(this)||this;return r.commiter=null,r._enable=!1,a(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"enable",{get:function(){return s(this,"_enable")},set:function(e){a(this,"_enable",e),e||a(this,"commiter",null)},enumerable:!0,configurable:!0}),t.prototype.commit=function(e,t,r){if(!s(this,"_enable"))throw c(new Error("not enable exectuor hub"));s(this,"commiter")||a(this,"commiter",u({redo:u({}),undo:u({})})),a(t,"path",a(r,"path",s(s(s(this,"context"),"scenes"),"currentPath"))),a(s(s(this,"commiter"),"redo"),e,t),a(s(s(this,"commiter"),"undo"),e,r)},t.prototype.takeCommit=function(){var e=s(this,"commiter");return s(this,"commiter")&&a(this,"commiter",null),e},t.prototype.execute=function(e){if(s(this,"_enable")){for(var t in p(e))l(this,"executeOne",[t,s(e,t)]);l(l(s(this,"context"),"getAppliance",["selector"]),"refreshAllUsersEditorRectangleSpace",[])}},t.prototype.executeOne=function(e,t){var r=s(s(this,"context"),"scenes"),n=s(t,"path")||s(r,"currentPath"),i=l(r,"getScene",[n]);if(i){if(s(t,"create")){var o=l(h.Editable,"recover",[s(this,"context"),s(t,"create")]);l(i,"addComponent",[o]),p(o)instanceof d.TextareaShape&&l(o,"completeEdit",[])}if(s(t,"delete")&&(o=l(this,"findComponent",[e,i]))&&l(i,"removeComponent",[o]),s(t,"updateRect")&&(o=l(this,"findComponent",[e,i]))&&p(o)instanceof h.Editable){var c=s(t,"updateRect"),u=s(c,"x"),f=s(c,"y"),y=s(c,"width"),A=s(c,"height");a(o,"originX",u),a(o,"originY",f),a(o,"width",y),a(o,"height",A)}s(t,"updateTextarea")&&(o=l(this,"findComponent",[e,i]),p(o)instanceof d.TextareaShape&&l(o,"recoverTextareaBox",[s(t,"updateTextarea")])),s(t,"updateTextareaFormat")&&(o=l(this,"findComponent",[e,i]),p(o)instanceof d.TextareaShape&&l(o,"recoverFormat",[s(t,"updateTextareaFormat")])),s(t,"cleanPPT")&&l(i,"cleanPPT",[s(this,"context")]),s(t,"setPPT")&&l(i,"recoverPPT",[s(t,"setPPT")])}},t.prototype.findComponent=function(e,t){for(var r=0;r<s(t,"componentsLength");++r){var n=l(t,"componentAt",[r]);if(n&&p(n)instanceof h.Editable&&s(n,"protoKey")===e)return n}},t}(o.baseClass());t.ExecutorHub=f,o.declareClass({classId:4,clazz:f}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.caller,u=a.creator,l=a.getter,p=a.wrapper,h=a.unwrapper,d=a.remover,f=r(0),y=r(20),m=function(e){function t(){var t=e.call(this)||this;return s(t,"rootSceneGroup",c(t,"createRootSceneGroup",[])),s(t,"_currentPath",u(["init"])),t}return i(t,e),Object.defineProperty(t.prototype,"currentPath",{get:function(){return l(this,"_currentPath")},set:function(e){if(!c(this,"getScene",[e]))throw p(new Error("/"+c(e,"join",["/"])+" is not a scene"));s(this,"_currentPath",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentScene",{get:function(){return c(this,"getScene",[l(this,"_currentPath")])},enumerable:!0,configurable:!0}),t.prototype.getScene=function(e){e=u(h(e).slice());var t=c(e,"pop",[]);if(void 0!==t){var r=c(this,"findSceneGroup",[e]);if(r){var n=l(l(r,"scenesMap"),t);if(n)return n}}},t.prototype.listScenes=function(e){var t=u([]),r=c(this,"findSceneGroup",[e]);if(r)for(var n=0,i=h(l(r,"scenesList"));n<i.length;n++){var o=i[n],a=l(o,"name");c(t,"push",[a])}return t},t.prototype.listSceneGroups=function(e){var t=u([]),r=c(this,"findSceneGroup",[e]);if(r)for(var n=0,i=h(l(r,"groupsList"));n<i.length;n++){var o=i[n],a=l(o,"name");c(t,"push",[a])}return t},t.prototype.listAllScenes=function(){var e=u([]);return c(this,"collectScenes",[l(this,"rootSceneGroup"),u([]),e]),e},t.prototype.collectScenes=function(e,t,r){for(var n=0,i=h(l(e,"groupsList"));n<i.length;n++){var o=i[n],a=u(h(t).concat([l(o,"name")]));c(this,"collectScenes",[o,a,r])}for(var s=0,p=h(l(e,"scenesList"));s<p.length;s++){var d=p[s];c(r,"push",[u(h(t).concat([l(d,"name")]))])}},t.prototype.putScene=function(e,t,r){var n=c(this,"makeSceneGroup",[e]);if(!n||l(l(n,"groupsMap"),l(t,"name")))return!1;var i=l(l(n,"scenesMap"),l(t,"name"));if(i){var o=c(l(n,"scenesList"),"indexOf",[i]);s(l(n,"scenesList"),o,t),s(l(n,"scenesMap"),l(t,"name"),t)}else c(this,"insertScene",[n,t,r]);return!0},t.prototype.removePath=function(e){for(var t=null,r=l(this,"rootSceneGroup"),n=l(l(this,"rootSceneGroup"),"name"),i=0;i<l(e,"length");++i)if(n=l(e,i),t=r,!(r=l(l(r,"groupsMap"),n))){if(i<l(e,"length")-1)return!1;break}if(!t)return s(this,"rootSceneGroup",c(this,"createRootSceneGroup",[])),s(this,"_currentPath",u(["init"])),!0;var o=null;if(c(this,"checkPathIncludesPrefix",[l(this,"_currentPath"),e])&&(o=c(this,"findNextScenePathInTree",[e])||u(["init"])),r){var a=c(l(t,"groupsList"),"indexOf",[r]);c(l(t,"groupsList"),"splice",[a,1]),d(l(t,"groupsMap"),l(r,"name"))}else{var p=l(l(t,"scenesMap"),n);if(!p)return!1;a=c(l(t,"scenesList"),"indexOf",[p]),c(l(t,"scenesList"),"splice",[a,1]),d(l(t,"scenesMap"),n)}return c(this,"cleanIfSceneGroupEmpty",[e]),o&&s(this,"_currentPath",o),!0},t.prototype.moveScene=function(e,t,r){t=u(h(t).slice());var n=null,i=!1;c(this,"isPathEquals",[e,l(this,"_currentPath")])&&(n=u(h(t).slice()));var o=c(this,"getScene",[e]),a=c(t,"pop",[]);return o&&void 0!==a&&(s(o,"name",a),c(this,"removePath",[e]),(i=c(this,"putScene",[t,o,r]))||(e=u(h(e).slice()),s(o,"name",c(e,"pop",[])),c(this,"putScene",[e,o]))),i&&n&&s(this,"_currentPath",n),i},t.prototype.cleanIfSceneGroupEmpty=function(e){for(var t=l(this,"rootSceneGroup"),r=u([l(this,"rootSceneGroup")]),n=0;n<l(e,"length")-1;++n)t=l(l(t,"groupsMap"),l(e,n)),c(r,"push",[t]);for(n=l(r,"length")-1;n>0;n--){var i=l(r,n),o=l(r,n-1);if(c(this,"isSceneGroupEmpty",[i])){var a=c(l(o,"groupsList"),"indexOf",[i]);c(l(o,"groupsList"),"splice",[a,1]),d(l(o,"groupsMap"),l(i,"name"))}}c(this,"isSceneGroupEmpty",[l(this,"rootSceneGroup")])&&s(this,"rootSceneGroup",c(this,"createRootSceneGroup",[]))},t.prototype.isSceneGroupEmpty=function(e){return 0===l(l(e,"groupsList"),"length")&&0===l(l(e,"scenesList"),"length")},t.prototype.findSceneOrGroup=function(e){if(0===l(e,"length"))return l(this,"rootSceneGroup");e=u(h(e).slice());var t=c(e,"pop",[]),r=c(this,"findSceneGroup",[e]);return r?l(l(r,"groupsMap"),t)||l(l(r,"scenesMap"),t):void 0},t.prototype.findSceneGroup=function(e){for(var t=l(this,"rootSceneGroup"),r=0,n=h(e);r<n.length;r++){var i=n[r];if(!(t=l(l(t,"groupsMap"),i)))return null}return t},t.prototype.makeSceneGroup=function(e){for(var t=l(this,"rootSceneGroup"),r=0,n=h(e);r<n.length;r++){var i=n[r];if(l(l(t,"scenesMap"),i))return null;var o=l(l(t,"groupsMap"),i);o||(o=c(this,"createSceneGroup",[i]),s(l(t,"groupsMap"),i,o),c(l(t,"groupsList"),"push",[o])),t=o}return t},t.prototype.insertScene=function(e,t,r){void 0===r||r<0||r>=l(l(e,"scenesList"),"length")?c(l(e,"scenesList"),"push",[t]):c(l(e,"scenesList"),"splice",[r,0,t]),s(l(e,"scenesMap"),l(t,"name"),t)},t.prototype.createRootSceneGroup=function(){var e=c(this,"createSceneGroup",[""]),t=p(new y.SceneNode("init"));return c(l(e,"scenesList"),"push",[t]),s(l(e,"scenesMap"),l(t,"name"),t),e},t.prototype.findNextScenePathInTree=function(e){var t=c(u(h(e).slice()),"reverse",[]),r=c(this,"findNextPathStackInTree",[t,l(this,"rootSceneGroup")]);if(!r)return null;var n=c(r,"reverse",[]),i=c(this,"findSceneOrGroup",[n]);if(!i)return null;if(h(i)instanceof y.SceneNode)return n;for(var o=i;;){var a=l(l(o,"groupsList"),0);if(!a)return c(n,"push",[l(l(l(o,"scenesList"),0),"name")]),n;c(n,"push",[l(a,"name")]),o=a}},t.prototype.findNextPathStackInTree=function(e,t){var r=c(e,"pop",[]),n=l(l(t,"groupsMap"),r);if(l(e,"length")>0&&n){var i=c(this,"findNextPathStackInTree",[e,n]);if(i)return c(i,"push",[r]),i}var o=c(this,"findNextName",[t,r]);return null===o?null:u([o])},t.prototype.findNextName=function(e,t){var r=l(l(e,"groupsMap"),t),n=null;if(r){var i=c(l(e,"groupsList"),"indexOf",[r]);(o=l(l(e,"groupsList"),i+1)||l(l(e,"scenesList"),0)||l(l(e,"groupsList"),i-1))&&(n=l(o,"name"))}else{var o,a=l(l(e,"scenesMap"),t);if(a)i=c(l(e,"scenesList"),"indexOf",[a]),(o=l(l(e,"scenesList"),i+1)||l(l(e,"scenesList"),i-1)||l(l(e,"groupsList"),l(l(e,"groupsList"),"length")-1))&&(n=l(o,"name"))}return n},t.prototype.createSceneGroup=function(e){return u({name:e,groupsList:u([]),groupsMap:u({}),scenesList:u([]),scenesMap:u({})})},t.prototype.isPathEquals=function(e,t){if(l(e,"length")!==l(t,"length"))return!1;for(var r=0;r<l(e,"length");++r)if(l(e,r)!==l(t,r))return!1;return!0},t.prototype.checkPathIncludesPrefix=function(e,t){for(var r=0;r<l(t,"length");++r)if(l(t,r)!==l(e,r))return!1;return!0},o([f.noEffects],t.prototype,"currentPath",null),o([f.noEffects],t.prototype,"currentScene",null),t}(a.baseClass());t.SceneManager=m,a.declareClass({classId:42,clazz:m,memberDecorators:{currentSceneCache:[f.transient],currentPath:[f.noEffects],currentScene:[f.noEffects],getScene:[f.noEffects],findSceneOrGroup:[f.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.creator,c=a.getter,u=a.caller,l=a.wrapper,p=a.unwrapper,h=r(0),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.components=s([]),t}return i(t,e),Object.defineProperty(t.prototype,"componentsLength",{get:function(){return c(c(this,"components"),"length")},enumerable:!0,configurable:!0}),t.prototype.componentAt=function(e){return c(c(this,"components"),e)},t.prototype.addComponent=function(e){u(c(this,"components"),"push",[e])},t.prototype.addComponentAt=function(e,t){if(t<0||t>c(c(this,"components"),"length"))throw l(new Error("index should be 0~"+c(c(this,"components"),"length")+", instead of "+t));u(c(this,"components"),"splice",[t,0,e])},t.prototype.indexOfComponent=function(e){return u(c(this,"components"),"indexOf",[e])},t.prototype.removeComponent=function(e){var t=u(c(this,"components"),"indexOf",[e]);-1!==t&&u(c(this,"components"),"splice",[t,1])},t.prototype.forEachComponents=function(e){u(c(this,"components"),"forEach",[e])},t.prototype.componentsWithFilter=function(e){return u(c(this,"components"),"filter",[e])},t.prototype.findComponentFromBottom=function(e){for(var t=0;t<c(c(this,"components"),"length");++t){var r=c(c(this,"components"),t);if(e(r,t))return r}},t.prototype.findComponentFromTop=function(e){for(var t=c(c(this,"components"),"length")-1;t>=0;--t){var r=c(c(this,"components"),t);if(e(r,t))return r}},t.prototype.removeComponentAt=function(e){if(e<0||e>=c(c(this,"components"),"length"))throw l(new Error("index should be 0~"+(c(c(this,"components"),"length")-1)+", instead of "+e));return c(u(c(this,"components"),"splice",[e,1]),0)},t.prototype.moveComponentsToIndex=function(e,t){for(var r=0;r<c(e,"length");++r){var n=c(e,r),i=u(c(this,"components"),"indexOf",[n]);-1===i?(u(e,"splice",[r,1]),r--):(u(c(this,"components"),"splice",[i,1]),i<=t&&t--)}c(e,"length")>0&&(t=u(Math,"max",[0,t]),t=u(Math,"min",[c(c(this,"components"),"length"),t]),u(c(this,"components"),"splice",[t,0].concat(p(e))))},o([h.noEffects],t.prototype,"componentsLength",null),t}(a.baseClass());t.ApplianceComponentContainer=d,a.declareClass({classId:6,clazz:d,memberDecorators:{componentsLength:[h.noEffects],componentAt:[h.noEffects]}}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(49))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None="none",e.Others="others",e.Me="me"}(t.BelongsTo||(t.BelongsTo={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.caller,l=a.wrapper,p=a.creator,h=r(0),d=r(6),f=r(5),y=r(71),m=r(12),g=function(e){function t(t){var r=e.call(this)||this;return r.paintingEllipseShape=null,r.beginPoint=null,r.isShiftPress=!1,r.latestDragX=0,r.latestDragY=0,s(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){"lock"===c(e,"kind")&&(s(this,"isShiftPress",!1),c(this,"beginPoint")&&u(this,"refreshPaintingEllipseShape",[]))},t.prototype.onKeyDown=function(e){"lock"===c(e,"kind")&&(s(this,"isShiftPress",!0),c(this,"beginPoint")&&u(this,"refreshPaintingEllipseShape",[]))},t.prototype.onSceneChanged=function(){c(this,"paintingEllipseShape")&&u(c(this,"paintingEllipseShape"),"completePainting",[]),s(this,"paintingEllipseShape",null),s(this,"isShiftPress",!1),s(this,"beginPoint",null)},t.prototype.onDraggingStateChanged=function(e){var t=c(e,"x"),r=c(e,"y");if(c(this,"isDragging"))s(this,"paintingEllipseShape",l(new v(c(this,"context")))),s(c(this,"paintingEllipseShape"),"originX",t),s(c(this,"paintingEllipseShape"),"originY",r),u(c(c(this,"context"),"scene"),"addComponent",[c(this,"paintingEllipseShape")]),s(this,"beginPoint",p({x:t,y:r}));else if(c(this,"paintingEllipseShape")){u(c(this,"paintingEllipseShape"),"completePainting",[]);var n=c(c(this,"context"),"executorHub");if(n&&c(n,"enable")){var i=p({create:u(c(this,"paintingEllipseShape"),"snapshot",[])});u(n,"commit",[c(c(this,"paintingEllipseShape"),"protoKey"),i,p({delete:!0})])}s(this,"paintingEllipseShape",null),s(this,"beginPoint",null)}},t.prototype.onDrag=function(e){var t=c(e,"x"),r=c(e,"y");s(this,"latestDragX",t),s(this,"latestDragY",r),u(this,"refreshPaintingEllipseShape",[])},t.prototype.refreshPaintingEllipseShape=function(){var e=c(this,"paintingEllipseShape");if(s(e,"originX",u(Math,"min",[c(this,"latestDragX"),c(c(this,"beginPoint"),"x")])),s(e,"originY",u(Math,"min",[c(this,"latestDragY"),c(c(this,"beginPoint"),"y")])),c(this,"isShiftPress")){var t=u(Math,"abs",[c(this,"latestDragX")-c(c(this,"beginPoint"),"x")]),r=u(Math,"abs",[c(this,"latestDragY")-c(c(this,"beginPoint"),"y")]),n=u(Math,"max",[t,r]);s(e,"width",n),s(e,"height",n)}else s(e,"width",u(Math,"abs",[c(this,"latestDragX")-c(c(this,"beginPoint"),"x")])),s(e,"height",u(Math,"abs",[c(this,"latestDragY")-c(c(this,"beginPoint"),"y")]))},t.prototype.onDestroy=function(){c(this,"paintingEllipseShape")&&u(c(this,"paintingEllipseShape"),"completePainting",[])},t}(a.wrapSuperClass(d.Gesture));t.EllipseAppliance=g;var v=function(e){function t(t){var r=e.call(this,t)||this;return r.originX=0,r.originY=0,r.width=0,r.height=0,r.isPainting=!0,s(r,"state",u(t,"getMemberState",[])),r}return i(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!c(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return c(c(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.completePainting=function(){s(this,"isPainting",!1)},t.prototype.rectHitTestContent=function(e,t,r,n,i,o){var a=u(this,"outerEllipseTester",[o]),s=u(a,"rectHitTest",[t,r,n,i]);if(s===c(m.RectangleTestingResult,"IncludeRectangle")){var l=u(this,"innerEllipseTester",[o]);if(l)switch(u(l,"rectHitTest",[t,r,n,i])){case c(m.RectangleTestingResult,"Disjoint"):return c(m.RectangleTestingResult,"IncludeRectangle");case c(m.RectangleTestingResult,"IncludeByRectangle"):case c(m.RectangleTestingResult,"Cross"):return c(m.RectangleTestingResult,"Cross");case c(m.RectangleTestingResult,"IncludeRectangle"):return c(m.RectangleTestingResult,"Disjoint")}}return s},t.prototype.outerEllipseTester=function(e){var t=c(this,"width")+2*e,r=c(this,"height")+2*e,n=c(this,"width")/2,i=c(this,"height")/2;return l(new y.EllipseTester(n,i,t,r))},t.prototype.innerEllipseTester=function(e){var t=c(this,"width")-2*e,r=c(this,"height")-2*e;if(!(t<=0||r<=0)){var n=c(this,"width")/2,i=c(this,"height")/2;return l(new y.EllipseTester(n,i,t,r))}},o([h.noEffects],t.prototype,"selectable",null),o([h.noEffects],t.prototype,"hitTestingBoxMargin",null),o([h.noEffects],t.prototype,"locked",null),t}(a.wrapSuperClass(f.Editable));t.EllipseShape=v,a.declareClass({classId:16,clazz:g,superClass:d.Gesture}),a.declareClass({classId:17,clazz:v,superClass:f.Editable,memberDecorators:{selectable:[h.noEffects],hitTestingBoxMargin:[h.noEffects],locked:[h.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.getter,s=o.caller,c=o.setter,u=o.creator,l=o.unwrapper,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pressedPoint=null,t.dragEventsBuffer=null,t}return i(t,e),Object.defineProperty(t.prototype,"isDragging",{get:function(){return!!a(this,"pressedPoint")&&!a(this,"dragEventsBuffer")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needBufferDragEvent",{get:function(){return!!a(this,"dragEventsBuffer")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPressDown",{get:function(){return!!a(this,"pressedPoint")},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){},t.prototype.onKeyDown=function(e){},t.prototype.onDestroy=function(){},t.prototype.onMouseLeave=function(e){},t.prototype.onDraggingStateChanged=function(e){},t.prototype.onDrag=function(e){},t.prototype.onHover=function(e){},t.prototype.onClick=function(e){},t.prototype.makeSureItsDraggingEvent=function(e){return!1},t.prototype.onMemberStateChanged=function(e,t){},t.prototype.onMagixEvent=function(e,t){},t.prototype.onSceneChanged=function(e){},t.prototype.onPressedAndDrag=function(e){a(this,"needBufferDragEvent")?(s(a(this,"dragEventsBuffer"),"push",[e]),s(this,"checkShouldChangeGestureToDrag",[e])):s(this,"invokeCallback",[a(this,"onDrag"),e])},t.prototype.onMouseDown=function(e){c(this,"pressedPoint",u({x:a(e,"x"),y:a(e,"y")})),s(this,"makeSureItsDraggingEvent",[e])?s(this,"invokeCallback",[a(this,"onDraggingStateChanged"),e]):c(this,"dragEventsBuffer",u([])),s(this,"onPressedAndDrag",[e])},t.prototype.onMouseMove=function(e){a(this,"isPressDown")?s(this,"onPressedAndDrag",[e]):s(this,"invokeCallback",[a(this,"onHover"),e])},t.prototype.onMouseUp=function(e){if(a(this,"isPressDown")){var t=!1;s(this,"onPressedAndDrag",[e]),a(this,"needBufferDragEvent")&&(c(this,"dragEventsBuffer",null),s(this,"invokeCallback",[a(this,"onClick"),e]),t=!0),c(this,"pressedPoint",null),t||s(this,"invokeCallback",[a(this,"onDraggingStateChanged"),e])}},t.prototype.checkShouldChangeGestureToDrag=function(e){if(s(this,"shouldChangeGestureToDrag",[a(e,"x"),a(e,"y")])){var t=a(this,"dragEventsBuffer");if(c(this,"dragEventsBuffer",null),a(t,"length")>0){var r=a(t,0);s(this,"invokeCallback",[a(this,"onDraggingStateChanged"),r]);for(var n=0,i=l(t);n<i.length;n++){var o=i[n];s(this,"invokeCallback",[a(this,"onDrag"),o])}}}},t.prototype.shouldChangeGestureToDrag=function(e,t){var r=a(a(this,"pressedPoint"),"x")-e,n=a(a(this,"pressedPoint"),"y")-t;return 16<r*r+n*n},t.prototype.invokeCallback=function(e,t){try{s(e,"call",[this,t])}catch(e){s(console,"error",[e])}},t}(o.baseClass());t.Gesture=p,o.declareClass({classId:40,clazz:p}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.caller,l=a.wrapper,p=a.creator,h=r(0),d=r(6),f=r(5),y=function(e){function t(t){var r=e.call(this)||this;return r.paintingShape=null,r.beginPoint=null,r.isShiftPress=!1,r.latestDragX=0,r.latestDragY=0,s(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){"lock"===c(e,"kind")&&(s(this,"isShiftPress",!1),c(this,"beginPoint")&&u(this,"refreshPaintingShape",[]))},t.prototype.onKeyDown=function(e){"lock"===c(e,"kind")&&(s(this,"isShiftPress",!0),c(this,"beginPoint")&&u(this,"refreshPaintingShape",[]))},t.prototype.onSceneChanged=function(){c(this,"paintingShape")&&u(c(this,"paintingShape"),"completePainting",[]),s(this,"paintingShape",null),s(this,"isShiftPress",!1),s(this,"beginPoint",null)},t.prototype.onDraggingStateChanged=function(e){var t=c(e,"x"),r=c(e,"y");if(c(this,"isDragging"))s(this,"paintingShape",l(new m(c(this,"context")))),s(c(this,"paintingShape"),"originX",t),s(c(this,"paintingShape"),"originY",r),u(c(c(this,"context"),"scene"),"addComponent",[c(this,"paintingShape")]),s(this,"beginPoint",p({x:t,y:r}));else if(c(this,"paintingShape")){u(c(this,"paintingShape"),"completePainting",[]);var n=c(c(this,"context"),"executorHub");if(n&&c(n,"enable")){var i=p({create:u(c(this,"paintingShape"),"snapshot",[])});u(n,"commit",[c(c(this,"paintingShape"),"protoKey"),i,p({delete:!0})])}s(this,"paintingShape",null),s(this,"beginPoint",null)}},t.prototype.onDrag=function(e){var t=c(e,"x"),r=c(e,"y");s(this,"latestDragX",t),s(this,"latestDragY",r),u(this,"refreshPaintingShape",[])},t.prototype.refreshPaintingShape=function(){var e=c(this,"paintingShape");if(s(e,"originX",u(Math,"min",[c(this,"latestDragX"),c(c(this,"beginPoint"),"x")])),s(e,"originY",u(Math,"min",[c(this,"latestDragY"),c(c(this,"beginPoint"),"y")])),c(this,"isShiftPress")){var t=u(Math,"abs",[c(this,"latestDragX")-c(c(this,"beginPoint"),"x")]),r=u(Math,"abs",[c(this,"latestDragY")-c(c(this,"beginPoint"),"y")]),n=u(Math,"max",[t,r]);s(e,"width",n),s(e,"height",n)}else s(e,"width",u(Math,"abs",[c(this,"latestDragX")-c(c(this,"beginPoint"),"x")])),s(e,"height",u(Math,"abs",[c(this,"latestDragY")-c(c(this,"beginPoint"),"y")]))},t.prototype.onDestroy=function(){c(this,"paintingShape")&&u(c(this,"paintingShape"),"completePainting",[])},t}(a.wrapSuperClass(d.Gesture));t.ShapeAppliance=y;var m=function(e){function t(t){var r=e.call(this,t)||this;r.originX=0,r.originY=0,r.width=0,r.height=0,r.isPainting=!0;var n=u(t,"getMemberState",[]),i=c(n,"strokeColor"),o=c(n,"strokeWidth"),a=c(n,"shapeType");return s(r,"strokeColor",i),s(r,"strokeWidth",o),s(r,"shapeType",a),r}return i(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!c(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return c(this,"strokeWidth")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.completePainting=function(){s(this,"isPainting",!1)},o([h.noEffects],t.prototype,"selectable",null),o([h.noEffects],t.prototype,"hitTestingBoxMargin",null),o([h.noEffects],t.prototype,"locked",null),t}(a.wrapSuperClass(f.Editable));t.Shape=m,a.declareClass({classId:29,clazz:y,superClass:d.Gesture}),a.declareClass({classId:28,clazz:m,superClass:f.Editable,memberDecorators:{selectable:[h.noEffects],hitTestingBoxMargin:[h.noEffects],locked:[h.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.caller,l=a.wrapper,p=a.creator,h=r(0),d=r(6),f=r(5),y=r(12),m=function(e){function t(t){var r=e.call(this)||this;return r.paintingRectangleShape=null,r.beginPoint=null,r.isShiftPress=!1,r.latestDragX=0,r.latestDragY=0,s(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onKeyUp=function(e){"lock"===c(e,"kind")&&(s(this,"isShiftPress",!1),c(this,"beginPoint")&&u(this,"refreshPaintingRectangleShape",[]))},t.prototype.onKeyDown=function(e){"lock"===c(e,"kind")&&(s(this,"isShiftPress",!0),c(this,"beginPoint")&&u(this,"refreshPaintingRectangleShape",[]))},t.prototype.onSceneChanged=function(){c(this,"paintingRectangleShape")&&u(c(this,"paintingRectangleShape"),"completePainting",[]),s(this,"paintingRectangleShape",null),s(this,"isShiftPress",!1),s(this,"beginPoint",null)},t.prototype.onDraggingStateChanged=function(e){var t=c(e,"x"),r=c(e,"y");if(c(this,"isDragging"))s(this,"paintingRectangleShape",l(new g(c(this,"context")))),s(c(this,"paintingRectangleShape"),"originX",t),s(c(this,"paintingRectangleShape"),"originY",r),u(c(c(this,"context"),"scene"),"addComponent",[c(this,"paintingRectangleShape")]),s(this,"beginPoint",p({x:t,y:r}));else if(c(this,"paintingRectangleShape")){u(c(this,"paintingRectangleShape"),"completePainting",[]);var n=c(c(this,"context"),"executorHub");if(n&&c(n,"enable")){var i=p({create:u(c(this,"paintingRectangleShape"),"snapshot",[])});u(n,"commit",[c(c(this,"paintingRectangleShape"),"protoKey"),i,p({delete:!0})])}s(this,"paintingRectangleShape",null),s(this,"beginPoint",null)}},t.prototype.onDrag=function(e){var t=c(e,"x"),r=c(e,"y");s(this,"latestDragX",t),s(this,"latestDragY",r),u(this,"refreshPaintingRectangleShape",[])},t.prototype.refreshPaintingRectangleShape=function(){var e=c(this,"paintingRectangleShape");if(s(e,"originX",u(Math,"min",[c(this,"latestDragX"),c(c(this,"beginPoint"),"x")])),s(e,"originY",u(Math,"min",[c(this,"latestDragY"),c(c(this,"beginPoint"),"y")])),c(this,"isShiftPress")){var t=u(Math,"abs",[c(this,"latestDragX")-c(c(this,"beginPoint"),"x")]),r=u(Math,"abs",[c(this,"latestDragY")-c(c(this,"beginPoint"),"y")]),n=u(Math,"max",[t,r]);s(e,"width",n),s(e,"height",n)}else s(e,"width",u(Math,"abs",[c(this,"latestDragX")-c(c(this,"beginPoint"),"x")])),s(e,"height",u(Math,"abs",[c(this,"latestDragY")-c(c(this,"beginPoint"),"y")]))},t.prototype.onDestroy=function(){c(this,"paintingRectangleShape")&&u(c(this,"paintingRectangleShape"),"completePainting",[])},t}(a.wrapSuperClass(d.Gesture));t.RectangleAppliance=m;var g=function(e){function t(t){var r=e.call(this,t)||this;return r.originX=0,r.originY=0,r.width=0,r.height=0,r.isPainting=!0,s(r,"state",u(t,"getMemberState",[])),r}return i(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!c(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return c(c(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.completePainting=function(){s(this,"isPainting",!1)},t.prototype.rectHitTestContent=function(e,t,r,n,i,o){if(e===c(y.RectangleTestingResult,"IncludeRectangle")){var a=u(this,"innerRectangleTester",[o]);if(a)switch(u(a,"rectHitTest",[t,r,n,i])){case c(y.RectangleTestingResult,"Disjoint"):return c(y.RectangleTestingResult,"IncludeRectangle");case c(y.RectangleTestingResult,"IncludeByRectangle"):case c(y.RectangleTestingResult,"Cross"):return c(y.RectangleTestingResult,"Cross");case c(y.RectangleTestingResult,"IncludeRectangle"):return c(y.RectangleTestingResult,"Disjoint")}}return e},t.prototype.innerRectangleTester=function(e){var t=l(new y.ConvexPolygonTester),r=e,n=e,i=c(this,"width")-2*e,o=c(this,"height")-2*e;if(!(i<=0||o<=0))return u(t,"pushPoint",[p({x:r,y:n})]),u(t,"pushPoint",[p({x:r+i,y:n})]),u(t,"pushPoint",[p({x:r+i,y:n+o})]),u(t,"pushPoint",[p({x:r,y:n+o})]),t},o([h.noEffects],t.prototype,"selectable",null),o([h.noEffects],t.prototype,"hitTestingBoxMargin",null),o([h.noEffects],t.prototype,"locked",null),t}(a.wrapSuperClass(f.Editable));t.RectangleShape=g,a.declareClass({classId:24,clazz:m,superClass:d.Gesture}),a.declareClass({classId:25,clazz:g,superClass:f.Editable,memberDecorators:{selectable:[h.noEffects],hitTestingBoxMargin:[h.noEffects],locked:[h.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.caller,l=a.wrapper,p=a.creator,h=a.unwrapper,d=r(0),f=r(6),y=r(5),m=r(72),g=r(55);function v(e,t){return 0===t?1:e/t}var b=function(e){function t(t){var r=e.call(this)||this;return r.paintingCurveShape=null,r.paintingBezierCurveShape=null,s(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onSceneChanged=function(){c(this,"paintingCurveShape")&&(u(c(this,"paintingCurveShape"),"completePainting",[]),s(this,"paintingCurveShape",null)),c(this,"paintingBezierCurveShape")&&(u(c(this,"paintingBezierCurveShape"),"completePainting",[]),s(this,"paintingBezierCurveShape",null))},t.prototype.onClick=function(e){var t=c(e,"x"),r=c(e,"y");if(!c(this,"paintingCurveShape")){var n=u(c(this,"context"),"getMemberState",[]);if(n&&c(c(n,"pencilOptions"),"enableDrawPoint")){var i=l(new P(c(this,"context")));u(c(c(this,"context"),"scene"),"addComponent",[i]),u(this,"pushPointToCurveShape",[i,t,r]),u(i,"completePainting",[]),u(this,"commitCreateLegacyShape",[i])}}},t.prototype.pushPointToCurveShape=function(e,t,r){var n=c(u(c(this,"context"),"getViewState",[]),"pixelWidth"),i=c(u(c(this,"context"),"getMemberState",[]),"pencilOptions"),o=c(i,"sparseWidth"),a=c(i,"sparseHump");u(e,"pushPoint",[t,r,o/n,a/n])},t.prototype.onDraggingStateChanged=function(){if(c(this,"isDragging"))s(this,"paintingCurveShape",l(new P(c(this,"context")))),u(c(c(this,"context"),"scene"),"addComponent",[c(this,"paintingCurveShape")]);else if(c(this,"paintingCurveShape")){var e=c(this,"paintingCurveShape");s(this,"paintingCurveShape",null),u(e,"completePainting",[]),u(this,"commitCreateLegacyShape",[e])}},t.prototype.commitCreateLegacyShape=function(e){var t=c(c(this,"context"),"executorHub");if(t&&c(t,"enable")){var r=p({create:u(e,"snapshot",[])});u(t,"commit",[c(e,"protoKey"),r,p({delete:!0})])}},t.prototype.commitCreateShape=function(e){var t=c(c(this,"context"),"executorHub");if(t&&c(t,"enable")){var r=p({create:u(e,"snapshot",[])});u(t,"commit",[c(e,"protoKey"),r,p({delete:!0})])}},t.prototype.onDrag=function(e){var t=c(e,"x"),r=c(e,"y");c(this,"paintingCurveShape")&&u(this,"pushPointToCurveShape",[c(this,"paintingCurveShape"),t,r])},t.prototype.onDestroy=function(){c(this,"paintingCurveShape")&&u(c(this,"paintingCurveShape"),"completePainting",[]),c(this,"paintingBezierCurveShape")&&u(c(this,"paintingBezierCurveShape"),"completePainting",[])},t.prototype.createBezierCurve=function(e){var t=null;return c(this,"paintingBezierCurveShape")||(t=s(this,"paintingBezierCurveShape",l(new g.BezierCurveShape(c(this,"context"),e))),u(c(c(this,"context"),"scene"),"addComponent",[t])),t},t.prototype.updateBezierCurveTail=function(e,t){c(this,"paintingBezierCurveShape")&&u(c(this,"paintingBezierCurveShape"),"updateTail",[e,t])},t.prototype.splitBezierCurveTail=function(e,t){c(this,"paintingBezierCurveShape")&&u(c(this,"paintingBezierCurveShape"),"splitTail",[e,t])},t.prototype.addBezierCurveExtraSteups=function(){c(this,"paintingBezierCurveShape")&&u(c(this,"paintingBezierCurveShape"),"addExtraSteups",[])},t.prototype.completePainting=function(){var e=c(this,"paintingBezierCurveShape");e&&(s(this,"paintingBezierCurveShape",null),u(e,"completePainting",[]),u(this,"commitCreateShape",[e]))},t.prototype.cancelPainting=function(){var e=c(this,"paintingBezierCurveShape");e&&(s(this,"paintingBezierCurveShape",null),u(c(c(this,"context"),"scene"),"removeComponent",[e]))},t.createPencilOptions=function(){return p({enableDrawPoint:!1,disableBezier:!1,sparseHump:3,sparseWidth:4})},t}(a.wrapSuperClass(f.Gesture));t.PencilAppliance=b;var P=function(e){function t(t){var r=e.call(this,t)||this;return r.originX=0,r.originY=0,r.isPainting=!0,r._width=0,r._height=0,r.initializedWidth=0,r.initializedHeight=0,r.points=null,s(r,"state",u(t,"getMemberState",[])),s(r,"sparsePoints",l(new m.SparsePloughPoints)),r}return i(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return c(this,"_width")},set:function(e){s(this,"_width",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return c(this,"_height")},set:function(e){s(this,"_height",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return!c(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return c(c(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.pushPoint=function(e,t,r,n){if(c(this,"sparsePoints"))if(s(c(this,"sparsePoints"),"widthThreshold",r),s(c(this,"sparsePoints"),"humpThreshold",n),u(c(this,"sparsePoints"),"pushPoint",[e,t]),1===c(c(this,"sparsePoints"),"pushedCount"))s(this,"originX",e),s(this,"originY",t);else{var i=c(this,"originX"),o=c(this,"originY"),a=c(this,"originX")+c(this,"_width"),l=c(this,"originY")+c(this,"_height");e<i?(s(this,"originX",e),s(this,"_width",a-e)):e>a&&s(this,"_width",e-i),t<o?(s(this,"originY",t),s(this,"_height",l-t)):t>l&&s(this,"_height",t-o)}},t.prototype.completePainting=function(){if(c(this,"sparsePoints")){s(this,"initializedWidth",c(this,"_width")),s(this,"initializedHeight",c(this,"_height")),s(this,"points",u(c(this,"sparsePoints"),"complete",[])),s(this,"sparsePoints",null);for(var e=0,t=h(c(this,"points"));e<t.length;e++){var r=t[e];s(r,"x",c(r,"x")-c(this,"originX")),s(r,"y",c(r,"y")-c(this,"originY"))}s(this,"isPainting",!1)}},t.prototype.displayPoints=function(){var e;if(c(this,"sparsePoints")){e=u(c(this,"sparsePoints"),"displayPoints",[]);for(var t=0;t<c(e,"length");++t){var r=c(e,t),n=c(r,"x"),i=c(r,"y");s(e,t,p({x:n-c(this,"originX"),y:i-c(this,"originY")}))}}else{var o=v(c(this,"_width"),c(this,"initializedWidth")),a=v(c(this,"_height"),c(this,"initializedHeight"));e=1===o&&1===a?c(this,"points"):u(c(this,"points"),"map",[function(e){return p({x:c(e,"x")*o,y:c(e,"y")*a})}])}return e},t.prototype.enableBezier=function(){return!c(c(this,"state"),"pencilOptions")||!c(c(c(this,"state"),"pencilOptions"),"disableBezier")},o([d.noEffects],t.prototype,"width",null),o([d.noEffects],t.prototype,"height",null),o([d.noEffects],t.prototype,"selectable",null),o([d.noEffects],t.prototype,"hitTestingBoxMargin",null),o([d.noEffects],t.prototype,"locked",null),t}(a.wrapSuperClass(y.Editable));t.CurveShape=P,a.declareClass({classId:23,clazz:b,superClass:f.Gesture}),a.declareClass({classId:22,clazz:P,superClass:y.Editable,memberDecorators:{width:[d.noEffects],height:[d.noEffects],selectable:[d.noEffects],hitTestingBoxMargin:[d.noEffects],locked:[d.noEffects],displayPoints:[d.noEffects],enableBezier:[d.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0).__context("module"),c=s.setter,u=s.caller,l=s.creator,p=s.getter,h=s.unwrapper,d=r(0),f=r(5);function y(e,t){return 0===t?1:e/t}var m=function(e){function t(t,r){var n=e.call(this,t)||this;return n.extraSteups=0,n._originX=0,n._originY=0,n._width=0,n._height=0,c(n,"state",u(t,"getMemberState",[])),c(n,"headPoint",r),c(n,"curves",l([])),c(n,"currentBoundary",l({left:p(r,"x"),right:p(r,"x"),top:p(r,"y"),bottom:p(r,"y")})),c(n,"fixedBoundary",p(n,"currentBoundary")),c(n,"initializedSize",l({width:0,height:0})),n}return i(t,e),Object.defineProperty(t.prototype,"originX",{get:function(){var e=p(this,"currentBoundary");return e?p(e,"left"):p(this,"_originX")},set:function(e){p(this,"currentBoundary")||c(this,"_originX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originY",{get:function(){var e=p(this,"currentBoundary");return e?p(e,"top"):p(this,"_originY")},set:function(e){p(this,"currentBoundary")||c(this,"_originY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){var e=p(this,"currentBoundary");return e?p(e,"right")-p(e,"left"):p(this,"_width")},set:function(e){p(this,"currentBoundary")||c(this,"_width",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var e=p(this,"currentBoundary");return e?p(e,"bottom")-p(e,"top"):p(this,"_height")},set:function(e){p(this,"currentBoundary")||c(this,"_height",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return!p(this,"currentBoundary")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return p(p(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.isLikePoint=function(){var e=p(p(this,"state"),"strokeWidth")/10,t=p(this,"width"),r=p(this,"height");return!(t>e||r>e)},t.prototype.addExtraSteups=function(){c(this,"extraSteups",p(this,"extraSteups")+1)},t.prototype.updateTail=function(e,t){if(p(this,"currentBoundary")){var r=p(p(this,"curves"),"length");c(p(this,"curves"),r>0?r-1:0,e),u(this,"refreshTailCurve",[e]),c(this,"extraSteups",p(this,"extraSteups")-t)}},t.prototype.splitTail=function(e,t){var r=p(p(this,"curves"),"length");if(p(this,"currentBoundary")){if(r>0)for(var n=r-1,i=0;i<p(e,"length");++i){var o=p(e,i);c(p(this,"curves"),n+i,o),i<p(e,"length")-1?u(this,"receiveCurve",[p(this,"fixedBoundary"),o]):u(this,"refreshTailCurve",[o])}c(this,"extraSteups",p(this,"extraSteups")-t)}},t.prototype.completePainting=function(){var e=p(this,"currentBoundary");if(e){c(this,"initializedSize",l({width:p(e,"right")-p(e,"left"),height:p(e,"bottom")-p(e,"top")})),c(this,"_originX",p(e,"left")),c(this,"_originY",p(e,"top")),c(this,"_width",p(p(this,"initializedSize"),"width")),c(this,"_height",p(p(this,"initializedSize"),"height"));for(var t=-p(e,"left"),r=-p(e,"top"),n=0,i=h(p(this,"curves"));n<i.length;n++){var o=i[n],a=p(o,"point1"),s=p(o,"point2"),u=p(o,"point3");c(a,"x",p(a,"x")+t),c(a,"y",p(a,"y")+r),c(s,"x",p(s,"x")+t),c(s,"y",p(s,"y")+r),c(u,"x",p(u,"x")+t),c(u,"y",p(u,"y")+r)}c(p(this,"headPoint"),"x",p(p(this,"headPoint"),"x")+t),c(p(this,"headPoint"),"y",p(p(this,"headPoint"),"y")+r),c(this,"fixedBoundary",null),c(this,"currentBoundary",null)}},t.prototype.refreshTailCurve=function(e){var t=p(this,"fixedBoundary"),r=p(this,"currentBoundary");t&&r&&(c(r,"top",p(t,"top")),c(r,"left",p(t,"left")),c(r,"bottom",p(t,"bottom")),c(r,"right",p(t,"right")),u(this,"receiveCurve",[r,e]))},t.prototype.receiveCurve=function(e,t){var r=p(t,"point1"),n=p(t,"point2"),i=p(t,"point3");u(this,"receivePoint",[e,r]),u(this,"receivePoint",[e,n]),u(this,"receivePoint",[e,i])},t.prototype.receivePoint=function(e,t){var r=p(t,"x"),n=p(t,"y");c(e,"left",u(Math,"min",[r,p(e,"left")])),c(e,"right",u(Math,"max",[r,p(e,"right")])),c(e,"top",u(Math,"min",[n,p(e,"top")])),c(e,"bottom",u(Math,"max",[n,p(e,"bottom")]))},t.prototype.displayer=function(){var e=this,t=p(this,"currentBoundary"),r=p(this,"extraSteups"),n=p(this,"headPoint"),i=p(this,"curves");if(t){var a=-p(t,"left"),s=-p(t,"top");n=u(this,"translatePoint",[p(this,"headPoint"),a,s]),i=u(p(this,"curves"),"map",[function(t){return l(o({},h(t),{point1:u(e,"translatePoint",[p(t,"point1"),a,s]),point2:u(e,"translatePoint",[p(t,"point2"),a,s]),point3:u(e,"translatePoint",[p(t,"point3"),a,s])}))}])}else{var c=p(this,"initializedSize"),d=p(c,"width"),f=p(c,"height"),A=y(p(this,"_width"),d),m=y(p(this,"_height"),f);if(1!==A||1!==m){var g=u(Math,"sqrt",[A*A+m*m])/u(Math,"sqrt",[2]);n=u(this,"scalePoint",[p(this,"headPoint"),A,m]),i=u(p(this,"curves"),"map",[function(t){return l(o({},h(t),{distance:g*p(t,"distance"),point1:u(e,"scalePoint",[p(t,"point1"),A,m]),point2:u(e,"scalePoint",[p(t,"point2"),A,m]),point3:u(e,"scalePoint",[p(t,"point3"),A,m])}))}])}}return l({headPoint:n,curves:i,extraSteups:r})},t.prototype.translatePoint=function(e,t,r){return l({x:p(e,"x")+t,y:p(e,"y")+r})},t.prototype.scalePoint=function(e,t,r){return l({x:p(e,"x")*t,y:p(e,"y")*r})},a([d.noEffects],t.prototype,"originX",null),a([d.noEffects],t.prototype,"originY",null),a([d.noEffects],t.prototype,"width",null),a([d.noEffects],t.prototype,"height",null),a([d.noEffects],t.prototype,"selectable",null),a([d.noEffects],t.prototype,"hitTestingBoxMargin",null),a([d.noEffects],t.prototype,"locked",null),t}(s.wrapSuperClass(f.Editable));t.BezierCurveShape=m,s.declareClass({classId:37,clazz:m,superClass:f.Editable,memberDecorators:{originX:[d.noEffects],originY:[d.noEffects],width:[d.noEffects],height:[d.noEffects],selectable:[d.noEffects],hitTestingBoxMargin:[d.noEffects],locked:[d.noEffects],isLikePoint:[d.noEffects],displayer:[d.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(0).__context("module"),u=c.creator,l=c.getter,p=c.setter,h=c.caller,d=c.unwrapper,f=c.wrapper,y=r(0),m=r(11),g=r(10),v=r(25),b=r(27);!function(e){e[e.None=0]="None",e[e.LeftTop=1]="LeftTop",e[e.RightTop=2]="RightTop",e[e.RightBottom=3]="RightBottom",e[e.LeftBottom=4]="LeftBottom",e[e.Top=5]="Top",e[e.Right=6]="Right",e[e.Bottom=7]="Bottom",e[e.Left=8]="Left"}(s||(s={}));var P=function(e){function t(t,r){var n=e.call(this)||this;return n.isShiftPress=!1,n.rectangle=u({x:0,y:0,width:0,height:0}),n.rectangleWithHitMargin=u({x:0,y:0,width:0,height:0}),n.operatePoint=l(s,"None"),n._isLocked=!1,n.isOnlyHasUniformScaleShape=!1,n.includeComponentNodes=u([]),p(n,"context",t),p(n,"belongsToUserId",r),n}return i(t,e),Object.defineProperty(t.prototype,"isLocked",{get:function(){return l(this,"_isLocked")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originX",{get:function(){return l(l(this,"rectangleWithHitMargin"),"x")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originY",{get:function(){return l(l(this,"rectangleWithHitMargin"),"y")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return l(l(this,"rectangleWithHitMargin"),"width")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return l(l(this,"rectangleWithHitMargin"),"height")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUniformScale",{get:function(){if(l(this,"draggingContext"))switch(l(l(this,"draggingContext"),"targetId")){case"T":case"B":case"L":case"R":return!1}return l(this,"isShiftPress")||l(this,"isOnlyHasUniformScaleShape")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"includeComponents",{get:function(){for(var e=u([]),t=0,r=d(l(this,"includeComponentNodes"));t<r.length;t++){var n=r[t],i=l(n,"component");h(e,"push",[i])}return e},enumerable:!0,configurable:!0}),t.prototype.tryToStartEdit=function(e,t,r){var n=l(r,l(this,"key"));if(!n)for(var i in d(r))if(n=l(r,i))break;if(n){var a=h(this,"findOperationPointWithTargetId",[n]),s=l(a,"x"),c=l(a,"y"),f=l(a,"point");return p(this,"operatePoint",f),p(this,"draggingContext",u({targetId:n,startRectangle:u(o({},d(l(this,"rectangle")))),beginHitPoint:u({x:e,y:t}),deltaPoint:u({x:s-e,y:c-t})})),!0}return!1},t.prototype.hitTest=function(e,t,r){var n=l(this,"rectangleWithHitMargin");if(!h(v.RectangleTester,"testPoint",[l(n,"x"),l(n,"y"),l(n,"width"),l(n,"height"),e,t]))return!1;var i=l(r,0);if(void 0!==i){for(var o=0,a=d(l(this,"includeComponentNodes"));o<a.length;o++){var s=a[o],c=l(s,"component");if(i===l(c,"identifier"))return!0}return!1}return!0},t.prototype.findOperationPointWithTargetId=function(e){switch(e){case"LT":return u({x:l(l(this,"rectangle"),"x"),y:l(l(this,"rectangle"),"y"),point:l(s,"LeftTop")});case"RT":return u({x:l(l(this,"rectangle"),"x")+l(l(this,"rectangle"),"width"),y:l(l(this,"rectangle"),"y"),point:l(s,"RightTop")});case"LB":return u({x:l(l(this,"rectangle"),"x"),y:l(l(this,"rectangle"),"y")+l(l(this,"rectangle"),"height"),point:l(s,"LeftBottom")});case"RB":return u({x:l(l(this,"rectangle"),"x")+l(l(this,"rectangle"),"width"),y:l(l(this,"rectangle"),"y")+l(l(this,"rectangle"),"height"),point:l(s,"RightBottom")});case"T":return u({x:l(l(this,"rectangle"),"x")+l(l(this,"rectangle"),"width")/2,y:l(l(this,"rectangle"),"y"),point:l(s,"Top")});case"R":return u({x:l(l(this,"rectangle"),"x")+l(l(this,"rectangle"),"width"),y:l(l(this,"rectangle"),"y")+l(l(this,"rectangle"),"height")/2,point:l(s,"Right")});case"B":return u({x:l(l(this,"rectangle"),"x")+l(l(this,"rectangle"),"width")/2,y:l(l(this,"rectangle"),"y")+l(l(this,"rectangle"),"height"),point:l(s,"Bottom")});case"L":return u({x:l(l(this,"rectangle"),"x"),y:l(l(this,"rectangle"),"y")+l(l(this,"rectangle"),"height")/2,point:l(s,"Left")})}throw f(new Error('unrecognized targetId of EditorRectangleSpace "'+e+'"'))},t.prototype.dragToPoint=function(e,t){var r=h(this,"findDraggingTargetPoint",[e,t]);h(this,"updateRectangleWithDraggingTargetPoint",[r]),h(this,"refreshIncludesComponentsPositionAndSize",[]),h(this,"refreshRectangleWithHitMargin",[])},t.prototype.findDraggingTargetPoint=function(e,t){var r=l(this,"draggingContext"),n=l(r,"deltaPoint"),i=l(r,"beginHitPoint"),o=l(r,"startRectangle"),a=e+l(n,"x"),s=t+l(n,"y");if(l(this,"isUniformScale")){var c=l(o,"x")+l(o,"width")/2,d=l(o,"y")+l(o,"height")/2;if(!l(l(this,"draggingContext"),"orientationUnitVector")){var f=l(i,"x")+l(n,"x")-c,y=l(i,"y")+l(n,"y")-d,A=h(Math,"sqrt",[f*f+y*y]);p(l(this,"draggingContext"),"orientationUnitVector",u(0!==A?{x:f/A,y:y/A}:{x:1,y:1}))}var m=l(l(this,"draggingContext"),"orientationUnitVector"),g=s-d,v=(a-c)*l(m,"x")+g*l(m,"y");a=c+v*l(m,"x"),s=d+v*l(m,"y")}return u({x:a,y:s})},t.prototype.updateRectangleWithDraggingTargetPoint=function(e){var t=l(e,"x"),r=l(e,"y"),n=l(l(this,"draggingContext"),"startRectangle"),i=l(n,"x"),o=l(n,"y"),a=l(n,"x")+l(n,"width"),c=l(n,"y")+l(n,"height");switch(l(this,"operatePoint")){case l(s,"LeftTop"):i=t,o=r;break;case l(s,"RightTop"):a=t,o=r;break;case l(s,"RightBottom"):a=t,c=r;break;case l(s,"LeftBottom"):i=t,c=r;break;case l(s,"Top"):o=r;break;case l(s,"Right"):a=t;break;case l(s,"Bottom"):c=r;break;case l(s,"Left"):i=t}p(l(this,"rectangle"),"x",h(Math,"min",[i,a])),p(l(this,"rectangle"),"y",h(Math,"min",[o,c])),p(l(this,"rectangle"),"width",h(Math,"abs",[i-a])),p(l(this,"rectangle"),"height",h(Math,"abs",[o-c]))},t.prototype.refreshIncludesComponentsPositionAndSize=function(){for(var e=0,r=d(l(this,"includeComponentNodes"));e<r.length;e++){var n=r[e],i=l(n,"component"),o=l(n,"dx"),a=l(n,"dy"),s=l(n,"width"),c=l(n,"height");p(i,"originX",l(l(this,"rectangle"),"x")+o*l(l(this,"rectangle"),"width")),p(i,"originY",l(l(this,"rectangle"),"y")+a*l(l(this,"rectangle"),"height")),p(i,"width",s*l(l(this,"rectangle"),"width")),p(i,"height",c*l(l(this,"rectangle"),"height")),!l(this,"isOnlyHasUniformScaleShape")&&h(t,"isEnableProportionalScaling",[i])&&h(i,"adjustToKeepUniformScale",[])}},t.prototype.completeEdit=function(){p(this,"operatePoint",l(s,"None")),p(this,"draggingContext",void 0)},t.prototype.commitUpdateRectangle=function(e){for(var t=0,r=d(l(this,"includeComponentNodes"));t<r.length;t++){var n=r[t],i=l(n,"component"),a=l(n,"originRect"),s=u({updateRect:u(o({},d(a)))}),c=u({updateRect:u({x:l(i,"originX"),y:l(i,"originY"),width:l(i,"width"),height:l(i,"height")})});h(e,"commit",[l(i,"protoKey"),c,s])}},t.prototype.refreshRectangleByIncludesComponents=function(){var e=this;p(this,"rectangle",h(this,"findRectangleIncludePoints",[function(t){for(var r=0,n=d(l(e,"includeComponentNodes"));r<n.length;r++){var i=n[r],o=l(i,"component");t(l(o,"originX"),l(o,"originY")),t(l(o,"originX")+l(o,"width"),l(o,"originY")+l(o,"height"))}}])),h(this,"refreshRectangleWithHitMargin",[])},t.prototype.refreshWithIncludesComponents=function(e){var t=this,r=h(this,"findLockedComponent",[e]);p(this,"_isLocked",!!r)&&(e=u([r])),p(this,"rectangle",h(this,"findRectangleIncludePoints",[function(t){for(var r=0,n=d(e);r<n.length;r++){var i=n[r];t(l(i,"originX"),l(i,"originY")),t(l(i,"originX")+l(i,"width"),l(i,"originY")+l(i,"height"))}}])),p(this,"includeComponentNodes",h(e,"map",[function(e){var r,n,i,o;0!==l(l(t,"rectangle"),"width")?(r=(l(e,"originX")-l(l(t,"rectangle"),"x"))/l(l(t,"rectangle"),"width"),i=l(e,"width")/l(l(t,"rectangle"),"width")):(r=0,i=1),0!==l(l(t,"rectangle"),"height")?(n=(l(e,"originY")-l(l(t,"rectangle"),"y"))/l(l(t,"rectangle"),"height"),o=l(e,"height")/l(l(t,"rectangle"),"height")):(n=0,o=1);var a=u({x:l(e,"originX"),y:l(e,"originY"),width:l(e,"width"),height:l(e,"height")});return u({dx:r,dy:n,width:i,height:o,originRect:a,component:e})}])),h(this,"refreshRectangleWithHitMargin",[])},t.prototype.findLockedComponent=function(e){for(var t=0,r=d(e);t<r.length;t++){var n=r[t];if(l(n,"locked"))return n}return null},t.prototype.refreshRectangleWithHitMargin=function(){var e=this;p(this,"isOnlyHasUniformScaleShape",h(l(this,"includeComponentNodes"),"every",[function(e){var r=l(e,"component");return h(t,"isEnableProportionalScaling",[r])}])),p(this,"rectangleWithHitMargin",h(this,"findRectangleIncludePoints",[function(t){for(var r=0,n=d(l(e,"includeComponentNodes"));r<n.length;r++){var i=n[r],o=l(i,"component"),a=l(o,"hitTestingBoxMargin");t(l(o,"originX")-a,l(o,"originY")-a),t(l(o,"originX")+l(o,"width")+a,l(o,"originY")+l(o,"height")+a)}}]))},t.prototype.findRectangleIncludePoints=function(e){var t=l(Number,"MIN_SAFE_INTEGER"),r=l(Number,"MIN_SAFE_INTEGER"),n=l(Number,"MAX_SAFE_INTEGER"),i=l(Number,"MAX_SAFE_INTEGER");return e((function(e,o){t=h(Math,"max",[t,e]),n=h(Math,"min",[n,e]),r=h(Math,"max",[r,o]),i=h(Math,"min",[i,o])})),u({x:n,y:i,width:t-n,height:r-i})},t.isEnableProportionalScaling=function(e){return d(e)instanceof g.TextareaShape||!!(d(e)instanceof b.ImageShape&&l(e,"uniformScale"))},a([y.noEffects],t.prototype,"isLocked",null),a([y.noEffects],t.prototype,"hitTestingBoxMargin",null),a([y.noEffects],t.prototype,"originX",null),a([y.noEffects],t.prototype,"originY",null),a([y.noEffects],t.prototype,"width",null),a([y.noEffects],t.prototype,"height",null),a([y.noEffects],t.prototype,"isUniformScale",null),a([y.noEffects],t.prototype,"includeComponents",null),t}(c.wrapSuperClass(m.ApplianceComponent));t.EditorRectangleSpace=P,c.declareClass({classId:15,clazz:P,superClass:m.ApplianceComponent,memberDecorators:{isLocked:[y.noEffects],hitTestingBoxMargin:[y.noEffects],originX:[y.noEffects],originY:[y.noEffects],width:[y.noEffects],height:[y.noEffects],isUniformScale:[y.noEffects],includeComponents:[y.noEffects]}}),c=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.getter,u=s.creator,l=s.setter,p=s.caller,h=s.unwrapper,d=s.wrapper,f=s.remover,y=r(0),m=r(32),g=r(16),v=r(6),b=r(5),P=r(56),S=r(11),w=r(10),x=r(43);!function(e){e[e.None=0]="None",e[e.Selected=1]="Selected",e[e.OperationPoint=2]="OperationPoint"}(a||(a={}));var O=function(e){function t(t){var r=e.call(this)||this;return r.fixedCursorInScenePoint=void 0,r.beginPressPoint=null,r.draggingTarget=c(a,"None"),r.draggedComponentOriginPoints=u({}),r.isShiftPress=!1,r.latestOperateX=0,r.latestOperateY=0,l(r,"context",t),r}return i(t,e),t.prototype.onKeyUp=function(e){"lock"===c(e,"kind")&&(l(this,"isShiftPress",!1),p(this,"refreshMyEditorRectangleSpaceDragToPoint",[]))},t.prototype.onKeyDown=function(e){"lock"===c(e,"kind")&&(l(this,"isShiftPress",!0),p(this,"refreshMyEditorRectangleSpaceDragToPoint",[]))},t.prototype.onMemberStateChanged=function(e,t){var r=c(e,"currentApplianceName");"selector"!==r&&"selector"===c(t,"currentApplianceName")&&("text"!==r&&p(g,"releaseTextareaEditedBy",[c(c(this,"context"),"scene"),p(y,"getAuthorId",[])]),p(this,"cleanAllSelectingInformation",[]),l(this,"isShiftPress",!1),p(this,"refreshMyEditorRectangleSpaceDragToPoint",[]))},t.prototype.onSceneChanged=function(e){var t=p(c(c(this,"context"),"scenes"),"getScene",[e]);t&&p(g,"releaseAllTextarea",[t]),l(this,"isShiftPress",!1),p(this,"refreshMyEditorRectangleSpaceDragToPoint",[])},t.prototype.delete=function(){for(var e=c(c(this,"context"),"executorHub"),t=0,r=h(p(this,"allSelectedComponents",[]));t<r.length;t++){var n=r[t];e&&c(e,"enable")&&p(e,"commit",[c(n,"protoKey"),u({delete:!0}),u({create:p(n,"snapshot",[])})]),p(c(c(this,"context"),"scene"),"removeComponent",[n])}p(this,"refreshAllUsersEditorRectangleSpace",[])},t.prototype.copy=function(){var e=p(this,"findMyEditorRectangleSpace",[]);return e?d(new x.CopyBuffer(c(e,"includeComponents"))):null},t.prototype.duplicate=function(e,t){var r=c(c(this,"context"),"executorHub"),n=p(this,"findMyEditorRectangleSpace",[]);if(n){for(var i=c(n,"includeComponents"),o=c(Number,"MAX_SAFE_INTEGER"),a=c(Number,"MAX_SAFE_INTEGER"),s=c(Number,"MIN_SAFE_INTEGER"),d=c(Number,"MIN_SAFE_INTEGER"),f=0,A=h(i);f<A.length;f++){var m=A[f];o=p(Math,"min",[o,c(m,"originX")]),a=p(Math,"min",[a,c(m,"originY")]),s=p(Math,"max",[s,c(m,"originX")+c(m,"width")]),d=p(Math,"max",[d,c(m,"originY")+c(m,"height")])}for(var g=e-(o+s)/2,v=t-(a+d)/2,b=0,P=h(i);b<P.length;b++){m=P[b];var S=p(y,"copy",[m]);if(l(S,"highlightAuthorIds",u([])),l(S,"protoKey",p(y,"findIdentifierWith",[S])),l(S,"selectedBy",void 0),l(S,"originX",c(S,"originX")+g),l(S,"originY",c(S,"originY")+v),r&&c(r,"enable")){var w=u({create:p(S,"snapshot",[])});p(r,"commit",[c(S,"protoKey"),w,u({delete:!0})])}p(c(c(this,"context"),"scene"),"addComponent",[S])}}},t.prototype.onDestroy=function(){p(this,"cleanAllSelectingInformation",[]),p(g,"releaseTextareaEditedBy",[c(c(this,"context"),"scene"),p(y,"getAuthorId",[])])},t.prototype.cleanAllSelectingInformation=function(){var e=p(y,"getAuthorId",[]);c(this,"selectedGroup")&&(p(c(c(this,"context"),"scene"),"removeComponent",[c(this,"selectedGroup")]),l(this,"selectedGroup",void 0)),p(m,"setHighlightNothing",[c(c(this,"context"),"scene"),e]),p(this,"cleanSelectedComponents",[])},t.prototype.makeSureItsDraggingEvent=function(e){var t=p(this,"findMyEditorRectangleSpace",[]);return!!t&&!!c(c(e,"targetsMap"),c(t,"key"))},t.prototype.onDraggingStateChanged=function(e){var t=c(e,"x"),r=c(e,"y"),n=c(e,"targetsMap"),i=c(e,"hitTestIdentifies");if(c(this,"isDragging")){if((s=p(this,"findMyEditorRectangleSpace",[]))&&p(s,"tryToStartEdit",[t,r,n]))l(this,"draggingTarget",c(s,"isLocked")?c(a,"None"):c(a,"OperationPoint"));else if(s&&p(s,"hitTest",[t,r,i]))c(s,"isLocked")?l(this,"draggingTarget",c(a,"None")):p(this,"startDragWithSelectedMode",[]);else{p(g,"releaseTextareaEditedBy",[c(c(this,"context"),"scene"),p(y,"getAuthorId",[])]),p(this,"setComponentHighlight",[i]);var o=p(m,"findHighlightComponent",[c(c(this,"context"),"scene"),p(y,"getAuthorId",[])]);o&&c(o,"selectedBy")!==p(y,"getAuthorId",[])?p(this,"startDragWithHighlightMode",[o]):l(this,"draggingTarget",c(a,"None"))}l(this,"beginPressPoint",u({x:t,y:r}))}else{var s;(s=p(this,"findMyEditorRectangleSpace",[]))&&c(this,"draggingTarget")===c(a,"OperationPoint")&&p(s,"completeEdit",[]),c(this,"selectedGroup")&&(p(c(c(this,"context"),"scene"),"removeComponent",[c(this,"selectedGroup")]),l(this,"selectedGroup",void 0)),p(this,"commitUpdateRectangle",[]),l(this,"draggingTarget",c(a,"None")),l(this,"beginPressPoint",null),l(this,"draggedComponentOriginPoints",u({})),p(this,"setComponentHighlight",[i]),p(this,"refreshAllUsersEditorRectangleSpace",[])}},t.prototype.commitUpdateRectangle=function(){var e=c(c(this,"context"),"executorHub");if(e&&c(e,"enable")){var t=p(this,"findMyEditorRectangleSpace",[]);t&&p(t,"commitUpdateRectangle",[e])}},t.prototype.startDragWithSelectedMode=function(){l(this,"draggingTarget",c(a,"Selected"));for(var e=0,t=h(p(this,"allSelectedComponents",[]));e<t.length;e++){var r=t[e];l(c(this,"draggedComponentOriginPoints"),c(r,"key"),u({x:c(r,"originX"),y:c(r,"originY")}))}},t.prototype.startDragWithHighlightMode=function(e){l(this,"draggingTarget",c(a,"Selected")),l(c(this,"draggedComponentOriginPoints"),c(e,"key"),u({x:c(e,"originX"),y:c(e,"originY")}));var t=p(y,"getAuthorId",[]);c(e,"selectedBy")!==t&&(p(this,"cleanSelectedComponents",[]),l(e,"selectedBy",t),p(this,"refreshAllUsersEditorRectangleSpace",[]))},t.prototype.onDrag=function(e){var t=c(e,"x"),r=c(e,"y");switch(c(this,"draggingTarget")){case c(a,"Selected"):p(this,"dragComponents",[t,r].concat(h(p(this,"allSelectedComponents",[]))));break;case c(a,"OperationPoint"):l(this,"latestOperateX",t),l(this,"latestOperateY",r),p(this,"refreshMyEditorRectangleSpaceDragToPoint",[]);break;case c(a,"None"):c(this,"selectedGroup")||(l(this,"selectedGroup",d(new k(c(this,"context"),c(this,"beginPressPoint")))),p(c(c(this,"context"),"scene"),"addComponent",[c(this,"selectedGroup")])),p(c(this,"selectedGroup"),"updateEndPoint",[t,r]),p(this,"cleanSelectedComponents",[]);for(var n=c(this,"selectedGroup"),i=c(n,"originX"),o=c(n,"originY"),s=c(n,"width"),u=c(n,"height"),f=p(m,"searchEditableComponentsByRectangle",[c(c(this,"context"),"scene"),i,o,s,u]),A=p(y,"getAuthorId",[]),g=0,v=h(f);g<v.length;g++){var b=v[g];l(b,"selectedBy",A)}p(this,"refreshAllUsersEditorRectangleSpace",[])}},t.prototype.refreshMyEditorRectangleSpaceDragToPoint=function(){var e=p(this,"findMyEditorRectangleSpace",[]);e&&(l(e,"isShiftPress",c(this,"isShiftPress")),c(this,"draggingTarget")===c(a,"OperationPoint")&&p(e,"dragToPoint",[c(this,"latestOperateX"),c(this,"latestOperateY")]))},t.prototype.dragComponents=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];u(r);for(var i=e-c(c(this,"beginPressPoint"),"x"),o=t-c(c(this,"beginPressPoint"),"y"),a=0;a<c(r,"length");++a){var s=c(r,a),h=c(c(this,"draggedComponentOriginPoints"),c(s,"key"));l(s,"originX",c(h,"x")+i),l(s,"originY",c(h,"y")+o)}var d=p(this,"findMyEditorRectangleSpace",[]);d&&p(d,"refreshRectangleByIncludesComponents",[])},t.prototype.onHover=function(e){var t=c(e,"hitTestIdentifies");p(this,"setComponentHighlight",[t])},t.prototype.onClick=function(e){c(e,"x"),c(e,"y");var t=c(e,"hitTestIdentifies"),r=p(c(c(this,"context"),"scene"),"editableWithHitIdentifies",[t]),n=p(y,"getAuthorId",[]);if(r&&h(r)instanceof w.TextareaShape&&c(r,"selectedBy")===n&&void 0===c(r,"editedBy")){var i=p(y,"getAuthorId",[]);p(g,"releaseTextareaEditedBy",[c(c(this,"context"),"scene"),i]),p(r,"editByUserId",[i]),p(this,"cleanSelectedComponents",[]),l(this,"fixedCursorInScenePoint",u({x:c(r,"originX")-5,y:c(r,"originY")}))}else p(g,"releaseTextareaEditedBy",[c(c(this,"context"),"scene"),p(y,"getAuthorId",[])]),r?c(r,"selectedBy")!==n&&(p(this,"cleanSelectedComponents",[]),l(r,"selectedBy",n),p(this,"refreshAllUsersEditorRectangleSpace",[])):p(this,"cleanSelectedComponents",[]);p(this,"setComponentHighlight",[t])},t.prototype.setComponentHighlight=function(e){var t=p(c(c(this,"context"),"scene"),"editableWithHitIdentifies",[e]);p(m,"setHighlightNothing",[c(c(this,"context"),"scene"),p(y,"getAuthorId",[])]),t&&!c(t,"locked")&&p(t,"setHighlightBy",[!0,p(y,"getAuthorId",[])])},t.prototype.cleanSelectedComponents=function(){var e=p(y,"getAuthorId",[]);p(c(c(this,"context"),"scene"),"forEachComponents",[function(t){h(t)instanceof b.Editable&&c(t,"selectedBy")===e&&l(t,"selectedBy",void 0)}]),p(this,"refreshAllUsersEditorRectangleSpace",[]),l(this,"fixedCursorInScenePoint",void 0)},t.prototype.findMyEditorRectangleSpace=function(){var e=p(y,"getAuthorId",[]);return p(c(c(this,"context"),"scene"),"findComponentFromTop",[function(t){return h(t)instanceof P.EditorRectangleSpace&&c(t,"belongsToUserId")===e}])},t.prototype.refreshMyEditorRectangleSpace=function(){var e=p(this,"findMyEditorRectangleSpace",[]);e&&p(e,"refreshRectangleByIncludesComponents",[])},t.prototype.refreshAllUsersEditorRectangleSpace=function(){var e=u({}),t=u([]);p(c(c(this,"context"),"scene"),"forEachComponents",[function(r){if(h(r)instanceof P.EditorRectangleSpace)p(t,"push",[r]);else if(h(r)instanceof b.Editable&&void 0!==c(r,"selectedBy")){var n=c(e,c(r,"selectedBy"));n||(n=u([]),l(e,c(r,"selectedBy"),n)),p(n,"push",[r])}}]);for(var r=0,n=h(t);r<n.length;r++){var i=n[r],o=c(i,"belongsToUserId"),a=c(e,o);a&&c(a,"length")>0?p(i,"refreshWithIncludesComponents",[a]):p(c(c(this,"context"),"scene"),"removeComponent",[i]),f(e,o)}var s=p(y,"getAuthorId",[]),A=c(e,s);A&&(i=d(new P.EditorRectangleSpace(c(this,"context"),s)),p(i,"refreshWithIncludesComponents",[A]),p(c(c(this,"context"),"scene"),"addComponent",[i]))},t.prototype.moveSelectedComponentsToTop=function(){var e=p(this,"allSelectedComponents",[]),t=c(c(c(this,"context"),"scene"),"componentsCount");p(c(c(this,"context"),"scene"),"moveComponentsToIndex",[e,t])},t.prototype.moveSelectedComponentsToBottom=function(){p(c(c(this,"context"),"scene"),"moveComponentsToIndex",[p(this,"allSelectedComponents",[]),0])},t.prototype.allSelectedComponents=function(){var e=p(y,"getAuthorId",[]);return p(c(c(this,"context"),"scene"),"componentsWithFilter",[function(t){return h(t)instanceof b.Editable&&c(t,"selectedBy")===e}])},t}(s.wrapSuperClass(v.Gesture));t.Selector=O;var k=function(e){function t(t,r){var n=e.call(this)||this;return n.originX=0,n.originY=0,n.width=0,n.height=0,l(n,"context",t),l(n,"beginPoint",r),l(n,"originX",c(r,"x")),l(n,"originY",c(r,"y")),l(n,"width",0),l(n,"height",0),l(n,"belongsToUserId",p(y,"getAuthorId",[])),n}return i(t,e),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.updateEndPoint=function(e,t){var r=this;p(this,"refreshWithPoints",[function(n){n(e,t),n(c(c(r,"beginPoint"),"x"),c(c(r,"beginPoint"),"y"))}])},t.prototype.refreshWithPoints=function(e){var t=c(Number,"MIN_SAFE_INTEGER"),r=c(Number,"MIN_SAFE_INTEGER"),n=c(Number,"MAX_SAFE_INTEGER"),i=c(Number,"MAX_SAFE_INTEGER");e((function(e,o){t=p(Math,"max",[t,e]),n=p(Math,"min",[n,e]),r=p(Math,"max",[r,o]),i=p(Math,"min",[i,o])})),l(this,"originX",n),l(this,"originY",i),l(this,"width",t-n),l(this,"height",r-i)},o([y.noEffects],t.prototype,"hitTestingBoxMargin",null),t}(s.wrapSuperClass(S.ApplianceComponent));t.SelectedGroupRectangleSpace=k,s.declareClass({classId:27,clazz:O,superClass:v.Gesture}),s.declareClass({classId:26,clazz:k,superClass:S.ApplianceComponent,memberDecorators:{hitTestingBoxMargin:[y.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.getter,u=s.setter,l=s.caller,p=s.wrapper,h=s.creator,d=r(0),f=r(18),y=r(5),m=r(12);!function(e){e[e.Straight=0]="Straight",e[e.Arrow=1]="Arrow"}(t.VectorKind||(t.VectorKind={})),function(e){e[e.ToLeftTop=0]="ToLeftTop",e[e.ToRightTop=1]="ToRightTop",e[e.ToLeftBottom=2]="ToLeftBottom",e[e.toRightBottom=3]="toRightBottom"}(a=t.VectorDirection||(t.VectorDirection={}));var g=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.width=0,i.height=0,i.isPainting=!0,i.anchorPoint=null,i._direction=c(a,"ToLeftTop"),u(i,"state",l(t,"getMemberState",[])),u(i,"kind",r),u(i,"anchorPoint",n),u(i,"originX",c(n,"x")),u(i,"originY",c(n,"y")),i}return i(t,e),Object.defineProperty(t.prototype,"selectable",{get:function(){return!c(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestingBoxMargin",{get:function(){return c(c(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return c(this,"_direction")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.setEndPoint=function(e){var t=c(e,"x"),r=c(e,"y");if(c(this,"anchorPoint")){u(this,"originX",l(Math,"min",[c(c(this,"anchorPoint"),"x"),t])),u(this,"originY",l(Math,"min",[c(c(this,"anchorPoint"),"y"),r]));var n=l(Math,"max",[c(c(this,"anchorPoint"),"x"),t]),i=l(Math,"max",[c(c(this,"anchorPoint"),"y"),r]);u(this,"width",n-c(this,"originX")),u(this,"height",i-c(this,"originY"));var o=t-c(c(this,"anchorPoint"),"x"),s=r-c(c(this,"anchorPoint"),"y");u(this,"_direction",c(a,o<=0?s<=0?"ToLeftTop":"ToLeftBottom":s<=0?"ToRightTop":"toRightBottom"))}},t.prototype.completePainting=function(){u(this,"isPainting",!1)},t.prototype.rectHitTestContent=function(e,t,r,n,i,o){if(e===c(m.RectangleTestingResult,"IncludeByRectangle")||e===c(m.RectangleTestingResult,"Disjoint"))return e;var a=c(c(this,"state"),"strokeWidth")/2,s=l(this,"getBeginPoint",[]),u=l(this,"getEndPoint",[]),d=p(new m.ConvexPolygonTester),y=l(f,"unitVector",[h({x:c(u,"x")-c(s,"x"),y:c(u,"y")-c(s,"y")})]),A=l(f,"verticalVector",[y]);return l(d,"pushPoint",[h({x:c(u,"x")-c(A,"x")*a,y:c(u,"y")-c(A,"y")*a})]),l(d,"pushPoint",[h({x:c(u,"x")+c(A,"x")*a,y:c(u,"y")+c(A,"y")*a})]),l(d,"pushPoint",[h({x:c(s,"x")+c(A,"x")*a,y:c(s,"y")+c(A,"y")*a})]),l(d,"pushPoint",[h({x:c(s,"x")-c(A,"x")*a,y:c(s,"y")-c(A,"y")*a})]),l(d,"rectHitTest",[t,r,n,i])},t.prototype.getBeginPoint=function(){switch(c(this,"_direction")){case c(a,"ToLeftTop"):return h({x:c(this,"width"),y:c(this,"height")});case c(a,"ToRightTop"):return h({x:0,y:c(this,"height")});case c(a,"ToLeftBottom"):return h({x:c(this,"width"),y:0});case c(a,"toRightBottom"):return h({x:0,y:0})}},t.prototype.getEndPoint=function(){switch(c(this,"_direction")){case c(a,"ToLeftTop"):return h({x:0,y:0});case c(a,"ToRightTop"):return h({x:c(this,"width"),y:0});case c(a,"ToLeftBottom"):return h({x:0,y:c(this,"height")});case c(a,"toRightBottom"):return h({x:c(this,"width"),y:c(this,"height")})}},o([d.noEffects],t.prototype,"selectable",null),o([d.noEffects],t.prototype,"hitTestingBoxMargin",null),o([d.noEffects],t.prototype,"direction",null),o([d.noEffects],t.prototype,"locked",null),t}(s.wrapSuperClass(y.Editable));t.VectorShape=g,s.declareClass({classId:35,clazz:g,superClass:y.Editable,memberDecorators:{selectable:[d.noEffects],hitTestingBoxMargin:[d.noEffects],direction:[d.noEffects],locked:[d.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.creator,c=a.caller,u=a.getter,l=a.unwrapper,p=a.wrapper,h=a.setter,d=a.remover,f=r(19),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.plugins=s({}),t}return i(t,e),t.prototype.getKinds=function(){return c(Object,"keys",[u(this,"plugins")])},t.prototype.hasKind=function(e){return e in l(u(this,"plugins"))},t.prototype.put=function(e,t){if(c(this,"hasKind",[e]))throw p(new Error('invisible plugin "'+e+'" exits'));h(u(this,"plugins"),e,s(o({},l(t))))},t.prototype.remove=function(e){if(!c(this,"hasKind",[e]))throw p(new Error('invisible plugin "'+e+'" not exits'));d(u(this,"plugins"),e)},t.prototype.getAttributes=function(e,t){var r=u(u(this,"plugins"),e);if(!r)throw p(new Error('invisible plugin "'+e+'" not exits'));return f.getTreeValue(r,t)},t.prototype.updateAttributes=function(e,t){var r=s(o({},l(c(this,"getAttributes",[e]))));for(var n in l(t)){var i=u(t,n);void 0===i?d(r,n):h(r,n,i)}h(u(this,"plugins"),e,r)},t.prototype.updateAttributesWithKeys=function(e,t,r){var n=s(o({},l(c(this,"getAttributes",[e]))));f.updateTree(n,t,r),h(u(this,"plugins"),e,n)},t}(a.baseClass());t.InvisiblePluginManager=y,a.declareClass({classId:0,clazz:y}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inCircle=function(e,t,r,n){var i=r-e.x,o=n-e.y;return i*i+o*o<=t*t}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(62)),o=r(4),a=function(){function e(){this.points=[]}return e.prototype.pushPoint=function(e){this.points.push(e)},e.prototype.pointHitTest=function(e,t){for(var r=0;r<this.points.length;++r){var n=this.points[r],o=this.points[(r+1)%this.points.length],a={x:o.x-n.x,y:o.y-n.y};if(0!==a.x||0!==a.y){var s=i.verticalVector(a),c={x:e-n.x,y:t-n.y};if(i.dotProduct(s,c)<0)return!1}}return!0},e.prototype.rectHitTest=function(e,t,r,n){var i=this,a=!1,s=!1;if(o.RectangleTesting.iterate(e,t,r,n,(function(e,t){i.pointHitTest(e,t)?a=!0:s=!0})),a&&s)return o.RectangleTesting.Result.Cross;if(a)return o.RectangleTesting.Result.IncludeRectangle;if(s){for(var c=0;c<this.points.length;++c)for(var u=this.points[c],l=this.points[(c+1)%this.points.length],p=o.RectangleTesting.allPoints(e,t,r,n),h=0;h<p.length;++h){var d=p[h],f=p[(h+1)%p.length];if(this.findCrossPoint(u,l,d,f))return o.RectangleTesting.Result.Cross}for(var y=0,A=this.points;y<A.length;y++){var m=A[y];if(o.RectangleTesting.testPoint(e,t,r,n,m.x,m.y))return o.RectangleTesting.Result.IncludeByRectangle}}return o.RectangleTesting.Result.Disjoint},e.prototype.findCrossPoint=function(e,t,r,n){var i=t.y-e.y,o=e.x-t.x,a=e.x*(e.y-t.y)-e.y*(e.x-t.x),s=n.y-r.y,c=r.x-n.x,u=r.x*(r.y-n.y)-r.y*(r.x-n.x),l=i*c-s*o,p=(o*u-c*a)/l,h=(s*a-i*u)/l;if(Math.abs(p)===1/0||Math.abs(h)===1/0)return!1;if(Number.isNaN(p)||Number.isNaN(h))return!1;var d={x:p,y:h};return!(!this.isCrossPointBetweenSegment(d,e,t)||!this.isCrossPointBetweenSegment(d,r,n))},e.prototype.isCrossPointBetweenSegment=function(e,t,r){var n=(e.x-t.x)*(e.x-r.x),i=(e.y-t.y)*(e.y-r.y),o=Math.abs(n)<.01,a=Math.abs(i)<.01;return o&&a?n<=0&&i<=0:(n<=0||o)&&(i<=0||a)},e}();t.ConvexPolygonTester=a},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.linearDistance=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},t.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},t.verticalVector=function(e){var t=e.x;return{x:-e.y,y:t}},t.dotProduct=function(e,t){return e.x*t.x+e.y*t.y},t.isZero=function(e){return Math.abs(e)<1e-6},t.unitVector=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return e.x/=t,e.y/=t,e},t.plus=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},t.multiply=function(e,t){return{x:e*t.x,y:e*t.y}},t.triangleArea=function(e,t,r){var n=0;return n+=(t.y+e.y)*(t.x-e.x),n+=(r.y+t.y)*(r.x-t.x),n+=(e.y+r.y)*(e.x-r.x),Math.abs(n)/2},t.projectionPoint=function(e,t,r){return(r.x-e.x)*t.x+(r.y-e.y)*t.y},t.pointByProject=function(e,t,r){var i=n({},t);return i.x*=r,i.y*=r,i.x+=e.x,i.y+=e.y,i},t.meansOverlap=function(e){var t=e.x,r=e.y;return Number.isNaN(t)&&Number.isNaN(r)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(97)),o=function(){function e(t,r){var n=t.pathname;this.slideUrl=r;var i=(n=n.replace(/\.(xml|slide)\/?$/i,"")).split("/");if(i.length<3)throw new Error("invalid slide path "+n);var o=i[i.length-1],a=parseInt(o);if(Number.isNaN(a))throw new Error("invalid slide index "+JSON.stringify(o));var s=i[i.length-2];this.customPath=i.slice(0,i.length-3).join("/")+"/",this.host=e.filterHost(t.host),this.uuid=s,this.index=a-1}return Object.defineProperty(e.prototype,"directoryPath",{get:function(){return this.customPath+"dynamicConvert/"},enumerable:!0,configurable:!0}),e.parse=function(t){var r=new i.default(t);return"pptx:"===r.protocol&&/[a-z0-9\-]+\/\d+\.(xml|slide)\/?$/i.test(r.pathname)?new e(r,t):void 0},e.filterHost=function(e){switch(e){case"convertcdn.herewhite.com":case"white-cn-doc-convert.oss-cn-hangzhou.aliyuncs.com":case"white-cn-doc-convert.oss-accelerate.aliyuncs.com":case"cover.herewhite.com":case"white-cover.oss-cn-hangzhou.aliyuncs.com":case"white-cover.oss-accelerate.aliyuncs.com":return"convertcdn.netless.link";default:return e}},e}();t.SlideUrl=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(104)),n(r(105))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(110)),n(r(113)),n(r(114))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.findDefinition=function(e,t){var r=n.findClassId(t);if(r<0)throw new Error("find invalid class id "+r);var i=e.findDefinition(r);if(!i)throw new Error("cannot find appliance class with class id "+r);return i}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),r(15);var i=n(r(1));t.WhiteModel=i;var o=r(65);t.screenshot=o.screenshot,t.BezierCurvePainter=o.BezierCurvePainter,t.WhiteboardRender=o.WhiteboardRender;var a=r(15);t.EnginesHub=a.EnginesHub;var s=r(35);t.createDynamicPpt=s.createDynamicPpt;var c=r(64);t.PluginManager=c.PluginManager;var u=r(21);t.createLayoutDescriptions=u.createLayoutDescriptions,t.RenderEngine=u.RenderEngine,t.WhiteLayouts=u.WhiteLayouts},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(69),o=r(0),a=function(){function e(){this.backgroundEngine=n.creatHTMLRenderEngine({fixedSize:!0,isSVG:!1,orderIndex:0,className:"background"}),this.htmlGraphicsEngine=n.creatHTMLRenderEngine({fixedSize:!0,isSVG:!0,orderIndex:1,className:"graphics"}),this.canvasGraphicsEngine=n.createCanvasRenderEngine({fixedSize:!0,orderIndex:2,renderMode:1}),this.topGraphicsEngine=n.creatHTMLRenderEngine({fixedSize:!0,isSVG:!1,orderIndex:3,className:"graphics"}),this.pluginEngine=n.creatHTMLRenderEngine({fixedSize:!1,isSVG:!1,orderIndex:4,className:"component"}),this.componentEngine=n.creatHTMLRenderEngine({fixedSize:!1,isSVG:!1,orderIndex:5,className:"component"}),this.mouseCurosrEngine=n.creatHTMLRenderEngine({fixedSize:!1,isSVG:!1,orderIndex:6}),this.floatBarEngine=n.creatHTMLRenderEngine({fixedSize:!1,isSVG:!1,orderIndex:7,className:"component"}),this.engineDefinitions={},this.payloadTypes={},this.definitionParamsMap={}}return e.prototype.defineReact=function(e,t){var r=this;return function(n){return r.defineAndGetEngineDefinition(e,t).htmlRender=n,n}},e.prototype.defineCanvas=function(e,t){var r=this;return function(n){return r.defineAndGetEngineDefinition(e,t).canvasConstructor=n,n}},e.prototype.defineAndGetEngineDefinition=function(e,t){var r=this.engineDefinitions[e.id];r||(r=this.engineDefinitions[e.id]={});var n=o.findClassId(t),i=r[n];return i||(i=r[n]={}),this.payloadTypes[n]=t,i},e.prototype.defineComponent=function(e,t){var r=o.findClassId(e);this.definitionParamsMap[r]=t},e.prototype.complete=function(){for(var e={},t=0,r=this.engines();t<r.length;t++){var o=r[t],a=this.engineDefinitions[o.id];if(a)for(var s in a){var c=a[s],u=c.htmlRender,l=c.canvasConstructor,p=this.getOrCreateComponentDefinition(e,parseInt(s)).definition;u&&n.isHTMLRenderEngine(o)?o.bind(p)(i.observer(u)):l&&n.isCanvasRenderEngine(o)&&o.bind(p,l)}}var h=[];for(var s in e)h.push(e[s]);return this.clean(),h},e.prototype.engines=function(e){var t=[this.backgroundEngine,this.topGraphicsEngine,this.pluginEngine,this.componentEngine,this.mouseCurosrEngine,this.floatBarEngine];switch(e){case"svg":t.push(this.htmlGraphicsEngine);break;case"canvas":t.push(this.canvasGraphicsEngine);break;default:t.push(this.htmlGraphicsEngine),t.push(this.canvasGraphicsEngine)}return t},e.prototype.getOrCreateComponentDefinition=function(e,t){var r=e[t];if(!r){var i=this.payloadTypes[t],o=this.definitionParamsMap[t];o||(o={name:i.name}),r=e[t]=Object.freeze({definition:n.createComponentDefinition(o),payloadType:i,disableVisionTrim:!!o.disableVisionTrim,findTarget:o.findTarget})}return r},e.prototype.clean=function(){for(var e in this.engineDefinitions)delete this.engineDefinitions[e];for(var e in this.payloadTypes)delete this.payloadTypes[e];for(var e in this.definitionParamsMap)delete this.definitionParamsMap[e]},e}();t.RegisterImplement=a},function(e,t){e.exports=n("mobx-react")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(8);i.register.defineComponent(n.BackgroundImage,{name:"BackgroundImage",hitTest:!1,disableVisionTrim:!0}),i.register.defineComponent(n.ImageShape,{name:"ImageShape",hitTest:function(e){return!e.context.disalbeImageHit}}),i.register.defineComponent(n.EditorRectangleSpace,{name:"EditorRectangleSpace",hitTest:!1,findTarget:function(e,t){if(t.target&&t.target instanceof HTMLElement){var r=t.target;if(r.className.includes("operation-point")){var n=r.className.split(" ");return n[n.length-1]}}}}),i.register.defineComponent(n.CurveShape,{name:"CurveShape",hitTest:function(e,t,r,n,i){var a=t.payload;if(a.selectable){for(var s=new o.PolylineTester,c=0,u=a.displayPoints();c<u.length;c++){var l=u[c];s.pushPoint(l)}var p=Math.max(a.hitTestingBoxMargin,i),h=a.state.strokeWidth+p;return s.hitTest(h,r-a.originX,n-a.originY)}return!1}}),i.register.defineComponent(n.BezierCurveShape,{name:"BezierCurveShape",hitTest:function(e,t,r,n,i){var a=t.payload;if(a.selectable){var s=new o.PolylineTester,c=a.displayer(),u=c.headPoint,l=c.curves;s.pushPoint(u);for(var p=0,h=l;p<h.length;p++){var d=h[p];s.pushPoint(d.point3)}var f=Math.max(a.hitTestingBoxMargin,i),y=a.state.strokeWidth+f;return s.hitTest(y,r-a.originX,n-a.originY)}return!1}}),i.register.defineComponent(n.SelectedGroupRectangleSpace,{name:"SelectedGroupRectangleSpace",hitTest:!1}),i.register.defineComponent(n.TextareaShape,{name:"TextareaShape",disableVisionTrim:!0})},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.getter,s=o.caller,c=r(17),u=r(25),l=function(e){function t(t,r,n,i){var o=e.call(this)||this;return o.circleCenterX=t,o.circleCenterY=r,o.width=n,o.height=i,o}return i(t,e),t.prototype.pointHitTest=function(e,t){return(e=(e-a(this,"circleCenterX"))/a(this,"width")*2)*e+(t=(t-a(this,"circleCenterY"))/a(this,"height")*2)*t<=1},t.prototype.rectHitTest=function(e,t,r,n){var i=this,o=!1,l=!1;if(s(u.RectangleTester,"iterate",[e,t,r,n,function(e,t){s(i,"pointHitTest",[e,t])?o=!0:l=!0}]),o&&l)return a(c.RectangleTestingResult,"Cross");if(o)return a(c.RectangleTestingResult,"IncludeRectangle");if(l){for(var p=s(u.RectangleTester,"allPoints",[e,t,r,n]),h=0;h<a(p,"length");++h){var d=a(p,h),f=a(p,(h+1)%a(p,"length"));if(a(d,"x")===a(f,"x")){if(s(this,"checkCrossVertical",[a(d,"x"),a(d,"y"),a(f,"y")]))return a(c.RectangleTestingResult,"Cross")}else if(s(this,"checkCrossHorizontal",[a(d,"y"),a(d,"x"),a(f,"x")]))return a(c.RectangleTestingResult,"Cross")}if(s(u.RectangleTester,"testPoint",[e,t,r,n,a(this,"circleCenterX"),a(this,"circleCenterY")]))return a(c.RectangleTestingResult,"IncludeByRectangle")}return a(c.RectangleTestingResult,"Disjoint")},t.prototype.checkCrossVertical=function(e,t,r){return e=(e-a(this,"circleCenterX"))/a(this,"width")*2,t=(t-a(this,"circleCenterY"))/a(this,"height")*2,r=(r-a(this,"circleCenterY"))/a(this,"height")*2,s(this,"checkCrossGeometrical",[s(Math,"abs",[e]),t,r])},t.prototype.checkCrossHorizontal=function(e,t,r){return e=(e-a(this,"circleCenterY"))/a(this,"height")*2,t=(t-a(this,"circleCenterX"))/a(this,"width")*2,r=(r-a(this,"circleCenterX"))/a(this,"width")*2,s(this,"checkCrossGeometrical",[s(Math,"abs",[e]),t,r])},t.prototype.checkCrossGeometrical=function(e,t,r){if(e>1)return!1;var n=s(Math,"sqrt",[1-e*e]),i=s(Math,"max",[t,r]),o=s(Math,"min",[t,r]);return i>=n&&n>=o||i>=-n&&-n>=o},t}(o.baseClass());t.EllipseTester=l,o.declareClass({classId:10,clazz:l}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.creator,s=o.getter,c=o.unwrapper,u=o.caller,l=o.setter,p=o.postfix,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthThreshold=0,t.humpThreshold=0,t.points=a([]),t.plough=null,t._pushedCount=0,t}return i(t,e),Object.defineProperty(t.prototype,"is2DGraphic",{get:function(){return s(s(this,"points"),"length")>=2||!!s(this,"plough")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pushedCount",{get:function(){return s(this,"_pushedCount")},enumerable:!0,configurable:!0}),t.prototype.displayPoints=function(){var e=a(c(s(this,"points")).slice());return s(this,"plough")&&(e=u(this,"fillPloughPoints",[e])),e},t.prototype.complete=function(){return s(this,"plough")&&(u(this,"fillPloughPoints",[s(this,"points")]),l(this,"plough",null)),s(this,"points")},t.prototype.pushPoint=function(e,t){s(this,"widthThreshold")<=0||s(this,"humpThreshold")<=0?(s(this,"plough")&&(u(this,"fillPloughPoints",[s(this,"points")]),l(this,"plough",null)),u(s(this,"points"),"push",[a({x:e,y:t})])):0===s(s(this,"points"),"length")?u(s(this,"points"),"push",[a({x:e,y:t})]):s(this,"plough")?u(this,"appendToPlough",[e,t]):l(this,"plough",u(this,"createPlough",[e,t])),p(this,"_pushedCount",1)},t.prototype.createPlough=function(e,t){var r=s(s(this,"points"),s(s(this,"points"),"length")-1),n=e-s(r,"x"),i=t-s(r,"y"),o=u(Math,"sqrt",[n*n+i*i]);if(0!==o){var c=n/o,l=i/o,p=u(Math,"abs",[o]);return a({unitX:c,unitY:l,begin:0,end:p,endX:e,endY:t})}return null},t.prototype.appendToPlough=function(e,t){var r=s(s(this,"points"),s(s(this,"points"),"length")-1),n=e-s(r,"x"),i=t-s(r,"y"),o=s(this,"plough");if(u(Math,"abs",[s(o,"unitX")*i-n*s(o,"unitY")])<=s(this,"widthThreshold")){var a=n*s(o,"unitX")+i*s(o,"unitY");s(o,"begin")>a?l(o,"begin",a):s(o,"end")<a&&l(o,"end",a),l(o,"endX",e),l(o,"endY",t)}else u(this,"fillPloughPoints",[s(this,"points")]),l(this,"plough",u(this,"createPlough",[e,t]))},t.prototype.fillPloughPoints=function(e){var t=s(this,"plough"),r=s(t,"begin"),n=s(t,"end"),i=s(s(this,"points"),s(s(this,"points"),"length")-1),o=s(i,"x"),c=s(i,"y"),l=s(this,"plough"),p=s(l,"unitX"),h=s(l,"unitY"),d=s(l,"endX"),f=s(l,"endY"),y=(d-o)*p+(f-c)*h;if(y<0){var A=r;r=n,n=A}return u(Math,"abs",[r])>s(this,"humpThreshold")&&u(e,"push",[a({x:o+r*p,y:c+r*h})]),u(Math,"abs",[n-y])>s(this,"humpThreshold")&&u(e,"push",[a({x:o+n*p,y:c+n*h})]),u(e,"push",[a({x:d,y:f})]),e},t}(o.baseClass());t.SparsePloughPoints=h,o.declareClass({classId:38,clazz:h}),o=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=r(6),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t}(o.wrapSuperClass(a.Gesture));t.Clicker=s,o.declareClass({classId:14,clazz:s,superClass:a.Gesture}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=r(6),c=function(e){function t(t){var r=e.call(this)||this;return a(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t}(o.wrapSuperClass(s.Gesture));t.LaserPointer=c,o.declareClass({classId:21,clazz:c,superClass:s.Gesture}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=o.getter,c=o.caller,u=o.creator,l=o.unwrapper,p=r(0),h=r(32),d=r(6),f=function(e){function t(t){var r=e.call(this)||this;return a(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onHover=function(e){var t=s(e,"hitTestIdentifies"),r=c(s(s(this,"context"),"scene"),"editableWithHitIdentifies",[t]);c(h,"setHighlightNothing",[s(s(this,"context"),"scene"),c(p,"getAuthorId",[])]),r&&!s(r,"locked")&&c(r,"setHighlightBy",[!0,c(p,"getAuthorId",[])])},t.prototype.onClick=function(e){c(this,"removeHitComponents",[e])},t.prototype.onDrag=function(e){c(this,"removeHitComponents",[e])},t.prototype.removeHitComponents=function(e){for(var t=s(e,"hitTestIdentifies"),r=s(s(this,"context"),"executorHub"),n=0,i=l(c(s(s(this,"context"),"scene"),"editablesWithHitIdentifies",[t]));n<i.length;n++){var o=i[n];s(o,"locked")||(r&&s(r,"enable")&&c(r,"commit",[s(o,"protoKey"),u({delete:!0}),u({create:c(o,"snapshot",[])})]),c(s(s(this,"context"),"scene"),"removeComponent",[o]))}},t}(o.wrapSuperClass(d.Gesture));t.Eraser=f,o.declareClass({classId:18,clazz:f,superClass:d.Gesture}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=o.getter,c=o.caller,u=o.wrapper,l=r(0),p=r(16),h=r(6),d=r(10),f=function(e){function t(t){var r=e.call(this)||this;return a(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onMemberStateChanged=function(e,t){"text"!==s(e,"currentApplianceName")&&"text"===s(t,"currentApplianceName")&&c(p,"releaseTextareaEditedBy",[s(s(this,"context"),"scene"),c(l,"getAuthorId",[])])},t.prototype.onClick=function(e){var t=s(e,"x"),r=s(e,"y");c(p,"releaseTextareaEditedBy",[s(s(this,"context"),"scene"),c(l,"getAuthorId",[])]);var n=u(new d.TextareaShape(s(this,"context"),t,r));c(n,"editByUserId",[c(l,"getAuthorId",[])]);var i=s(c(s(this,"context"),"getMemberState",[]),"textSize");a(n,"textSize",16),16!==i&&c(n,"updateScale",[i/16]),c(s(s(this,"context"),"scene"),"addComponent",[n])},t.prototype.onDestroy=function(){c(p,"releaseTextareaEditedBy",[s(s(this,"context"),"scene"),c(l,"getAuthorId",[])])},t}(o.wrapSuperClass(h.Gesture));t.TextAppliance=f,o.declareClass({classId:30,clazz:f,superClass:h.Gesture}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=o.getter,c=o.caller,u=o.creator,l=o.wrapper,p=r(6),h=r(58),d=function(e){function t(t,r){var n=e.call(this)||this;return n.paitingVectorShape=null,n.beginPoint=null,a(n,"context",t),a(n,"kind",r),n}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.onSceneChanged=function(){s(this,"paitingVectorShape")&&c(s(this,"paitingVectorShape"),"completePainting",[]),a(this,"paitingVectorShape",null),a(this,"beginPoint",null)},t.prototype.onDraggingStateChanged=function(e){var t=s(e,"x"),r=s(e,"y");if(s(this,"isDragging"))a(this,"beginPoint",u({x:t,y:r})),a(this,"paitingVectorShape",l(new h.VectorShape(s(this,"context"),s(this,"kind"),s(this,"beginPoint")))),c(s(s(this,"context"),"scene"),"addComponent",[s(this,"paitingVectorShape")]);else if(s(this,"paitingVectorShape")){c(s(this,"paitingVectorShape"),"completePainting",[]);var n=s(s(this,"context"),"executorHub");if(n&&s(n,"enable")){var i=u({create:c(s(this,"paitingVectorShape"),"snapshot",[])});c(n,"commit",[s(s(this,"paitingVectorShape"),"protoKey"),i,u({delete:!0})])}a(this,"paitingVectorShape",null),a(this,"beginPoint",null)}},t.prototype.onDrag=function(e){s(this,"paitingVectorShape")&&c(s(this,"paitingVectorShape"),"setEndPoint",[e])},t.prototype.onDestroy=function(){s(this,"paitingVectorShape")&&c(s(this,"paitingVectorShape"),"completePainting",[])},t}(o.wrapSuperClass(p.Gesture));t.VectorAppliance=d;var f=function(e){function t(t){return e.call(this,t,s(h.VectorKind,"Straight"))||this}return i(t,e),t}(o.wrapSuperClass(d));t.StraightAppliance=f;var y=function(e){function t(t){return e.call(this,t,s(h.VectorKind,"Arrow"))||this}return i(t,e),t}(o.wrapSuperClass(d));t.ArrowAppliance=y,o.declareClass({classId:34,clazz:d,superClass:p.Gesture}),o.declareClass({classId:33,clazz:f,superClass:d}),o.declareClass({classId:32,clazz:y,superClass:d}),o=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("module"),a=o.setter,s=r(6),c=function(e){function t(t){var r=e.call(this)||this;return a(r,"context",t),r}return i(t,e),Object.defineProperty(t.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),t}(o.wrapSuperClass(s.Gesture));t.HandAppliance=c,o.declareClass({classId:19,clazz:c,superClass:s.Gesture}),o=null},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(62)),o=r(61),a=r(60),s=function(){function e(){this.points=[]}return e.prototype.pushPoint=function(e){this.points.push(e)},e.prototype.hitTest=function(e,t,r){return this.hitAnySegments(e,t,r)||this.hitAnyNodeCircles(e,t,r)},e.prototype.hitAnySegments=function(e,t,r){for(var n=e/2,a=1;a<this.points.length;++a){var s=this.points[a-1],c=this.points[a],u={x:c.x-s.x,y:c.y-s.y};if(!i.isZero(u.x)||!i.isZero(u.y)){var l=i.unitVector(i.verticalVector(u)),p=new o.ConvexPolygonTester,h=i.multiply(-n,l),d=i.multiply(n,l);if(p.pushPoint(i.plus(s,d)),p.pushPoint(i.plus(s,h)),p.pushPoint(i.plus(c,h)),p.pushPoint(i.plus(c,d)),p.pointHitTest(t,r))return!0}}return!1},e.prototype.hitAnyNodeCircles=function(e,t,r){for(var n=0;n<this.points.length;++n){var i=this.points[n];if(a.inCircle(i,e/2,t,r))return!0}return!1},e}();t.PolylineTester=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(){function e(e,t,r,n){this.circleCenterX=e,this.circleCenterY=t,this.width=r,this.height=n}return e.prototype.pointHitTest=function(e,t){return(e=(e-this.circleCenterX)/this.width*2)*e+(t=(t-this.circleCenterY)/this.height*2)*t<=1},e.prototype.rectHitTest=function(e,t,r,i){var o=this,a=!1,s=!1;if(n.RectangleTesting.iterate(e,t,r,i,(function(e,t){o.pointHitTest(e,t)?a=!0:s=!0})),a&&s)return n.RectangleTesting.Result.Cross;if(a)return n.RectangleTesting.Result.IncludeRectangle;if(s){for(var c=n.RectangleTesting.allPoints(e,t,r,i),u=0;u<c.length;++u){var l=c[u],p=c[(u+1)%c.length];if(l.x===p.x){if(this.checkCrossVertical(l.x,l.y,p.y))return n.RectangleTesting.Result.Cross}else if(this.checkCrossHorizontal(l.y,l.x,p.x))return n.RectangleTesting.Result.Cross}if(n.RectangleTesting.testPoint(e,t,r,i,this.circleCenterX,this.circleCenterY))return n.RectangleTesting.Result.IncludeByRectangle}return n.RectangleTesting.Result.Disjoint},e.prototype.checkCrossVertical=function(e,t,r){return e=(e-this.circleCenterX)/this.width*2,t=(t-this.circleCenterY)/this.height*2,r=(r-this.circleCenterY)/this.height*2,this.checkCrossGeometrical(Math.abs(e),t,r)},e.prototype.checkCrossHorizontal=function(e,t,r){return e=(e-this.circleCenterY)/this.height*2,t=(t-this.circleCenterX)/this.width*2,r=(r-this.circleCenterX)/this.width*2,this.checkCrossGeometrical(Math.abs(e),t,r)},e.prototype.checkCrossGeometrical=function(e,t,r){if(e>1)return!1;var n=Math.sqrt(1-e*e),i=Math.max(t,r),o=Math.min(t,r);return i>=n&&n>=o||i>=-n&&-n>=o},e}();t.EllipseTester=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(8);i.register.defineComponent(n.EllipseShape,{name:"EllipseShape",hitTest:function(e,t,r,n,i){var a=t.payload;if(a.selectable){r-=a.originX,n-=a.originY;var s=Math.max(a.hitTestingBoxMargin,i);if(!function(e,t){var r=e.width+2*t,n=e.height+2*t,i=e.width/2,a=e.height/2;return new o.EllipseTester(i,a,r,n)}(a,s).pointHitTest(r,n))return!1;var c=function(e,t){var r=e.width-2*t,n=e.height-2*t;if(!(r<=0||n<=0)){var i=e.width/2,a=e.height/2;return new o.EllipseTester(i,a,r,n)}}(a,s);return!c||!c.pointHitTest(r,n)}return!1}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2),o=r(8);i.register.defineComponent(n.RectangleShape,{name:"RectangleShape",hitTest:function(e,t,r,n,i){var a=t.payload;if(a.selectable){var s=function(e,t){var r=new o.ConvexPolygonTester,n=t,i=t,a=e.width-2*t,s=e.height-2*t;if(!(a<=0||s<=0))return r.pushPoint({x:n,y:i}),r.pushPoint({x:n+a,y:i}),r.pushPoint({x:n+a,y:i+s}),r.pushPoint({x:n,y:i+s}),r}(a,Math.max(a.hitTestingBoxMargin,i));return!s||!s.pointHitTest(r-a.originX,n-a.originY)}return!1}})},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(13)),o=r(1),a=r(2),s=r(8);a.register.defineComponent(o.VectorShape,{name:"VectorShape",hitTest:function(e,t,r,n,a){var c=t.payload;if(!c.selectable)return!1;r-=c.originX,n-=c.originY;var u=c.hitTestingBoxMargin,l=2*u,p=function(e){switch(e.direction){case o.VectorDirection.ToLeftTop:return{x:e.width,y:e.height};case o.VectorDirection.ToRightTop:return{x:0,y:e.height};case o.VectorDirection.ToLeftBottom:return{x:e.width,y:0};case o.VectorDirection.toRightBottom:return{x:0,y:0}}}(c);if(new s.EllipseTester(p.x,p.y,l,l).pointHitTest(r,n))return!0;if(i.isZero(c.width)&&i.isZero(c.height))return!1;var h=function(e){switch(e.direction){case o.VectorDirection.ToLeftTop:return{x:0,y:0};case o.VectorDirection.ToRightTop:return{x:e.width,y:0};case o.VectorDirection.ToLeftBottom:return{x:0,y:e.height};case o.VectorDirection.toRightBottom:return{x:e.width,y:e.height}}}(c);if(new s.EllipseTester(h.x,h.y,l,l).pointHitTest(r,n))return!0;var d=new s.ConvexPolygonTester,f=i.unitVector(i.verticalVector({x:h.x-p.x,y:h.y-p.y}));return d.pushPoint({x:h.x-f.x*u,y:h.y-f.y*u}),d.pushPoint({x:h.x+f.x*u,y:h.y+f.y*u}),d.pushPoint({x:p.x+f.x*u,y:p.y+f.y*u}),d.pushPoint({x:p.x-f.x*u,y:p.y-f.y*u}),d.pointHitTest(r,n)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(21),o=r(2),a=r(90),s=r(91),c=r(92),u=r(93);o.register.defineComponent(n.Shape,{name:"Shape",hitTest:function(e,t,r,n,o){var l=t.payload;if(!l.selectable)return!1;switch(l.shapeType){case i.ShapeType.Triangle:return a.triangleHitTest(e,l,r,n,o);case i.ShapeType.Rhombus:return s.rhombusHitTest(e,l,r,n,o);case i.ShapeType.Pentagram:return c.pentagramHitTest(e,l,r,n,o);case i.ShapeType.SpeechBalloon:return u.speechBalloonHitTest(e,l,r,n,o);default:return!0}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);t.triangleHitTest=function(e,t,r,i,o){var a=new n.PolylineTester,s=Math.max(t.hitTestingBoxMargin,o),c=t.strokeWidth+s;return a.pushPoint({x:0,y:t.height}),a.pushPoint({x:t.width,y:t.height}),a.pushPoint({x:t.width/2,y:0}),a.pushPoint({x:0,y:t.height}),a.hitTest(c,r-t.originX,i-t.originY)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);t.rhombusHitTest=function(e,t,r,i,o){var a=new n.PolylineTester,s=Math.max(t.hitTestingBoxMargin,o),c=t.strokeWidth+s,u=t.width/2,l=t.height/2;return a.pushPoint({x:u,y:0}),a.pushPoint({x:0,y:l}),a.pushPoint({x:u,y:t.height}),a.pushPoint({x:t.width,y:l}),a.pushPoint({x:u,y:0}),a.hitTest(c,r-t.originX,i-t.originY)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(33);t.pentagramHitTest=function(e,t,r,o,a){for(var s=new n.PolylineTester,c=Math.max(t.hitTestingBoxMargin,a),u=t.strokeWidth+c,l=0;l<i.unitPentagramPoints.length;l++){var p=i.unitPentagramPoints[l],h=p.x,d=p.y;s.pushPoint({x:h*t.width,y:d*t.height})}return s.pushPoint(i.unitPentagramPoints[0]),s.hitTest(u,r-t.originX,o-t.originY)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(34);t.speechBalloonHitTest=function(e,t,r,o,a){var s=new n.PolylineTester,c=Math.max(t.hitTestingBoxMargin,a),u=t.strokeWidth+c,l=t.width,p=t.height,h=p/100*80,d=l/100*10,f=l-d,y=h/100*10,A=h-y,m=2*d,g=2*m,v=g-m;return s.pushPoint({x:d,y:0}),s.pushPoint({x:f,y:0}),i.getBezierPoints(10,{x:f,y:0},{x:l,y:y},{x:l,y:0}).forEach((function(e){s.pushPoint(e)})),s.pushPoint({x:l,y:A}),i.getBezierPoints(10,{x:l,y:A},{x:f,y:h},{x:l,y:h}).forEach((function(e){s.pushPoint(e)})),s.pushPoint({x:g,y:h}),s.pushPoint({x:m+v/100*20,y:p}),s.pushPoint({x:m,y:h}),s.pushPoint({x:d,y:h}),i.getBezierPoints(10,{x:d,y:h},{x:0,y:A},{x:0,y:h}).forEach((function(e){s.pushPoint(e)})),s.pushPoint({x:0,y:y}),i.getBezierPoints(10,{x:0,y:y},{x:d,y:0},{x:0,y:0}).forEach((function(e){s.pushPoint(e)})),s.hitTest(u,r-t.originX,o-t.originY)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(0),u=r(1),l=r(4),p=r(2),h=r(35),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!c.isAkkoWrappedObjectAccessible(e))return null;var t=this.props.context,r=t.dynamicPpt,n=t.forcePPTLandscape,i=h.SlideUrl.parse(e.src),o=this.props.size,a=o.width,u=o.height;if(n){var p=a,d=u;a=Math.max(p,d),u=Math.min(p,d)}if(i)return s.createElement(l.CNode,{key:this.props.id,context:this.props.cnode},s.createElement(h.DynamicComponent,{url:i,dynamicPpt:r}));var f=e.src;return this.props.context.convertIdToUrl&&(f=this.props.context.convertIdToUrl(f)),s.createElement(l.CNode,{key:this.props.id,context:this.props.cnode},s.createElement("img",{src:f,width:a,height:u}))},t.disableVisionTrim=!0,o([p.register.defineReact(p.register.backgroundEngine,u.BackgroundImage)],t)}(s.Component);t.BackgroundImageComponent=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96);t.createDynamicPpt=function(e){return new n.DynamicPptImplement(e)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(63),o=r(22),a=r(98),s=r(100),c=function(){function e(e){var t=this,r=e.globalStateUpdater,n=e.preload,i=e.pptHandler,c=e.userFonts,u=e.observerId,l=e.renderMode,p=void 0===l?o.RenderMode.Normal:l,h=e.onPPTLoadProgress,d=e.onPPTMediaPlay,f=e.onPPTMediaPause,y=e.logger,A=e.pptParams,m=e.userPayload;this.nodes=[],this.onSlideReady=function(e,r){for(var n=0,i=t.nodes;n<i.length;n++){var o=i[n];o.url.uuid===e&&o.url.index===r&&o.delegate.onSlideReady()}},this.globalStateUpdater=r,this.userPayload=m,this.userId=""+u,this.loader=new a.SlideLoader({preload:n,userFonts:c,onSlideReady:this.onSlideReady,onPPTLoadProgress:h,logger:y,pptParams:A}),this.renderMode=p,this.onPPTMediaPlay=d,this.onPPTMediaPause=f,this.slideStateAdapter=new s.MySlideStateAdapter((function(e){return t.updateSlideState(e)}),i)}return e.prototype.updateSlideState=function(e){if(this.globalStateUpdater){var t=this.globalStateWith(n({},e));this.globalStateUpdater(t)}},e.prototype.setDisableInteractive=function(e){this.slideStateAdapter.setDisableInteractive(e)},e.prototype.moveStep=function(e){if(this.dynamicPptState||!this.nodes)if(this.dynamicPptState)for(var t=0,r=this.nodes;t<r.length;t++){var n=r[t];n.url.uuid===this.dynamicPptState.uuid&&n.url.index===this.dynamicPptState.pageIndex&&n.delegate.moveSlideStep(e)}else console.warn("dynamicPpt is not defined and there is no node");else this.nodes[0].delegate.moveSlideStep(e)},e.prototype.globalStateWith=function(t){var r;return(r={})[e.StateKey]=n(n({},this.dynamicPptState),t),r},e.prototype.setGlobalState=function(t){var r=t[e.StateKey];if(r){this.dynamicPptState=n({},r);for(var i=0,o=this.nodes;i<o.length;i++){var a=o[i];a.url.uuid===r.uuid&&a.url.index===r.pageIndex&&a.delegate.onSliderStateUpdate(this.dynamicPptState)}}else this.dynamicPptState=void 0},e.prototype.addDynamicPptDelegate=function(e,t){if(!this.nodes.some((function(e){return e.delegate===t}))){var r={url:e,delegate:t};this.nodes.push(r)}},e.prototype.removeDynamicPptDelegate=function(e){var t=this.nodes.findIndex((function(t){return t.delegate===e}));-1!==t&&this.nodes.splice(t,1)},e.prototype.updateObserverId=function(e){this.userId=""+e;for(var t=0,r=this.nodes;t<r.length;t++)r[t].delegate.onSliderObserverIdUpdate(this.userId)},e.prototype.getRenderMode=function(){return this.renderMode},Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(e){void 0!==this.userPayload&&void 0!==this.userPayload.userId?this._userId=""+this.userPayload.userId:this._userId=e},enumerable:!0,configurable:!0}),e.prototype.getPptState=function(){return this.dynamicPptState},e.prototype.getSlideUrl=function(e){return i.SlideUrl.parse(e)},e.prototype.getPptSildeDefinition=function(e){var t=i.SlideUrl.parse(e);return t?this.loader.getPptStateWithSlideUrl(t):void 0},e.prototype.getPptStateWithSlideUrl=function(e){return this.loader.getPptStateWithSlideUrl(e)},e.prototype.replayPasue=function(e){for(var t=0,r=this.nodes;t<r.length;t++)r[t].delegate.replayPause(e)},e.StateKey="__pptState",e}();t.DynamicPptImplement=c},function(e,t){e.exports=n("url-parse")},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(22),s=r(99),c=function(){function e(e){var t=this;this.fetchPPTDefinition=function(e){return i(t,void 0,void 0,(function(){var t,r,n,i,c,u,l,p,h,d=this;return o(this,(function(o){switch(o.label){case 0:return t=e.split(":"),r=t[0],n=t[1],i=t[2],c="https://"+r+n+i,u=this.onPPTLoadProgress&&function(e){d.onPPTLoadProgress(i,parseFloat(e))},[4,a.loadPPT(c,i,this.preload,u,this.userFonts,this.logger,this.pptParams)];case 1:return l=o.sent(),p=Object.freeze({uuid:i,width:l.width,height:l.height,slidesCount:l.slidesCount}),h=new s.FetcherHub((function(e){return d.fetchSlideDefinition(i,l,e)})),[2,Object.freeze({slideFetcher:h,definition:p})]}}))}))},this.preload=e.preload,this.userFonts=e.userFonts,this.onSlideReady=e.onSlideReady,this.onPPTLoadProgress=e.onPPTLoadProgress,this.pptFetcher=new s.FetcherHub(this.fetchPPTDefinition),this.logger=e.logger,this.pptParams=e.pptParams}return e.prototype.getPptStateWithSlideUrl=function(e){var t=e.host,r=e.directoryPath,n=e.uuid,i=e.index,o=t+":"+r+":"+n;return this.getPptStateRightNow(o,i)||void this.pptFetcher.getTarget(o).then((function(e){return e.slideFetcher.getTarget(i)}))},e.prototype.getPptStateRightNow=function(e,t){var r=this.pptFetcher.getTargetRightNow(e);if(r){var i=r.slideFetcher.getTargetRightNow(t);if(i)return n(n({},r.definition),i)}},e.prototype.fetchSlideDefinition=function(e,t,r){return i(this,void 0,void 0,(function(){var n,i,a,s=this;return o(this,(function(o){switch(o.label){case 0:return[4,t.loadSlide(r)];case 1:return n=o.sent(),i=n.animations.sequenceAnimesCounts[-1]||0,a=Object.freeze({index:r,data:n,progressCount:i+1}),setTimeout((function(){return s.onSlideReady(e,r)}),0),[2,a]}}))}))},e}();t.SlideLoader=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.fetcher=e,this.targets={},this.fetching={}}return e.prototype.getTargetRightNow=function(e){return this.targets[e]},e.prototype.getTarget=function(e){var t=this,r=this.targets[e];if(r)return Promise.resolve(r);var n=this.fetching[e];return n||(n=this.fetching[e]=this.fetcher(e)).then((function(r){t.targets[e]=r,delete t.fetching[e]})).catch((function(){delete t.fetching[e]})),n},e}();t.FetcherHub=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.onUpdateSlideState=e,this.pptHandler=t,this._disableInteractive=!0}return Object.defineProperty(e.prototype,"disableInteractive",{get:function(){return this._disableInteractive},enumerable:!0,configurable:!0}),e.prototype.setSlideStateAdapterCallbacks=function(e){this.callbacks=e},e.prototype.setState=function(e,t,r){this._disableInteractive||this.onUpdateSlideState(r)},e.prototype.onPageToNext=function(){this.pptHandler&&this.pptHandler.onPageToNext&&this.pptHandler.onPageToNext()},e.prototype.onPageToPrev=function(){this.pptHandler&&this.pptHandler.onPageToPrev&&this.pptHandler.onPageToPrev()},e.prototype.onPageJumpTo=function(e,t){this.pptHandler&&this.pptHandler.onPageJumpTo&&this.pptHandler.onPageJumpTo(e,t)},e.prototype.setDisableInteractive=function(e){this._disableInteractive=e},e}();t.MySlideStateAdapter=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(3)),s=r(22),c=function(e){function t(t){var r=e.call(this,t)||this;return r.dynamicPpt=t.dynamicPpt,r.url=t.url,r.dynamicPpt.addDynamicPptDelegate(r.url,r),r.state={observerId:r.dynamicPpt.userId,globalPptState:r.dynamicPpt.getPptState(),pptData:r.dynamicPpt.getPptStateWithSlideUrl(r.url),isReplayPause:!1},r}return i(t,e),t.prototype.componentWillUnmount=function(){this.dynamicPpt.removeDynamicPptDelegate(this)},t.prototype.moveSlideStep=function(e){this._sliderRef&&this._sliderRef.changeStep(e)},t.prototype.onSliderStateUpdate=function(e){this.setState({globalPptState:e})},t.prototype.onSliderObserverIdUpdate=function(e){this.setState({observerId:e})},t.prototype.onSlideReady=function(){if(!this.state.pptData){var e=this.dynamicPpt.getPptStateWithSlideUrl(this.url);this.setState({pptData:e})}},t.prototype.replayPause=function(e){this.setState({isReplayPause:e})},t.prototype.render=function(){var e=this;if(this.state.pptData){var t=this.state.globalPptState?this.state.globalPptState:{},r=this.state.pptData.data;return a.createElement(s.Slide,{data:r,renderMode:this.dynamicPpt.getRenderMode(),userId:this.state.observerId,pptState:t,stateAdapter:this.props.dynamicPpt.slideStateAdapter,ref:function(t){return e._sliderRef=t},pausing:this.state.isReplayPause,callbacks:{onMediaPlay:this.props.dynamicPpt.onPPTMediaPlay,onMediaPause:this.props.dynamicPpt.onPPTMediaPause}})}return null},t}(a.Component);t.DynamicComponent=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(4),u=r(0),l=r(1),p=r(2),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshCursorClassIfNeed=function(){var e=this.props.context;if(e.updateCursorClass){var t,r=this.props.payload.draggingContext;t=r?this.mapTargetIdToCursorClass(r.targetId):"cursor-selector",e.updateCursorClass(t)}},t.prototype.mapTargetIdToCursorClass=function(e){switch(e){case"LT":case"RB":return"cursor-nwse";case"LB":case"RT":return"cursor-nesw";case"T":case"B":return"cursor-ns";case"L":case"R":return"cursor-ew"}return""},t.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;this.refreshCursorClassIfNeed();var t=e.belongsToUserId===this.props.context.observerId?l.BelongsTo.Me:l.BelongsTo.Others,r=e.context.getMemberState(e.belongsToUserId);if(!r)return null;var n=r.strokeColor,i="rgb("+n[0]+", "+n[1]+", "+n[2]+")",o=null;return t===l.BelongsTo.Me&&(e.isLocked?(i="rgb(177, 177, 177)",o=this.renderLock()):o=this.renderOperationPoints(e,i)),s.createElement(c.CNode,{key:this.props.id,className:"editor-box",context:this.props.cnode,style:{borderColor:i}},o)},t.prototype.renderLock=function(){return s.createElement("img",{className:"lock",src:"https://sdk.netless.link/resource/icons/lock.svg"})},t.prototype.renderOperationPoints=function(e,t){var r=this.props.margin,n=r.left,i=r.right,o=r.top,a=r.bottom,u=e.isUniformScale,l=this.props.size.width-n-i,p=this.props.size.height-o-a,h=this.props.context.deviceType!==c.DeviceType.Touch?4.5:17.5;return s.createElement(s.Fragment,null,this.renderOperationPoint("left-top cursor-nwse","LT",t),this.renderOperationPoint("right-top cursor-nesw","RT",t),this.renderOperationPoint("left-bottom cursor-nesw","LB",t),this.renderOperationPoint("right-bottom cursor-nwse","RB",t),!u&&this.renderOperationPoint("top cursor-ns","T",t,{left:n+l/2-h}),!u&&this.renderOperationPoint("right cursor-ew","R",t,{top:o+p/2-h}),!u&&this.renderOperationPoint("bottom cursor-ns","B",t,{left:n+l/2-h}),!u&&this.renderOperationPoint("left cursor-ew","L",t,{top:o+p/2-h}))},t.prototype.renderOperationPoint=function(e,t,r,n){return void 0===n&&(n={}),this.props.context.deviceType===c.DeviceType.Touch?s.createElement("div",{className:"operation-point-touch "+e+" "+t,style:n},s.createElement("div",{style:{backgroundColor:r}})):(n.backgroundColor=r,s.createElement("div",{className:"operation-point-desktop "+e+" "+t,style:n}))},o([p.register.defineReact(p.register.componentEngine,l.EditorRectangleSpace)],t)}(s.Component);t.EditorRectangleSpaceComponent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(1),u=r(2),l=r(64),p=r(7);u.register.defineReact(u.register.componentEngine,c.PluginComponent)(p.createEditableComponent());var h=function(e){function t(t){var r=e.call(this,t)||this;return r.plugin=t.context.pluginManager.findPlugin(t.payload.kind),r.pluginInstance=r.plugin&&new l.PluginImplement(t.context.pluginManager,r.plugin,t.payload),r}var r;return i(t,e),r=t,t.hitTest=function(e,t,r,n,i){var o=t.payload;if(e.context.disalbeImageHit)return!1;if(o.selectable){var a=this.visibleMap[o.identifier];return!!a&&(!a.plugin.hitTest||a.plugin.hitTest(a,r,n,i))}return!1},t.willInterruptEvent=function(e,t,r){var n=this.visibleMap[t.payload.identifier];return!n||!!n.plugin.willInterruptEvent&&n.plugin.willInterruptEvent(n,r)},t.prototype.componentDidMount=function(){this.pluginInstance&&(r.visibleMap[this.pluginInstance.identifier]=this.pluginInstance)},t.prototype.componentWillUnmount=function(){this.pluginInstance&&(delete r.visibleMap[this.pluginInstance.identifier],this.pluginInstance.dispose())},t.prototype.render=function(){if(this.plugin&&this.pluginInstance){var e=this.plugin.render,t=this.props;return s.createElement(e,{plugin:this.pluginInstance,margin:t.margin,origin:t.origin,size:t.size,scale:t.scale,cnode:t.cnode})}return null},t.visibleMap={},r=o([u.register.defineReact(u.register.pluginEngine,c.PluginComponent)],t)}(s.Component);t.PluginRender=h,u.register.defineComponent(c.PluginComponent,{name:"PluginComponent",disableVisionTrim:!0,hitTest:h.hitTest.bind(h)})},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),o=function(){function e(e,t){void 0===e&&(e=Object.freeze({})),this.contextMap=i.observable.map({}),this._isPlaying=!0,this._playerTimestamp=0,this._playbackSpeed=1,this.plugins=e,this.operator=t}return Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playerTimestamp",{get:function(){return this._playerTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackSpeed",{get:function(){return this._playbackSpeed},enumerable:!0,configurable:!0}),e.prototype.setPlayerState=function(e){var t=e.isPlaying,r=e.timestamp,n=e.playbackSpeed;void 0!==t&&this._isPlaying!==t&&(this._isPlaying=t),void 0!==r&&this._playerTimestamp!==r&&(this._playerTimestamp=r),void 0!==n&&this._playbackSpeed!==n&&(this._playbackSpeed=n)},e.prototype.setPlayingState=function(e){this.setPlayerState({isPlaying:e})},e.prototype.setPluginContext=function(e,t){this.contextMap.set(e,t)},e.prototype.getPluginContext=function(e){return this.contextMap.get(e)},e.prototype.findPlugin=function(e){return this.plugins[e]},e.prototype.remove=function(e){this.operator&&this.operator.remove(e)},e.prototype.update=function(e,t){this.operator&&this.operator.update(e,t)},n([i.observable],e.prototype,"_isPlaying",void 0),n([i.observable],e.prototype,"_playerTimestamp",void 0),n([i.observable],e.prototype,"_playbackSpeed",void 0),e}();t.PluginManager=o},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),o=r(0),a=function(){function e(e,t,r){this.manager=e,this.plugin=t,this.component=r,this.pressedRect=null,this._isDraging=!1,this._isResizing=!1,this.kind=r.kind,this.identifier=r.key,this.reactionDisposer=this.startReaction()}return e.prototype.dispose=function(){this.reactionDisposer()},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.manager.isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playerTimestamp",{get:function(){return this.manager.playerTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackSpeed",{get:function(){return this.manager.playbackSpeed},enumerable:!0,configurable:!0}),e.prototype.startReaction=function(){var e=this;return i.reaction((function(){return{isPressed:e.component.isPressed,originX:e.component.originX,originY:e.component.originY,width:e.component.width,height:e.component.height}}),(function(t){t.isPressed?e.pressedRect?e.checkDragOrResize(e.pressedRect,t):e.pressedRect={originX:t.originX,originY:t.originY,width:t.width,height:t.height}:(e._isDraging&&(e._isDraging=!1),e._isResizing&&(e._isResizing=!1),e.pressedRect=null)}))},e.prototype.checkDragOrResize=function(e,t){this._isDraging||e.originX===t.originX&&e.originY===t.originY||(this._isDraging=!0),this._isResizing||e.width===t.width&&e.height===t.height||(this._isResizing=!0)},Object.defineProperty(e.prototype,"context",{get:function(){return this.manager.getPluginContext(this.kind)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originX",{get:function(){return this.component.originX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originY",{get:function(){return this.component.originY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.component.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.component.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this.component.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDraging",{get:function(){return this._isDraging&&!this._isResizing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResizing",{get:function(){return this._isResizing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.component.attributes},set:function(e){this.manager.update(this.identifier,{attributes:e})},enumerable:!0,configurable:!0}),e.prototype.putAttributes=function(e){var t,r=this.component.attributes;if("object"==A(t=e)&&null!==t&&o.findClass(r)===Object){var n={};for(var i in r)n[i]=i in e?e[i]:o.copy(r[i]);for(var i in e)i in n||(n[i]=e[i]);this.manager.update(this.identifier,{attributes:n})}},e.prototype.removeAttributeKeys=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.component.attributes;if(o.findClass(r)===Object){var n={};for(var i in r)-1===e.indexOf(i)&&(n[i]=o.copy(r[i]));this.manager.update(this.identifier,{attributes:n})}},e.prototype.update=function(e){this.manager.update(this.identifier,e)},e.prototype.remove=function(){this.manager.remove(this.identifier)},n([i.observable],e.prototype,"_isDraging",void 0),n([i.observable],e.prototype,"_isResizing",void 0),n([i.computed],e.prototype,"isDraging",null),e}();t.PluginImplement=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(0),u=r(1),l=r(4),p=r(2),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!c.isAkkoWrappedObjectAccessible(e))return null;var t=this.props.size,r=t.width,n=t.height,i=e.context.getMemberState(e.belongsToUserId);if(!i)return null;var o=i.strokeColor,a=o[0],u=o[1],p=o[2],h={left:0,top:0,width:r,height:n,boxShadow:"0 0 1px 0 #FFFFFF, inset 0 0 1px 0 #FFFFFF",border:"1px solid",borderColor:"rgb("+a+", "+u+", "+p+")",backgroundColor:"rgba("+a+", "+u+", "+p+", 0.15)"};return s.createElement(l.CNode,{key:this.props.id,className:"selected-group",style:h,context:this.props.cnode})},o([p.register.defineReact(p.register.componentEngine,u.SelectedGroupRectangleSpace)],t)}(s.Component);t.SelectedGroupRectangleSpaceComponent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var c=s(r(3)),u=r(0),l=r(1),p=r(4),h=r(14),d=r(2),f=r(7);function y(e,t,r){var n=t[e];return r&&e in r&&(n=r[e]),n}d.register.defineReact(d.register.componentEngine,l.TextareaShape)(f.createEditableComponent());var m=function(e){function t(t){var r=e.call(this,t)||this;r.shadowTextareaRef=null,r.textareaRef=null,r.miniWidth=0,r.miniHeight=0,r.latestTextareaWidth=0,r.latestTextareaHeight=0,r.onEditStateUpdate=function(e){e&&r.textareaRef?(r.textareaRef.readOnly=!1,r.textareaRef.focus()):r.textareaRef&&(r.textareaRef.readOnly=!0,r.textareaRef.blur())},r.onTextAreaChange=function(e){var t=e.target.value;if(r.shadowTextareaRef.value=t,r.props.context.updateTextarea){var n=r.createTextareaBox(t);r.props.context.updateTextarea(n,r.props.payload.identifier,t.length>0)}},r.setupShadowTextarea=function(e){r.shadowTextareaRef=e;var t=r.props.payload;e&&t&&u.isAkkoWrappedObjectAccessible(t)&&(e.value=" ",r.miniWidth=e.scrollWidth,r.miniHeight=e.scrollHeight,e.value=t.textareaBox.originalText,setTimeout((function(){if(r.props.context.updateTextarea){var n=r.createTextareaBox(e.value);r.props.context.updateTextarea(n,t.identifier,!1)}}),0))},r.setupTextarea=function(e){var t=r.props.payload;t&&u.isAkkoWrappedObjectAccessible(t)&&(r.props.context.observerId===t.editedBy&&e?e.focus():e&&e.blur()),r.textareaRef=e};var n=t.payload,i=t.context,o=i.observerId,a=i.textareaHub;if(r.disposer=h.reaction((function(){return n.editedBy===o}),r.onEditStateUpdate),a){var s=r.props.payload.identifier;a.addTextareaRectGetter(s,(function(e){var t=null;return r.shadowTextareaRef&&r.isSelectedOrEdited()&&(t=r.createTextareaRect(e)),t}))}return r}return i(t,e),t.willInterruptEvent=function(e,t,r){var n=t.payload;return!(!n||!u.isAkkoWrappedObjectAccessible(n))&&n.editedBy===e.context.observerId},t.prototype.componentWillUnmount=function(){var e=this.props.context.textareaHub;e&&e.removeTextareaRectGetter(this.props.payload.identifier),this.disposer()},t.prototype.createTextareaBox=function(e){return o(o({},this.createTextareaRect()),{textLines:[],originalText:e})},t.prototype.createTextareaRect=function(e){var t=this.shadowTextareaRef,r=this.props.payload,n=r.format,i=[];return y("bold",n,e)?t.style.fontWeight="bold":t.style.fontWeight="normal",y("italic",n,e)?t.style.fontStyle="italic":t.style.fontStyle="normal",y("underline",n,e)&&i.push("underline"),y("lineThrough",n,e)&&i.push("line-through"),i.length>0?t.style.textDecoration=i.join(" "):t.style.textDecoration="none",{scale:r.textareaBox.scale,width:Math.max(t.scrollWidth,this.miniWidth),height:Math.max(t.scrollHeight,this.miniHeight)}},t.prototype.refreshSize=function(e){var t=e.textareaBox;void 0!==t.originalText&&(this.latestTextareaWidth=t.width,this.latestTextareaHeight=t.height)},t.prototype.createTextareaStyle=function(e){var t={},r=e.format,n=[];return r.bold&&(t.fontWeight="bold"),r.italic&&(t.fontStyle="italic"),r.underline&&n.push("underline"),r.lineThrough&&n.push("line-through"),n.length>0&&(t.textDecoration=n.join(" ")),t},t.prototype.isSelectedOrEdited=function(){var e=this.props.context.observerId,t=this.props.payload;return e===t.selectedBy||e===t.editedBy},t.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;this.refreshSize(e);var t=e.editedBy===this.props.context.observerId,r=void 0!==e.editedBy,n=r?"textarea-border":"textarea-layout",i={boxSizing:"border-box"},o=r?"editable-textarea":"readonly-textarea",a=!1;if(t&&(o+=" my-textarea",a=!0),r){var s=e.context.getMemberState(e.editedBy);if(s){var l=s.strokeColor,h=l[0],d=l[1],f=l[2];i.borderColor="rgb("+h+","+d+","+f+")"}}var y=!0;this.props.context.textareaHub||(y=t);var A=e.format.color,m=A[0],g=A[1],v=A[2];return c.createElement(p.CNode,{className:n,fixedMode:a,context:this.props.cnode,style:i},this.renderEditableTextarea(e,"rgb("+m+","+g+","+v+")",o),y&&this.renderShadowTextarea(e,o))},t.prototype.renderEditableTextarea=function(e,t,r){var n=e.textareaBox.originalText,i=e.editedBy===this.props.context.observerId,a={width:this.latestTextareaWidth*e.currentScale,height:this.latestTextareaHeight*e.currentScale},s=o({position:"fixed",width:this.latestTextareaWidth+16,height:this.latestTextareaHeight,transform:"scale("+e.currentScale+")",transformOrigin:"top left",fontFamily:this.props.context.fontFamily,color:t,fontSize:e.textSize},this.createTextareaStyle(e));return c.createElement("div",{className:"textarea-container",style:a},c.createElement("textarea",{className:r,value:n,readOnly:!i,spellCheck:!1,wrap:"off",ref:this.setupTextarea,onChange:this.onTextAreaChange,style:s}))},t.prototype.renderShadowTextarea=function(e,t){return c.createElement("div",{style:{width:0,height:0,overflow:"hidden"}},c.createElement("textarea",{className:t,spellCheck:!1,wrap:"off",ref:this.setupShadowTextarea,style:{fontFamily:this.props.context.fontFamily,width:0,height:0,visibility:"hidden",fontSize:e.textSize}}))},t.disableVisionTrim=!0,a([d.register.defineReact(d.register.topGraphicsEngine,l.TextareaShape)],t)}(c.Component);t.TextareaShapeComponent=m},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(1),c=r(4),u=r(9),l=r(13),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.paintContent=function(e){var t=e.context,r=this.shape.state.strokeWidth,n=this.shape.displayPoints(),i=r/2,o=e.margin,a=this.shape.state.strokeColor,s=a[0],u=a[1],l=a[2];if(t.fillStyle="rgb("+s+","+u+","+l+")",1===n.length){var p=o.left+n[0].x,h=o.top+n[0].y;this.paintPoint(t,p,h,i)}else if(n.length>1){var d,f,y=!1,A=void 0,m=void 0;e.screenRect?(d=e.screenRect.originX-r,f=e.screenRect.originY-r,A=d+e.screenRect.width+2*r,m=f+e.screenRect.height+2*r):(y=!0,d=0,f=0,A=0,m=0);var g=y||e.paintingMode!==c.CanvasPaitingMode.Directly,v=n.length>2&&this.shape.enableBezier();t.lineWidth=r,t.strokeStyle="rgb("+s+","+u+","+l+")",t.lineJoin="round",t.lineCap="round",t.beginPath(),v?this.paintBezier(t,n,o,g,d,f,A,m):this.paintPolyline(t,n,o,g,d,f,A,m)}},t.prototype.paintBezier=function(e,t,r,n,i,o,a,s){for(var c={x:0,y:0},u={x:0,y:0},p={x:0,y:0},h=!1,d=0;d<t.length-1;++d){var f=r.left+t[d].x,y=r.left+t[d+1].x,A=r.top+t[d].y,m=r.top+t[d+1].y;d<t.length-2&&this.fillControlPoints(r,t[d],t[d+1],t[d+2],u,p),n||l.isSegementCrossRectangle(f,A,y,m,i,o,a,s)?(h||(e.moveTo(f,A),h=!0),0===d?e.quadraticCurveTo(u.x,u.y,y,m):d===t.length-2?e.quadraticCurveTo(f,A,y,m):e.bezierCurveTo(c.x,c.y,u.x,u.y,y,m)):h&&(e.stroke(),h=!1),c.x=p.x,c.y=p.y}h&&e.stroke()},t.prototype.paintPolyline=function(e,t,r,n,i,o,a,s){for(var c=!1,u=r.left+t[0].x,p=r.top+t[0].y,h=1;h<t.length;++h){var d=r.left+t[h].x,f=r.top+t[h].y;n||l.isSegementCrossRectangle(u,p,d,f,i,o,a,s)?(c||(e.moveTo(u,p),c=!0),e.lineTo(d,f)):c&&(e.stroke(),c=!1),u=d,p=f}c&&e.stroke()},t.prototype.fillControlPoints=function(e,t,r,n,i,o){var a,s,c=this.calcHypotenuse(r.x-t.x,r.y-t.y),u=this.calcHypotenuse(r.x-n.x,r.y-n.y)/(c+1e-6);u>1?(a=t.x-(r.x+(n.x-r.x)/(u+1e-6)),s=t.y-(r.y+(n.y-r.y)/(u+1e-6))):(a=r.x+(t.x-r.x)*u-n.x,s=r.y+(t.y-r.y)*u-n.y),a*=.1,s*=.1,i.x=e.left+r.x+a,i.y=e.top+r.y+s,o.x=e.left+r.x-a,o.y=e.top+r.y-s},t.prototype.calcHypotenuse=function(e,t){return Math.sqrt(e*e+t*t)},t.prototype.paintPoint=function(e,t,r,n){e.beginPath(),e.arc(t,r,n,0,2*Math.PI),e.fill()},o([a.register.defineCanvas(a.register.canvasGraphicsEngine,s.CurveShape)],t)}(u.AbstractCanvasRender);t.CurveShapePainter=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(1),c=r(2),u=r(65),l=r(9),p=r(115),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.paintContent=function(e){var t=e.context,r=e.margin,n=e.screen,i=this.shape.displayer(),o=i.headPoint,a=i.curves,s=i.extraSteups,c=this.context.bezierCurvePainter||u.BezierCurvePainter.default,l=this.shape.state.strokeWidth,p=this.shape.state.strokeColor,h="rgb("+p[0]+","+p[1]+","+p[2]+")";if(0===a.length){var d=l/2;this.shape.selectable||(d*=c.pointWeight(s,0));var f=o.x+r.left,y=o.y+r.top;t.fillStyle=h,this.paintPoint(t,f,y,d)}else t.strokeStyle=h,t.fillStyle=h,t.lineJoin="round",t.lineCap="round",n&&n.camera.scale,this.paintCurves(t,c,o,this.shape.identifier,a,l,n.camera.scale,s,r)},t.prototype.paintPoint=function(e,t,r,n){e.beginPath(),e.arc(t,r,n,0,2*Math.PI),e.fill()},t.prototype.paintCurves=function(e,t,r,n,i,o,a,s,c){for(var u=c.left,l=c.top,p=this.pointsCount(i),h=t.bezierRenderGranularity/a,f=t.getTailSegments(n),y=new d(e,r.x+u,r.y+l,o*t.pointWeight(s,p)),A=0,m=0;m<i.length;++m)if(!f||A<f.beginIndex){var g=i[m],v=g.point1,b=g.point2,P=g.point3,S=g.distance,w=g.cubic;A+=g.hiddenPoints+1;var x=o*t.pointWeight(s,p-A),O=Math.min(Math.ceil(S/h),t.bezierMaxSegments);y.curveTo(v.x+u,v.y+l,b.x+u,b.y+l,P.x+u,P.y+l,x,O,w)}else for(var k=this.shape,M=k.originX,C=k.originY,T=f.points,_=A-f.beginIndex+1;_<T.length;++_){A+=1;var I=T[_],E=(x=o*t.pointWeight(s,p-A),I.x+u-M),j=I.y+l-C;y.lineTo(E,j,x)}y.close()},t.prototype.pointsCount=function(e){for(var t=e.length+1,r=0;r<e.length;++r)t+=e[r].hiddenPoints;return t},o([c.register.defineCanvas(c.register.canvasGraphicsEngine,s.BezierCurveShape)],t)}(l.AbstractCanvasRender);t.BezierCurveShapePainter=h,function(e){e[e.Native=0]="Native",e[e.Variable=1]="Variable",e[e.None=2]="None"}(a||(a={}));var d=function(){function e(e,t,r,n){this.phase=a.None,this.variablePainter=null,this.context=e,this.lastPoint={x:t,y:r,width:n}}return e.prototype.lineTo=function(e,t,r){switch(this.checkAndUpdatePhase(r)){case a.Native:this.context.lineTo(e,t);break;case a.Variable:this.variablePainter.lineTo(e,t,r)}this.updateLastPoint(e,t,r)},e.prototype.curveTo=function(e,t,r,n,i,o,s,c,u){switch(this.checkAndUpdatePhase(s)){case a.Native:this.context.bezierCurveTo(e,t,r,n,i,o);break;case a.Variable:this.variablePainter.curveTo(e,t,r,n,i,o,s,c,u)}this.updateLastPoint(i,o,s)},e.prototype.close=function(){this.closeCurveIfNeed(),this.phase=a.None},e.prototype.updateLastPoint=function(e,t,r){this.lastPoint.x=e,this.lastPoint.y=t,this.lastPoint.width=r},e.prototype.checkAndUpdatePhase=function(e){var t;return t=this.lastPoint.width===e?a.Native:a.Variable,this.phase!==t&&(this.closeCurveIfNeed(),this.phase=t,this.beginCurveIfNeed()),t},e.prototype.beginCurveIfNeed=function(){var e=this.lastPoint,t=e.x,r=e.y,n=e.width;switch(this.phase){case a.Native:this.context.lineWidth=n,this.context.beginPath(),this.context.moveTo(t,r);break;case a.Variable:this.variablePainter=new p.VariableWeightCurvePainter,this.variablePainter.beginCurve(t,r,n)}},e.prototype.closeCurveIfNeed=function(){switch(this.phase){case a.Native:this.context.stroke();break;case a.Variable:this.variablePainter.endCurve(this.context)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(111),o=r(112),a=r(66),s=function(){function e(e,t,r,n){var s=this;this._foucsScenePath=void 0,this._maskFloatBar=!1,this.findDefinition=function(e){return a.findDefinition(s.engines,e)},this.screen=e,this.applianceManager=r,this.engines=n,this.currentPath=this.toPath(r.getCurrentScenePath()),this.floatBarManager=new i.FloatBarManager(e),this.container=new o.ApplianceContainer(e,this.findDefinition)}return Object.defineProperty(e.prototype,"foucsScenePath",{get:function(){return this._foucsScenePath},set:function(e){this._foucsScenePath!==e&&(this._foucsScenePath=e,this.refreshSceneComponents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskFloatBar",{get:function(){return this._maskFloatBar},set:function(e){this._maskFloatBar!==e&&(this._maskFloatBar=e,e?this.floatBarManager.clean():this.floatBarManager.refreshSceneComponents(this.getApplianceComponents()))},enumerable:!0,configurable:!0}),e.prototype.refreshSceneComponents=function(){var e=this.getApplianceComponents();this.container.refreshSceneComponents(e),this._maskFloatBar||this.floatBarManager.refreshSceneComponents(e)},e.prototype.getApplianceComponents=function(){var e=this._foucsScenePath;"string"!=typeof e&&(e=this.toPath(this.applianceManager.getCurrentScenePath())),this.currentPath!==e&&(this.currentPath=e,this.floatBarManager.clean(),this.container.release(),this.container=new o.ApplianceContainer(this.screen,this.findDefinition));var t=this.toPathList(this.currentPath),r=this.applianceManager.scenes.getScene(t);return r?r.components:[]},e.prototype.getTargetsMap=function(e,t){var r,i=e.payload,o=n.findIdentifierWith(i),s=void 0;if(i){var c=a.findDefinition(this.engines,i);if(c.findTarget){var u=c.findTarget(i,t);void 0!==u&&((r={})[o]=u,s=r)}}return s},e.prototype.release=function(){this.floatBarManager.clean(),this.container.release()},e.prototype.toPath=function(e){return"/"+e.join("/")},e.prototype.toPathList=function(e){return e.replace(/^\//,"").split("/")},e}();t.WhiteboardRender=s},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1)),o=r(0),a=r(1),s=r(15),c=function(){function e(e){this.screen=e,this.floatBar=null}return e.prototype.refreshSceneComponents=function(e){var t=this.screen.context.floatBarClass,r=t&&this.selectComponent(e);t&&r?this.floatBar?this.moveFloatBar(this.floatBar,r):this.floatBar=this.createFloatBar(r):this.floatBar&&(this.removeFloatBar(this.floatBar),this.floatBar=null)},e.prototype.clean=function(){this.floatBar&&(this.removeFloatBar(this.floatBar),this.floatBar=null)},e.prototype.selectComponent=function(e){for(var t=this.screen.context.observerId,r=null,n=0,i=e;n<i.length;n++){var s=i[n];if(o.isInstanceOf(s,a.EditorRectangleSpace)){var c=s;if(c.belongsToUserId===t){r=c;break}}else if(o.isInstanceOf(s,a.TextareaShape)&&s.editedBy===t){r=s;break}}return r},e.prototype.createFloatBar=function(e){var t=this.getDescription(e);return this.screen.scene.addComponent({id:"float-bar",definition:s.floatBarDefinition,sceneMargin:e.hitTestingBoxMargin,disableVisionTrim:!1,absoluteCoordinates:!0,payload:t,originX:0,originY:0,width:this.screen.width,height:this.screen.height})},e.prototype.moveFloatBar=function(e,t){var r=this.getDescription(t);this.isFloatBarDescriptionEquals(e.payload,r)||(e.payload=r)},e.prototype.removeFloatBar=function(e){this.screen.scene.removeComponent(e)},e.prototype.isFloatBarDescriptionEquals=function(e,t){if(e.screenSize.width!==t.screenSize.width)return!1;if(e.screenSize.height!==t.screenSize.height)return!1;var r=e.rectangle,n=t.rectangle;if(r.originX!==n.originX||r.originY!==n.originY||r.width!==n.width||r.height!==n.height)return!1;var i=e.components,o=t.components;if(i.length!==o.length)return!1;for(var a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0},e.prototype.getDescription=function(e){var t=[],r=this.getRectangleOnScreen(e);return o.isInstanceOf(e,a.EditorRectangleSpace)?t.push.apply(t,e.includeComponents):t.push(e),Object.freeze({whiteModel:i,rectangle:r,components:Object.freeze(t),margin:e.hitTestingBoxMargin,screenSize:Object.freeze({width:this.screen.width,height:this.screen.height})})},e.prototype.getRectangleOnScreen=function(e){var t=e.originX,r=e.originY,n=e.width,i=e.height,o=e.hitTestingBoxMargin,a=this.screen.convertPointToScreen(t-o,r-o),s=this.screen.convertPointToScreen(t+n+o,r+i+o);return Object.freeze({originX:a.x,originY:a.y,width:s.x-a.x,height:s.y-a.y})},e}();t.FloatBarManager=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),i=r(1),o=r(0),a=r(15),s=function(){function e(e,t){this.applianceNodes={},this.screen=e,this.findDefinition=t}return e.prototype.refreshSceneComponents=function(e){for(var t={},r=[],n=this.screen.context.observerId,a=0;a<e.length;++a){var s=e[a],u=o.findIdentifierWith(s);if((d=this.applianceNodes[u])&&d.appliance===s)delete this.applianceNodes[u];else{var l=void 0;o.isInstanceOf(s,i.BackgroundImage)&&(l=s.previewURL),d=new c(this,u,n,s,l),r.push(d)}d.setOrderIndex(a),t[u]=d}for(var u in this.applianceNodes)this.applianceNodes[u].remove();for(var p=0,h=r;p<h.length;p++){var d;(d=h[p]).addToScene()}this.applianceNodes=t},e.prototype.findApplianceComponent=function(e){var t=this.applianceNodes[e];return t?t.appliance:void 0},e.prototype.release=function(){for(var e in this.applianceNodes)this.applianceNodes[e].remove()},e}();t.ApplianceContainer=s;var c=function(){function e(e,t,r,n,i){this.didRemoved=!1,this.container=e,this.identifier=t,this.observerId=r,this.appliance=n,this.previewURL=i}return e.prototype.setOrderIndex=function(e){this.component?this.component.orderIndex=e:this.orderIndex=e},e.prototype.addToScene=function(){var e=this;this.disposer=n.autorun((function(){if(e.component)o.isAkkoWrappedObjectAccessible(e.appliance)&&(e.component.setRectangle(e.appliance.originX,e.appliance.originY,e.appliance.width,e.appliance.height),e.component.setSceneMargin(e.appliance.hitTestingBoxMargin),e.component.setVisible(a.register.componentEngine,e.shouldDisplayOnHTMLLayout(e.appliance)));else if(!e.didRemoved){var t=e.container.findDefinition(e.appliance),r=t.definition,n=t.disableVisionTrim;e.component=e.container.screen.scene.addComponent({id:e.identifier,definition:r,originX:e.appliance.originX,originY:e.appliance.originY,width:e.appliance.width,height:e.appliance.height,sceneMargin:e.appliance.hitTestingBoxMargin,disableVisionTrim:n,payload:e.appliance,previewURL:e.previewURL,orderIndex:e.orderIndex}),e.component.setVisible(a.register.componentEngine,e.shouldDisplayOnHTMLLayout(e.appliance)),delete e.orderIndex}}))},e.prototype.remove=function(){!this.didRemoved&&this.component&&(this.container.screen.scene.removeComponent(this.component),this.disposer&&this.disposer(),this.didRemoved=!0)},e.prototype.shouldDisplayOnHTMLLayout=function(e){var t=!1;return o.isInstanceOf(e,i.Editable)?t=this.shouldHighlight(e):(o.isInstanceOf(e,i.SelectedGroupRectangleSpace)||o.isInstanceOf(e,i.EditorRectangleSpace))&&(t=this.shouldDisplayRectangleSpace(e)),t},e.prototype.shouldHighlight=function(e){return!(!o.isAkkoWrappedObjectAccessible(e)||e.locked||!e.isHighlightBy(this.observerId)&&(this.container.screen.context.disableOthersSelectingBox?this.selectedBy(e.selectedBy)!==i.BelongsTo.Me:this.selectedBy(e.selectedBy)===i.BelongsTo.None))},e.prototype.shouldDisplayRectangleSpace=function(e){return!this.container.screen.context.disableOthersSelectingBox||e.belongsToUserId===this.observerId},e.prototype.selectedBy=function(e){return void 0===e?i.BelongsTo.None:e===this.observerId?i.BelongsTo.Me:i.BelongsTo.Others},e}()},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),a=r(0),s=r(4),c=r(22),u=r(35),l=r(66);t.screenshot=function(e){return new p(e).render()};var p=function(){function e(e){this.pluginManager=e.pluginManager,this.bezierCurvePainter=e.bezierCurvePainter;var t=new s.Boundless(s.DeviceType.Desktop);this.scene=t.createScene(),this.width=e.width,this.height=e.height,this.applianceManager=e.applianceManager,this.engines=e.engines,this.camera=e.camera,this.userFonts=e.userFonts,this.wrappedComponents=e.wrappedComponents;var r=e.path&&i(e.path),n=e.applianceManager.scenes,o=r?n.getScene(r):n.currentScene;o&&this.addApplianceComponents(o.components)}return e.prototype.addApplianceComponents=function(e){for(var t=this.engines.engines.componentEngine,r=0,n=e;r<n.length;r++){var i=n[r],s=a.findIdentifierWith(i),c=l.findDefinition(this.engines,i),u=c.definition,p=c.disableVisionTrim,h=void 0;a.isInstanceOf(i,o.BackgroundImage)&&(h=i.previewURL),this.scene.addComponent({id:s,definition:u,originX:i.originX,originY:i.originY,width:i.width,height:i.height,sceneMargin:i.hitTestingBoxMargin,disableVisionTrim:p,previewURL:h,payload:i}).setVisible(t,!1)}},e.prototype.render=function(){var e={deviceType:s.DeviceType.Desktop,observerId:a.AdminObserverId,forcePPTLandscape:!1,disalbeImageHit:!1,disableOthersSelectingBox:!1,pluginManager:this.pluginManager,bezierCurvePainter:this.bezierCurvePainter,dynamicPpt:u.createDynamicPpt({preload:!1,userFonts:this.userFonts,observerId:a.AdminObserverId,renderMode:c.RenderMode.Preview})},t=this.scene.createScreen({engines:this.engines.enginesList,context:e,autoResize:!1,width:this.width,height:this.height,className:"netless-whiteboard",wrappedComponents:this.wrappedComponents}),r=this.camera;return r||(t.adaptRectangle(n(n({},this.createRectangleIncludesAllComponents()),{adapterMode:s.RectangleAdapterMode.Centering,animationMode:s.AnimationMode.Immediately})),r=t.camera),e.dynamicPpt.setGlobalState(this.applianceManager.getGlobalState()),t.renderScreenshot({camera:r})},e.prototype.createRectangleIncludesAllComponents=function(){if(this.scene.components.length>0){for(var e=Number.MAX_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,i=0,s=this.scene.components;i<s.length;i++){var c=s[i],u=c.originX,l=c.originY,p=c.width,h=c.height,d=a.isInstanceOf(c,o.Editable)?c.hitTestingBoxMargin:0;e=Math.min(e,u-d),t=Math.min(t,l-d),r=Math.max(r,u+p+d),n=Math.max(n,l+h+d)}return{originX:e,originY:t,width:r-e,height:n-t}}return{originX:0,originY:0,width:0,height:0}},e}();t.ScreenshotRender=p},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.bezierRenderGranularity=2.5,this.bezierMaxSegments=30,this.paintingState=null,this.convergenceSteps=Object.freeze(n(e))}return Object.defineProperty(e.prototype,"maxExtraSteups",{get:function(){return this.convergenceSteps.length-1},enumerable:!0,configurable:!0}),e.prototype.startPainting=function(e){this.paintingState={identifier:e,beginIndex:0,points:[]}},e.prototype.getTailSegments=function(e){var t=null;return this.paintingState&&this.paintingState.identifier===e&&(t={points:this.paintingState.points,beginIndex:this.paintingState.beginIndex}),t},e.prototype.completePainting=function(){this.paintingState=null},e.prototype.pushPoint=function(e,t){var r;null===(r=this.paintingState)||void 0===r||r.points.push({x:e,y:t})},e.prototype.cleanAndKeepPoints=function(e){if(this.paintingState){var t=e;this.paintingState.points.splice(0,t),this.paintingState.beginIndex+=t}},e.prototype.pointWeight=function(e,t){var r=e+t;return r>=this.convergenceSteps.length&&(r=this.convergenceSteps.length-1),this.convergenceSteps[r]},e.default=new e([1]),e}();t.BezierCurvePainter=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(13);!function(e){e[e.onSegment=0]="onSegment",e[e.onJoint=1]="onJoint",e[e.onOther=2]="onOther"}(n||(n={}));var o=function(){function e(){this.painters=[],this.segementsPainter=null}return e.prototype.beginCurve=function(e,t,r){this.preNode={x:e,y:t,radius:r/2}},e.prototype.curveTo=function(e,t,r,n,i,o,a,s,c){for(var u=Math.max(2,s),l=this.preNode,p=l.x,h=l.y,d=2*l.radius,f=a-d,y=0;y<u;++y){var A=y/(u-1),m=void 0;0===y?m=0:y===u-1?m=1:(m=c[0]*Math.pow(A,3)+c[1]*Math.pow(A,2)+c[2]*A+c[3],m=Math.max(0,Math.min(1,m)));var g=Math.pow(1-A,3),v=3*A*Math.pow(1-A,2),b=3*Math.pow(A,2)*(1-A),P=Math.pow(A,3),S=g*p+v*e+b*r+P*i,w=g*h+v*t+b*n+P*o,x=d+f*m;this.lineTo(S,w,x)}},e.prototype.lineTo=function(e,t,r){var n=this.preNode;if(n.x!==e||n.y!==t){var o={x:e,y:t,radius:r/2},c={x:e-n.x,y:t-n.y},u=Math.atan2(c.y,c.x),l=i.distance(c),p=n.radius-o.radius;if(p>=l)this.closeSegmentsIfNeed(),this.painters.push(new a(n));else if(-p>=l)this.closeSegmentsIfNeed(),this.painters.push(new a(o));else{var h=Math.acos(p/l);this.segementsPainter||(this.segementsPainter=new s,this.painters.push(this.segementsPainter)),this.segementsPainter.pushSegment(u,h,n,o)}this.preNode=o}},e.prototype.endCurve=function(e){this.closeSegmentsIfNeed();for(var t=0,r=this.painters;t<r.length;t++)r[t].paint(e)},e.prototype.closeSegmentsIfNeed=function(){this.segementsPainter&&(this.painters.push(this.segementsPainter),this.segementsPainter=null)},e}();t.VariableWeightCurvePainter=o;var a=function(){function e(e){this.node=e}return e.prototype.paint=function(e){var t=this.node,r=t.x,n=t.y,i=t.radius;e.beginPath(),e.arc(r,n,i,0,2*Math.PI),e.fill()},e}(),s=function(){function e(){this.segements=[]}return e.prototype.pushSegment=function(e,t,r,n){var i=-t,o={angle:t,begin:this.relativePoint(r,e,t),end:this.relativePoint(n,e,t)},a={angle:i,begin:this.relativePoint(r,e,i),end:this.relativePoint(n,e,i)};this.segements.push({begin:r,end:n,left:o,right:a})},e.prototype.relativePoint=function(e,t,r){var n=t+r,i=e.radius*Math.cos(n),o=e.radius*Math.sin(n);return{x:e.x+i,y:e.y+o}},e.prototype.paint=function(e){for(var t=0;t<this.segements.length;)t=this.paintPartBeginAt(e,t)+1},e.prototype.paintPartBeginAt=function(e,t){var r=this.segements.length-1,n=this.segements[t];e.beginPath(),e.moveTo(n.right.begin.x,n.right.begin.y);for(var i=t;i<this.segements.length;++i){var o=this.segements[i],a=o.end,s=o.right,c=!1;if(p=this.segements[i+1]){var u=p.right;c=this.paintCorner(e,s.begin,s.end,u.begin,u.end,a.radius)}else e.lineTo(s.end.x,s.end.y),c=!0;if(!c){r=i;break}}var l=this.segements[r];for(this.paintEndJoint(e,l.right.end,l.left.end,l.end,r===this.segements.length-1),i=r;i>=t;i--){var p,h=this.segements[i],d=h.begin,f=h.left;if(p=this.segements[i-1]){var y=p.left;this.paintCorner(e,f.end,f.begin,y.end,y.begin,d.radius)||(e.lineTo(f.begin.x,f.begin.y),e.lineTo(y.end.x,y.end.y))}else e.lineTo(f.begin.x,f.begin.y)}return this.paintEndJoint(e,n.left.begin,n.right.begin,n.begin,!0),e.closePath(),e.fill(),r},e.prototype.paintCorner=function(e,t,r,o,a,s){var c=!0,u=i.findCrossPoint(t,r,o,a);if(this.isCornerFlat(u,r,o))e.lineTo(r.x,r.y),e.lineTo(o.x,o.y);else switch(this.findCorssState(t,r,o,a,u)){case n.onJoint:e.lineTo(r.x,r.y),this.isCrossHasHugeError(t,r,o,a,u)?e.lineTo(o.x,o.y):e.arcTo(u.x,u.y,o.x,o.y,s);break;case n.onSegment:e.lineTo(u.x,u.y);break;case n.onOther:e.lineTo(r.x,r.y),c=!1}return c},e.prototype.isCornerFlat=function(e,t,r){return!e||(i.distance({x:e.x-t.x,y:e.y-t.y})<.001||i.distance({x:e.x-r.x,y:e.y-r.y})<.001)},e.prototype.findCorssState=function(e,t,r,o,a){var s=!i.isOnRay(t,e,a),c=!i.isOnRay(r,o,a);return s&&c?n.onJoint:!s&&!c&&i.isOnRay(e,t,a)&&i.isOnRay(o,r,a)?n.onSegment:n.onOther},e.prototype.deltaAngle=function(e,t){var r=t-e;return r>Math.PI?r-=2*Math.PI:r<=-Math.PI&&(r+=2*Math.PI),r},e.prototype.paintEndJoint=function(t,r,n,i,o){var a=!1;if(o){var s=Math.atan2(r.y-i.y,r.x-i.x),c=Math.atan2(n.y-i.y,n.x-i.x),u=this.deltaAngle(s,c);Math.abs(u)>=e.minArcAngle&&(t.arc(i.x,i.y,i.radius,s,c,!1),a=!0)}a||t.lineTo(n.x,n.y)},e.prototype.isCrossHasHugeError=function(t,r,n,i,o){var a=this.squareDistance(t,r),s=this.squareDistance(n,i),c=this.squareDistance(r,o),u=this.squareDistance(n,o);return c/a>e.hugeRate&&u/s>e.hugeRate},e.prototype.squareDistance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n},e.minArcAngle=Math.PI/180,e.hugeRate=1e6,e}()},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(2),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.paintContent=function(e){var t=this.shape.state,r=t.strokeColor,n=t.strokeWidth,i=e.margin,o=e.size,a=e.context,s=r[0],c=r[1],u=r[2],l=o.width/2,p=o.height/2,h=i.left+l,d=i.top+p;a.strokeStyle="rgb("+s+","+c+","+u+")",a.lineWidth=n,a.beginPath(),a.ellipse(h,d,l,p,0,0,2*Math.PI),a.stroke()},t.disableCache=!0,o([s.register.defineCanvas(s.register.canvasGraphicsEngine,a.EllipseShape)],t)}(r(9).AbstractCanvasRender);t.EllipseShapePainter=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(2),c=r(9),u=Object.freeze([5,5]),l=Object.freeze([]),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node=null,t}return i(t,e),t.prototype.getLoadImage=function(e,t){if(this.node&&this.node.src===e){var r=this.node.image;return r.onload?null:r}this.node&&(this.node.image.onload=null);var n=document.createElement("img");return this.node={src:e,image:n},n.src=e,n.onload=function(){t(),n.onload=null},n},t.prototype.remove=function(){e.prototype.remove.call(this),this.node&&(this.node.image.onload=null)},t.prototype.paintContent=function(e){var t=!1,r=e.size,n=e.margin,i=e.touch,o=e.context,a=this.shape.imageSrc||null,s=a&&this.getLoadImage(a,i);if(s){var c=n.left,u=n.top;o.drawImage(s,c,u,r.width,r.height),t=!0}t||this.paintLoadingRectangle(o,e)},t.prototype.paintLoadingRectangle=function(e,t){var r=t.margin,n=t.size;e.strokeStyle="rgb(238,238,238)",e.fillStyle="rgb(245,245,245)",e.lineWidth=3,e.setLineDash(u),e.strokeRect(r.left,r.top,n.width,n.height),e.fillRect(r.left,r.top,n.width,n.height),e.setLineDash(l)},t.disableCache=!0,o([s.register.defineCanvas(s.register.canvasGraphicsEngine,a.ImageShape)],t)}(c.AbstractCanvasRender);t.ImageShapePainter=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(2),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.paintContent=function(e){var t=this.shape.state,r=t.strokeColor,n=t.strokeWidth,i=e.margin,o=e.size,a=e.context,s=r[0],c=r[1],u=r[2];a.strokeStyle="rgb("+s+","+c+","+u+")",a.lineJoin="round",a.lineWidth=n,a.strokeRect(i.left,i.top,o.width,o.height)},t.disableCache=!0,o([s.register.defineCanvas(s.register.canvasGraphicsEngine,a.RectangleShape)],t)}(r(9).AbstractCanvasRender);t.RectangleShapePainter=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(13)),c=r(1),u=r(2),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.paintContent=function(e){var t=this.shape.state,r=t.strokeColor,n=t.strokeWidth,i=e.context,o="rgb("+r[0]+","+r[1]+","+r[2]+")";i.strokeStyle=o,i.fillStyle=o,i.lineWidth=n;var a=n/2,u=this.shape.width,l=this.shape.height,p=a,h=a,d=a,f=a;switch(this.shape.direction){case c.VectorDirection.ToLeftTop:p+=u,h+=l;break;case c.VectorDirection.ToRightTop:h+=l,d+=u;break;case c.VectorDirection.ToLeftBottom:p+=u,f+=l;break;case c.VectorDirection.toRightBottom:d+=u,f+=l}switch(this.shape.kind){case c.VectorKind.Straight:i.lineCap="round",i.beginPath(),i.moveTo(p,h),i.lineTo(d,f),i.stroke();break;case c.VectorKind.Arrow:var y=this.distance(p,h,d,f),A=a,m=!0;y<9.6*A&&(A=y/9.6,m=!1);var g=s.unitVector({x:d-p,y:f-h});if(m){var v=9.6*A-2;i.lineCap="butt",i.beginPath(),i.moveTo(p,h),i.lineTo(d-g.x*v,f-g.y*v),i.stroke()}this.paintArrow(i,g,d,f,A)}},t.prototype.paintArrow=function(e,t,r,n,i){var o=s.verticalVector(t),a=9.6*i,c=6.5*i/2;e.beginPath(),e.moveTo(r+t.x*i,n+t.y*i),e.lineTo(r-t.x*a-o.x*c,n-t.y*a-o.y*c),e.lineTo(r-t.x*a+o.x*c,n-t.y*a+o.y*c),e.closePath(),e.fill()},t.prototype.distance=function(e,t,r,n){var i=e-r,o=t-n;return Math.sqrt(i*i+o*o)},t.disableCache=!0,o([u.register.defineCanvas(u.register.canvasGraphicsEngine,c.VectorShape)],t)}(r(9).AbstractCanvasRender);t.VectorShapeComponent=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(2),c=r(21),u=r(9),l=r(121),p=r(122),h=r(123),d=r(124),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.paintContent=function(e){switch(this.shape.shapeType){case c.ShapeType.Triangle:l.triangleCanvas(e,this.shape);break;case c.ShapeType.Rhombus:p.rhombusCanvas(e,this.shape);break;case c.ShapeType.Pentagram:h.pentagramCanvas(e,this.shape);break;case c.ShapeType.SpeechBalloon:d.speechBalloonCanvas(e,this.shape);break;default:l.triangleCanvas(e,this.shape)}},t.disableCache=!0,o([s.register.defineCanvas(s.register.canvasGraphicsEngine,a.Shape)],t)}(u.AbstractCanvasRender);t.ShapePainter=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triangleCanvas=function(e,t){var r=t.strokeColor,n=t.strokeWidth,i=t.hitTestingBoxMargin,o=2*i,a=e.size,s=e.context,c=r[0],u=r[1],l=r[2];s.strokeStyle="rgb("+c+","+u+","+l+")",s.lineWidth=n;var p=(a.width+o)/2;s.beginPath(),s.moveTo(p,o),s.lineTo(o,a.height+i),s.lineTo(a.width,a.height+i),s.lineTo(p,o),s.closePath(),s.stroke()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rhombusCanvas=function(e,t){var r=t.strokeColor,n=t.strokeWidth,i=2*t.hitTestingBoxMargin,o=e.size,a=e.context,s=r[0],c=r[1],u=r[2];a.strokeStyle="rgb("+s+","+c+","+u+")",a.lineWidth=n;var l=(o.width+i)/2,p=(o.height+i)/2;a.beginPath(),a.moveTo(l,i),a.lineTo(i,p),a.lineTo(l,o.height),a.lineTo(o.width,p),a.lineTo(l,i),a.closePath(),a.stroke()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33);t.pentagramCanvas=function(e,t){var r=t.strokeColor,i=t.strokeWidth,o=e.size,a=e.context,s=r[0],c=r[1],u=r[2];a.strokeStyle="rgb("+s+","+c+","+u+")",a.lineWidth=i,a.beginPath();for(var l=0;l<n.unitPentagramPoints.length;l++){var p=n.unitPentagramPoints[l],h=p.x,d=p.y;a.lineTo(h*o.width,d*o.height)}a.closePath(),a.stroke()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34);t.speechBalloonCanvas=function(e,t){var r=t.strokeColor,i=t.strokeWidth,o=t.hitTestingBoxMargin,a=2*o,s=e.size,c=e.context,u=r[0],l=r[1],p=r[2];c.strokeStyle="rgb("+u+","+l+","+p+")",c.lineWidth=i;var h=s.width+a,d=s.height+a,f=d/100*80,y=h/100*10,A=h-y,m=f/100*10,g=f-m;c.beginPath();var v=2*y,b=2*v,P=b-v;c.moveTo(y,o),c.lineTo(A,o),c.moveTo(y,f-o),c.lineTo(v,f-o),c.lineTo(v+P/100*20,d-a),c.lineTo(b,f-o),c.lineTo(A,f-o),c.moveTo(o,m),c.lineTo(o,g),c.moveTo(h-o,m),c.lineTo(h-o,g),c.moveTo(y,o),n.getBezierPoints(40,{x:y,y:o},{x:o,y:m},{x:o,y:o}).forEach((function(e){c.lineTo(e.x,e.y)})),c.moveTo(A,o),n.getBezierPoints(40,{x:A,y:o},{x:h-o,y:m},{x:h-o,y:o}).forEach((function(e){c.lineTo(e.x,e.y)})),c.moveTo(o,g),n.getBezierPoints(40,{x:o,y:g},{x:y,y:f-o},{x:o,y:f-o}).forEach((function(e){c.lineTo(e.x,e.y)})),c.moveTo(h-o,g),n.getBezierPoints(40,{x:h-o,y:g},{x:A,y:f-o},{x:h-o,y:f-o}).forEach((function(e){c.lineTo(e.x,e.y)})),c.stroke()}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(0),u=r(1),l=r(2),p=r(7);l.register.defineReact(l.register.componentEngine,u.CurveShape)(p.createEditableComponent());var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!c.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=r[0],o=r[1],a=r[2],u=e.displayPoints();if(1===u.length){var l=u[0],p=l.x,h=l.y,d=n/2;return s.createElement("ellipse",{cx:p,cy:h,rx:d,ry:d,style:{fill:"rgb("+i+","+o+","+a+")"}})}var f=u.length>2&&e.enableBezier();return s.createElement("path",{d:this.createPathDefinition(u,f),key:this.props.id,style:{stroke:"rgb("+i+","+o+","+a+")",strokeWidth:n,fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}})},t.prototype.createPathDefinition=function(e,t){var r=[];if(t){var n=e[0],i=n.x,o=n.y;r.push("M "+i+" "+o);var a=this.getControlPoint(e[1],e[0],e[2],.1);r.push("Q "+a[0].x+" "+a[0].y+", "+e[1].x+" "+e[1].y);for(var s=a[1],c=2;c<e.length-2;++c){var u=this.getControlPoint(e[c],e[c-1],e[c+1],.1);r.push("C "+s.x+" "+s.y+", "+u[0].x+" "+u[0].y+", "+e[c].x+" "+e[c].y),s=u[1]}var l=e.length-2;r.push("Q "+e[l].x+" "+e[l].y+", "+e[l+1].x+" "+e[l+1].y)}else for(c=0;c<e.length;++c){var p=e[c],h=p.x,d=p.y;0===c?r.push("M"+h+" "+d):r.push("L"+h+" "+d)}return r.join(" ")},t.prototype.getControlPoint=function(e,t,r,n){var i=this.calcHypotenuse(e.x-t.x,e.y-t.y),o=this.calcHypotenuse(e.x-r.x,e.y-r.y)/(i+1e-6),a={x:0,y:0};return o>1?(a.x=t.x-(e.x+(r.x-e.x)/(o+1e-6)),a.y=t.y-(e.y+(r.y-e.y)/(o+1e-6))):(a.x=e.x+(t.x-e.x)*o-r.x,a.y=e.y+(t.y-e.y)*o-r.y),a={x:a.x*n,y:a.y*n},[{x:e.x+a.x,y:e.y+a.y},{x:e.x-a.x,y:e.y-a.y}]},t.prototype.calcHypotenuse=function(e,t){return Math.sqrt(e*e+t*t)},o([l.register.defineReact(l.register.htmlGraphicsEngine,u.CurveShape)],t)}(s.Component);t.CurveShapeComponent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(1),u=r(2),l=r(7);u.register.defineReact(u.register.componentEngine,c.BezierCurveShape)(l.createEditableComponent());var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.margin,r=e.screen,n=e.payload,i=n.displayer(),o=i.headPoint,a=i.curves,c=n.state.strokeWidth,u=n.state.strokeColor,l="rgb("+u[0]+","+u[1]+","+u[2]+")";if(0===a.length){var p=c/2,h=o.x+t.left,d=o.y+t.top;return s.createElement("ellipse",{cx:h,cy:d,rx:p,ry:p,style:{fill:l}})}return r&&r.camera.scale,s.createElement("path",{d:this.createPathDefinition(o,n.identifier,a),key:this.props.id,style:{stroke:l,strokeWidth:c,fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}})},t.prototype.createPathDefinition=function(e,t,r){var n=[];n.push("M"+e.x+" "+e.y);for(var i=0;i<r.length;++i){var o=r[i],a=o.point1,s=o.point2,c=o.point3,u=a.x,l=a.y,p=s.x,h=s.y,d=c.x,f=c.y;n.push("C"+u+" "+l+" "+p+" "+h+" "+d+" "+f)}return n.join(" ")},t.prototype.pointsCount=function(e,t){for(var r=e.length+1,n=0;n<e.length;++n)r+=t&&n===e.length-1?t.length-2:e[n].hiddenPoints;return r},o([u.register.defineReact(u.register.htmlGraphicsEngine,c.BezierCurveShape)],t)}(s.Component);t.BezierCurveShapeComponent=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(0),u=r(1),l=r(2),p=r(7);l.register.defineReact(l.register.componentEngine,u.EllipseShape)(p.createEditableComponent());var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!c.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=this.props.size,o=i.width,a=i.height,u=r[0],l=r[1],p=r[2],h=o/2,d=a/2;return s.createElement("ellipse",{key:this.props.id,cx:h,cy:d,rx:h,ry:d,style:{stroke:"rgb("+u+","+l+","+p+")",fill:"none",strokeWidth:n}})},o([l.register.defineReact(l.register.htmlGraphicsEngine,u.EllipseShape)],t)}(s.Component);t.EllipseShapeComponent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(1),u=r(0),l=r(2),p=r(7);l.register.defineReact(l.register.componentEngine,c.ImageShape)(p.createEditableComponent());var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;var t=this.props.size,r=t.width,n=t.height;if(e.imageSrc){var i=e.imageSrc;return this.props.context.convertIdToUrl&&(i=this.props.context.convertIdToUrl(i)),s.createElement("image",{key:this.props.id,preserveAspectRatio:"none",xlinkHref:i,x:0,y:0,width:r,height:n})}return s.createElement("rect",{strokeDasharray:"5,5",key:this.props.id,x:0,y:0,width:r,height:n,style:{stroke:"#EEEEEE",strokeWidth:3,fill:"#F5F5F5",strokeLinejoin:"round",strokeLinecap:"round"}})},o([l.register.defineReact(l.register.htmlGraphicsEngine,c.ImageShape)],t)}(s.Component);t.ImageShapeComponent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(0),u=r(1),l=r(2),p=r(7);l.register.defineReact(l.register.componentEngine,u.RectangleShape)(p.createEditableComponent());var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!c.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=this.props.size,o=i.width,a=i.height,u=r[0],l=r[1],p=r[2];return s.createElement("rect",{key:this.props.id,x:0,y:0,width:o,height:a,style:{stroke:"rgb("+u+","+l+","+p+")",fill:"none",strokeWidth:n,strokeLinejoin:"round",strokeLinecap:"round"}})},o([l.register.defineReact(l.register.htmlGraphicsEngine,u.RectangleShape)],t)}(s.Component);t.RectangleShapeComponent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=a(r(13)),u=r(0),l=r(1),p=r(2),h=r(7);p.register.defineReact(p.register.componentEngine,l.VectorShape)(h.createEditableComponent());var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=this.props.size,o=i.width,a=i.height,p=r[0],h=r[1],d=r[2],f=n/2,y=f,A=f,m=f,g=f;switch(e.direction){case l.VectorDirection.ToLeftTop:y+=o,A+=a;break;case l.VectorDirection.ToRightTop:A+=a,m+=o;break;case l.VectorDirection.ToLeftBottom:y+=o,g+=a;break;case l.VectorDirection.toRightBottom:m+=o,g+=a}var v=null,b=null;switch(e.kind){case l.VectorKind.Straight:v=s.createElement("path",{key:this.props.id,d:"M "+y+" "+A+" L "+m+" "+g,style:{stroke:"rgb("+p+","+h+","+d+")",strokeWidth:n,fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}});break;case l.VectorKind.Arrow:var P=this.distance(y,A,m,g),S=f,w=!0;P<9.6*S&&(S=P/9.6,w=!1);var x=c.unitVector({x:m-y,y:g-A});if(w){var O=9.6*S-2,k=m-x.x*O,M=g-x.y*O;v=s.createElement("path",{key:this.props.id,d:"M "+y+" "+A+" L "+k+" "+M,style:{stroke:"rgb("+p+","+h+","+d+")",strokeWidth:n,fill:"none",strokeLinejoin:"bevel",strokeLinecap:"butt"}})}b=s.createElement("polygon",{points:this.renderArrowPoints(x,m,g,S),style:{fill:"rgb("+p+","+h+","+d+")",strokeWidth:0}})}return s.createElement(s.Fragment,null,v,b)},t.prototype.renderArrowPoints=function(e,t,r,n){var i=[],o=c.verticalVector(e),a=9.6*n,s=6.5*n/2;return i.push(""+(t+e.x*n),",",""+(r+e.y*n)),i.push(""+(t-e.x*a-o.x*s),",",""+(r-e.y*a-o.y*s)),i.push(""+(t-e.x*a+o.x*s),",",""+(r-e.y*a+o.y*s)),i.join(" ")},t.prototype.distance=function(e,t,r,n){var i=e-r,o=t-n;return Math.sqrt(i*i+o*o)},o([p.register.defineReact(p.register.htmlGraphicsEngine,l.VectorShape)],t)}(s.Component);t.VectorShapeComponent=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==("undefined"==typeof Reflect?"undefined":A(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(3)),c=r(0),u=r(1),l=r(2),p=r(21),h=r(7),d=r(132),f=r(133),y=r(134),m=r(135);l.register.defineReact(l.register.componentEngine,u.Shape)(h.createEditableComponent());var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){if(!c.isAkkoWrappedObjectAccessible(this.props.payload))return null;switch(this.props.payload.shapeType){case p.ShapeType.Triangle:return d.triangleSvg(this.props);case p.ShapeType.Rhombus:return f.rhombusSvg(this.props);case p.ShapeType.Pentagram:return y.pentagramSvg(this.props);case p.ShapeType.SpeechBalloon:return m.speechBalloonSvg(this.props);default:return d.triangleSvg(this.props)}},o([l.register.defineReact(l.register.htmlGraphicsEngine,u.Shape)],t)}(s.Component);t.EllipseShapeComponent=g},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(3));t.triangleSvg=function(e){var t=e.payload,r=t.strokeColor,n=t.strokeWidth,o=t.hitTestingBoxMargin,a=e.size,s=a.width,c=a.height,u=r[0],l=r[1],p=r[2],h=(s+2*o)/2;return i.createElement("polygon",{key:e.id,x:0,y:0,width:s,height:c,points:h+","+o+" "+o+","+c+", "+(s-o)+","+c,style:{stroke:"rgb("+u+","+l+","+p+")",fill:"none",strokeWidth:n}})}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(3));t.rhombusSvg=function(e){var t=e.payload,r=t.strokeColor,n=t.strokeWidth,o=t.hitTestingBoxMargin,a=e.size,s=a.width,c=a.height,u=r[0],l=r[1],p=r[2],h=c-o,d=s-o,f=s/2,y=c/2;return i.createElement("polygon",{key:e.id,x:0,y:0,width:s,height:c,points:f+","+o+" "+o+","+y+", "+f+","+h+" "+d+","+y,style:{stroke:"rgb("+u+","+l+","+p+")",fill:"none",strokeWidth:n}})}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(3)),o=r(33);t.pentagramSvg=function(e){for(var t=e.size,r=t.width,n=t.height,a=e.payload,s=a.strokeColor,c=a.strokeWidth,u=s[0],l=s[1],p=s[2],h=[],d=0;d<o.unitPentagramPoints.length;d++){var f=o.unitPentagramPoints[d],y=f.x,A=f.y;h.push(y*r+","+A*n)}return i.createElement("polygon",{key:e.id,x:0,y:0,width:r,height:n,points:h.join(" "),style:{stroke:"rgb("+u+","+l+","+p+")",fill:"none",strokeWidth:c}})}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(3)),o=r(34);t.speechBalloonSvg=function(e){var t=e.size,r=t.width,n=t.height,a=e.payload,s=a.strokeColor,c=a.strokeWidth,u=s[0],l=s[1],p=s[2],h=[],d=function(e){return e.x+","+e.y},f=n/100*80,y=r/100*10,A=r-y,m=f/100*10,g=f-m,v=2*y,b=2*v,P=b-v;return h.push(d({x:y,y:0})),h.push(d({x:A,y:0})),o.getBezierPoints(40,{x:A,y:0},{x:r,y:m},{x:r,y:0}).forEach((function(e){h.push(d(e))})),h.push(d({x:r,y:g})),o.getBezierPoints(40,{x:r,y:g},{x:A,y:f},{x:r,y:f}).forEach((function(e){h.push(d(e))})),h.push(d({x:b,y:f})),h.push(d({x:v+P/100*20,y:n})),h.push(d({x:v,y:f})),h.push(d({x:y,y:f})),o.getBezierPoints(40,{x:y,y:f},{x:0,y:g},{x:0,y:f}).forEach((function(e){h.push(d(e))})),h.push(d({x:0,y:m})),o.getBezierPoints(40,{x:0,y:m},{x:y,y:0},{x:0,y:0}).forEach((function(e){h.push(d(e))})),i.createElement("polygon",{key:e.id,x:0,y:0,width:r,height:n,points:h.join(" "),style:{stroke:"rgb("+u+","+l+","+p+")",fill:"none",strokeWidth:c}})}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(2),a=function(){function e(t){this.engines=o.register;for(var r={},a=o.register.engines(t),s=0,c=e.getDefinitions();s<c.length;s++){var u=c[s];r[i.findClassId(u.payloadType)]=u}this.definitions=Object.freeze(r),this.enginesList=Object.freeze(n(a))}return e.getDefinitions=function(){return this.definitionsList||(this.definitionsList=o.register.complete()),this.definitionsList},e.prototype.findDefinition=function(e){return this.definitions[e]},e.definitionsList=null,e}();t.EnginesHub=a}])),e(r,{"white-model":i.WhiteModel,"white-render":i})}catch(t){e(r,void 0,t)}}(window&&window.__netlessJavaScriptLoader)}).call(this,r("yLpj"),r("tjlA").Buffer,r("8oxB"))},GmzI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("aHma")),i=o(r("u4r5"));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,i.default);t.default=a,e.exports=t.default},RaMe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i,o=s(r("+x/n")),a=s(r("4TD3"));function s(e){return e&&e.__esModule?e:{default:e}}var c=0,u=0;var l=function(e,t,r){var s=t&&r||0,l=t||[],p=(e=e||{}).node||n,h=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==h){var d=e.random||(e.rng||o.default)();null==p&&(p=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=i=16383&(d[6]<<8|d[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:u+1,A=f-c+(y-u)/1e4;if(A<0&&void 0===e.clockseq&&(h=h+1&16383),(A<0||f>c)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=y,i=h;var m=(1e4*(268435455&(f+=122192928e5))+y)%4294967296;l[s++]=m>>>24&255,l[s++]=m>>>16&255,l[s++]=m>>>8&255,l[s++]=255&m;var g=f/4294967296*1e4&268435455;l[s++]=g>>>8&255,l[s++]=255&g,l[s++]=g>>>24&15|16,l[s++]=g>>>16&255,l[s++]=h>>>8|128,l[s++]=255&h;for(var v=0;v<6;++v)l[s+v]=p[v];return t||(0,a.default)(l)};t.default=l,e.exports=t.default},aHma:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=function(e,n,o,a){var s=o&&a||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e)),"string"==typeof n&&(n=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var c=r(n.concat(e));if(c[6]=15&c[6]|t,c[8]=63&c[8]|128,o)for(var u=0;u<16;++u)o[s+u]=c[u];return o||(0,i.default)(c)};try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n},t.URL=t.DNS=void 0;var n,i=(n=r("4TD3"))&&n.__esModule?n:{default:n};var o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;var a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},cIdt:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("+x/n")),i=o(r("4TD3"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||(0,i.default)(a)};t.default=a,e.exports=t.default},lOZ2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}});var n=s(r("RaMe")),i=s(r("zLF4")),o=s(r("cIdt")),a=s(r("GmzI"));function s(e){return e&&e.__esModule?e:{default:e}}},pMVe:function(e,t,r){"use strict";function n(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,i,o,a){return n((s=n(n(t,e),n(i,a)))<<(c=o)|s>>>32-c,r);var s,c}function o(e,t,r,n,o,a,s){return i(t&r|~t&n,e,t,o,a,s)}function a(e,t,r,n,o,a,s){return i(t&n|r&~n,e,t,o,a,s)}function s(e,t,r,n,o,a,s){return i(t^r^n,e,t,o,a,s)}function c(e,t,r,n,o,a,s){return i(r^(t|~n),e,t,o,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var r=0;r<t.length;r++)e[r]=t.charCodeAt(r)}return function(e){var t,r,n,i=[],o=32*e.length;for(t=0;t<o;t+=8)r=e[t>>5]>>>t%32&255,n=parseInt("0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r),16),i.push(n);return i}(function(e,t){var r,i,u,l,p;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,d=-271733879,f=-1732584194,y=271733878;for(r=0;r<e.length;r+=16)i=h,u=d,l=f,p=y,h=o(h,d,f,y,e[r],7,-680876936),y=o(y,h,d,f,e[r+1],12,-389564586),f=o(f,y,h,d,e[r+2],17,606105819),d=o(d,f,y,h,e[r+3],22,-1044525330),h=o(h,d,f,y,e[r+4],7,-176418897),y=o(y,h,d,f,e[r+5],12,1200080426),f=o(f,y,h,d,e[r+6],17,-1473231341),d=o(d,f,y,h,e[r+7],22,-45705983),h=o(h,d,f,y,e[r+8],7,1770035416),y=o(y,h,d,f,e[r+9],12,-1958414417),f=o(f,y,h,d,e[r+10],17,-42063),d=o(d,f,y,h,e[r+11],22,-1990404162),h=o(h,d,f,y,e[r+12],7,1804603682),y=o(y,h,d,f,e[r+13],12,-40341101),f=o(f,y,h,d,e[r+14],17,-1502002290),d=o(d,f,y,h,e[r+15],22,1236535329),h=a(h,d,f,y,e[r+1],5,-165796510),y=a(y,h,d,f,e[r+6],9,-1069501632),f=a(f,y,h,d,e[r+11],14,643717713),d=a(d,f,y,h,e[r],20,-373897302),h=a(h,d,f,y,e[r+5],5,-701558691),y=a(y,h,d,f,e[r+10],9,38016083),f=a(f,y,h,d,e[r+15],14,-660478335),d=a(d,f,y,h,e[r+4],20,-405537848),h=a(h,d,f,y,e[r+9],5,568446438),y=a(y,h,d,f,e[r+14],9,-1019803690),f=a(f,y,h,d,e[r+3],14,-187363961),d=a(d,f,y,h,e[r+8],20,1163531501),h=a(h,d,f,y,e[r+13],5,-1444681467),y=a(y,h,d,f,e[r+2],9,-51403784),f=a(f,y,h,d,e[r+7],14,1735328473),d=a(d,f,y,h,e[r+12],20,-1926607734),h=s(h,d,f,y,e[r+5],4,-378558),y=s(y,h,d,f,e[r+8],11,-2022574463),f=s(f,y,h,d,e[r+11],16,1839030562),d=s(d,f,y,h,e[r+14],23,-35309556),h=s(h,d,f,y,e[r+1],4,-1530992060),y=s(y,h,d,f,e[r+4],11,1272893353),f=s(f,y,h,d,e[r+7],16,-155497632),d=s(d,f,y,h,e[r+10],23,-1094730640),h=s(h,d,f,y,e[r+13],4,681279174),y=s(y,h,d,f,e[r],11,-358537222),f=s(f,y,h,d,e[r+3],16,-722521979),d=s(d,f,y,h,e[r+6],23,76029189),h=s(h,d,f,y,e[r+9],4,-640364487),y=s(y,h,d,f,e[r+12],11,-421815835),f=s(f,y,h,d,e[r+15],16,530742520),d=s(d,f,y,h,e[r+2],23,-995338651),h=c(h,d,f,y,e[r],6,-198630844),y=c(y,h,d,f,e[r+7],10,1126891415),f=c(f,y,h,d,e[r+14],15,-1416354905),d=c(d,f,y,h,e[r+5],21,-57434055),h=c(h,d,f,y,e[r+12],6,1700485571),y=c(y,h,d,f,e[r+3],10,-1894986606),f=c(f,y,h,d,e[r+10],15,-1051523),d=c(d,f,y,h,e[r+1],21,-2054922799),h=c(h,d,f,y,e[r+8],6,1873313359),y=c(y,h,d,f,e[r+15],10,-30611744),f=c(f,y,h,d,e[r+6],15,-1560198380),d=c(d,f,y,h,e[r+13],21,1309151649),h=c(h,d,f,y,e[r+4],6,-145523070),y=c(y,h,d,f,e[r+11],10,-1120210379),f=c(f,y,h,d,e[r+2],15,718787259),d=c(d,f,y,h,e[r+9],21,-343485551),h=n(h,i),d=n(d,u),f=n(f,l),y=n(y,p);return[h,d,f,y]}(function(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e[t/8])<<t%32;return r}(e),8*e.length))};t.default=u,e.exports=t.default},u4r5:function(e,t,r){"use strict";function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=new Array(o.length);for(var a=0;a<o.length;a++)e[a]=o.charCodeAt(a)}e.push(128);var s=e.length/4+2,c=Math.ceil(s/16),u=new Array(c);for(a=0;a<c;a++){u[a]=new Array(16);for(var l=0;l<16;l++)u[a][l]=e[64*a+4*l]<<24|e[64*a+4*l+1]<<16|e[64*a+4*l+2]<<8|e[64*a+4*l+3]}for(u[c-1][14]=8*(e.length-1)/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=8*(e.length-1)&4294967295,a=0;a<c;a++){for(var p=new Array(80),h=0;h<16;h++)p[h]=u[a][h];for(h=16;h<80;h++)p[h]=i(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);var d=r[0],f=r[1],y=r[2],A=r[3],m=r[4];for(h=0;h<80;h++){var g=Math.floor(h/20),v=i(d,5)+n(g,f,y,A)+m+t[g]+p[h]>>>0;m=A,A=y,y=i(f,30)>>>0,f=d,d=v}r[0]=r[0]+d>>>0,r[1]=r[1]+f>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+A>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};t.default=o,e.exports=t.default},zLF4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("aHma")),i=o(r("pMVe"));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,i.default);t.default=a,e.exports=t.default}}]);